import{d as u}from"./dates-DUtd6zgH.js";import{g as k}from"./index-CTjT7uj6.js";import{k as _,a as b,i as $,_ as y,b as M,c as j,d as S,e as N}from"./_baseIteratee-CNgr-98l.js";import{a as O}from"./_getTag-COHPfPRs.js";import{e as g}from"./Uttaksdagen-ClUiN95P.js";import"./index-CCQ3W5xA.js";import{Y as c}from"./Ytelse-7td-ciMh.js";import{I as m,g as T}from"./dateUtils-SLNltPAj.js";function G(r){return function(e,n,a){for(var s=-1,t=Object(e),i=a(e),o=i.length;o--;){var d=i[r?o:++s];if(n(t[d],d,t)===!1)break}return e}}var P=G,D=P,L=D(),w=L,V=w,U=_;function x(r,e){return r&&V(r,e,U)}var R=x,Y=b;function C(r,e){return function(n,a){if(n==null)return n;if(!Y(n))return r(n,a);for(var s=n.length,t=e?s:-1,i=Object(n);(e?t--:++t<s)&&a(i[t],t,i)!==!1;);return n}}var H=C,K=R,q=H,z=q(K),J=z,Q=J,W=b;function X(r,e){var n=-1,a=W(r)?Array(r.length):[];return Q(r,function(s,t,i){a[++n]=e(s,t,i)}),a}var Z=X;function I(r,e){var n=r.length;for(r.sort(e);n--;)r[n]=r[n].value;return r}var ee=I,F=$;function re(r,e){if(r!==e){var n=r!==void 0,a=r===null,s=r===r,t=F(r),i=e!==void 0,o=e===null,d=e===e,l=F(e);if(!o&&!l&&!t&&r>e||t&&i&&d&&!o&&!l||a&&i&&d||!n&&d||!s)return 1;if(!a&&!t&&!l&&r<e||l&&n&&s&&!a&&!t||o&&n&&s||!i&&s||!d)return-1}return 0}var ne=re,te=ne;function ae(r,e,n){for(var a=-1,s=r.criteria,t=e.criteria,i=s.length,o=n.length;++a<i;){var d=te(s[a],t[a]);if(d){if(a>=o)return d;var l=n[a];return d*(l=="desc"?-1:1)}}return r.index-e.index}var se=ae,v=y,ie=j,oe=N,de=Z,fe=ee,le=O,ue=se,ce=M,me=S;function ge(r,e,n){e.length?e=v(e,function(t){return me(t)?function(i){return ie(i,t.length===1?t[0]:t)}:t}):e=[ce];var a=-1;e=v(e,le(oe));var s=de(r,function(t,i,o){var d=v(e,function(l){return l(t)});return{criteria:d,index:++a,value:t}});return fe(s,function(t,i){return ue(t,i,n)})}var ve=ge,pe=ve,h=S;function Fe(r,e,n,a){return r==null?[]:(h(e)||(e=e==null?[]:[e]),n=a?void 0:n,h(n)||(n=n==null?[]:[n]),pe(r,e,n))}var he=Fe;const Ee=k(he),we=(r,e,n)=>{const a=!r.sakTilhørerMor;return{farMedmor:a?e:n,mor:a?n:e}},be=r=>!r.dødsdato,Se=r=>[...r.engangsstønad,...r.foreldrepenger,...r.svangerskapspenger];function Be(r,e){return u(r.fødselsdato).isAfter(e.fødselsdato,"d")?1:u(r.fødselsdato).isBefore(e.fødselsdato,"d")||r.fornavn<e.fornavn?-1:1}const Ve=r=>{var e,n;if(r.gjeldendeVedtak&&r.gjeldendeVedtak.perioder.length>0)return m(r.gjeldendeVedtak.perioder[0].fom);if((e=r.åpenBehandling)!=null&&e.søknadsperioder)return m((n=r.åpenBehandling)==null?void 0:n.søknadsperioder[0].fom)},Ae=(r,e)=>{const n=r.ytelse===c.FORELDREPENGER,a=n&&r.barn!==void 0?r.barn.map(f=>f.fnr).flat():[],s=n&&e.filter(f=>a.includes(f.fnr))||[],t=m(r.familiehendelse.fødselsdato),i=t!==void 0?e.filter(f=>T(m(f.fødselsdato),t)&&!(s!=null&&s.find(A=>A.fnr===f.fnr))):[],o=s.concat(i);o.sort(Be);const d=o.filter(f=>f.fødselsdato!==void 0).map(f=>m(f.fødselsdato));let l=[];return d&&d.length>0?l=d:t&&(l=[t]),{fornavn:o==null?void 0:o.filter(f=>f.fornavn!==void 0&&f.fornavn.trim()!=="").map(f=>[f.fornavn,f.mellomnavn??""].join(" ")),fødselsdatoer:l,alleBarnaLever:!!(o!=null&&o.every(f=>be(f)))}},Ue=(r,e)=>{const n=Se(e);return Ee(n,s=>s.familiehendelse?E(s.familiehendelse):"","desc").reduce((s,t)=>{if(t.familiehendelse){const i=E(t.familiehendelse),o=s.find(d=>ke(d,i));if(o&&o.saker.push(t),o&&s.includes(o))return s;{const d=_e(t.familiehendelse,t.gjelderAdopsjon),l={antallBarn:t.familiehendelse.antallBarn,familiehendelsedato:i,saker:[t],type:d,ytelse:t.ytelse,barn:d!=="termin"?Ae(t,r):void 0};return s.push(l),s}}else return s},[])},p=(r,e)=>e===c.ENGANGSSTØNAD?r.map(n=>({...n,ytelse:e})):e===c.SVANGERSKAPSPENGER?r.map(n=>({...n,ytelse:e})):r.map(n=>({...n,ytelse:e})),xe=r=>({foreldrepenger:p(r.foreldrepenger,c.FORELDREPENGER),engangsstønad:p(r.engangsstønad,c.ENGANGSSTØNAD),svangerskapspenger:p(r.svangerskapspenger,c.SVANGERSKAPSPENGER)}),ke=(r,e)=>{const n=u(e).subtract(2,"months"),a=u(e).add(3,"weeks");if(r)return u(r.familiehendelsedato).isAfter(n)&&u(r.familiehendelsedato).isSameOrBefore(a)},_e=(r,e)=>{if(e)return"adopsjon";const{fødselsdato:n}=r;return n?"fødsel":"termin"},E=r=>{const{fødselsdato:e,termindato:n,omsorgsovertakelse:a}=r;return a||e||n},Re=(r,e)=>{const n=e!=null&&e.familiehendelse?e.familiehendelse.fødselsdato:void 0,a=r.søker.barn&&n?r.søker.barn.find(t=>u(t.fødselsdato).isSame(n,"d")):void 0,s=a!=null&&a.annenForelder?a.annenForelder.fornavn:void 0;return s!==void 0&&s.trim()!==""?s:"Annen forelder"},$e=(r,e)=>r===1||r===0?e.formatMessage({id:"barn"}):r===2?e.formatMessage({id:"tvillinger"}):r===3?e.formatMessage({id:"trillinger"}):e.formatMessage({id:"flerlinger"}),B=r=>{if(r===void 0)return;const e=[];if(r.forEach(n=>{e.find(s=>u(s).isSame(n,"day"))===void 0&&e.push(n)}),e.length>1){const n=e.map(t=>g(t)),a=n.slice(0,-1).join(", "),s=n[n.length-1];return`${a} og ${s}`}return g(e[0])},ye=(r,e,n,a,s)=>{const t=$e(n,a);if(n===0&&e===void 0||s==="termin")return{tittel:a.formatMessage({id:"barnHeader.terminBarn"},{barnTekst:t,termindato:g(r)}),undertittel:""};if(s==="adopsjon")return{tittel:a.formatMessage({id:"barnHeader.adoptertBarn"},{adopsjonsdato:g(r)}),undertittel:""};{const i=B(e);return e!==void 0&&e.length>0?{tittel:a.formatMessage({id:"barnHeader.fødtBarn"},{barnTekst:t,fødselsdatoTekst:i}),undertittel:""}:{tittel:"",undertittel:""}}},Me=r=>{if(r.length>1){const e=r.map(a=>a.trim()).slice(0,-1).join(", "),n=r[r.length-1];return`${e} og ${n}`}else return`${r[0]}`},Ye=r=>{const{barngruppering:e,familiehendelsedato:n,antallBarn:a,intl:s,situasjon:t}=r,i=e==null?void 0:e.fornavn,o=e==null?void 0:e.fødselsdatoer,d=m(n);if(!d)return{tittel:"",undertittel:""};if(i===void 0||i.length===0||!(e!=null&&e.alleBarnaLever))return ye(d,o,a,s,t);const l=Me(i);if(t==="fødsel"){const f=B(o);return{tittel:l,undertittel:`født ${f}`}}return t==="adopsjon"?{tittel:l,undertittel:`adoptert ${g(d)}`}:{tittel:"",undertittel:""}};export{Ye as a,Ue as b,E as c,we as d,Re as e,Me as f,Se as g,Ve as h,Ae as i,xe as m,_e as u};
