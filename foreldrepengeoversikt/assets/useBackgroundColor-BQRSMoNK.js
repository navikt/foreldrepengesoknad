import{r as D,R as Z}from"./index-CTjT7uj6.js";const y={BASE_URL:"/foreldrepenger/oversikt",DEV:!1,MODE:"production",PROD:!0,SSR:!1,STORYBOOK:"true"};let x=0;function S(n,s){const r=`atom${++x}`,i={toString(){return(y?"production":void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return typeof n=="function"?i.read=n:(i.init=n,i.read=m,i.write=nn),i}function m(n){return n(this)}function nn(n,s,r){return s(this,typeof r=="function"?r(n(this)):r)}const z=(n,s)=>n.unstable_is?n.unstable_is(s):s===n,j=n=>"init"in n,F=n=>!!n.write,a=new WeakMap,I=n=>{var s;return V(n)&&!((s=a.get(n))!=null&&s[1])},en=(n,s)=>{const r=a.get(n);if(r)r[1]=!0,r[0].forEach(i=>i(s));else if((y?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},on=n=>{if(a.has(n))return;const s=[new Set,!1];a.set(n,s);const r=()=>{s[1]=!0};n.then(r,r),n.onCancel=i=>{s[0].add(i)}},V=n=>typeof(n==null?void 0:n.then)=="function",J=n=>"v"in n||"e"in n,A=n=>{if("e"in n)throw n.e;if((y?"production":void 0)!=="production"&&!("v"in n))throw new Error("[Bug] atom state is not initialized");return n.v},Y=(n,s,r)=>{r.p.has(n)||(r.p.add(n),s.then(()=>{r.p.delete(n)},()=>{r.p.delete(n)}))},$=(n,s,r,i,b)=>{var g;if((y?"production":void 0)!=="production"&&i===s)throw new Error("[Bug] atom cannot depend on itself");r.d.set(i,b.n),I(r.v)&&Y(s,r.v,b),(g=b.m)==null||g.t.add(s),n&&sn(n,i,s)},O=()=>[new Map,new Map,new Set],L=(n,s,r)=>{n[0].has(s)||n[0].set(s,new Set),n[1].set(s,r)},sn=(n,s,r)=>{const i=n[0].get(s);i&&i.add(r)},rn=(n,s)=>n[0].get(s),K=(n,s)=>{n[2].add(s)},C=n=>{for(;n[1].size||n[2].size;){n[0].clear();const s=new Set(n[1].values());n[1].clear();const r=new Set(n[2]);n[2].clear(),s.forEach(i=>{var b;return(b=i.m)==null?void 0:b.l.forEach(g=>g())}),r.forEach(i=>i())}},G=n=>{let s;(y?"production":void 0)!=="production"&&(s=new Set);const r=(t,o,e)=>{const c="v"in o,d=o.v,u=I(o.v)?o.v:null;if(V(e)){on(e);for(const h of o.d.keys())Y(t,e,n(h,o));o.v=e,delete o.e}else o.v=e,delete o.e;(!c||!Object.is(d,o.v))&&(++o.n,u&&en(u,e))},i=(t,o,e,c)=>{var d;if(J(e)&&(e.m&&!(c!=null&&c.has(o))||Array.from(e.d).every(([f,E])=>i(t,f,n(f,e),c).n===E)))return e;e.d.clear();let u=!0;const h=f=>{if(z(o,f)){const p=n(f,e);if(!J(p))if(j(f))r(f,p,f.init);else throw new Error("no atom init");return A(p)}const E=i(t,f,n(f,e),c);if(u)$(t,o,e,f,E);else{const p=O();$(p,o,e,f,E),v(p,o,e),C(p)}return A(E)};let l,_;const w={get signal(){return l||(l=new AbortController),l.signal},get setSelf(){return(y?"production":void 0)!=="production"&&!F(o)&&console.warn("setSelf function cannot be used with read-only atom"),!_&&F(o)&&(_=(...f)=>{if((y?"production":void 0)!=="production"&&u&&console.warn("setSelf function cannot be called in sync"),!u)return P(o,...f)}),_}};try{const f=o.read(h,w);if(r(o,e,f),V(f)){(d=f.onCancel)==null||d.call(f,()=>l==null?void 0:l.abort());const E=()=>{if(e.m){const p=O();v(p,o,e),C(p)}};f.then(E,E)}return e}catch(f){return delete e.v,e.e=f,++e.n,e}finally{u=!1}},b=t=>A(i(void 0,t,n(t))),g=(t,o,e)=>{var c,d;const u=new Map;for(const h of((c=e.m)==null?void 0:c.t)||[])u.set(h,n(h,e));for(const h of e.p)u.set(h,n(h,e));return(d=rn(t,o))==null||d.forEach(h=>{u.set(h,n(h,e))}),u},M=(t,o,e)=>{const c=[],d=new Set,u=(l,_)=>{if(!d.has(l)){d.add(l);for(const[w,f]of g(t,l,_))l!==w&&u(w,f);c.push([l,_,_.n])}};u(o,e);const h=new Set([o]);for(let l=c.length-1;l>=0;--l){const[_,w,f]=c[l];let E=!1;for(const p of w.d.keys())if(p!==_&&h.has(p)){E=!0;break}E&&(i(t,_,w,d),v(t,_,w),f!==w.n&&(L(t,_,w),h.add(_))),d.delete(_)}},k=(t,o,e,...c)=>{const d=l=>A(i(t,l,n(l,e))),u=(l,..._)=>{const w=n(l,e);let f;if(z(o,l)){if(!j(l))throw new Error("atom not writable");const E="v"in w,p=w.v,X=_[0];r(l,w,X),v(t,l,w),(!E||!Object.is(p,w.v))&&(L(t,l,w),M(t,l,w))}else f=k(t,l,w,..._);return C(t),f};return o.write(d,u,...c)},P=(t,...o)=>{const e=O(),c=k(e,t,n(t),...o);return C(e),c},v=(t,o,e)=>{if(e.m&&!I(e.v)){for(const c of e.d.keys())e.m.d.has(c)||(R(t,c,n(c,e)).t.add(o),e.m.d.add(c));for(const c of e.m.d||[])if(!e.d.has(c)){e.m.d.delete(c);const d=B(t,c,n(c,e));d==null||d.t.delete(o)}}},R=(t,o,e)=>{if(!e.m){i(t,o,e);for(const c of e.d.keys())R(t,c,n(c,e)).t.add(o);if(e.m={l:new Set,d:new Set(e.d.keys()),t:new Set},(y?"production":void 0)!=="production"&&s.add(o),F(o)&&o.onMount){const c=e.m,{onMount:d}=o;K(t,()=>{const u=d((...h)=>k(t,o,e,...h));u&&(c.u=u)})}}return e.m},B=(t,o,e)=>{if(e.m&&!e.m.l.size&&!Array.from(e.m.t).some(c=>{var d;return(d=n(c,e).m)==null?void 0:d.d.has(o)})){const c=e.m.u;c&&K(t,c),delete e.m,(y?"production":void 0)!=="production"&&s.delete(o);for(const d of e.d.keys()){const u=B(t,d,n(d,e));u==null||u.t.delete(o)}return}return e.m},W={get:b,set:P,sub:(t,o)=>{const e=O(),c=n(t),d=R(e,t,c);C(e);const u=d.l;return u.add(o),()=>{u.delete(o);const h=O();B(h,t,c),C(h)}},unstable_derive:t=>G(...t(n))};return(y?"production":void 0)!=="production"&&Object.assign(W,{dev4_get_internal_weak_map:()=>({get:o=>{const e=n(o);if(e.n!==0)return e}}),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:o=>{const e=O();for(const[c,d]of o)if(j(c)){const u=n(c),h="v"in u,l=u.v;r(c,u,d),v(e,c,u),(!h||!Object.is(l,u.v))&&(L(e,c,u),M(e,c,u))}C(e)}}),W},cn=()=>{const n=new WeakMap;return G(r=>{let i=n.get(r);return i||(i={d:new Map,p:new Set,n:0},n.set(r,i)),i})};let T;const tn=()=>(T||(T=cn(),(y?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=T),globalThis.__JOTAI_DEFAULT_STORE__!==T&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),T),H={BASE_URL:"/foreldrepenger/oversikt",DEV:!1,MODE:"production",PROD:!0,SSR:!1,STORYBOOK:"true"},un=D.createContext(void 0),N=n=>D.useContext(un)||tn(),q=n=>typeof(n==null?void 0:n.then)=="function",dn=n=>{n.status="pending",n.then(s=>{n.status="fulfilled",n.value=s},s=>{n.status="rejected",n.reason=s})},ln=Z.use||(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(dn(n),n)}),U=new WeakMap,fn=n=>{let s=U.get(n);return s||(s=new Promise((r,i)=>{let b=n;const g=P=>v=>{b===P&&r(v)},M=P=>v=>{b===P&&i(v)},k=P=>{"onCancel"in P&&typeof P.onCancel=="function"&&P.onCancel(v=>{if((H?"production":void 0)!=="production"&&v===P)throw new Error("[Bug] p is not updated even after cancelation");q(v)?(U.set(v,s),b=v,v.then(g(v),M(v)),k(v)):r(v)})};n.then(g(n),M(n)),k(n)}),U.set(n,s)),s};function vn(n,s){const r=N(),[[i,b,g],M]=D.useReducer(v=>{const R=r.get(n);return Object.is(v[0],R)&&v[1]===r&&v[2]===n?v:[R,r,n]},void 0,()=>[r.get(n),r,n]);let k=i;if((b!==r||g!==n)&&(M(),k=r.get(n)),D.useEffect(()=>{const v=r.sub(n,()=>{M()});return M(),v},[r,n,void 0]),D.useDebugValue(k),q(k)){const v=fn(k);return ln(v)}return k}function hn(n,s){const r=N();return D.useCallback((...b)=>{if((H?"production":void 0)!=="production"&&!("write"in n))throw new Error("not writable atom");return r.set(n,...b)},[r,n])}const Q=S("blue"),pn=()=>vn(Q),En=n=>{const s=hn(Q);D.useEffect(()=>{s(n)},[s,n])};export{pn as a,S as b,hn as c,vn as d,En as u};
