import{d as l}from"./dates-JCHAmx_r.js";import{g as y}from"./index-CTjT7uj6.js";import{k as M,a as b,i as _,_ as T,b as O,c as $,d as A,e as D}from"./_baseIteratee-C-3460IB.js";import{a as j}from"./_getTag-BJIhF6Yf.js";import{B as v}from"./barnType-CnRI8jWg.js";import{i as N,d as G,e as P,g as Y,h as L,a as g}from"./UttaksdagenString-DBxOpWvb.js";import"./index-CCQ3W5xA.js";import{Y as c}from"./Ytelse-7td-ciMh.js";function w(e){return function(r,n,a){for(var s=-1,t=Object(r),o=a(r),d=o.length;d--;){var i=o[e?d:++s];if(n(t[i],i,t)===!1)break}return r}}var x=w,V=x,R=V(),U=R,H=U,C=M;function K(e,r){return e&&H(e,r,C)}var W=K,q=b;function z(e,r){return function(n,a){if(n==null)return n;if(!q(n))return e(n,a);for(var s=n.length,t=r?s:-1,o=Object(n);(r?t--:++t<s)&&a(o[t],t,o)!==!1;);return n}}var J=z,Q=W,X=J,Z=X(Q),I=Z,ee=I,re=b;function ne(e,r){var n=-1,a=re(e)?Array(e.length):[];return ee(e,function(s,t,o){a[++n]=r(s,t,o)}),a}var te=ne;function ae(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}var se=ae,B=_;function oe(e,r){if(e!==r){var n=e!==void 0,a=e===null,s=e===e,t=B(e),o=r!==void 0,d=r===null,i=r===r,u=B(r);if(!d&&!u&&!t&&e>r||t&&o&&i&&!d&&!u||a&&o&&i||!n&&i||!s)return 1;if(!a&&!t&&!u&&e<r||u&&n&&s&&!a&&!t||d&&n&&s||!o&&s||!i)return-1}return 0}var de=oe,ie=de;function fe(e,r,n){for(var a=-1,s=e.criteria,t=r.criteria,o=s.length,d=n.length;++a<o;){var i=ie(s[a],t[a]);if(i){if(a>=d)return i;var u=n[a];return i*(u=="desc"?-1:1)}}return e.index-r.index}var le=fe,p=T,ue=$,ce=D,me=te,ge=se,ve=j,pe=le,Fe=O,Be=A;function Se(e,r,n){r.length?r=p(r,function(t){return Be(t)?function(o){return ue(o,t.length===1?t[0]:t)}:t}):r=[Fe];var a=-1;r=p(r,ve(ce));var s=me(e,function(t,o,d){var i=p(r,function(u){return u(t)});return{criteria:i,index:++a,value:t}});return ge(s,function(t,o){return pe(t,o,n)})}var Ee=Se,be=Ee,S=A;function Ae(e,r,n,a){return e==null?[]:(S(r)||(r=r==null?[]:[r]),n=a?void 0:n,S(n)||(n=n==null?[]:[n]),be(e,r,n))}var he=Ae;const ke=y(he);l.extend(N);l.extend(G);l.extend(P);l.extend(Y);const ye=(e,r)=>l(e).format(r||"dddd D. MMMM YYYY"),Ce=e=>ye(e,"KL.HH:mm"),m=e=>{if(e!==void 0&&L(e)&&l(e,"YYYY-MM-DD",!0).isValid())return l.utc(e).toDate()},Me=(e,r)=>e===void 0||r===void 0?!1:l(e).isSameOrAfter(l(r).subtract(1,"day"),"day")&&l(e).isSameOrBefore(l(r).add(1,"day"),"day"),Ke=(e,r,n)=>{const a=!e.sakTilhørerMor;return{farMedmor:a?r:n,mor:a?n:r}},_e=e=>!e.dødsdato,Te=e=>[...e.engangsstønad,...e.foreldrepenger,...e.svangerskapspenger];function Oe(e,r){return l(e.fødselsdato).isAfter(r.fødselsdato,"d")?1:l(e.fødselsdato).isBefore(r.fødselsdato,"d")||e.fornavn<r.fornavn?-1:1}const We=e=>{var r,n;if(e.gjeldendeVedtak&&e.gjeldendeVedtak.perioder.length>0)return m(e.gjeldendeVedtak.perioder[0].fom);if((r=e.åpenBehandling)!=null&&r.søknadsperioder)return m((n=e.åpenBehandling)==null?void 0:n.søknadsperioder[0].fom)},qe=(e,r)=>r?{type:v.ADOPTERT_STEBARN,adopsjonsdato:e.omsorgsovertakelse,antallBarn:e.antallBarn,fødselsdatoer:[e.fødselsdato]}:e.fødselsdato?{type:v.FØDT,fødselsdatoer:[e.fødselsdato],termindato:e.termindato,antallBarn:e.antallBarn}:{type:v.UFØDT,termindato:e.termindato,antallBarn:e.antallBarn},$e=(e,r)=>{const n=e.ytelse===c.FORELDREPENGER,a=n&&e.barn!==void 0?e.barn.map(f=>f.fnr).flat():[],s=n&&r.filter(f=>a.includes(f.fnr))||[],t=m(e.familiehendelse.fødselsdato),o=t!==void 0?r.filter(f=>Me(m(f.fødselsdato),t)&&!(s!=null&&s.find(k=>k.fnr===f.fnr))):[],d=s.concat(o);d.sort(Oe);const i=d.filter(f=>f.fødselsdato!==void 0).map(f=>m(f.fødselsdato));let u=[];return i&&i.length>0?u=i:t&&(u=[t]),{fornavn:d==null?void 0:d.filter(f=>f.fornavn!==void 0&&f.fornavn.trim()!=="").map(f=>[f.fornavn,f.mellomnavn??""].join(" ")),fødselsdatoer:u,alleBarnaLever:!!(d!=null&&d.every(f=>_e(f)))}},ze=(e,r)=>{const n=Te(r);return ke(n,s=>s.familiehendelse?E(s.familiehendelse):"","desc").reduce((s,t)=>{if(t.familiehendelse){const o=E(t.familiehendelse),d=s.find(i=>De(i,o));if(d&&d.saker.push(t),d&&s.includes(d))return s;{const i=je(t.familiehendelse,t.gjelderAdopsjon),u={antallBarn:t.familiehendelse.antallBarn,familiehendelsedato:o,saker:[t],type:i,ytelse:t.ytelse,barn:i!=="termin"?$e(t,e):void 0};return s.push(u),s}}else return s},[])},F=(e,r)=>r===c.ENGANGSSTØNAD?e.map(n=>({...n,ytelse:r})):r===c.SVANGERSKAPSPENGER?e.map(n=>({...n,ytelse:r})):e.map(n=>({...n,ytelse:r})),Je=e=>({foreldrepenger:F(e.foreldrepenger,c.FORELDREPENGER),engangsstønad:F(e.engangsstønad,c.ENGANGSSTØNAD),svangerskapspenger:F(e.svangerskapspenger,c.SVANGERSKAPSPENGER)}),De=(e,r)=>{const n=l(r).subtract(2,"months"),a=l(r).add(3,"weeks");if(e)return l(e.familiehendelsedato).isAfter(n)&&l(e.familiehendelsedato).isSameOrBefore(a)},je=(e,r)=>{if(r)return"adopsjon";const{fødselsdato:n}=e;return n?"fødsel":"termin"},E=e=>{const{fødselsdato:r,termindato:n,omsorgsovertakelse:a}=e;return a||r||n},Qe=(e,r)=>{const n=r!=null&&r.familiehendelse?r.familiehendelse.fødselsdato:void 0,a=e.søker.barn&&n?e.søker.barn.find(t=>l(t.fødselsdato).isSame(n,"d")):void 0,s=a!=null&&a.annenForelder?a.annenForelder.fornavn:void 0;return s!==void 0&&s.trim()!==""?s:"Annen forelder"},Ne=(e,r)=>e===1||e===0?r.formatMessage({id:"barn"}):e===2?r.formatMessage({id:"tvillinger"}):e===3?r.formatMessage({id:"trillinger"}):r.formatMessage({id:"flerlinger"}),h=e=>{if(e===void 0)return;const r=[];if(e.forEach(n=>{r.find(s=>l(s).isSame(n,"day"))===void 0&&r.push(n)}),r.length>1){const n=r.map(t=>g(t)),a=n.slice(0,-1).join(", "),s=n[n.length-1];return`${a} og ${s}`}return g(r[0])},Ge=(e,r,n,a,s)=>{const t=Ne(n,a);if(n===0&&r===void 0||s==="termin")return{tittel:a.formatMessage({id:"barnHeader.terminBarn"},{barnTekst:t,termindato:g(e)}),undertittel:""};if(s==="adopsjon")return{tittel:a.formatMessage({id:"barnHeader.adoptertBarn"},{adopsjonsdato:g(e)}),undertittel:""};{const o=h(r);return r!==void 0&&r.length>0?{tittel:a.formatMessage({id:"barnHeader.fødtBarn"},{barnTekst:t,fødselsdatoTekst:o}),undertittel:""}:{tittel:"",undertittel:""}}},Pe=e=>{if(e.length>1){const r=e.map(a=>a.trim()).slice(0,-1).join(", "),n=e[e.length-1];return`${r} og ${n}`}else return`${e[0]}`},Xe=e=>{const{barngruppering:r,familiehendelsedato:n,antallBarn:a,intl:s,situasjon:t}=e,o=r==null?void 0:r.fornavn,d=r==null?void 0:r.fødselsdatoer,i=m(n);if(!i)return{tittel:"",undertittel:""};if(o===void 0||o.length===0||!(r!=null&&r.alleBarnaLever))return Ge(i,d,a,s,t);const u=Pe(o);if(t==="fødsel"){const f=h(d);return{tittel:u,undertittel:`født ${f}`}}return t==="adopsjon"?{tittel:u,undertittel:`adoptert ${g(i)}`}:{tittel:"",undertittel:""}};export{Xe as a,ze as b,E as c,qe as d,Pe as e,ye as f,Te as g,Ce as h,We as i,$e as j,Ke as k,Qe as l,Je as m,je as u};
