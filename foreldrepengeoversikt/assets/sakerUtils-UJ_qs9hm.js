import{d as u}from"./dates-DUtd6zgH.js";import{g as k}from"./index-CTjT7uj6.js";import{i as S,_,a as M,b as j,c as y,d as $,e as A,f as N}from"./_baseForOwn-BzfXl0Ph.js";import{_ as T}from"./_getTag-Dwi3bFUE.js";import{g}from"./Uttaksdagen-Bkz5oXqd.js";import{Y as c}from"./Ytelse-7td-ciMh.js";import{I as m,g as G}from"./dateUtils-BIf_z0Mz.js";var O=S;function P(r,e){return function(n,a){if(n==null)return n;if(!O(n))return r(n,a);for(var s=n.length,t=e?s:-1,i=Object(n);(e?t--:++t<s)&&a(i[t],t,i)!==!1;);return n}}var D=P,L=_,w=D,V=w(L),U=V,R=U,Y=S;function x(r,e){var n=-1,a=Y(r)?Array(r.length):[];return R(r,function(s,t,i){a[++n]=e(s,t,i)}),a}var C=x;function H(r,e){var n=r.length;for(r.sort(e);n--;)r[n]=r[n].value;return r}var K=H,h=M;function q(r,e){if(r!==e){var n=r!==void 0,a=r===null,s=r===r,t=h(r),i=e!==void 0,d=e===null,o=e===e,l=h(e);if(!d&&!l&&!t&&r>e||t&&i&&o&&!d&&!l||a&&i&&o||!n&&o||!s)return 1;if(!a&&!t&&!l&&r<e||l&&n&&s&&!a&&!t||d&&n&&s||!i&&s||!o)return-1}return 0}var z=q,J=z;function Q(r,e,n){for(var a=-1,s=r.criteria,t=e.criteria,i=s.length,d=n.length;++a<i;){var o=J(s[a],t[a]);if(o){if(a>=d)return o;var l=n[a];return o*(l=="desc"?-1:1)}}return r.index-e.index}var W=Q,p=j,X=$,Z=N,I=C,ee=K,re=T,ne=W,te=y,ae=A;function se(r,e,n){e.length?e=p(e,function(t){return ae(t)?function(i){return X(i,t.length===1?t[0]:t)}:t}):e=[te];var a=-1;e=p(e,re(Z));var s=I(r,function(t,i,d){var o=p(e,function(l){return l(t)});return{criteria:o,index:++a,value:t}});return ee(s,function(t,i){return ne(t,i,n)})}var ie=se,de=ie,E=A;function oe(r,e,n,a){return r==null?[]:(E(e)||(e=e==null?[]:[e]),n=a?void 0:n,E(n)||(n=n==null?[]:[n]),de(r,e,n))}var fe=oe;const le=k(fe),je=(r,e,n)=>{const a=!r.sakTilhørerMor;return{farMedmor:a?e:n,mor:a?n:e}},ue=r=>!r.dødsdato,ce=r=>[...r.engangsstønad,...r.foreldrepenger,...r.svangerskapspenger];function me(r,e){return u(r.fødselsdato).isAfter(e.fødselsdato,"d")?1:u(r.fødselsdato).isBefore(e.fødselsdato,"d")||r.fornavn<e.fornavn?-1:1}const ye=r=>{var e,n;if(r.gjeldendeVedtak&&r.gjeldendeVedtak.perioder.length>0)return m(r.gjeldendeVedtak.perioder[0].fom);if((e=r.åpenBehandling)!=null&&e.søknadsperioder)return m((n=r.åpenBehandling)==null?void 0:n.søknadsperioder[0].fom)},ge=(r,e)=>{const n=r.ytelse===c.FORELDREPENGER,a=n&&r.barn!==void 0?r.barn.map(f=>f.fnr).flat():[],s=n&&e.filter(f=>a.includes(f.fnr))||[],t=m(r.familiehendelse.fødselsdato),i=t!==void 0?e.filter(f=>G(m(f.fødselsdato),t)&&!(s!=null&&s.find(B=>B.fnr===f.fnr))):[],d=s.concat(i);d.sort(me);const o=d.filter(f=>f.fødselsdato!==void 0).map(f=>m(f.fødselsdato));let l=[];return o&&o.length>0?l=o:t&&(l=[t]),{fornavn:d==null?void 0:d.filter(f=>f.fornavn!==void 0&&f.fornavn.trim()!=="").map(f=>[f.fornavn,f.mellomnavn??""].join(" ")),fødselsdatoer:l,alleBarnaLever:!!(d!=null&&d.every(f=>ue(f)))}},$e=(r,e)=>{const n=ce(e);return le(n,s=>s.familiehendelse?F(s.familiehendelse):"","desc").reduce((s,t)=>{if(t.familiehendelse){const i=F(t.familiehendelse),d=s.find(o=>pe(o,i));if(d&&d.saker.push(t),d&&s.includes(d))return s;{const o=ve(t.familiehendelse,t.gjelderAdopsjon),l={antallBarn:t.familiehendelse.antallBarn,familiehendelsedato:i,saker:[t],type:o,ytelse:t.ytelse,barn:o!=="termin"?ge(t,r):void 0};return s.push(l),s}}else return s},[])},v=(r,e)=>e===c.ENGANGSSTØNAD?r.map(n=>({...n,ytelse:e})):e===c.SVANGERSKAPSPENGER?r.map(n=>({...n,ytelse:e})):r.map(n=>({...n,ytelse:e})),Ne=r=>({foreldrepenger:v(r.foreldrepenger,c.FORELDREPENGER),engangsstønad:v(r.engangsstønad,c.ENGANGSSTØNAD),svangerskapspenger:v(r.svangerskapspenger,c.SVANGERSKAPSPENGER)}),pe=(r,e)=>{const n=u(e).subtract(2,"months"),a=u(e).add(3,"weeks");if(r)return u(r.familiehendelsedato).isAfter(n)&&u(r.familiehendelsedato).isSameOrBefore(a)},ve=(r,e)=>{if(e)return"adopsjon";const{fødselsdato:n}=r;return n?"fødsel":"termin"},F=r=>{const{fødselsdato:e,termindato:n,omsorgsovertakelse:a}=r;return a||e||n},Te=(r,e)=>{const n=e!=null&&e.familiehendelse?e.familiehendelse.fødselsdato:void 0,a=r.søker.barn&&n?r.søker.barn.find(t=>u(t.fødselsdato).isSame(n,"d")):void 0,s=a!=null&&a.annenForelder?a.annenForelder.fornavn:void 0;return s!==void 0&&s.trim()!==""?s:"Annen forelder"},he=(r,e)=>r===1||r===0?e.formatMessage({id:"barn"}):r===2?e.formatMessage({id:"tvillinger"}):r===3?e.formatMessage({id:"trillinger"}):e.formatMessage({id:"flerlinger"}),b=r=>{if(r===void 0)return;const e=[];if(r.forEach(n=>{e.find(s=>u(s).isSame(n,"day"))===void 0&&e.push(n)}),e.length>1){const n=e.map(t=>g(t)),a=n.slice(0,-1).join(", "),s=n[n.length-1];return`${a} og ${s}`}return g(e[0])},Ee=(r,e,n,a,s)=>{const t=he(n,a);if(n===0&&e===void 0||s==="termin")return{tittel:a.formatMessage({id:"barnHeader.terminBarn"},{barnTekst:t,termindato:g(r)}),undertittel:""};if(s==="adopsjon")return{tittel:a.formatMessage({id:"barnHeader.adoptertBarn"},{adopsjonsdato:g(r)}),undertittel:""};{const i=b(e);return e!==void 0&&e.length>0?{tittel:a.formatMessage({id:"barnHeader.fødtBarn"},{barnTekst:t,fødselsdatoTekst:i}),undertittel:""}:{tittel:"",undertittel:""}}},Fe=r=>{if(r.length>1){const e=r.map(a=>a.trim()).slice(0,-1).join(", "),n=r[r.length-1];return`${e} og ${n}`}else return`${r[0]}`},Ge=r=>{const{barngruppering:e,familiehendelsedato:n,antallBarn:a,intl:s,situasjon:t}=r,i=e==null?void 0:e.fornavn,d=e==null?void 0:e.fødselsdatoer,o=m(n);if(!o)return{tittel:"",undertittel:""};if(i===void 0||i.length===0||!(e!=null&&e.alleBarnaLever))return Ee(o,d,a,s,t);const l=Fe(i);if(t==="fødsel"){const f=b(d);return{tittel:l,undertittel:`født ${f}`}}return t==="adopsjon"?{tittel:l,undertittel:`adoptert ${g(o)}`}:{tittel:"",undertittel:""}};export{Ge as a,$e as b,F as c,je as d,Te as e,Fe as f,ce as g,ye as h,ge as i,Ne as m,ve as u};
