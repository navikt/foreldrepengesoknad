import{r as w,l as j}from"./iframe-CcBOHSS2.js";const _={};function J(t,n){return t.unstable_is?t.unstable_is(n):n===t}function U(t){return"init"in t}function R(t){return!!t.write}function H(t){return"v"in t||"e"in t}function C(t){if("e"in t)throw t.e;if((_?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v}const B=new WeakMap;function $(t){var n;return D(t)&&!!((n=B.get(t))!=null&&n[0])}function tt(t){const n=B.get(t);n?.[0]&&(n[0]=!1,n[1].forEach(o=>o()))}function W(t,n){let o=B.get(t);if(!o){o=[!0,new Set],B.set(t,o);const e=()=>{o[0]=!1};t.then(e,e)}o[1].add(n)}function D(t){return typeof t?.then=="function"}function G(t,n,o){if(!o.p.has(t)){o.p.add(t);const e=()=>o.p.delete(t);n.then(e,e)}}function N(t,n,o){var e;const s=new Set;for(const c of((e=o.get(t))==null?void 0:e.t)||[])o.has(c)&&s.add(c);for(const c of n.p)s.add(c);return s}const nt=(t,n,...o)=>n.read(...o),et=(t,n,...o)=>n.write(...o),ot=(t,n)=>{var o;return(o=n.unstable_onInit)==null?void 0:o.call(n,t)},st=(t,n,o)=>{var e;return(e=n.onMount)==null?void 0:e.call(n,o)},ct=(t,n)=>{const o=S(t),e=o[0],s=o[9];if((_?"production":void 0)!=="production"&&!n)throw new Error("Atom is undefined or null");let c=e.get(n);return c||(c={d:new Map,p:new Set,n:0},e.set(n,c),s?.(t,n)),c},it=t=>{const n=S(t),o=n[1],e=n[3],s=n[4],c=n[5],u=n[6],g=n[13],f=[],i=r=>{try{r()}catch(a){f.push(a)}};do{u.f&&i(u.f);const r=new Set,a=r.add.bind(r);e.forEach(l=>{var d;return(d=o.get(l))==null?void 0:d.l.forEach(a)}),e.clear(),c.forEach(a),c.clear(),s.forEach(a),s.clear(),r.forEach(i),e.size&&g(t)}while(e.size||c.size||s.size);if(f.length)throw new AggregateError(f)},rt=t=>{const n=S(t),o=n[1],e=n[2],s=n[3],c=n[11],u=n[14],g=n[17],f=[],i=new WeakSet,r=new WeakSet,a=Array.from(s);for(;a.length;){const l=a[a.length-1],d=c(t,l);if(r.has(l)){a.pop();continue}if(i.has(l)){if(e.get(l)===d.n)f.push([l,d]);else if((_?"production":void 0)!=="production"&&e.has(l))throw new Error("[Bug] invalidated atom exists");r.add(l),a.pop();continue}i.add(l);for(const p of N(l,d,o))i.has(p)||a.push(p)}for(let l=f.length-1;l>=0;--l){const[d,p]=f[l];let h=!1;for(const v of p.d.keys())if(v!==d&&s.has(v)){h=!0;break}h&&(u(t,d),g(t,d)),e.delete(d)}},ut=(t,n)=>{var o;const e=S(t),s=e[1],c=e[2],u=e[3],g=e[6],f=e[7],i=e[11],r=e[12],a=e[13],l=e[14],d=e[16],p=e[17],h=i(t,n);if(H(h)&&(s.has(n)&&c.get(n)!==h.n||Array.from(h.d).every(([b,E])=>l(t,b).n===E)))return h;h.d.clear();let v=!0;function A(){s.has(n)&&(p(t,n),a(t),r(t))}function m(b){var E;if(J(n,b)){const F=i(t,b);if(!H(F))if(U(b))I(t,b,b.init);else throw new Error("no atom init");return C(F)}const O=l(t,b);try{return C(O)}finally{h.d.set(b,O.n),$(h.v)&&G(n,h.v,O),(E=s.get(b))==null||E.t.add(n),v||A()}}let k,y;const P={get signal(){return k||(k=new AbortController),k.signal},get setSelf(){return(_?"production":void 0)!=="production"&&!R(n)&&console.warn("setSelf function cannot be used with read-only atom"),!y&&R(n)&&(y=(...b)=>{if((_?"production":void 0)!=="production"&&v&&console.warn("setSelf function cannot be called in sync"),!v)try{return d(t,n,...b)}finally{a(t),r(t)}}),y}},z=h.n;try{const b=f(t,n,m,P);return I(t,n,b),D(b)&&(W(b,()=>k?.abort()),b.then(A,A)),h}catch(b){return delete h.v,h.e=b,++h.n,h}finally{v=!1,z!==h.n&&c.get(n)===z&&(c.set(n,h.n),u.add(n),(o=g.c)==null||o.call(g,n))}},at=(t,n)=>{const o=S(t),e=o[1],s=o[2],c=o[11],u=[n];for(;u.length;){const g=u.pop(),f=c(t,g);for(const i of N(g,f,e)){const r=c(t,i);s.set(i,r.n),u.push(i)}}},q=(t,n,...o)=>{const e=S(t),s=e[3],c=e[6],u=e[8],g=e[11],f=e[12],i=e[13],r=e[14],a=e[15],l=e[17];let d=!0;const p=v=>C(r(t,v)),h=(v,...A)=>{var m;const k=g(t,v);try{if(J(n,v)){if(!U(v))throw new Error("atom not writable");const y=k.n,P=A[0];I(t,v,P),l(t,v),y!==k.n&&(s.add(v),(m=c.c)==null||m.call(c,v),a(t,v));return}else return q(t,v,...A)}finally{d||(i(t),f(t))}};try{return u(t,n,p,h,...o)}finally{d=!1}},lt=(t,n)=>{var o;const e=S(t),s=e[1],c=e[3],u=e[6],g=e[11],f=e[15],i=e[18],r=e[19],a=g(t,n),l=s.get(n);if(l&&!$(a.v)){for(const[d,p]of a.d)if(!l.d.has(d)){const h=g(t,d);i(t,d).t.add(n),l.d.add(d),p!==h.n&&(c.add(d),(o=u.c)==null||o.call(u,d),f(t,d))}for(const d of l.d||[])if(!a.d.has(d)){l.d.delete(d);const p=r(t,d);p?.t.delete(n)}}},K=(t,n)=>{var o;const e=S(t),s=e[1],c=e[4],u=e[6],g=e[10],f=e[11],i=e[12],r=e[13],a=e[14],l=e[16],d=f(t,n);let p=s.get(n);if(!p){a(t,n);for(const h of d.d.keys())K(t,h).t.add(n);if(p={l:new Set,d:new Set(d.d.keys()),t:new Set},s.set(n,p),(o=u.m)==null||o.call(u,n),R(n)){const h=()=>{let v=!0;const A=(...m)=>{try{return l(t,n,...m)}finally{v||(r(t),i(t))}};try{const m=g(t,n,A);m&&(p.u=()=>{v=!0;try{m()}finally{v=!1}})}finally{v=!1}};c.add(h)}}return p},dt=(t,n)=>{var o;const e=S(t),s=e[1],c=e[5],u=e[6],g=e[11],f=e[19],i=g(t,n);let r=s.get(n);if(r&&!r.l.size&&!Array.from(r.t).some(a=>{var l;return(l=s.get(a))==null?void 0:l.d.has(n)})){r.u&&c.add(r.u),r=void 0,s.delete(n),(o=u.u)==null||o.call(u,n);for(const a of i.d.keys()){const l=f(t,a);l?.t.delete(n)}return}return r},I=(t,n,o)=>{const e=S(t)[11],s=e(t,n),c="v"in s,u=s.v;if(D(o))for(const g of s.d.keys())G(n,o,e(t,g));s.v=o,delete s.e,(!c||!Object.is(u,s.v))&&(++s.n,D(u)&&tt(u))},ft=(t,n)=>{const o=S(t)[14];return C(o(t,n))},ht=(t,n,...o)=>{const e=S(t),s=e[12],c=e[13],u=e[16];try{return u(t,n,...o)}finally{c(t),s(t)}},gt=(t,n,o)=>{const e=S(t),s=e[12],c=e[18],u=e[19],f=c(t,n).l;return f.add(o),s(t),()=>{f.delete(o),u(t,n),s(t)}},Q=new WeakMap;function S(t){const n=Q.get(t);if((_?"production":void 0)!=="production"&&!n)throw new Error("Store must be created by buildStore to read its building blocks");return n}function vt(...t){const n={get(e){const s=S(n)[21];return s(n,e)},set(e,...s){const c=S(n)[22];return c(n,e,...s)},sub(e,s){const c=S(n)[23];return c(n,e,s)}},o=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},nt,et,ot,st,ct,it,rt,ut,at,q,lt,K,dt,I,ft,ht,gt].map((e,s)=>t[s]||e);return Q.set(n,Object.freeze(o)),n}const X={};let pt=0;function bt(t,n){const o=`atom${++pt}`,e={toString(){return(X?"production":void 0)!=="production"&&this.debugLabel?o+":"+this.debugLabel:o}};return typeof t=="function"?e.read=t:(e.init=t,e.read=St,e.write=mt),e}function St(t){return t(this)}function mt(t,n,o){return n(this,typeof o=="function"?o(t(this)):o)}function At(){return vt()}let M;function kt(){return M||(M=At(),(X?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=M),globalThis.__JOTAI_DEFAULT_STORE__!==M&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),M}const wt={},_t=w.createContext(void 0);function Y(t){return w.useContext(_t)||kt()}const V=t=>typeof t?.then=="function",x=t=>{t.status||(t.status="pending",t.then(n=>{t.status="fulfilled",t.value=n},n=>{t.status="rejected",t.reason=n}))},yt=j.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(x(t),t)}),T=new WeakMap,L=(t,n)=>{let o=T.get(t);return o||(o=new Promise((e,s)=>{let c=t;const u=i=>r=>{c===i&&e(r)},g=i=>r=>{c===i&&s(r)},f=()=>{try{const i=n();V(i)?(T.set(i,o),c=i,i.then(u(i),g(i)),W(i,f)):e(i)}catch(i){s(i)}};t.then(u(t),g(t)),W(t,f)}),T.set(t,o)),o};function Mt(t,n){const{delay:o,unstable_promiseStatus:e=!j.use}={},s=Y(),[[c,u,g],f]=w.useReducer(r=>{const a=s.get(t);return Object.is(r[0],a)&&r[1]===s&&r[2]===t?r:[a,s,t]},void 0,()=>[s.get(t),s,t]);let i=c;if((u!==s||g!==t)&&(f(),i=s.get(t)),w.useEffect(()=>{const r=s.sub(t,()=>{if(e)try{const a=s.get(t);V(a)&&x(L(a,()=>s.get(t)))}catch{}if(typeof o=="number"){setTimeout(f,o);return}f()});return f(),r},[s,t,o,e]),w.useDebugValue(i),V(i)){const r=L(i,()=>s.get(t));return e&&x(r),yt(r)}return i}function Et(t,n){const o=Y();return w.useCallback((...s)=>{if((wt?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return o.set(t,...s)},[o,t])}const Z=bt("blue"),Bt=()=>Mt(Z),Dt=t=>{const n=Et(Z);w.useEffect(()=>{n(t)},[n,t])};export{bt as a,Et as b,Mt as c,Dt as d,Bt as u};
