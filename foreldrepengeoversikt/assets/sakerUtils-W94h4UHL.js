import{d as l}from"./dates-JCHAmx_r.js";import{g as T}from"./index-CTjT7uj6.js";import{k as _,b as S,a as M,c as y,d as D,e as O,f as N,g as b,h as $}from"./_baseIteratee-ALi5R95-.js";import{i as j,d as P,e as G,g as Y,h as L,a as g}from"./UttaksdagenString-CJKc9JwL.js";import"./index-CCQ3W5xA.js";import{Y as c}from"./Ytelse-7td-ciMh.js";var v=(e=>(e.FØDT="født",e.UFØDT="ufødt",e.ADOPTERT_STEBARN="adoptertStebarn",e.ADOPTERT_ANNET_BARN="adoptertAnnetBarn",e.IKKE_UTFYLT="ikkeUtfylt",e))(v||{});function R(e){return function(r,t,a){for(var s=-1,n=Object(r),o=a(r),d=o.length;d--;){var i=o[e?d:++s];if(t(n[i],i,n)===!1)break}return r}}var w=R,U=w,x=U(),V=x,H=V,K=_;function C(e,r){return e&&H(e,r,K)}var W=C,q=S;function z(e,r){return function(t,a){if(t==null)return t;if(!q(t))return e(t,a);for(var s=t.length,n=r?s:-1,o=Object(t);(r?n--:++n<s)&&a(o[n],n,o)!==!1;);return t}}var J=z,Q=W,X=J,Z=X(Q),I=Z,ee=I,re=S;function te(e,r){var t=-1,a=re(e)?Array(e.length):[];return ee(e,function(s,n,o){a[++t]=r(s,n,o)}),a}var ne=te;function ae(e,r){var t=e.length;for(e.sort(r);t--;)e[t]=e[t].value;return e}var se=ae,B=M;function oe(e,r){if(e!==r){var t=e!==void 0,a=e===null,s=e===e,n=B(e),o=r!==void 0,d=r===null,i=r===r,u=B(r);if(!d&&!u&&!n&&e>r||n&&o&&i&&!d&&!u||a&&o&&i||!t&&i||!s)return 1;if(!a&&!n&&!u&&e<r||u&&t&&s&&!a&&!n||d&&t&&s||!o&&s||!i)return-1}return 0}var de=oe,ie=de;function fe(e,r,t){for(var a=-1,s=e.criteria,n=r.criteria,o=s.length,d=t.length;++a<o;){var i=ie(s[a],n[a]);if(i){if(a>=d)return i;var u=t[a];return i*(u=="desc"?-1:1)}}return e.index-r.index}var le=fe,p=y,ue=O,ce=$,me=ne,ge=se,ve=N,pe=le,Fe=D,Be=b;function Ee(e,r,t){r.length?r=p(r,function(n){return Be(n)?function(o){return ue(o,n.length===1?n[0]:n)}:n}):r=[Fe];var a=-1;r=p(r,ve(ce));var s=me(e,function(n,o,d){var i=p(r,function(u){return u(n)});return{criteria:i,index:++a,value:n}});return ge(s,function(n,o){return pe(n,o,t)})}var Ae=Ee,Se=Ae,E=b;function be(e,r,t,a){return e==null?[]:(E(r)||(r=r==null?[]:[r]),t=a?void 0:t,E(t)||(t=t==null?[]:[t]),Se(e,r,t))}var he=be;const ke=T(he);l.extend(j);l.extend(P);l.extend(G);l.extend(Y);const Te=(e,r)=>l(e).format(r||"dddd D. MMMM YYYY"),Ve=e=>Te(e,"KL.HH:mm"),m=e=>{if(e!==void 0&&L(e)&&l(e,"YYYY-MM-DD",!0).isValid())return l.utc(e).toDate()},_e=(e,r)=>e===void 0||r===void 0?!1:l(e).isSameOrAfter(l(r).subtract(1,"day"),"day")&&l(e).isSameOrBefore(l(r).add(1,"day"),"day"),He=(e,r,t)=>{const a=!e.sakTilhørerMor;return{farMedmor:a?r:t,mor:a?t:r}},Me=e=>!e.dødsdato,ye=e=>[...e.engangsstønad,...e.foreldrepenger,...e.svangerskapspenger];function De(e,r){return l(e.fødselsdato).isAfter(r.fødselsdato,"d")?1:l(e.fødselsdato).isBefore(r.fødselsdato,"d")||e.fornavn<r.fornavn?-1:1}const Ke=e=>{var r,t;if(e.gjeldendeVedtak&&e.gjeldendeVedtak.perioder.length>0)return m(e.gjeldendeVedtak.perioder[0].fom);if((r=e.åpenBehandling)!=null&&r.søknadsperioder)return m((t=e.åpenBehandling)==null?void 0:t.søknadsperioder[0].fom)},Ce=(e,r)=>r?{type:v.ADOPTERT_STEBARN,adopsjonsdato:e.omsorgsovertakelse,antallBarn:e.antallBarn,fødselsdatoer:[e.fødselsdato]}:e.fødselsdato?{type:v.FØDT,fødselsdatoer:[e.fødselsdato],termindato:e.termindato,antallBarn:e.antallBarn}:{type:v.UFØDT,termindato:e.termindato,antallBarn:e.antallBarn},Oe=(e,r)=>{const t=e.ytelse===c.FORELDREPENGER,a=t&&e.barn!==void 0?e.barn.map(f=>f.fnr).flat():[],s=t&&r.filter(f=>a.includes(f.fnr))||[],n=m(e.familiehendelse.fødselsdato),o=n!==void 0?r.filter(f=>_e(m(f.fødselsdato),n)&&!(s!=null&&s.find(k=>k.fnr===f.fnr))):[],d=s.concat(o);d.sort(De);const i=d.filter(f=>f.fødselsdato!==void 0).map(f=>m(f.fødselsdato));let u=[];return i&&i.length>0?u=i:n&&(u=[n]),{fornavn:d==null?void 0:d.filter(f=>f.fornavn!==void 0&&f.fornavn.trim()!=="").map(f=>[f.fornavn,f.mellomnavn??""].join(" ")),fødselsdatoer:u,alleBarnaLever:!!(d!=null&&d.every(f=>Me(f)))}},We=(e,r)=>{const t=ye(r);return ke(t,s=>s.familiehendelse?A(s.familiehendelse):"","desc").reduce((s,n)=>{if(n.familiehendelse){const o=A(n.familiehendelse),d=s.find(i=>Ne(i,o));if(d&&d.saker.push(n),d&&s.includes(d))return s;{const i=$e(n.familiehendelse,n.gjelderAdopsjon),u={antallBarn:n.familiehendelse.antallBarn,familiehendelsedato:o,saker:[n],type:i,ytelse:n.ytelse,barn:i!=="termin"?Oe(n,e):void 0};return s.push(u),s}}else return s},[])},F=(e,r)=>r===c.ENGANGSSTØNAD?e.map(t=>({...t,ytelse:r})):r===c.SVANGERSKAPSPENGER?e.map(t=>({...t,ytelse:r})):e.map(t=>({...t,ytelse:r})),qe=e=>({foreldrepenger:F(e.foreldrepenger,c.FORELDREPENGER),engangsstønad:F(e.engangsstønad,c.ENGANGSSTØNAD),svangerskapspenger:F(e.svangerskapspenger,c.SVANGERSKAPSPENGER)}),Ne=(e,r)=>{const t=l(r).subtract(2,"months"),a=l(r).add(3,"weeks");if(e)return l(e.familiehendelsedato).isAfter(t)&&l(e.familiehendelsedato).isSameOrBefore(a)},$e=(e,r)=>{if(r)return"adopsjon";const{fødselsdato:t}=e;return t?"fødsel":"termin"},A=e=>{const{fødselsdato:r,termindato:t,omsorgsovertakelse:a}=e;return a||r||t},ze=(e,r)=>{const t=r!=null&&r.familiehendelse?r.familiehendelse.fødselsdato:void 0,a=e.søker.barn&&t?e.søker.barn.find(n=>l(n.fødselsdato).isSame(t,"d")):void 0,s=a!=null&&a.annenForelder?a.annenForelder.fornavn:void 0;return s!==void 0&&s.trim()!==""?s:"Annen forelder"},je=(e,r)=>e===1||e===0?r.formatMessage({id:"barn"}):e===2?r.formatMessage({id:"tvillinger"}):e===3?r.formatMessage({id:"trillinger"}):r.formatMessage({id:"flerlinger"}),h=e=>{if(e===void 0)return;const r=[];if(e.forEach(t=>{r.find(s=>l(s).isSame(t,"day"))===void 0&&r.push(t)}),r.length>1){const t=r.map(n=>g(n)),a=t.slice(0,-1).join(", "),s=t[t.length-1];return`${a} og ${s}`}return g(r[0])},Pe=(e,r,t,a,s)=>{const n=je(t,a);if(t===0&&r===void 0||s==="termin")return{tittel:a.formatMessage({id:"barnHeader.terminBarn"},{barnTekst:n,termindato:g(e)}),undertittel:""};if(s==="adopsjon")return{tittel:a.formatMessage({id:"barnHeader.adoptertBarn"},{adopsjonsdato:g(e)}),undertittel:""};{const o=h(r);return r!==void 0&&r.length>0?{tittel:a.formatMessage({id:"barnHeader.fødtBarn"},{barnTekst:n,fødselsdatoTekst:o}),undertittel:""}:{tittel:"",undertittel:""}}},Ge=e=>{if(e.length>1){const r=e.map(a=>a.trim()).slice(0,-1).join(", "),t=e[e.length-1];return`${r} og ${t}`}else return`${e[0]}`},Je=e=>{const{barngruppering:r,familiehendelsedato:t,antallBarn:a,intl:s,situasjon:n}=e,o=r==null?void 0:r.fornavn,d=r==null?void 0:r.fødselsdatoer,i=m(t);if(!i)return{tittel:"",undertittel:""};if(o===void 0||o.length===0||!(r!=null&&r.alleBarnaLever))return Pe(i,d,a,s,n);const u=Ge(o);if(n==="fødsel"){const f=h(d);return{tittel:u,undertittel:`født ${f}`}}return n==="adopsjon"?{tittel:u,undertittel:`adoptert ${g(i)}`}:{tittel:"",undertittel:""}};export{v as B,ye as a,We as b,A as c,Ce as d,Ge as e,Te as f,Je as g,Ve as h,Ke as i,Oe as j,He as k,ze as l,qe as m,$e as u};
