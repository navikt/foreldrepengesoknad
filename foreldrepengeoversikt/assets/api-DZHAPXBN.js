var A=Object.defineProperty;var O=(s,t,e)=>t in s?A(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var h=(s,t,e)=>O(s,typeof t!="symbol"?t+"":t,e);const x=()=>{const s=document.getElementById("nav:appSettings");return{PUBLIC_PATH:JSON.parse(s.text).PUBLIC_PATH}},C=x();class R extends Error{constructor(e,r,o){const n=e.status||e.status===0?e.status:"",i=e.statusText||"",a=`${n} ${i}`.trim(),u=a?`status code ${a}`:"an unknown error";super(`Request failed with ${u}: ${r.method} ${r.url}`);h(this,"response");h(this,"request");h(this,"options");this.name="HTTPError",this.response=e,this.request=r,this.options=o}}class q extends Error{constructor(e){super(`Request timed out: ${e.method} ${e.url}`);h(this,"request");this.name="TimeoutError",this.request=e}}const d=s=>s!==null&&typeof s=="object",y=(...s)=>{for(const t of s)if((!d(t)||Array.isArray(t))&&t!==void 0)throw new TypeError("The `options` argument must be an object");return g({},...s)},E=(s={},t={})=>{const e=new globalThis.Headers(s),r=t instanceof globalThis.Headers,o=new globalThis.Headers(t);for(const[n,i]of o.entries())r&&i==="undefined"||i===void 0?e.delete(n):e.set(n,i);return e};function m(s,t,e){return Object.hasOwn(t,e)&&t[e]===void 0?[]:g(s[e]??[],t[e]??[])}const k=(s={},t={})=>({beforeRequest:m(s,t,"beforeRequest"),beforeRetry:m(s,t,"beforeRetry"),afterResponse:m(s,t,"afterResponse"),beforeError:m(s,t,"beforeError")}),g=(...s)=>{let t={},e={},r={};for(const o of s)if(Array.isArray(o))Array.isArray(t)||(t=[]),t=[...t,...o];else if(d(o)){for(let[n,i]of Object.entries(o))d(i)&&n in t&&(i=g(t[n],i)),t={...t,[n]:i};d(o.hooks)&&(r=k(r,o.hooks),t.hooks=r),d(o.headers)&&(e=E(e,o.headers),t.headers=e)}return t},j=(()=>{let s=!1,t=!1;const e=typeof globalThis.ReadableStream=="function",r=typeof globalThis.Request=="function";if(e&&r)try{t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type")}catch(o){if(o instanceof Error&&o.message==="unsupported BodyInit type")return!1;throw o}return s&&!t})(),I=typeof globalThis.AbortController=="function",N=typeof globalThis.ReadableStream=="function",L=typeof globalThis.FormData=="function",S=["get","post","put","patch","head","delete"],$={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},b=2147483647,P=Symbol("stop"),v={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},U={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},H=s=>S.includes(s)?s.toUpperCase():s,D=["get","put","head","delete","options","trace"],F=[408,413,429,500,502,503,504],K=[413,429,503],T={limit:2,methods:D,statusCodes:F,afterStatusCodes:K,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:s=>.3*2**(s-1)*1e3},M=(s={})=>{if(typeof s=="number")return{...T,limit:s};if(s.methods&&!Array.isArray(s.methods))throw new Error("retry.methods must be an array");if(s.statusCodes&&!Array.isArray(s.statusCodes))throw new Error("retry.statusCodes must be an array");return{...T,...s}};async function B(s,t,e,r){return new Promise((o,n)=>{const i=setTimeout(()=>{e&&e.abort(),n(new q(s))},r.timeout);r.fetch(s,t).then(o).catch(n).then(()=>{clearTimeout(i)})})}async function J(s,{signal:t}){return new Promise((e,r)=>{t&&(t.throwIfAborted(),t.addEventListener("abort",o,{once:!0}));function o(){clearTimeout(n),r(t.reason)}const n=setTimeout(()=>{t==null||t.removeEventListener("abort",o),e()},s)})}const V=(s,t)=>{const e={};for(const r in t)!(r in U)&&!(r in v)&&!(r in s)&&(e[r]=t[r]);return e};class _{constructor(t,e={}){h(this,"request");h(this,"abortController");h(this,"_retryCount",0);h(this,"_input");h(this,"_options");var r,o;if(this._input=t,this._options={...e,headers:E(this._input.headers,e.headers),hooks:k({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:H(e.method??this._input.method),prefixUrl:String(e.prefixUrl||""),retry:M(e.retry),throwHttpErrors:e.throwHttpErrors!==!1,timeout:e.timeout??1e4,fetch:e.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(I){this.abortController=new globalThis.AbortController;const n=this._options.signal??this._input.signal;n==null||n.addEventListener("abort",()=>{this.abortController.abort(n.reason)}),this._options.signal=this.abortController.signal}if(j&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=((o=(r=this._options).stringifyJson)==null?void 0:o.call(r,this._options.json))??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const i="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),a=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,i);(L&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(a,{...this.request}),this._options)}}static create(t,e){const r=new _(t,e),o=async()=>{if(typeof r._options.timeout=="number"&&r._options.timeout>b)throw new RangeError(`The \`timeout\` option cannot be greater than ${b}`);await Promise.resolve();let a=await r._fetch();for(const u of r._options.hooks.afterResponse){const c=await u(r.request,r._options,r._decorateResponse(a.clone()));c instanceof globalThis.Response&&(a=c)}if(r._decorateResponse(a),!a.ok&&r._options.throwHttpErrors){let u=new R(a,r.request,r._options);for(const c of r._options.hooks.beforeError)u=await c(u);throw u}if(r._options.onDownloadProgress){if(typeof r._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!N)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(a.clone(),r._options.onDownloadProgress)}return a},i=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(o):o();for(const[a,u]of Object.entries($))i[a]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||u);const l=(await i).clone();if(a==="json"){if(l.status===204||(await l.clone().arrayBuffer()).byteLength===0)return"";if(e.parseJson)return e.parseJson(await l.text())}return l[a]()};return i}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount>this._options.retry.limit||t instanceof q)throw t;if(t instanceof R){if(!this._options.retry.statusCodes.includes(t.response.status))throw t;const r=t.response.headers.get("Retry-After")??t.response.headers.get("RateLimit-Reset")??t.response.headers.get("X-RateLimit-Reset")??t.response.headers.get("X-Rate-Limit-Reset");if(r&&this._options.retry.afterStatusCodes.includes(t.response.status)){let o=Number(r)*1e3;Number.isNaN(o)?o=Date.parse(r)-Date.now():o>=Date.parse("2024-01-01")&&(o-=Date.now());const n=this._options.retry.maxRetryAfter??o;return o<n?o:n}if(t.response.status===413)throw t}const e=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,e)}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const r=Math.min(this._calculateRetryDelay(e),b);if(this._retryCount<1)throw e;await J(r,{signal:this._options.signal});for(const o of this._options.hooks.beforeRetry)if(await o({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===P)return;return this._retry(t)}}async _fetch(){for(const r of this._options.hooks.beforeRequest){const o=await r(this.request,this._options);if(o instanceof Request){this.request=o;break}if(o instanceof Response)return o}const t=V(this.request,this._options),e=this.request;return this.request=e.clone(),this._options.timeout===!1?this._options.fetch(e,t):B(e,t,this.abortController,this._options)}_stream(t,e){const r=Number(t.headers.get("content-length"))||0;let o=0;return t.status===204?(e&&e({percent:1,totalBytes:r,transferredBytes:o},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(n){const i=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array);async function a(){const{done:u,value:c}=await i.read();if(u){n.close();return}if(e){o+=c.byteLength;const l=r===0?0:o/r;e({percent:l,transferredBytes:o,totalBytes:r},c)}n.enqueue(c),await a()}await a()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}/*! MIT License © Sindre Sorhus */const w=s=>{const t=(e,r)=>_.create(e,y(s,r));for(const e of S)t[e]=(r,o)=>_.create(r,y(s,o,{method:e}));return t.create=e=>w(y(e)),t.extend=e=>(typeof e=="function"&&(e=e(s??{})),w(y(s,e))),t.stop=P,t},f=w(),p=C.PUBLIC_PATH,X=()=>({queryKey:["SØKER_INFO"],queryFn:()=>f.get(`${p}/rest/sokerinfo`).json()}),Y=()=>({queryKey:["MINIDIALOG"],queryFn:()=>f.get(`${p}/rest/minidialog`).json()}),Q=()=>({queryKey:["SAKER"],queryFn:()=>f.get(`${p}/rest/innsyn/v2/saker`).json()}),Z=s=>({queryKey:["DOKUMENTER",s],queryFn:()=>f.get(`${p}/rest/dokument/alle`,{searchParams:{saksnummer:s}}).json()}),tt=s=>({queryKey:["ANNEN_PARTS_VEDTAK",s],queryFn:async()=>{var t;try{const e=await fetch(`${p}/rest/innsyn/v2/annenPartVedtak`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);try{return await e.json()}catch{return null}}catch(e){if((t=e==null?void 0:e.message)!=null&&t.includes("Ugyldig ident"))return;throw e}}}),et=s=>({queryKey:["TIDSLINJEHENDELSER",s],queryFn:()=>f.get(`${p}/rest/innsyn/tidslinje`,{searchParams:{saksnummer:s}}).json()}),st=s=>({queryKey:["MANGLENDE_VEDLEGG",s],queryFn:()=>f.get(`${p}/rest/historikk/vedlegg`,{searchParams:{saksnummer:s}}).json()}),rt=async(s,t)=>{const e=await fetch(`${p}/rest/soknad/ettersend`,{method:"POST",headers:{"Content-Type":"application/json",...t!==void 0&&{fnr:t}},signal:AbortSignal.timeout(3e4),body:JSON.stringify(s)});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()},ot=()=>({queryKey:["SAK_OPPDATERT"],queryFn:()=>f.get(`${p}/rest/innsyn/v2/saker/oppdatert`).json()});export{C as E,tt as a,Z as b,rt as c,et as d,ot as e,st as f,Q as h,Y as m,p,X as s};
