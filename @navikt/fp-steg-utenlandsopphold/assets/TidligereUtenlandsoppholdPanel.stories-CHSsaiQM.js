import{i as D,a as P,b as x,c as N,d as j,e as O,f as R,g}from"./dateFormValidation-Dn9oOt9d.js";import{j as e}from"./index-eW7pncv0.js";import{r as k}from"./index-D4lIrffr.js";import{a as B,d as i,m as U,D as M,n as I,V as b,R as V,c as Y,M as c,e as A,f as S,B as F,S as $,g as z,h as G,j as K,k as W,E as X,H as J,l as Q}from"./ErrorSummaryHookForm-C3AiRYh-.js";import{u as Z}from"./index-DJlgB2WJ.js";import{S as ee}from"./Plus-B4iVE4nb.js";import"./v4-CtRu48qb.js";import"./index-DsJinFGm.js";const H=({index:n,fjernOpphold:y})=>{const t=Z(),{watch:u,trigger:h,formState:{isSubmitted:T}}=B(),f=u("utenlandsoppholdSiste12Mnd").filter((p,o)=>o!==n),r=u(`utenlandsoppholdSiste12Mnd.${n}.fom`),a=u(`utenlandsoppholdSiste12Mnd.${n}.tom`),s=i(U).toDate(),d=a?i(a).subtract(1,"days").toDate():i(M).toDate(),l=r&&I(r,U)?i(r).add(1,"days").toDate():i(U).toDate(),m=i(M).toDate();return e.jsxs(b,{gap:"5",align:"start",children:[e.jsx(V,{name:`utenlandsoppholdSiste12Mnd.${n}.landkode`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[D(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd"}))],children:Y().map(p=>e.jsx("option",{value:p[0],children:p[1]},p[0]))}),e.jsx(A,{name:`utenlandsoppholdSiste12Mnd.${n}.fom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:s,maxDate:d,validate:[D(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved"})),P(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.FraOgMedDato.GyldigDato"})),x(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.FomErLikTom"}),a),N(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Utenlandsopphold.FørTilDato"}),a),j(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.DateOutsideRangeFom"},{min:S(s),max:S(d)}),s,d),O(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"}),{date:a,isStartDate:!1},f)],onChange:()=>T&&h(),defaultMonth:a?i(a).toDate():void 0}),e.jsx(A,{name:`utenlandsoppholdSiste12Mnd.${n}.tom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:l,maxDate:m,validate:[D(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved"})),P(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.TilOgMedDato.GyldigDato"})),x(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.TomErLikFom"}),r),R(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Utenlandsopphold.EtterFraDato"}),r),j(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.DateOutsideRangeTom"},{min:S(l),max:S(m)}),l,m),O(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"}),{date:r,isStartDate:!0},f)],onChange:()=>T&&h()}),n>0&&e.jsx(F,{type:"button",variant:"tertiary",size:"small",icon:e.jsx($,{"aria-hidden":!0}),onClick:()=>y(n),children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};H.__docgenInfo={description:"",methods:[],displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{required:!0,tsType:{name:"number"},description:""},fjernOpphold:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}}};const q={fom:"",tom:"",landkode:""},C=({tidligereUtenlandsopphold:n,saveOnNext:y,saveOnPrevious:t,cancelApplication:u,onContinueLater:h,onStepChange:T,goToPreviousStep:f,stepConfig:r})=>{const a=z({defaultValues:{utenlandsoppholdSiste12Mnd:n.length===0?[q]:n}}),{fields:s,append:d,remove:l}=G({name:"utenlandsoppholdSiste12Mnd",control:a.control}),m=k.useCallback(()=>{d(q)},[d]),p=k.useCallback(o=>{l(o)},[l]);return e.jsx(K,{onCancel:u,onContinueLater:h,steps:r,onStepChange:T,children:e.jsx(W,{formMethods:a,onSubmit:o=>y(o.utenlandsoppholdSiste12Mnd),children:e.jsxs(b,{gap:"10",children:[e.jsx(X,{}),e.jsxs(b,{gap:"10",align:"start",children:[s.map((o,w)=>e.jsxs(k.Fragment,{children:[e.jsx(H,{index:w,fjernOpphold:p}),s.length>1&&e.jsx(J,{})]},o.id)),e.jsx(F,{type:"button",variant:"secondary",size:"small",icon:e.jsx(ee,{"aria-hidden":!0}),onClick:m,children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),e.jsx(Q,{goToPreviousStep:f,saveDataOnPreviousClick:o=>t(o.utenlandsoppholdSiste12Mnd)})]})})})};C.__docgenInfo={description:"",methods:[],displayName:"TidligereUtenlandsoppholdPanel",props:{tidligereUtenlandsopphold:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    fom: string;
    tom: string;
    landkode: string;
}`,signature:{properties:[{key:"fom",value:{name:"string",required:!0}},{key:"tom",value:{name:"string",required:!0}},{key:"landkode",value:{name:"string",required:!0}}]}}],raw:"UtenlandsoppholdPeriode[]"},description:""},saveOnNext:{required:!0,tsType:{name:"signature",type:"function",raw:"(formValues: UtenlandsoppholdPeriode[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    fom: string;
    tom: string;
    landkode: string;
}`,signature:{properties:[{key:"fom",value:{name:"string",required:!0}},{key:"tom",value:{name:"string",required:!0}},{key:"landkode",value:{name:"string",required:!0}}]}}],raw:"UtenlandsoppholdPeriode[]"},name:"formValues"}],return:{name:"void"}}},description:""},saveOnPrevious:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: UtenlandsoppholdPeriode[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    fom: string;
    tom: string;
    landkode: string;
}`,signature:{properties:[{key:"fom",value:{name:"string",required:!0}},{key:"tom",value:{name:"string",required:!0}},{key:"landkode",value:{name:"string",required:!0}}]}}],raw:"UtenlandsoppholdPeriode[]"},name:"data"}],return:{name:"void"}}},description:""},onStepChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: TYPE) => void",signature:{arguments:[{type:{name:"TYPE"},name:"id"}],return:{name:"void"}}},description:""},cancelApplication:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onContinueLater:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},goToPreviousStep:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},stepConfig:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    id: TYPE;
    label: string;
    isSelected: boolean;
}`,signature:{properties:[{key:"id",value:{name:"TYPE",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"isSelected",value:{name:"boolean",required:!0}}]}}],raw:"Array<ProgressStep<TYPE>>"},description:""}}};const le={component:C},v={args:{saveOnNext:g("button-click"),cancelApplication:g("button-click"),goToPreviousStep:g("button-click"),onStepChange:g("button-click"),saveOnPrevious:g("button-click"),tidligereUtenlandsopphold:[],stepConfig:[{id:"UTENLANDSOPPHOLD_PATH",label:"Utenlandsopphold",isSelected:!1},{id:"HAR_BODD_I_UTLANDET_PATH",label:"Har bodd i utlandet",isSelected:!0}]}};var E,L,_;v.parameters={...v.parameters,docs:{...(E=v.parameters)==null?void 0:E.docs,source:{originalSource:`{
  args: {
    saveOnNext: action('button-click'),
    cancelApplication: action('button-click'),
    goToPreviousStep: action('button-click'),
    onStepChange: action('button-click'),
    saveOnPrevious: action('button-click'),
    tidligereUtenlandsopphold: [],
    stepConfig: [{
      id: 'UTENLANDSOPPHOLD_PATH',
      label: 'Utenlandsopphold',
      isSelected: false
    }, {
      id: 'HAR_BODD_I_UTLANDET_PATH',
      label: 'Har bodd i utlandet',
      isSelected: true
    }]
  }
}`,...(_=(L=v.parameters)==null?void 0:L.docs)==null?void 0:_.source}}};const pe=["Default"];export{v as Default,pe as __namedExportsOrder,le as default};
