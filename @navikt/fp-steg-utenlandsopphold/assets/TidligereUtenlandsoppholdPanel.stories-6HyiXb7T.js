import{u as N,R,i as y,a as P,b as j,c as x,d as B,e as M,f as O,g as I,h as V,j as Y,k as $,E as z,S as G,l as g}from"./dateFormValidation-CokUrQZK.js";import{j as e}from"./jsx-runtime-QvZ8i92b.js";import{r as k}from"./index-uubelm5h.js";import{u as K}from"./index-GcLDTaiY.js";import{d as s,e as U,D as A,g as W,V as b,M as c,c as X,f as S,B as F,S as J,b as Q,H as Z}from"./VeiviserPage-Bh2uoaK3.js";import{S as ee}from"./Plus-DbGoa9GV.js";import"./v4-CQkTLCs1.js";import"./index-C4_kIme7.js";import"./index-D3eZ-H7s.js";const H=({index:a,fjernOpphold:D})=>{const t=K(),{watch:u,trigger:h,formState:{isSubmitted:T}}=N(),f=u("utenlandsoppholdSiste12Mnd").filter((p,o)=>o!==a),r=u(`utenlandsoppholdSiste12Mnd.${a}.fom`),n=u(`utenlandsoppholdSiste12Mnd.${a}.tom`),i=s(U).toDate(),d=n?s(n).subtract(1,"days").toDate():s(A).toDate(),l=r&&W(r,U)?s(r).add(1,"days").toDate():s(U).toDate(),m=s(A).toDate();return e.jsxs(b,{gap:"5",align:"start",children:[e.jsx(R,{name:`utenlandsoppholdSiste12Mnd.${a}.landkode`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[y(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd"}))],children:X().map(p=>e.jsx("option",{value:p[0],children:p[1]},p[0]))}),e.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${a}.fom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:i,maxDate:d,validate:[y(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved"})),j(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.FraOgMedDato.GyldigDato"})),x(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.FomErLikTom"}),n),B(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Utenlandsopphold.FørTilDato"}),n),M(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.DateOutsideRangeFom"},{min:S(i),max:S(d)}),i,d),O(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"}),{date:n,isStartDate:!1},f)],onChange:()=>T&&h(),defaultMonth:n?s(n).toDate():void 0}),e.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${a}.tom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:l,maxDate:m,validate:[y(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved"})),j(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.TilOgMedDato.GyldigDato"})),x(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.TomErLikFom"}),r),I(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Utenlandsopphold.EtterFraDato"}),r),M(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.DateOutsideRangeTom"},{min:S(l),max:S(m)}),l,m),O(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"}),{date:r,isStartDate:!0},f)],onChange:()=>T&&h()}),a>0&&e.jsx(F,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(J,{"aria-hidden":!0}),onClick:()=>D(a),children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};H.__docgenInfo={description:"",methods:[],displayName:"TidligereUtenlandsoppholdPanel"};const E={fom:"",tom:"",landkode:""},C=({tidligereUtenlandsopphold:a,saveOnNext:D,saveOnPrevious:t,cancelApplication:u,onContinueLater:h,onStepChange:T,goToPreviousStep:f,stepConfig:r})=>{const n=V({defaultValues:{utenlandsoppholdSiste12Mnd:a.length===0?[E]:a}}),{fields:i,append:d,remove:l}=Y({name:"utenlandsoppholdSiste12Mnd",control:n.control}),m=k.useCallback(()=>{d(E)},[d]),p=k.useCallback(o=>{l(o)},[l]);return e.jsx(Q,{onCancel:u,onContinueLater:h,steps:r,onStepChange:T,children:e.jsx($,{formMethods:n,onSubmit:o=>D(o.utenlandsoppholdSiste12Mnd),children:e.jsxs(b,{gap:"10",children:[e.jsx(z,{}),e.jsxs(b,{gap:"10",align:"start",children:[i.map((o,w)=>e.jsxs(k.Fragment,{children:[e.jsx(H,{index:w,fjernOpphold:p}),i.length>1&&e.jsx(Z,{})]},o.id)),e.jsx(F,{type:"button",variant:"secondary",size:"small",icon:e.jsx(ee,{"aria-hidden":!0}),onClick:m,children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),e.jsx(G,{goToPreviousStep:f,saveDataOnPreviousClick:o=>t(o.utenlandsoppholdSiste12Mnd)})]})})})};C.__docgenInfo={description:"",methods:[],displayName:"TidligereUtenlandsoppholdPanel",props:{tidligereUtenlandsopphold:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    fom: string;
    tom: string;
    landkode: string;
}`,signature:{properties:[{key:"fom",value:{name:"string",required:!0}},{key:"tom",value:{name:"string",required:!0}},{key:"landkode",value:{name:"string",required:!0}}]}}],raw:"UtenlandsoppholdPeriode[]"},description:""},saveOnNext:{required:!0,tsType:{name:"signature",type:"function",raw:"(formValues: UtenlandsoppholdPeriode[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    fom: string;
    tom: string;
    landkode: string;
}`,signature:{properties:[{key:"fom",value:{name:"string",required:!0}},{key:"tom",value:{name:"string",required:!0}},{key:"landkode",value:{name:"string",required:!0}}]}}],raw:"UtenlandsoppholdPeriode[]"},name:"formValues"}],return:{name:"void"}}},description:""},saveOnPrevious:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: UtenlandsoppholdPeriode[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    fom: string;
    tom: string;
    landkode: string;
}`,signature:{properties:[{key:"fom",value:{name:"string",required:!0}},{key:"tom",value:{name:"string",required:!0}},{key:"landkode",value:{name:"string",required:!0}}]}}],raw:"UtenlandsoppholdPeriode[]"},name:"data"}],return:{name:"void"}}},description:""},onStepChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: TYPE) => void",signature:{arguments:[{type:{name:"TYPE"},name:"id"}],return:{name:"void"}}},description:""},cancelApplication:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onContinueLater:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},goToPreviousStep:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},stepConfig:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    id: TYPE;
    label: string;
    isSelected: boolean;
}`,signature:{properties:[{key:"id",value:{name:"TYPE",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"isSelected",value:{name:"boolean",required:!0}}]}}],raw:"Array<ProgressStep<TYPE>>"},description:""}}};const pe={component:C},v={args:{saveOnNext:g("button-click"),cancelApplication:g("button-click"),goToPreviousStep:g("button-click"),onStepChange:g("button-click"),saveOnPrevious:g("button-click"),tidligereUtenlandsopphold:[],stepConfig:[{id:"UTENLANDSOPPHOLD_PATH",label:"Utenlandsopphold",isSelected:!1},{id:"HAR_BODD_I_UTLANDET_PATH",label:"Har bodd i utlandet",isSelected:!0}]}};var L,_,q;v.parameters={...v.parameters,docs:{...(L=v.parameters)==null?void 0:L.docs,source:{originalSource:`{
  args: {
    saveOnNext: action('button-click'),
    cancelApplication: action('button-click'),
    goToPreviousStep: action('button-click'),
    onStepChange: action('button-click'),
    saveOnPrevious: action('button-click'),
    tidligereUtenlandsopphold: [],
    stepConfig: [{
      id: 'UTENLANDSOPPHOLD_PATH',
      label: 'Utenlandsopphold',
      isSelected: false
    }, {
      id: 'HAR_BODD_I_UTLANDET_PATH',
      label: 'Har bodd i utlandet',
      isSelected: true
    }]
  }
}`,...(q=(_=v.parameters)==null?void 0:_.docs)==null?void 0:q.source}}};const ue=["Default"];export{v as Default,ue as __namedExportsOrder,pe as default};
