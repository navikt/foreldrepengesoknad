import{u as N,a as R,d as s,n as D,D as O,o as B,j as e,V as b,R as I,c as V,M as c,e as P,f as S,B as F,S as Y,g as $,h as z,r as k,k as G,l as K,E as W,H as X,m as J}from"./iframe-B4u-7KiW.js";import{i as U,a as x,b as j,c as Q,d as M,e as A,f as Z}from"./dateFormValidation-DluR4kkT.js";import{S as ee}from"./Plus-DnZh3j_L.js";const C=({index:n,fjernOpphold:y})=>{const t=N(),{watch:u,trigger:h,formState:{isSubmitted:T}}=R(),f=u("utenlandsoppholdSiste12Mnd").filter((p,o)=>o!==n),r=u(`utenlandsoppholdSiste12Mnd.${n}.fom`),a=u(`utenlandsoppholdSiste12Mnd.${n}.tom`),i=s(D).toDate(),d=a?s(a).subtract(1,"days").toDate():s(O).toDate(),l=r&&B(r,D)?s(r).add(1,"days").toDate():s(D).toDate(),m=s(O).toDate();return e.jsxs(b,{gap:"5",align:"start",children:[e.jsx(I,{name:`utenlandsoppholdSiste12Mnd.${n}.landkode`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[U(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd"}))],children:V().map(p=>e.jsx("option",{value:p[0],children:p[1]},p[0]))}),e.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${n}.fom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:i,maxDate:d,validate:[U(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved"})),x(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.FraOgMedDato.GyldigDato"})),j(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.FomErLikTom"}),a),Q(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Utenlandsopphold.FørTilDato"}),a),M(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.DateOutsideRangeFom"},{min:S(i),max:S(d)}),i,d),A(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"}),{date:a,isStartDate:!1},f)],onChange:()=>T&&h(),defaultMonth:a?s(a).toDate():void 0}),e.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${n}.tom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:l,maxDate:m,validate:[U(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved"})),x(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.TilOgMedDato.GyldigDato"})),j(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.TomErLikFom"}),r),Z(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Utenlandsopphold.EtterFraDato"}),r),M(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.DateOutsideRangeTom"},{min:S(l),max:S(m)}),l,m),A(t.formatMessage({id:"TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"}),{date:r,isStartDate:!0},f)],onChange:()=>T&&h()}),n>0&&e.jsx(F,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(Y,{"aria-hidden":!0}),onClick:()=>y(n),children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};C.__docgenInfo={description:"",methods:[],displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{required:!0,tsType:{name:"number"},description:""},fjernOpphold:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}}};const _={fom:"",tom:"",landkode:""},H=({tidligereUtenlandsopphold:n,saveOnNext:y,saveOnPrevious:t,cancelApplication:u,onContinueLater:h,onStepChange:T,goToPreviousStep:f,stepConfig:r})=>{const a=$({defaultValues:{utenlandsoppholdSiste12Mnd:n.length===0?[_]:n}}),{fields:i,append:d,remove:l}=z({name:"utenlandsoppholdSiste12Mnd",control:a.control}),m=k.useCallback(()=>{d(_)},[d]),p=k.useCallback(o=>{l(o)},[l]);return e.jsx(G,{onCancel:u,onContinueLater:h,steps:r,onStepChange:T,children:e.jsx(K,{formMethods:a,onSubmit:o=>y(o.utenlandsoppholdSiste12Mnd),children:e.jsxs(b,{gap:"10",children:[e.jsx(W,{}),e.jsxs(b,{gap:"10",align:"start",children:[i.map((o,w)=>e.jsxs(k.Fragment,{children:[e.jsx(C,{index:w,fjernOpphold:p}),i.length>1&&e.jsx(X,{})]},o.id)),e.jsx(F,{type:"button",variant:"secondary",size:"small",icon:e.jsx(ee,{"aria-hidden":!0}),onClick:m,children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),e.jsx(J,{goToPreviousStep:f,saveDataOnPreviousClick:o=>t(o.utenlandsoppholdSiste12Mnd)})]})})})};H.__docgenInfo={description:"",methods:[],displayName:"TidligereUtenlandsoppholdPanel",props:{tidligereUtenlandsopphold:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    fom: string;
    tom: string;
    landkode: string;
}`,signature:{properties:[{key:"fom",value:{name:"string",required:!0}},{key:"tom",value:{name:"string",required:!0}},{key:"landkode",value:{name:"string",required:!0}}]}}],raw:"UtenlandsoppholdPeriode[]"},description:""},saveOnNext:{required:!0,tsType:{name:"signature",type:"function",raw:"(formValues: UtenlandsoppholdPeriode[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    fom: string;
    tom: string;
    landkode: string;
}`,signature:{properties:[{key:"fom",value:{name:"string",required:!0}},{key:"tom",value:{name:"string",required:!0}},{key:"landkode",value:{name:"string",required:!0}}]}}],raw:"UtenlandsoppholdPeriode[]"},name:"formValues"}],return:{name:"void"}}},description:""},saveOnPrevious:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: UtenlandsoppholdPeriode[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    fom: string;
    tom: string;
    landkode: string;
}`,signature:{properties:[{key:"fom",value:{name:"string",required:!0}},{key:"tom",value:{name:"string",required:!0}},{key:"landkode",value:{name:"string",required:!0}}]}}],raw:"UtenlandsoppholdPeriode[]"},name:"data"}],return:{name:"void"}}},description:""},onStepChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: TYPE) => void",signature:{arguments:[{type:{name:"TYPE"},name:"id"}],return:{name:"void"}}},description:""},cancelApplication:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onContinueLater:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},goToPreviousStep:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},stepConfig:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    id: TYPE;
    label: string;
    isSelected: boolean;
}`,signature:{properties:[{key:"id",value:{name:"TYPE",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"isSelected",value:{name:"boolean",required:!0}}]}}],raw:"Array<ProgressStep<TYPE>>"},description:""}}};const{action:g}=__STORYBOOK_MODULE_ACTIONS__,oe={component:H},v={args:{saveOnNext:g("button-click"),cancelApplication:g("button-click"),goToPreviousStep:g("button-click"),onStepChange:g("button-click"),saveOnPrevious:g("button-click"),tidligereUtenlandsopphold:[],stepConfig:[{id:"UTENLANDSOPPHOLD_PATH",label:"Utenlandsopphold",isSelected:!1},{id:"HAR_BODD_I_UTLANDET_PATH",label:"Har bodd i utlandet",isSelected:!0}]}};var E,q,L;v.parameters={...v.parameters,docs:{...(E=v.parameters)==null?void 0:E.docs,source:{originalSource:`{
  args: {
    saveOnNext: action('button-click'),
    cancelApplication: action('button-click'),
    goToPreviousStep: action('button-click'),
    onStepChange: action('button-click'),
    saveOnPrevious: action('button-click'),
    tidligereUtenlandsopphold: [],
    stepConfig: [{
      id: 'UTENLANDSOPPHOLD_PATH',
      label: 'Utenlandsopphold',
      isSelected: false
    }, {
      id: 'HAR_BODD_I_UTLANDET_PATH',
      label: 'Har bodd i utlandet',
      isSelected: true
    }]
  }
}`,...(L=(q=v.parameters)==null?void 0:q.docs)==null?void 0:L.source}}};const re=["Default"];export{v as Default,re as __namedExportsOrder,oe as default};
