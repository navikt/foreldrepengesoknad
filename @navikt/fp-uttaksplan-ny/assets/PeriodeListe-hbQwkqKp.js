import{T as v,z as o,j as l,l as f,r as c,A as y}from"./iframe-B2KMqewF.js";import{n as F,u as h,b as x}from"./TidsperiodeSpørsmål-KkSNJiUt.js";import{i as E,a as T,b as U,c as k,d as A,e as S,f as I,P as u}from"./PeriodeListeItem-2_upATTI.js";const O=(i,s,r)=>!s||!i?!1:!!(l(i.tidsperiode.tom).isBefore(r)&&l(s.tom).isBefore(r)),b=(i,s,r)=>!s||!i?!1:!!(l(i.tidsperiode.fom).isSameOrAfter(r)&&l(s.fom).isSameOrAfter(r)),L=(i,s,r)=>b(i,s,r)||O(i,s,r),w=(i,s)=>{const r=[];if(i.length===0)return r;let t,a,m=!1;return i.forEach((e,g)=>{const n=g+1;let d;if(m){m=!1;return}n<i.length?d=i[n]:d=void 0;const p=L(t,e,s);if(d!==void 0&&(m=v({fom:e.fom,tom:e.tom}).erLik({fom:d.fom,tom:d.tom})),m&&d!==void 0){t={perioder:[{...e},{...d}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)},samtidigUttak:!0},r.push(t),t=void 0,a=void 0,m=!0;return}if(E(e)||T(e)||U(e)){const P=e.forelder;t?a===e.forelder&&p?(t.perioder=[...t.perioder,{...e}],t.tidsperiode.tom=o(e.tom)):t={forelder:P,perioder:[{...e}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)}}:t={forelder:P,perioder:[{...e}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)},samtidigUttak:!!e.samtidigUttak},r.includes(t)||r.push(t),a=e.forelder;return}k(e)&&(t={perioder:[{...e}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)},erPeriodeUtenUttak:!0},r.push(t),a=void 0,t=void 0),A(e)&&(t={perioder:[{...e}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)},erUtsettelse:!0},r.push(t),a=void 0,t=void 0),S(e)&&(t={perioder:[{...e}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)},erHull:!0},r.push(t),a=void 0,t=void 0)}),r},j=({perioder:i,handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t})=>{const a=F(h(x.FAMILIEHENDELSEDATO)),m=w(i,a),e=q(m,a),g=I(i).getPerioderEtterFamiliehendelsesdato(a);return f.jsx("div",{children:m.map((n,d)=>g.length===0?f.jsxs(c.Fragment,{children:[f.jsx(u,{handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:n}),m.length-1===d&&f.jsx(u,{handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:n,erFamiliehendelse:!0})]},`${n.tidsperiode.fom}-${n.tidsperiode.tom}`):f.jsxs(c.Fragment,{children:[e===d&&f.jsx(u,{handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:n,erFamiliehendelse:!0}),f.jsx(u,{handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:n})]},`${n.tidsperiode.fom}-${n.tidsperiode.tom}`))})},q=(i,s)=>i.findIndex(r=>y(r.tidsperiode)&&l(r.tidsperiode.fom).isSameOrAfter(s,"d"));j.__docgenInfo={description:"",methods:[],displayName:"PeriodeListe",props:{perioder:{required:!0,tsType:{name:"Array",elements:[{name:"Planperiode"}],raw:"Planperiode[]"},description:""},handleUpdatePeriode:{required:!0,tsType:{name:"signature",type:"function",raw:"(oppdatertPeriode: Planperiode) => void",signature:{arguments:[{type:{name:"Planperiode"},name:"oppdatertPeriode"}],return:{name:"void"}}},description:""},handleDeletePeriode:{required:!0,tsType:{name:"signature",type:"function",raw:"(slettetPeriode: Planperiode) => void",signature:{arguments:[{type:{name:"Planperiode"},name:"slettetPeriode"}],return:{name:"void"}}},description:""},handleDeletePerioder:{required:!0,tsType:{name:"signature",type:"function",raw:"(slettedePerioder: Planperiode[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"Planperiode"}],raw:"Planperiode[]"},name:"slettedePerioder"}],return:{name:"void"}}},description:""}}};export{j as P};
