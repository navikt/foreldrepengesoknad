import{j as e}from"./jsx-runtime-CLpGMVip.js";import{r as H}from"./index-CR__hKHy.js";import{u as _}from"./index-DVv2q3CG.js";import{V as M,R as b,k as D,l as f,M as i,m as B,c as F,P as V,o as E,p as N,K as J,q as S,r as O,F as T,U as K,S as k,H as G,s as v,t as z}from"./TidsperiodeSpørsmål-DJcQ08KB.js";const W=r=>r.replace(/,/g,".").replace(/\s/g,"").replace(/%/g,""),Q=RegExp(/^[-]?[0-9,.\s]*$/),X=r=>{if(r!=null&&r.length>0&&Q.test(r)){const n=W(r);return(n.match(/\./g)||[]).length>1?void 0:parseFloat(n)}},Y=r=>{if(r===void 0||r===""||Array.isArray(r)||typeof r=="number"&&isNaN(r))return;const n=`${r}`.replace(/,/g,".").trim(),t=Number(n);if(!isNaN(t))return t},Z="_headerContent_ivs7f_1",ee="_header_ivs7f_1",re="_modal_ivs7f_12",P={headerContent:Z,header:ee,modal:re},ne=r=>r!==""&&r!==void 0&&r!==null,te=r=>n=>{const t=X(n);if(!ne(n)||n.trim()==="")return r.formatMessage({id:"leggTilPeriodeModal.stillingsprosent.påkrevd"});if(t===void 0)return r.formatMessage({id:"leggTilPeriodeModal.stillingsprosent.måVæreEtTall"});if(t<0)return r.formatMessage({id:"leggTilPeriodeModal.stillingsprosent.måVæreStørreEnn0"});if(t>100)return r.formatMessage({id:"leggTilPeriodeModal.stillingsprosent.måVæreMindreEnn100"})},q=({formMethods:r})=>{const n=_(),t=r.watch("skalDuJobbe");return e.jsxs(M,{gap:"4",children:[e.jsxs(b,{name:"skalDuJobbe",label:n.formatMessage({id:"uttaksplan.graderingSpørsmål.heading"}),validate:[D(n.formatMessage({id:"leggTilPeriodeModal.skalDuJobbe.påkrevd"}))],children:[e.jsx(f,{value:!0,children:e.jsx(i,{id:"uttaksplan.ja"})}),e.jsx(f,{value:!1,children:e.jsx(i,{id:"uttaksplan.nei"})})]}),t&&e.jsx(B,{className:"w-xs",label:"Hvor mange prosent skal du jobbe?",name:"stillingsprosent",validate:[te(n)]})]})};q.__docgenInfo={description:"",methods:[],displayName:"GraderingSpørsmål",props:{formMethods:{required:!0,tsType:{name:"any"},description:""}}};const I=()=>{const r=_();return e.jsx(M,{gap:"4",children:e.jsxs(b,{name:"årsak",validate:[D(r.formatMessage({id:"leggTilPeriodeModal.hvaVilDuGjøre.påkrevd"}))],children:[e.jsx(f,{value:F.Ferie,children:e.jsx(i,{id:"uttaksplan.oppholdsårsakModal.ferie"})}),e.jsx(f,{value:V.PERIODE_UTEN_UTTAK,children:e.jsx(i,{id:"uttaksplan.oppholdsårsakModal.periodeUtenForeldrepenger"})})]})})};I.__docgenInfo={description:"",methods:[],displayName:"OppholdsÅrsakSpørsmål"};const R=({modalData:r,closeModal:n,setModalData:t,handleAddPeriode:d,erBarnetFødt:m,gjelderAdopsjon:l,isOpphold:s})=>{const{forelder:h,kontoType:j,fom:x,tom:y,årsak:u}=r,p=E({defaultValues:{forelder:h,kontoType:j,fom:x,tom:y,årsak:u}}),$=(a,o)=>{switch(a){case k.Fedrekvote:return T.farMedmor;case k.Mødrekvote:case k.ForeldrepengerFørFødsel:return T.mor;default:return o}},C=a=>{const o=a.fom,c=a.tom,g=a.årsak,U=a.skalDuJobbe,A=a.stillingsprosent;g===F.Ferie?d({fom:o,tom:c,id:`${o} - ${c} - ${g}`,readOnly:!1,forelder:T.farMedmor,utsettelseÅrsak:g}):g===V.PERIODE_UTEN_UTTAK?d({fom:o,tom:c,id:`${o} - ${c} - ${g}`,readOnly:!1,forelder:T.farMedmor,periodeHullÅrsak:g}):d({fom:o,tom:c,id:`${o} - ${c} - ${j}`,readOnly:!1,kontoType:a.kontoType,forelder:$(a.kontoType,a.forelder),gradering:U?{aktivitet:{type:K.ORDINÆRT_ARBEID},arbeidstidprosent:Y(A)}:void 0}),n()};return e.jsx(N,{formMethods:p,onSubmit:C,id:"skjema",children:e.jsxs(M,{gap:"4",children:[s===!1?e.jsxs(e.Fragment,{children:[e.jsx(J,{formMethods:p}),e.jsx(S,{formMethods:p,erBarnetFødt:m,gjelderAdopsjon:l,oppholdsårsak:u}),e.jsx(q,{formMethods:p})]}):null,s?e.jsxs(e.Fragment,{children:[e.jsx(I,{})," ",e.jsx(S,{formMethods:p,erBarnetFødt:m,gjelderAdopsjon:l,oppholdsårsak:u})]}):null,e.jsx(O,{onCancel:n,onGoPreviousStep:()=>{t({...r,currentStep:"step1"})},isFinalStep:!0})]})})};R.__docgenInfo={description:"",methods:[],displayName:"LeggTilPeriodeModalStep",props:{modalData:{required:!0,tsType:{name:"ModalData"},description:""},closeModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},setModalData:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: ModalData) => void",signature:{arguments:[{type:{name:"ModalData"},name:"data"}],return:{name:"void"}}},description:""},erBarnetFødt:{required:!0,tsType:{name:"boolean"},description:""},gjelderAdopsjon:{required:!0,tsType:{name:"boolean"},description:""},handleAddPeriode:{required:!0,tsType:{name:"signature",type:"function",raw:"(nyPeriode: Planperiode) => void",signature:{arguments:[{type:{name:"Planperiode"},name:"nyPeriode"}],return:{name:"void"}}},description:""},isOpphold:{required:!0,tsType:{name:"boolean"},description:""}}};var L=(r=>(r.LEGG_TIL_PERIODE="leggTilPeriode",r.LEGG_TIL_OPPHOLD="leggTilOpphold",r))(L||{});const w=({modalData:r,setModalData:n,closeModal:t})=>{const d=_(),m=E({defaultValues:{hvaVilDuGjøre:r.hvaVilDuGjøre}}),l=s=>{n({...r,hvaVilDuGjøre:s.hvaVilDuGjøre,currentStep:"step2"})};return e.jsxs(e.Fragment,{children:[e.jsx(G,{size:"medium",children:e.jsx(i,{id:"uttaksplan.valgModal.tittel"})}),e.jsx(N,{formMethods:m,onSubmit:l,id:"skjema",children:e.jsxs(M,{gap:"4",children:[e.jsxs(b,{name:"hvaVilDuGjøre",validate:[D(d.formatMessage({id:"leggTilPeriodeModal.hvaVilDuGjøre.påkrevd"}))],children:[e.jsx(f,{value:"leggTilPeriode",children:e.jsx(i,{id:"uttaksplan.valgModal.leggTilPeriode"})}),e.jsx(f,{value:"leggTilOpphold",children:e.jsx(i,{id:"uttaksplan.valgModal.leggTilFerieEllerOpphold"})})]}),e.jsx(O,{onCancel:t,isFinalStep:!1})]})})]})};w.__docgenInfo={description:"",methods:[],displayName:"ValgModalStep",props:{modalData:{required:!0,tsType:{name:"ModalData"},description:""},setModalData:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: ModalData) => void",signature:{arguments:[{type:{name:"ModalData"},name:"data"}],return:{name:"void"}}},description:""},closeModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ae=({closeModal:r,handleAddPeriode:n,isModalOpen:t,erBarnetFødt:d,gjelderAdopsjon:m})=>{const l={hvaVilDuGjøre:void 0,fom:void 0,tom:void 0,currentStep:"step1",kontoType:void 0,forelder:void 0,årsak:void 0},[s,h]=H.useState(l),{currentStep:j}=s,{hvaVilDuGjøre:x}=s,y="legg-til-periode-modal-heading",u=()=>{h(l),r()},p=()=>{switch(j){case"step1":return e.jsx(w,{modalData:s,setModalData:h,closeModal:u});case"step2":return e.jsx(R,{modalData:s,setModalData:h,closeModal:u,erBarnetFødt:d,gjelderAdopsjon:m,handleAddPeriode:n,isOpphold:x===L.LEGG_TIL_OPPHOLD});default:return null}};return e.jsxs(v,{className:P.modal,open:t,"aria-labelledby":y,onClose:u,children:[e.jsx(v.Header,{className:P.header,closeButton:!1,children:e.jsxs("div",{className:P.headerContent,children:[e.jsx(z,{"aria-hidden":!0,width:24,height:24}),e.jsx(G,{size:"medium",id:y,children:e.jsx(i,{id:"uttaksplan.leggTilPeriode"})})]})}),e.jsx(v.Body,{children:p()})]})};ae.__docgenInfo={description:"",methods:[],displayName:"LeggTilPeriodeModal",props:{closeModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void | undefined",signature:{arguments:[],return:{name:"union",raw:"void | undefined",elements:[{name:"void"},{name:"undefined"}]}}},description:""},handleAddPeriode:{required:!0,tsType:{name:"signature",type:"function",raw:"(nyPeriode: Planperiode) => void",signature:{arguments:[{type:{name:"Planperiode"},name:"nyPeriode"}],return:{name:"void"}}},description:""},isModalOpen:{required:!0,tsType:{name:"boolean"},description:""},erBarnetFødt:{required:!0,tsType:{name:"boolean"},description:""},gjelderAdopsjon:{required:!0,tsType:{name:"boolean"},description:""}}};export{ae as L};
