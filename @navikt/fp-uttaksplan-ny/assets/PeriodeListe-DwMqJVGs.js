import{T as v,z as o,j as l,l as f,r as P,A as y}from"./iframe-DzPuuaWY.js";import{n as F,u as h,b as x}from"./TidsperiodeSpørsmål-W0GvlJQR.js";import{i as E,a as j,b as T,c as U,d as k,e as A,f as S,P as u}from"./PeriodeListeItem-wJrgHasm.js";const I=(i,s,r)=>!s||!i?!1:!!(l(i.tidsperiode.tom).isBefore(r)&&l(s.tom).isBefore(r)),O=(i,s,r)=>!s||!i?!1:!!(l(i.tidsperiode.fom).isSameOrAfter(r)&&l(s.fom).isSameOrAfter(r)),b=(i,s,r)=>O(i,s,r)||I(i,s,r),L=(i,s)=>{const r=[];if(i.length===0)return r;let t,d,m=!1;return i.forEach((e,p)=>{const n=p+1;let a;if(m){m=!1;return}n<i.length?a=i[n]:a=void 0;const c=b(t,e,s);if(a!==void 0&&(m=v({fom:e.fom,tom:e.tom}).erLik({fom:a.fom,tom:a.tom})),m&&a!==void 0){t={perioder:[{...e},{...a}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)},samtidigUttak:!0},r.push(t),t=void 0,d=void 0,m=!0;return}if(E(e)||j(e)||T(e)){const g=e.forelder;t?d===e.forelder&&c?(t.perioder=[...t.perioder,{...e}],t.tidsperiode.tom=o(e.tom)):t={forelder:g,perioder:[{...e}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)}}:t={forelder:g,perioder:[{...e}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)},samtidigUttak:!!e.samtidigUttak},r.includes(t)||r.push(t),d=e.forelder;return}U(e)&&(t={perioder:[{...e}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)},erPeriodeUtenUttak:!0},r.push(t),d=void 0,t=void 0),k(e)&&(t={perioder:[{...e}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)},erUtsettelse:!0},r.push(t),d=void 0,t=void 0),A(e)&&(t={perioder:[{...e}],tidsperiode:{fom:o(e.fom),tom:o(e.tom)},erHull:!0},r.push(t),d=void 0,t=void 0)}),r},w=(i,s)=>i.findIndex(r=>y(r.tidsperiode)&&l(r.tidsperiode.fom).isSameOrAfter(s,"d")),q=({perioder:i,handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t})=>{const d=F(h(x.FAMILIEHENDELSEDATO)),m=L(i,d),e=w(m,d),p=S(i).getPerioderEtterFamiliehendelsesdato(d);return f.jsx("div",{children:m.map((n,a)=>p.length===0?f.jsxs(P.Fragment,{children:[f.jsx(u,{handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:n}),m.length-1===a?f.jsx(u,{handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:n,erFamiliehendelse:!0}):null]},`${n.tidsperiode.fom}-${n.tidsperiode.tom}`):f.jsxs(P.Fragment,{children:[e===a?f.jsx(u,{handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:n,erFamiliehendelse:!0}):null,f.jsx(u,{handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:n})]},`${n.tidsperiode.fom}-${n.tidsperiode.tom}`))})};q.__docgenInfo={description:"",methods:[],displayName:"PeriodeListe",props:{perioder:{required:!0,tsType:{name:"Array",elements:[{name:"Planperiode"}],raw:"Planperiode[]"},description:""},handleUpdatePeriode:{required:!0,tsType:{name:"signature",type:"function",raw:"(oppdatertPeriode: Planperiode) => void",signature:{arguments:[{type:{name:"Planperiode"},name:"oppdatertPeriode"}],return:{name:"void"}}},description:""},handleDeletePeriode:{required:!0,tsType:{name:"signature",type:"function",raw:"(slettetPeriode: Planperiode) => void",signature:{arguments:[{type:{name:"Planperiode"},name:"slettetPeriode"}],return:{name:"void"}}},description:""},handleDeletePerioder:{required:!0,tsType:{name:"signature",type:"function",raw:"(slettedePerioder: Planperiode[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"Planperiode"}],raw:"Planperiode[]"},name:"slettedePerioder"}],return:{name:"void"}}},description:""}}};export{q as P};
