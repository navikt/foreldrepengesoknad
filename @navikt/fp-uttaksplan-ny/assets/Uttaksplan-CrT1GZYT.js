import{r as J,u as Z,R as z,j as T,H as $,V as H,i as C,M as E,k as N}from"./iframe-B2515ZH3.js";import{a as B,s as v,l as Q,f as R,b as w,c as j,d as W,u as I,m as h,e as M,h as F,j as k}from"./PeriodeListeItem-DwAeFQUe.js";import{F as V,a as U}from"./TidsperiodeSpørsmål-CQFD3Mk6.js";import{L as ee}from"./LeggTilPeriodePanel-DnX50sJ-.js";import{P as ne}from"./PeriodeListe-cZzYPU5K.js";var re=function(t,r){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.indexOf(e)<0&&(n[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++)r.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i])&&(n[e[i]]=t[e[i]]);return n};const te=J.forwardRef((t,r)=>{var{title:n,titleId:e}=t,i=re(t,["title","titleId"]);let o=Z();return o=n?e||"title-"+o:void 0,z.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":o},i),n?z.createElement("title",{id:o},n):null,z.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.97 2.97a2.871 2.871 0 1 1 4.06 4.06l-1.5 1.5-4.5 4.5a.75.75 0 0 1-.293.181l-4.5 1.5a.75.75 0 0 1-.949-.948l1.5-4.5a.75.75 0 0 1 .182-.293l4.497-4.497.003-.003.003-.003zM16 6.06l-3.844 3.845-.97 2.91 2.909-.97L17.939 8zm3 .88L17.06 5l.97-.97a1.371 1.371 0 0 1 1.94 1.94zM3.25 5c0-.966.784-1.75 1.75-1.75h1.75a.75.75 0 0 1 0 1.5H5a.25.25 0 0 0-.25.25v1.75a.75.75 0 0 1-1.5 0zM9.5 4a.75.75 0 0 1 .75-.75H12a.75.75 0 0 1 0 1.5h-1.75A.75.75 0 0 1 9.5 4M4 9.5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 4 9.5m16 1.75a.75.75 0 0 1 .75.75v1.75a.75.75 0 0 1-1.5 0V12a.75.75 0 0 1 .75-.75M4 16.5a.75.75 0 0 1 .75.75V19c0 .138.112.25.25.25h1.75a.75.75 0 0 1 0 1.5H5A1.75 1.75 0 0 1 3.25 19v-1.75A.75.75 0 0 1 4 16.5m16 0a.75.75 0 0 1 .75.75V19A1.75 1.75 0 0 1 19 20.75h-1.75a.75.75 0 0 1 0-1.5H19a.25.25 0 0 0 .25-.25v-1.75a.75.75 0 0 1 .75-.75M9.5 20a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5A.75.75 0 0 1 9.5 20",clipRule:"evenodd"}))}),ie=(t,r)=>{const n={...t};return delete n[r],n},oe=(t,r)=>{let n=t;for(const e of r)n=ie(n,e);return n},X=({perioder:t,slettetPeriode:r,familiehendelsesdato:n,harAktivitetskravIPeriodeUtenUttak:e,erAdopsjon:i,bareFarHarRett:o,erFarEllerMedmor:l,førsteUttaksdagNesteBarnsSak:s})=>t.reduce((u,c,y)=>{if(y===0&&c.id===r.id)return u;if(c.id===r.id){const d={fom:r.fom,tom:r.tom};return u.push(...B(d,e,n,i,o,l,s)),u}return u.push(c),u},[]),ue=({perioder:t,endretPeriode:r,originalPeriode:n,familiehendelsesdato:e,harAktivitetskravIPeriodeUtenUttak:i,erAdopsjon:o,bareFarHarRett:l,erFarEllerMedmor:s,annenPartsUttak:p,førsteUttaksdagNesteBarnsSak:u})=>{const c=v(X({perioder:t,slettetPeriode:n,familiehendelsesdato:e,harAktivitetskravIPeriodeUtenUttak:i,erAdopsjon:o,bareFarHarRett:l,erFarEllerMedmor:s,førsteUttaksdagNesteBarnsSak:u}),e,u,p);return v(Q({perioder:c,nyPeriode:r,familiehendelsesdato:e,harAktivitetskravIPeriodeUtenUttak:i,erAdopsjon:o,bareFarHarRett:l,erFarEllerMedmor:s,førsteUttaksdagNesteBarnsSak:u}),e,u,p)},A=(t,r,n,e,i,o,l,s,p)=>{let u=v(Q({perioder:t,nyPeriode:r,familiehendelsesdato:n,harAktivitetskravIPeriodeUtenUttak:e,erAdopsjon:i,bareFarHarRett:o,erFarEllerMedmor:l,førsteUttaksdagNesteBarnsSak:p}),n,p);return s&&(u=j(u,s,n,p)),w(u,e,n,i,o,l,p)},G=(t,r,n,e,i,o,l,s,p)=>{const u=r.find(y=>y.id===t.id);let c=R(ue({perioder:r,endretPeriode:t,originalPeriode:u,familiehendelsesdato:n,harAktivitetskravIPeriodeUtenUttak:e,erAdopsjon:i,bareFarHarRett:o,erFarEllerMedmor:l,annenPartsUttak:s,førsteUttaksdagNesteBarnsSak:p}));return s&&(c=w(c,e,n,i,o,l,p),c=j(c,s,n,p)),w(c,e,n,i,o,l,p)},K=(t,r,n,e,i,o,l,s,p)=>{let u=R(v(X({perioder:t,slettetPeriode:r,familiehendelsesdato:n,harAktivitetskravIPeriodeUtenUttak:e,erAdopsjon:i,bareFarHarRett:o,erFarEllerMedmor:l,førsteUttaksdagNesteBarnsSak:p}),n,p));return s&&(u=w(u,e,n,i,o,l,p),u=j(u,s,n,p)),w(u,e,n,i,o,l,p)},S=t=>{if(t)return t===V.mor?V.farMedmor:V.mor},_=({perioder:t,forelder:r,harAktivitetskravIPeriodeUtenUttak:n,familiehendelsedato:e,gjelderAdopsjon:i,bareFarMedmorHarRett:o,erFarEllerMedmor:l,førsteUttaksdagNesteBarnsSak:s,erAnnenPart:p})=>r?p?t.filter(u=>u.forelder===r):w(t.filter(u=>u.forelder===r),n,e,i,o,l,s):p?void 0:t,D=t=>{if(!(!t||t.length===0))return t.filter(r=>W(r))},le=({perioder:t,harAktivitetskravIPeriodeUtenUttak:r,familiehendelsedato:n,gjelderAdopsjon:e,bareFarMedmorHarRett:i,erFarEllerMedmor:o,førsteUttaksdagNesteBarnsSak:l})=>w(t.filter(s=>!W(s)),r,n,e,i,o,l),q=({periode:t,erIPlanleggerModus:r,opprinneligPlan:n,...e})=>{const i=t.forelder,o=S(i),l=r?_({...e,forelder:i,erAnnenPart:!1}):le({...e}),s=r?_({...e,forelder:o,erAnnenPart:!0}):D(n);return{søkersPerioder:l??[],annenpartsPerioder:s}},pe=({perioder:t,familiehendelsedato:r,harAktivitetskravIPeriodeUtenUttak:n,gjelderAdopsjon:e,bareFarMedmorHarRett:i,erFarEllerMedmor:o,førsteUttaksdagNesteBarnsSak:l,opprinneligPlan:s,erIPlanleggerModus:p=!1})=>{const u={perioder:t,harAktivitetskravIPeriodeUtenUttak:n,familiehendelsedato:r,gjelderAdopsjon:e,bareFarMedmorHarRett:i,erFarEllerMedmor:o,førsteUttaksdagNesteBarnsSak:l};return{leggTilPeriode:c=>{const{søkersPerioder:y,annenpartsPerioder:d}=q({...u,erIPlanleggerModus:p,opprinneligPlan:s,periode:c});return A(y,c,r,n,e,i,o,d,l)},leggTilPerioder:c=>{const y=S(c[0].forelder),{søkersPerioder:d,annenpartsPerioder:O}=q({...u,erIPlanleggerModus:p,opprinneligPlan:s,periode:c[0]});let m=[];return c.forEach((a,g)=>{if(g===0)m=A(d,a,r,n,e,i,o,O,l);else{const f=p?_({...u,forelder:y,erAnnenPart:!0}):D(s);m=A(t,a,r,n,e,i,o,f,l)}}),m},oppdaterPeriode:c=>{const{søkersPerioder:y,annenpartsPerioder:d}=q({...u,erIPlanleggerModus:p,opprinneligPlan:s,periode:c});return G(c,y,r,n,e,i,o,d,l)},oppdaterPerioder:c=>{const y=S(c[0].forelder),{søkersPerioder:d,annenpartsPerioder:O}=q({...u,erIPlanleggerModus:p,opprinneligPlan:s,periode:c[0]});let m=[];return c.forEach((a,g)=>{if(g===0)m=G(a,d,r,n,e,i,o,O,l);else{const f=p?_({...u,forelder:y,erAnnenPart:!0}):D(s);m=A(m,a,r,n,e,i,o,f,l)}}),m},slettPeriode:c=>{const{søkersPerioder:y,annenpartsPerioder:d}=q({...u,erIPlanleggerModus:p,opprinneligPlan:s,periode:c});return K(y,c,r,n,e,i,o,d,l)},slettPerioder:c=>{const y=S(c[0].forelder),{søkersPerioder:d,annenpartsPerioder:O}=q({...u,erIPlanleggerModus:p,opprinneligPlan:s,periode:c[0]});let m=[];return c.forEach((a,g)=>{if(g===0)m=K(d,a,r,n,e,i,o,O,l);else{const f=p?_({...u,forelder:y,erAnnenPart:!0}):D(s);m=K(m,a,r,n,e,i,o,f,l)}}),m}}},ce=({familiehendelsedato:t,erFarEllerMedmor:r,navnPåForeldre:n,barn:e,søkersPerioder:i,annenPartsPerioder:o,gjelderAdopsjon:l,bareFarMedmorHarRett:s,harAktivitetskravIPeriodeUtenUttak:p,førsteUttaksdagNesteBarnsSak:u,familiesituasjon:c,handleOnPlanChange:y,modus:d,valgtStønadskonto:O,erAleneOmOmsorg:m,isAllAccordionsOpen:a})=>{const[g,f]=J.useState(!1),x=I({familiehendelsedato:t,erFarEllerMedmor:r,søkersPerioder:i,annenPartsPerioder:o,gjelderAdopsjon:l,bareFarMedmorHarRett:s,harAktivitetskravIPeriodeUtenUttak:p,førsteUttaksdagNesteBarnsSak:u,modus:d}),Y=o?h(o,r,!0,t,d):void 0,b=pe({perioder:x,familiehendelsedato:t,harAktivitetskravIPeriodeUtenUttak:p,gjelderAdopsjon:l,bareFarMedmorHarRett:s,erFarEllerMedmor:r,førsteUttaksdagNesteBarnsSak:u,opprinneligPlan:Y,erIPlanleggerModus:!0});return T.jsxs(U,{initialState:{BARN:e,ER_FAR_ELLER_MEDMOR:r,FAMILIEHENDELSEDATO:t,NAVN_PÅ_FORELDRE:n,UTTAKSPLAN:x,FAMILIESITUASJON:c,MODUS:d,VALGT_STØNADSKONTO:O,ALENE_OM_OMSORG:m},children:[x.length>0&&T.jsx(ne,{perioder:x,handleAddPeriode:P=>{L(b.leggTilPeriode(P),y)},handleUpdatePeriode:P=>{L(b.oppdaterPeriode(P),y)},handleDeletePeriode:P=>{L(b.slettPeriode(P),y)},handleDeletePerioder:P=>{L(b.slettPerioder(P),y)},isAllAccordionsOpen:a}),x.length===0&&T.jsxs($,{gap:"space-12",children:[T.jsx(te,{fontSize:24}),T.jsxs(H,{gap:"space-8",children:[T.jsx(C,{weight:"semibold",size:"large",children:T.jsx(E,{id:"uttaksplan.ingenPerioder.tittel"})}),T.jsx(C,{children:T.jsx(E,{id:"uttaksplan.ingenPerioder.body"})})]})]}),d!=="innsyn"&&!g&&T.jsx(N,{variant:"secondary",onClick:()=>f(!0),children:T.jsx(E,{id:"uttaksplan.leggTilPeriode"})}),g&&T.jsx(ee,{onCancel:()=>f(!1),handleAddPeriode:P=>{L(b.leggTilPeriode(P),y),f(!1)},erBarnetFødt:M(e),gjelderAdopsjon:l})]})},L=(t,r)=>{const n=t.filter(e=>!F(e)&&!k(e));r(n.map(e=>oe(e,["id","periodeHullÅrsak","readOnly","skalIkkeHaUttakFørTermin"])))};ce.__docgenInfo={description:"",methods:[],displayName:"UttaksplanNy",props:{familiehendelsedato:{required:!0,tsType:{name:"string"},description:""},erFarEllerMedmor:{required:!0,tsType:{name:"boolean"},description:""},navnPåForeldre:{required:!0,tsType:{name:"NavnPåForeldre"},description:""},barn:{required:!0,tsType:{name:"union",raw:"FødtBarn | UfødtBarn | AdoptertBarn | AdoptertStebarn | AdoptertAnnetBarn | IkkeUtfyltTypeBarn",elements:[{name:"FødtBarn"},{name:"UfødtBarn"},{name:"AdoptertBarn"},{name:"AdoptertStebarn"},{name:"AdoptertAnnetBarn"},{name:"IkkeUtfyltTypeBarn"}]},description:""},søkersPerioder:{required:!0,tsType:{name:"Array",elements:[{name:"SaksperiodeNy"}],raw:"SaksperiodeNy[]"},description:""},annenPartsPerioder:{required:!1,tsType:{name:"Array",elements:[{name:"SaksperiodeNy"}],raw:"SaksperiodeNy[]"},description:""},gjelderAdopsjon:{required:!0,tsType:{name:"boolean"},description:""},bareFarMedmorHarRett:{required:!0,tsType:{name:"boolean"},description:""},harAktivitetskravIPeriodeUtenUttak:{required:!0,tsType:{name:"boolean"},description:""},førsteUttaksdagNesteBarnsSak:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},familiesituasjon:{required:!0,tsType:{name:"union",raw:"'fødsel' | 'termin' | 'adopsjon'",elements:[{name:"literal",value:"'fødsel'"},{name:"literal",value:"'termin'"},{name:"literal",value:"'adopsjon'"}]},description:""},handleOnPlanChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(perioder: SaksperiodeNy[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"SaksperiodeNy"}],raw:"SaksperiodeNy[]"},name:"perioder"}],return:{name:"void"}}},description:""},modus:{required:!0,tsType:{name:"union",raw:"'søknad' | 'innsyn' | 'planlegger'",elements:[{name:"literal",value:"'søknad'"},{name:"literal",value:"'innsyn'"},{name:"literal",value:"'planlegger'"}]},description:""},valgtStønadskonto:{required:!0,tsType:{name:"signature",type:"object",raw:`{
    kontoer: Stønadskonto[];
    minsteretter: TilgjengeligeMinsterettskontoer;
    tillegg?: TilgjengeligeKontoTillegg;
}`,signature:{properties:[{key:"kontoer",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    konto: StønadskontoType;
    dager: number;
}`,signature:{properties:[{key:"konto",value:{name:"StønadskontoType",required:!0}},{key:"dager",value:{name:"number",required:!0}}]}}],raw:"Stønadskonto[]",required:!0}},{key:"minsteretter",value:{name:"signature",type:"object",raw:`{
    [MinsterettType.farRundtFødsel]: number;
    [MinsterettType.toTette]: number;
}`,signature:{properties:[]},required:!0}},{key:"tillegg",value:{name:"signature",type:"object",raw:`{
    [KontoTilleggType.prematur]: number;
    [KontoTilleggType.flerbarn]: number;
}`,signature:{properties:[]},required:!1}}]}},description:""},erAleneOmOmsorg:{required:!0,tsType:{name:"boolean"},description:""},isAllAccordionsOpen:{required:!1,tsType:{name:"boolean"},description:""}}};export{ce as U};
