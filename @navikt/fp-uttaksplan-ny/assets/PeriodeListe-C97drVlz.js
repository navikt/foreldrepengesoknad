import{T as v,w as n,j as f,l as m,r as p,x as y}from"./iframe-Cm8qu49n.js";import{n as F,u as x,b as E}from"./TidsperiodeSpørsmål-_XMDTGO5.js";import{i as h,a as T,b as U,c as k,d as S,e as I,f as O,P as g}from"./PeriodeListeItem-B1dXL34z.js";const w=(i,s,r)=>!s||!i?!1:!!(f(i.tidsperiode.tom).isBefore(r)&&f(s.tom).isBefore(r)),b=(i,s,r)=>!s||!i?!1:!!(f(i.tidsperiode.fom).isSameOrAfter(r)&&f(s.fom).isSameOrAfter(r)),A=(i,s,r)=>b(i,s,r)||w(i,s,r),L=(i,s)=>{const r=[];if(i.length===0)return r;let t,a,d=!1;return i.forEach((e,P)=>{const u=P+1;let o;if(d){d=!1;return}u<i.length?o=i[u]:o=void 0;const l=A(t,e,s);if(o!==void 0&&(d=v({fom:e.fom,tom:e.tom}).erLik({fom:o.fom,tom:o.tom})),d&&o!==void 0){t={perioder:[{...e},{...o}],tidsperiode:{fom:n(e.fom),tom:n(e.tom)},samtidigUttak:!0},r.push(t),t=void 0,a=void 0,d=!0;return}if(h(e)||T(e)||U(e)){const c=e.forelder;t?a===e.forelder&&l?(t.perioder=[...t.perioder,{...e}],t.tidsperiode.tom=n(e.tom)):t={forelder:c,perioder:[{...e}],tidsperiode:{fom:n(e.fom),tom:n(e.tom)}}:t={forelder:c,perioder:[{...e}],tidsperiode:{fom:n(e.fom),tom:n(e.tom)},samtidigUttak:!!e.samtidigUttak},r.includes(t)||r.push(t),a=e.forelder;return}k(e)&&(t={perioder:[{...e}],tidsperiode:{fom:n(e.fom),tom:n(e.tom)},erPeriodeUtenUttak:!0},r.push(t),a=void 0,t=void 0),S(e)&&(t={perioder:[{...e}],tidsperiode:{fom:n(e.fom),tom:n(e.tom)},erUtsettelse:!0},r.push(t),a=void 0,t=void 0),I(e)&&(t={perioder:[{...e}],tidsperiode:{fom:n(e.fom),tom:n(e.tom)},erHull:!0},r.push(t),a=void 0,t=void 0)}),r},q=({perioder:i,handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,handleAddPeriode:a})=>{const d=F(x(E.FAMILIEHENDELSEDATO)),e=L(i,d),P=j(e,d),u=O(i).getPerioderEtterFamiliehendelsesdato(d);return m.jsx("div",{children:e.map((o,l)=>u.length===0?m.jsxs(p.Fragment,{children:[m.jsx(g,{handleAddPeriode:a,handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:o}),e.length-1===l&&m.jsx(g,{handleAddPeriode:a,handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:o,erFamiliehendelse:!0})]},`${o.tidsperiode.fom}-${o.tidsperiode.tom}`):m.jsxs(p.Fragment,{children:[P===l&&m.jsx(g,{handleAddPeriode:a,handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:o,erFamiliehendelse:!0}),m.jsx(g,{handleAddPeriode:a,handleUpdatePeriode:s,handleDeletePeriode:r,handleDeletePerioder:t,permisjonsperiode:o})]},`${o.tidsperiode.fom}-${o.tidsperiode.tom}`))})},j=(i,s)=>i.findIndex(r=>y(r.tidsperiode)&&f(r.tidsperiode.fom).isSameOrAfter(s,"d"));q.__docgenInfo={description:"",methods:[],displayName:"PeriodeListe",props:{perioder:{required:!0,tsType:{name:"Array",elements:[{name:"Planperiode"}],raw:"Planperiode[]"},description:""},handleAddPeriode:{required:!0,tsType:{name:"signature",type:"function",raw:"(nyPeriode: Planperiode) => void",signature:{arguments:[{type:{name:"Planperiode"},name:"nyPeriode"}],return:{name:"void"}}},description:""},handleUpdatePeriode:{required:!0,tsType:{name:"signature",type:"function",raw:"(oppdatertPeriode: Planperiode) => void",signature:{arguments:[{type:{name:"Planperiode"},name:"oppdatertPeriode"}],return:{name:"void"}}},description:""},handleDeletePeriode:{required:!0,tsType:{name:"signature",type:"function",raw:"(slettetPeriode: Planperiode) => void",signature:{arguments:[{type:{name:"Planperiode"},name:"slettetPeriode"}],return:{name:"void"}}},description:""},handleDeletePerioder:{required:!0,tsType:{name:"signature",type:"function",raw:"(slettedePerioder: Planperiode[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"Planperiode"}],raw:"Planperiode[]"},name:"slettedePerioder"}],return:{name:"void"}}},description:""}}};export{q as P};
