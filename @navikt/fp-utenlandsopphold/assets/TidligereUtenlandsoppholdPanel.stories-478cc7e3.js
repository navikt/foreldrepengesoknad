import{j as e}from"./jsx-runtime-4ca860c5.js";import{a as f}from"./chunk-AY7I2SME-434f1f0a.js";import{r as v}from"./index-61bf1805.js";import"./index-6c64ffe2.js";import{a as B,b as H,d,D as O,c as _,i as R,V as j,S as $,F as c,e as P,f as G,g as b,h as k,j as F,k as w,l as A,m as U,n as C,o as z,B as M,p as K,q as Y,U as W,r as J,s as Q,E as X,t as Z}from"./UtenlandsoppholdIntlProvider-10d4c6fa.js";import"./_baseToString-e22f1573.js";import"./_createSet-31f34d88.js";import{T as ee,P as te}from"./Trash-4bc7f522.js";import"./_commonjsHelpers-de833af9.js";import"./tslib.es6-c380bd65.js";import"./index-2801d3c9.js";import"./index-9d475cdf.js";const ae=({index:a,fjernOpphold:m})=>{const{i18n:t}=B(),{watch:l,trigger:h,formState:{isSubmitted:T}}=H(),S=l("utenlandsoppholdSiste12Mnd").filter((u,D)=>D!==a),o=l(`utenlandsoppholdSiste12Mnd.${a}.fom`),n=l(`utenlandsoppholdSiste12Mnd.${a}.tom`),i=d(O).toDate(),s=n?d(n).subtract(1,"days").toDate():d(_).toDate(),r=o&&R(o,O)?d(o).add(1,"days").toDate():d(O).toDate(),p=d(_).toDate();return e.jsxs(j,{gap:"5",align:"start",children:[e.jsx($,{name:`utenlandsoppholdSiste12Mnd.${a}.landkode`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd"))],children:G().map(u=>e.jsx("option",{value:u[0],children:u[1]},u[0]))}),e.jsx(b,{name:`utenlandsoppholdSiste12Mnd.${a}.fom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:i,maxDate:s,validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved")),k(t("TidligereUtenlandsoppholdSteg.FraOgMedDato.GyldigDato")),F(t("TidligereUtenlandsoppholdSteg.FomErLikTom"),n),w(t("TidligereUtenlandsoppholdSteg.Utenlandsopphold.FørTilDato"),n),A(t("TidligereUtenlandsoppholdSteg.DateOutsideRangeFom",{min:U(i),max:U(s)}),i,s),C(t("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:n,isStartDate:!1},S)],onChange:()=>T&&h(),defaultMonth:n?d(n).toDate():void 0}),e.jsx(b,{name:`utenlandsoppholdSiste12Mnd.${a}.tom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:r,maxDate:p,validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved")),k(t("TidligereUtenlandsoppholdSteg.TilOgMedDato.GyldigDato")),F(t("TidligereUtenlandsoppholdSteg.TomErLikFom"),o),z(t("TidligereUtenlandsoppholdSteg.Utenlandsopphold.EtterFraDato"),o),A(t("TidligereUtenlandsoppholdSteg.DateOutsideRangeTom",{min:U(r),max:U(p)}),r,p),C(t("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:o,isStartDate:!0},S)],onChange:()=>T&&h()}),a>0&&e.jsx(M,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(ee,{"aria-hidden":!0}),onClick:()=>m(a),children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{TidligereUtenlandsoppholdPeriode.displayName="TidligereUtenlandsoppholdPeriode",TidligereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const q={fom:"",tom:"",landkode:""},ne={utenlandsoppholdSiste12Mnd:[q]},y=({tidligereUtenlandsopphold:a,saveOnNext:m,saveOnPrevious:t,cancelApplication:l,onContinueLater:h,goToPreviousStep:T,stepConfig:S,supportsTempSaving:o=!0})=>{const n=v.useMemo(()=>a||ne,[a]),i=K({defaultValues:n}),{fields:s,append:r,remove:p}=Y({name:"utenlandsoppholdSiste12Mnd",control:i.control}),u=v.useCallback(()=>{r(q)},[r]),D=v.useCallback(x=>{p(x)},[p]);return e.jsx(W,{children:e.jsx(J,{onCancel:l,onContinueLater:h,steps:S,supportsTempSaving:o,children:e.jsx(Q,{formMethods:i,onSubmit:m,children:e.jsxs(j,{gap:"10",children:[e.jsx(X,{}),e.jsxs(j,{gap:"10",align:"start",children:[s.map((x,I)=>e.jsxs(v.Fragment,{children:[e.jsx(ae,{index:I,fjernOpphold:D}),s.length>1&&e.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},x.id)),e.jsx(M,{type:"button",variant:"secondary",size:"small",icon:e.jsx(te,{"aria-hidden":!0}),onClick:u,children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),e.jsx(Z,{goToPreviousStep:T,saveDataOnPreviousClick:t})]})})})})},N=y;try{y.displayName="TidligereUtenlandsoppholdPanel",y.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPanel",props:{tidligereUtenlandsopphold:{defaultValue:null,description:"",name:"tidligereUtenlandsopphold",required:!1,type:{name:"UtenlandsoppholdTidligere"}},saveOnNext:{defaultValue:null,description:"",name:"saveOnNext",required:!0,type:{name:"(formValues: UtenlandsoppholdTidligere) => void"}},saveOnPrevious:{defaultValue:null,description:"",name:"saveOnPrevious",required:!0,type:{name:"(data: UtenlandsoppholdTidligere | undefined) => void"}},cancelApplication:{defaultValue:null,description:"",name:"cancelApplication",required:!0,type:{name:"() => void"}},onContinueLater:{defaultValue:null,description:"",name:"onContinueLater",required:!1,type:{name:"(() => void)"}},goToPreviousStep:{defaultValue:null,description:"",name:"goToPreviousStep",required:!0,type:{name:"() => void"}},stepConfig:{defaultValue:null,description:"",name:"stepConfig",required:!0,type:{name:"StepConfig[]"}},supportsTempSaving:{defaultValue:{value:"true"},description:"",name:"supportsTempSaving",required:!1,type:{name:"boolean"}}}}}catch{}const Se={title:"TidligereUtenlandsoppholdPanel",component:N},oe=({saveOnNext:a,saveOnPrevious:m,cancelApplication:t,goToPreviousStep:l})=>e.jsx(N,{saveOnNext:a,saveOnPrevious:m,cancelApplication:t,goToPreviousStep:l,stepConfig:[{id:"1",index:1,label:"Har bodd i utlandet",isSelected:!0}]}),g=oe.bind({});g.args={saveOnNext:f("button-click"),saveOnPrevious:f("button-click"),cancelApplication:f("button-click"),goToPreviousStep:f("button-click")};var L,V,E;g.parameters={...g.parameters,docs:{...(L=g.parameters)==null?void 0:L.docs,source:{originalSource:`({
  saveOnNext,
  saveOnPrevious,
  cancelApplication,
  goToPreviousStep
}) => {
  return <TidligereUtenlandsoppholdPanel saveOnNext={saveOnNext} saveOnPrevious={saveOnPrevious} cancelApplication={cancelApplication} goToPreviousStep={goToPreviousStep} stepConfig={[{
    id: '1',
    index: 1,
    label: 'Har bodd i utlandet',
    isSelected: true
  }]} />;
}`,...(E=(V=g.parameters)==null?void 0:V.docs)==null?void 0:E.source}}};const fe=["Default"];export{g as Default,fe as __namedExportsOrder,Se as default};
//# sourceMappingURL=TidligereUtenlandsoppholdPanel.stories-478cc7e3.js.map
