import{j as e}from"./jsx-runtime-4ca860c5.js";import{a as v}from"./chunk-AY7I2SME-434f1f0a.js";import{r as U}from"./index-61bf1805.js";import"./index-6c64ffe2.js";import{u as B,h as H,j as d,D as O,k as _,m as R,V as j,n as $,b as c,i as P,o as w,p as b,q as k,r as F,s as z,t as A,v as f,w as C,x as G,y as M,T as K,a as Y,z as W,U as J,S as Q,F as X,E as Z,P as ee,g as te}from"./UtenlandsoppholdIntlProvider-729c4c49.js";import"./_baseToString-42dba5cf.js";import"./_createSet-13baae69.js";import"./_commonjsHelpers-de833af9.js";import"./tslib.es6-c380bd65.js";import"./index-9d475cdf.js";import"./index-2801d3c9.js";const ae=({index:a,fjernOpphold:m})=>{const{i18n:t}=B(),{watch:l,trigger:h,formState:{isSubmitted:T}}=H(),S=l("utenlandsoppholdSiste12Mnd").filter((u,D)=>D!==a),o=l(`utenlandsoppholdSiste12Mnd.${a}.fom`),n=l(`utenlandsoppholdSiste12Mnd.${a}.tom`),i=d(O).toDate(),s=n?d(n).subtract(1,"days").toDate():d(_).toDate(),r=o&&R(o,O)?d(o).add(1,"days").toDate():d(O).toDate(),p=d(_).toDate();return e.jsxs(j,{gap:"5",align:"start",children:[e.jsx($,{name:`utenlandsoppholdSiste12Mnd.${a}.landkode`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd"))],children:w().map(u=>e.jsx("option",{value:u[0],children:u[1]},u[0]))}),e.jsx(b,{name:`utenlandsoppholdSiste12Mnd.${a}.fom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:i,maxDate:s,validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved")),k(t("TidligereUtenlandsoppholdSteg.FraOgMedDato.GyldigDato")),F(t("TidligereUtenlandsoppholdSteg.FomErLikTom"),n),z(t("TidligereUtenlandsoppholdSteg.Utenlandsopphold.FørTilDato"),n),A(t("TidligereUtenlandsoppholdSteg.DateOutsideRangeFom",{min:f(i),max:f(s)}),i,s),C(t("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:n,isStartDate:!1},S)],onChange:()=>T&&h(),defaultMonth:n?d(n).toDate():void 0}),e.jsx(b,{name:`utenlandsoppholdSiste12Mnd.${a}.tom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:r,maxDate:p,validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved")),k(t("TidligereUtenlandsoppholdSteg.TilOgMedDato.GyldigDato")),F(t("TidligereUtenlandsoppholdSteg.TomErLikFom"),o),G(t("TidligereUtenlandsoppholdSteg.Utenlandsopphold.EtterFraDato"),o),A(t("TidligereUtenlandsoppholdSteg.DateOutsideRangeTom",{min:f(r),max:f(p)}),r,p),C(t("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:o,isStartDate:!0},S)],onChange:()=>T&&h()}),a>0&&e.jsx(M,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(K,{"aria-hidden":!0}),onClick:()=>m(a),children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{TidligereUtenlandsoppholdPeriode.displayName="TidligereUtenlandsoppholdPeriode",TidligereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const N={fom:"",tom:"",landkode:""},ne={utenlandsoppholdSiste12Mnd:[N]},y=({tidligereUtenlandsopphold:a,saveOnNext:m,saveOnPrevious:t,cancelApplication:l,onContinueLater:h,goToPreviousStep:T,stepConfig:S,supportsTempSaving:o=!0})=>{const n=U.useMemo(()=>a||ne,[a]),i=Y({defaultValues:n}),{fields:s,append:r,remove:p}=W({name:"utenlandsoppholdSiste12Mnd",control:i.control}),u=U.useCallback(()=>{r(N)},[r]),D=U.useCallback(x=>{p(x)},[p]);return e.jsx(J,{children:e.jsx(Q,{onCancel:l,onContinueLater:h,steps:S,useNoTempSavingText:!o,children:e.jsx(X,{formMethods:i,onSubmit:m,children:e.jsxs(j,{gap:"10",children:[e.jsx(Z,{}),e.jsxs(j,{gap:"10",align:"start",children:[s.map((x,I)=>e.jsxs(U.Fragment,{children:[e.jsx(ae,{index:I,fjernOpphold:D}),s.length>1&&e.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},x.id)),e.jsx(M,{type:"button",variant:"secondary",size:"small",icon:e.jsx(ee,{"aria-hidden":!0}),onClick:u,children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),e.jsx(te,{goToPreviousStep:T,saveDataOnPreviousClick:t})]})})})})},q=y;try{y.displayName="TidligereUtenlandsoppholdPanel",y.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPanel",props:{tidligereUtenlandsopphold:{defaultValue:null,description:"",name:"tidligereUtenlandsopphold",required:!1,type:{name:"UtenlandsoppholdTidligere"}},saveOnNext:{defaultValue:null,description:"",name:"saveOnNext",required:!0,type:{name:"(formValues: UtenlandsoppholdTidligere) => void"}},saveOnPrevious:{defaultValue:null,description:"",name:"saveOnPrevious",required:!0,type:{name:"(data: UtenlandsoppholdTidligere | undefined) => void"}},cancelApplication:{defaultValue:null,description:"",name:"cancelApplication",required:!0,type:{name:"() => void"}},onContinueLater:{defaultValue:null,description:"",name:"onContinueLater",required:!1,type:{name:"(() => void)"}},goToPreviousStep:{defaultValue:null,description:"",name:"goToPreviousStep",required:!0,type:{name:"() => void"}},stepConfig:{defaultValue:null,description:"",name:"stepConfig",required:!0,type:{name:"StepConfig[]"}},supportsTempSaving:{defaultValue:{value:"true"},description:"",name:"supportsTempSaving",required:!1,type:{name:"boolean"}}}}}catch{}const Te={title:"TidligereUtenlandsoppholdPanel",component:q},oe=({saveOnNext:a,saveOnPrevious:m,cancelApplication:t,goToPreviousStep:l})=>e.jsx(q,{saveOnNext:a,saveOnPrevious:m,cancelApplication:t,goToPreviousStep:l,stepConfig:[{id:"1",index:1,label:"Har bodd i utlandet",isSelected:!0}]}),g=oe.bind({});g.args={saveOnNext:v("button-click"),saveOnPrevious:v("button-click"),cancelApplication:v("button-click"),goToPreviousStep:v("button-click")};var L,V,E;g.parameters={...g.parameters,docs:{...(L=g.parameters)==null?void 0:L.docs,source:{originalSource:`({
  saveOnNext,
  saveOnPrevious,
  cancelApplication,
  goToPreviousStep
}) => {
  return <TidligereUtenlandsoppholdPanel saveOnNext={saveOnNext} saveOnPrevious={saveOnPrevious} cancelApplication={cancelApplication} goToPreviousStep={goToPreviousStep} stepConfig={[{
    id: '1',
    index: 1,
    label: 'Har bodd i utlandet',
    isSelected: true
  }]} />;
}`,...(E=(V=g.parameters)==null?void 0:V.docs)==null?void 0:E.source}}};const Se=["Default"];export{g as Default,Se as __namedExportsOrder,Te as default};
//# sourceMappingURL=TidligereUtenlandsoppholdPanel.stories-d2d26130.js.map
