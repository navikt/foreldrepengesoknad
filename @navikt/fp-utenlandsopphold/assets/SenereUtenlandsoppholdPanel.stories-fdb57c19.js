import{j as e}from"./jsx-runtime-4ca860c5.js";import{a as v}from"./chunk-AY7I2SME-434f1f0a.js";import{r as U}from"./index-61bf1805.js";import"./index-6c64ffe2.js";import{a as R,b as B,d as s,c as y,v as k,w as $,V as P,S as w,F as h,e as T,f as H,g as _,h as b,j as F,k as z,l as N,m as D,n as L,o as G,B as E,p as K,q as W,U as Y,r as J,s as Q,E as X,t as Z}from"./UtenlandsoppholdIntlProvider-10d4c6fa.js";import"./_baseToString-e22f1573.js";import"./_createSet-31f34d88.js";import{T as ee,P as ne}from"./Trash-4bc7f522.js";import"./_commonjsHelpers-de833af9.js";import"./tslib.es6-c380bd65.js";import"./index-2801d3c9.js";import"./index-9d475cdf.js";const te=({index:t,fjernOpphold:m})=>{const{i18n:n}=R(),{watch:o,trigger:g,formState:{isSubmitted:c}}=B(),f=o("utenlandsoppholdNeste12Mnd").filter((u,x)=>x!==t),a=o(`utenlandsoppholdNeste12Mnd.${t}.fom`),l=o(`utenlandsoppholdNeste12Mnd.${t}.tom`),d=s(y).toDate(),r=l?s(l).subtract(1,"days").toDate():s(k).toDate(),p=a&&$(a)?s(a).add(1,"days").toDate():s(y).toDate(),i=s(k).toDate();return e.jsxs(P,{gap:"5",align:"start",children:[e.jsx(w,{name:`utenlandsoppholdNeste12Mnd.${t}.landkode`,label:e.jsx(h,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Spørsmål.HvilketLandSkalDuBoI"}),validate:[T(n("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuSkalBoIPåkreved"))],children:H().map(u=>e.jsx("option",{value:u[0],children:u[1]},u[0]))}),e.jsx(_,{name:`utenlandsoppholdNeste12Mnd.${t}.fom`,label:e.jsx(h,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:d,maxDate:r,validate:[T(n("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved")),b(n("SenereUtenlandsoppholdSteg.FraOgMedDato.GyldigDato")),F(n("SenereUtenlandsoppholdSteg.FomErLikTom"),l),z(n("SenereUtenlandsoppholdSteg.Utenlandsopphold.FørTilDato"),l),N(n("SenereUtenlandsoppholdSteg.DateOutsideRangeFom",{min:D(d),max:D(r)}),d,r),L(n("SenereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:l,isStartDate:!1},f)],onChange:()=>c&&g()}),e.jsx(_,{name:`utenlandsoppholdNeste12Mnd.${t}.tom`,label:e.jsx(h,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:p,maxDate:i,validate:[T(n("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuSkalBoIPåkreved")),b(n("SenereUtenlandsoppholdSteg.TilOgMedDato.GyldigDato")),F(n("SenereUtenlandsoppholdSteg.TomErLikFom"),a),G(n("SenereUtenlandsoppholdSteg.Utenlandsopphold.EtterFraDato"),a),N(n("SenereUtenlandsoppholdSteg.DateOutsideRangeTom",{min:D(p),max:D(i)}),p,i),L(n("SenereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:a,isStartDate:!0},f)],onChange:()=>c&&g(),defaultMonth:a?s(a).toDate():void 0}),t>0&&e.jsx(E,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(ee,{"aria-hidden":!0}),onClick:()=>m(t),children:e.jsx(h,{id:"SenereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{SenereUtenlandsoppholdPeriode.displayName="SenereUtenlandsoppholdPeriode",SenereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"SenereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const M={fom:"",tom:"",landkode:""},ae={utenlandsoppholdNeste12Mnd:[M]},j=({saveOnNext:t,saveOnPrevious:m,cancelApplication:n,onContinueLater:o,goToPreviousStep:g,senereUtenlandsopphold:c,stepConfig:f,supportsTempSaving:a=!0})=>{const l=U.useMemo(()=>c||ae,[c]),d=K({defaultValues:l}),{fields:r,append:p,remove:i}=W({name:"utenlandsoppholdNeste12Mnd",control:d.control}),u=U.useCallback(()=>{p(M)},[p]),x=U.useCallback(O=>{i(O)},[i]);return e.jsx(Y,{children:e.jsx(J,{onCancel:n,onContinueLater:o,steps:f,supportsTempSaving:a,children:e.jsx(Q,{formMethods:d,onSubmit:t,children:e.jsxs(P,{gap:"10",children:[e.jsx(X,{}),e.jsxs(P,{gap:"10",align:"start",children:[r.map((O,I)=>e.jsxs(U.Fragment,{children:[e.jsx(te,{index:I,fjernOpphold:x}),r.length>1&&e.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},O.id)),e.jsx(E,{type:"button",variant:"secondary",size:"small",icon:e.jsx(ne,{"aria-hidden":!0}),onClick:u,children:e.jsx(h,{id:"SenereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),e.jsx(Z,{goToPreviousStep:g,saveDataOnPreviousClick:m})]})})})})},q=j;try{j.displayName="SenereUtenlandsoppholdPanel",j.__docgenInfo={description:"",displayName:"SenereUtenlandsoppholdPanel",props:{senereUtenlandsopphold:{defaultValue:null,description:"",name:"senereUtenlandsopphold",required:!1,type:{name:"UtenlandsoppholdSenere"}},saveOnNext:{defaultValue:null,description:"",name:"saveOnNext",required:!0,type:{name:"(formValues: UtenlandsoppholdSenere) => void"}},saveOnPrevious:{defaultValue:null,description:"",name:"saveOnPrevious",required:!0,type:{name:"(formValues: UtenlandsoppholdSenere | undefined) => void"}},cancelApplication:{defaultValue:null,description:"",name:"cancelApplication",required:!0,type:{name:"() => void"}},onContinueLater:{defaultValue:null,description:"",name:"onContinueLater",required:!1,type:{name:"(() => void)"}},goToPreviousStep:{defaultValue:null,description:"",name:"goToPreviousStep",required:!0,type:{name:"() => void"}},stepConfig:{defaultValue:null,description:"",name:"stepConfig",required:!0,type:{name:"StepConfig[]"}},supportsTempSaving:{defaultValue:{value:"true"},description:"",name:"supportsTempSaving",required:!1,type:{name:"boolean"}}}}}catch{}const fe={title:"SenereUtenlandsoppholdPanel",component:q},oe=({saveOnNext:t,saveOnPrevious:m,cancelApplication:n,goToPreviousStep:o})=>e.jsx(q,{saveOnNext:t,saveOnPrevious:m,cancelApplication:n,goToPreviousStep:o,stepConfig:[{id:"1",index:1,label:"Skal bo i utlandet",isSelected:!0}]}),S=oe.bind({});S.args={saveOnNext:v("button-click"),saveOnPrevious:v("button-click"),cancelApplication:v("button-click"),goToPreviousStep:v("button-click")};var V,C,A;S.parameters={...S.parameters,docs:{...(V=S.parameters)==null?void 0:V.docs,source:{originalSource:`({
  saveOnNext,
  saveOnPrevious,
  cancelApplication,
  goToPreviousStep
}) => {
  return <SenereUtenlandsoppholdPanel saveOnNext={saveOnNext} saveOnPrevious={saveOnPrevious} cancelApplication={cancelApplication} goToPreviousStep={goToPreviousStep} stepConfig={[{
    id: '1',
    index: 1,
    label: 'Skal bo i utlandet',
    isSelected: true
  }]} />;
}`,...(A=(C=S.parameters)==null?void 0:C.docs)==null?void 0:A.source}}};const ve=["Default"];export{S as Default,ve as __namedExportsOrder,fe as default};
//# sourceMappingURL=SenereUtenlandsoppholdPanel.stories-fdb57c19.js.map
