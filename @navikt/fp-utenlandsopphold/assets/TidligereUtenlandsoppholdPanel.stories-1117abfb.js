import{j as e}from"./jsx-runtime-4ca860c5.js";import{a as v}from"./chunk-AY7I2SME-434f1f0a.js";import{r as f}from"./index-61bf1805.js";import"./index-6c64ffe2.js";import{u as B,h as H,j as u,D as O,k as R,m as _,n as $,V as j,o as w,b as c,i as P,p as z,q as k,r as b,s as F,t as G,v as A,w as U,x as C,y as K,z as M,T as Y,a as W,A as J,U as Q,S as X,F as Z,E as ee,P as te,g as ae}from"./UtenlandsoppholdIntlProvider-d9aa9519.js";import"./_baseToString-42dba5cf.js";import"./_createSet-13baae69.js";import"./_commonjsHelpers-de833af9.js";import"./tslib.es6-c380bd65.js";import"./index-9d475cdf.js";import"./index-2801d3c9.js";const ne=({index:a,fjernOpphold:m})=>{const{i18n:t}=B(),{watch:l,trigger:h,formState:{isSubmitted:T}}=H(),S=l("utenlandsoppholdSiste12Mnd").filter((p,D)=>D!==a),n=l(`utenlandsoppholdSiste12Mnd.${a}.fom`),o=l(`utenlandsoppholdSiste12Mnd.${a}.tom`),d=u(O).toDate(),i=o&&R(o)?u(o).toDate():u(_).toDate(),s=n&&$(O,n)?u(n).toDate():u(O).toDate(),r=u(_).toDate();return e.jsxs(j,{gap:"5",align:"start",children:[e.jsx(w,{name:`utenlandsoppholdSiste12Mnd.${a}.landkode`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd"))],children:z().map(p=>e.jsx("option",{value:p[0],children:p[1]},p[0]))}),e.jsx(k,{name:`utenlandsoppholdSiste12Mnd.${a}.fom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:d,maxDate:i,validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved")),b(t("TidligereUtenlandsoppholdSteg.FraOgMedDato.GyldigDato")),F(t("TidligereUtenlandsoppholdSteg.FomErLikTom"),o),G(t("TidligereUtenlandsoppholdSteg.Utenlandsopphold.FørTilDato"),o),A(t("TidligereUtenlandsoppholdSteg.DateOutsideRangeFom",{min:U(d),max:U(i)}),d,i),C(t("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:o,isStartDate:!1},S)],onChange:()=>T&&h()}),e.jsx(k,{name:`utenlandsoppholdSiste12Mnd.${a}.tom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:s,maxDate:r,validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved")),b(t("TidligereUtenlandsoppholdSteg.TilOgMedDato.GyldigDato")),F(t("TidligereUtenlandsoppholdSteg.TomErLikFom"),n),K(t("TidligereUtenlandsoppholdSteg.Utenlandsopphold.EtterFraDato"),n),A(t("TidligereUtenlandsoppholdSteg.DateOutsideRangeTom",{min:U(s),max:U(r)}),s,r),C(t("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:n,isStartDate:!0},S)],onChange:()=>T&&h()}),a>0&&e.jsx(M,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(Y,{"aria-hidden":!0}),onClick:()=>m(a),children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{TidligereUtenlandsoppholdPeriode.displayName="TidligereUtenlandsoppholdPeriode",TidligereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const N={fom:"",tom:"",landkode:""},oe={utenlandsoppholdSiste12Mnd:[N]},y=({tidligereUtenlandsopphold:a,saveOnNext:m,saveOnPrevious:t,cancelApplication:l,onContinueLater:h,goToPreviousStep:T,stepConfig:S,supportsTempSaving:n=!1})=>{const o=f.useMemo(()=>a||oe,[a]),d=W({defaultValues:o}),{fields:i,append:s,remove:r}=J({name:"utenlandsoppholdSiste12Mnd",control:d.control}),p=f.useCallback(()=>{s(N)},[s]),D=f.useCallback(x=>{r(x)},[r]);return e.jsx(Q,{children:e.jsx(X,{onCancel:l,onContinueLater:h,steps:S,useNoTempSavingText:!n,children:e.jsx(Z,{formMethods:d,onSubmit:m,children:e.jsxs(j,{gap:"10",children:[e.jsx(ee,{}),e.jsxs(j,{gap:"10",align:"start",children:[i.map((x,I)=>e.jsxs(f.Fragment,{children:[e.jsx(ne,{index:I,fjernOpphold:D}),i.length>1&&e.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},x.id)),e.jsx(M,{type:"button",variant:"secondary",size:"small",icon:e.jsx(te,{"aria-hidden":!0}),onClick:p,children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),e.jsx(ae,{goToPreviousStep:T,saveDataOnPreviousClick:t})]})})})})},q=y;try{y.displayName="TidligereUtenlandsoppholdPanel",y.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPanel",props:{tidligereUtenlandsopphold:{defaultValue:null,description:"",name:"tidligereUtenlandsopphold",required:!1,type:{name:"UtenlandsoppholdTidligere"}},saveOnNext:{defaultValue:null,description:"",name:"saveOnNext",required:!0,type:{name:"(formValues: UtenlandsoppholdTidligere) => void"}},saveOnPrevious:{defaultValue:null,description:"",name:"saveOnPrevious",required:!0,type:{name:"(data: UtenlandsoppholdTidligere | undefined) => void"}},cancelApplication:{defaultValue:null,description:"",name:"cancelApplication",required:!0,type:{name:"() => void"}},onContinueLater:{defaultValue:null,description:"",name:"onContinueLater",required:!1,type:{name:"(() => void)"}},goToPreviousStep:{defaultValue:null,description:"",name:"goToPreviousStep",required:!0,type:{name:"() => void"}},stepConfig:{defaultValue:null,description:"",name:"stepConfig",required:!0,type:{name:"StepConfig[]"}},supportsTempSaving:{defaultValue:{value:"false"},description:"",name:"supportsTempSaving",required:!1,type:{name:"boolean"}}}}}catch{}const Se={title:"TidligereUtenlandsoppholdPanel",component:q},le=({saveOnNext:a,saveOnPrevious:m,cancelApplication:t,goToPreviousStep:l})=>e.jsx(q,{saveOnNext:a,saveOnPrevious:m,cancelApplication:t,goToPreviousStep:l,stepConfig:[{id:"1",index:1,label:"Har bodd i utlandet",isSelected:!0}]}),g=le.bind({});g.args={saveOnNext:v("button-click"),saveOnPrevious:v("button-click"),cancelApplication:v("button-click"),goToPreviousStep:v("button-click")};var L,V,E;g.parameters={...g.parameters,docs:{...(L=g.parameters)==null?void 0:L.docs,source:{originalSource:`({
  saveOnNext,
  saveOnPrevious,
  cancelApplication,
  goToPreviousStep
}) => {
  return <TidligereUtenlandsoppholdPanel saveOnNext={saveOnNext} saveOnPrevious={saveOnPrevious} cancelApplication={cancelApplication} goToPreviousStep={goToPreviousStep} stepConfig={[{
    id: '1',
    index: 1,
    label: 'Har bodd i utlandet',
    isSelected: true
  }]} />;
}`,...(E=(V=g.parameters)==null?void 0:V.docs)==null?void 0:E.source}}};const ve=["Default"];export{g as Default,ve as __namedExportsOrder,Se as default};
//# sourceMappingURL=TidligereUtenlandsoppholdPanel.stories-1117abfb.js.map
