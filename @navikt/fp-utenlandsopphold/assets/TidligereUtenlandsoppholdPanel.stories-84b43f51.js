import{j as e}from"./jsx-runtime-ffb262ed.js";import{a as B,b as H,d,w as O,D as _,x as R,V as j,S as $,F as c,e as P,f as w,g as k,h as b,j as F,k as G,l as A,m as v,n as C,o as z,B as M,X as K,p as X,q as Y,U as W,r as J,s as Q,E as Z,t as ee,v as f}from"./UtenlandsoppholdIntlProvider-93bbdf74.js";import{r as U}from"./index-76fb7be0.js";import"./index-b9347d04.js";import"./_baseToString-736b9b82.js";import"./_createSet-59ed3b6c.js";import{P as te}from"./Plus-dfb5471c.js";import"./preview-errors-dde4324f.js";import"./index-356e4a49.js";import"./index-d3ea75b5.js";import"./_commonjsHelpers-de833af9.js";import"./index-9d475cdf.js";const ae=({index:a,fjernOpphold:m})=>{const{i18n:t}=B(),{watch:l,trigger:h,formState:{isSubmitted:T}}=H(),S=l("utenlandsoppholdSiste12Mnd").filter((u,D)=>D!==a),o=l(`utenlandsoppholdSiste12Mnd.${a}.fom`),n=l(`utenlandsoppholdSiste12Mnd.${a}.tom`),i=d(O).toDate(),s=n?d(n).subtract(1,"days").toDate():d(_).toDate(),r=o&&R(o,O)?d(o).add(1,"days").toDate():d(O).toDate(),p=d(_).toDate();return e.jsxs(j,{gap:"5",align:"start",children:[e.jsx($,{name:`utenlandsoppholdSiste12Mnd.${a}.landkode`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd"))],children:w().map(u=>e.jsx("option",{value:u[0],children:u[1]},u[0]))}),e.jsx(k,{name:`utenlandsoppholdSiste12Mnd.${a}.fom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:i,maxDate:s,validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved")),b(t("TidligereUtenlandsoppholdSteg.FraOgMedDato.GyldigDato")),F(t("TidligereUtenlandsoppholdSteg.FomErLikTom"),n),G(t("TidligereUtenlandsoppholdSteg.Utenlandsopphold.FørTilDato"),n),A(t("TidligereUtenlandsoppholdSteg.DateOutsideRangeFom",{min:v(i),max:v(s)}),i,s),C(t("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:n,isStartDate:!1},S)],onChange:()=>T&&h(),defaultMonth:n?d(n).toDate():void 0}),e.jsx(k,{name:`utenlandsoppholdSiste12Mnd.${a}.tom`,label:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:r,maxDate:p,validate:[P(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved")),b(t("TidligereUtenlandsoppholdSteg.TilOgMedDato.GyldigDato")),F(t("TidligereUtenlandsoppholdSteg.TomErLikFom"),o),z(t("TidligereUtenlandsoppholdSteg.Utenlandsopphold.EtterFraDato"),o),A(t("TidligereUtenlandsoppholdSteg.DateOutsideRangeTom",{min:v(r),max:v(p)}),r,p),C(t("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:o,isStartDate:!0},S)],onChange:()=>T&&h()}),a>0&&e.jsx(M,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(K,{"aria-hidden":!0}),onClick:()=>m(a),children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{TidligereUtenlandsoppholdPeriode.displayName="TidligereUtenlandsoppholdPeriode",TidligereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const q={fom:"",tom:"",landkode:""},ne={utenlandsoppholdSiste12Mnd:[q]},y=({tidligereUtenlandsopphold:a,saveOnNext:m,saveOnPrevious:t,cancelApplication:l,onContinueLater:h,goToPreviousStep:T,stepConfig:S,supportsTempSaving:o=!0})=>{const n=U.useMemo(()=>a||ne,[a]),i=X({defaultValues:n}),{fields:s,append:r,remove:p}=Y({name:"utenlandsoppholdSiste12Mnd",control:i.control}),u=U.useCallback(()=>{r(q)},[r]),D=U.useCallback(x=>{p(x)},[p]);return e.jsx(W,{children:e.jsx(J,{onCancel:l,onContinueLater:h,steps:S,supportsTempSaving:o,children:e.jsx(Q,{formMethods:i,onSubmit:m,children:e.jsxs(j,{gap:"10",children:[e.jsx(Z,{}),e.jsxs(j,{gap:"10",align:"start",children:[s.map((x,I)=>e.jsxs(U.Fragment,{children:[e.jsx(ae,{index:I,fjernOpphold:D}),s.length>1&&e.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},x.id)),e.jsx(M,{type:"button",variant:"secondary",size:"small",icon:e.jsx(te,{"aria-hidden":!0}),onClick:u,children:e.jsx(c,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),e.jsx(ee,{goToPreviousStep:T,saveDataOnPreviousClick:t})]})})})})},N=y;try{y.displayName="TidligereUtenlandsoppholdPanel",y.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPanel",props:{tidligereUtenlandsopphold:{defaultValue:null,description:"",name:"tidligereUtenlandsopphold",required:!1,type:{name:"UtenlandsoppholdTidligere"}},saveOnNext:{defaultValue:null,description:"",name:"saveOnNext",required:!0,type:{name:"(formValues: UtenlandsoppholdTidligere) => void"}},saveOnPrevious:{defaultValue:null,description:"",name:"saveOnPrevious",required:!0,type:{name:"(data: UtenlandsoppholdTidligere | undefined) => void"}},cancelApplication:{defaultValue:null,description:"",name:"cancelApplication",required:!0,type:{name:"() => void"}},onContinueLater:{defaultValue:null,description:"",name:"onContinueLater",required:!1,type:{name:"(() => void)"}},goToPreviousStep:{defaultValue:null,description:"",name:"goToPreviousStep",required:!0,type:{name:"() => void"}},stepConfig:{defaultValue:null,description:"",name:"stepConfig",required:!0,type:{name:"StepConfig[]"}},supportsTempSaving:{defaultValue:{value:"true"},description:"",name:"supportsTempSaving",required:!1,type:{name:"boolean"}}}}}catch{}const Se={title:"TidligereUtenlandsoppholdPanel",component:N},oe=({saveOnNext:a,saveOnPrevious:m,cancelApplication:t,goToPreviousStep:l})=>e.jsx(N,{saveOnNext:a,saveOnPrevious:m,cancelApplication:t,goToPreviousStep:l,stepConfig:[{id:"1",index:1,label:"Har bodd i utlandet",isSelected:!0}]}),g=oe.bind({});g.args={saveOnNext:f("button-click"),saveOnPrevious:f("button-click"),cancelApplication:f("button-click"),goToPreviousStep:f("button-click")};var L,V,E;g.parameters={...g.parameters,docs:{...(L=g.parameters)==null?void 0:L.docs,source:{originalSource:`({
  saveOnNext,
  saveOnPrevious,
  cancelApplication,
  goToPreviousStep
}) => {
  return <TidligereUtenlandsoppholdPanel saveOnNext={saveOnNext} saveOnPrevious={saveOnPrevious} cancelApplication={cancelApplication} goToPreviousStep={goToPreviousStep} stepConfig={[{
    id: '1',
    index: 1,
    label: 'Har bodd i utlandet',
    isSelected: true
  }]} />;
}`,...(E=(V=g.parameters)==null?void 0:V.docs)==null?void 0:E.source}}};const ve=["Default"];export{g as Default,ve as __namedExportsOrder,Se as default};
