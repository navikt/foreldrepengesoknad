import{j as e}from"./jsx-runtime-ffb262ed.js";import{a as I,b as B,d,w as x,D as y,x as H,V as P,S as R,F as g,e as O,f as $,g as _,h as k,j as b,k as w,l as F,m as v,n as A,o as G,B as E,X as z,p as K,q as X,U as Y,r as W,s as J,E as Q,t as Z,v as f}from"./UtenlandsoppholdIntlProvider-2e790947.js";import{r as D}from"./index-76fb7be0.js";import"./index-886ea976.js";import"./_baseToString-736b9b82.js";import"./_createSet-b0f363de.js";import{P as ee}from"./Plus-b2d4a9e0.js";import"./preview-errors-dde4324f.js";import"./index-356e4a49.js";import"./index-d3ea75b5.js";import"./_commonjsHelpers-de833af9.js";import"./index-9d475cdf.js";import"./provider-7c0ce87c.js";const te=({index:o,fjernOpphold:u})=>{const{i18n:t}=I(),{watch:l,trigger:T,formState:{isSubmitted:S}}=B(),U=l("utenlandsoppholdSiste12Mnd").filter((p,m)=>m!==o),n=l(`utenlandsoppholdSiste12Mnd.${o}.fom`),a=l(`utenlandsoppholdSiste12Mnd.${o}.tom`),i=d(x).toDate(),s=a?d(a).subtract(1,"days").toDate():d(y).toDate(),r=n&&H(n,x)?d(n).add(1,"days").toDate():d(x).toDate(),c=d(y).toDate();return e.jsxs(P,{gap:"5",align:"start",children:[e.jsx(R,{name:`utenlandsoppholdSiste12Mnd.${o}.landkode`,label:e.jsx(g,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[O(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd"))],children:$().map(p=>e.jsx("option",{value:p[0],children:p[1]},p[0]))}),e.jsx(_,{name:`utenlandsoppholdSiste12Mnd.${o}.fom`,label:e.jsx(g,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:i,maxDate:s,validate:[O(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved")),k(t("TidligereUtenlandsoppholdSteg.FraOgMedDato.GyldigDato")),b(t("TidligereUtenlandsoppholdSteg.FomErLikTom"),a),w(t("TidligereUtenlandsoppholdSteg.Utenlandsopphold.FørTilDato"),a),F(t("TidligereUtenlandsoppholdSteg.DateOutsideRangeFom",{min:v(i),max:v(s)}),i,s),A(t("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:a,isStartDate:!1},U)],onChange:()=>S&&T(),defaultMonth:a?d(a).toDate():void 0}),e.jsx(_,{name:`utenlandsoppholdSiste12Mnd.${o}.tom`,label:e.jsx(g,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:r,maxDate:c,validate:[O(t("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved")),k(t("TidligereUtenlandsoppholdSteg.TilOgMedDato.GyldigDato")),b(t("TidligereUtenlandsoppholdSteg.TomErLikFom"),n),G(t("TidligereUtenlandsoppholdSteg.Utenlandsopphold.EtterFraDato"),n),F(t("TidligereUtenlandsoppholdSteg.DateOutsideRangeTom",{min:v(r),max:v(c)}),r,c),A(t("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"),{date:n,isStartDate:!0},U)],onChange:()=>S&&T()}),o>0&&e.jsx(E,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(z,{"aria-hidden":!0}),onClick:()=>u(o),children:e.jsx(g,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{TidligereUtenlandsoppholdPeriode.displayName="TidligereUtenlandsoppholdPeriode",TidligereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const M={fom:"",tom:"",landkode:""},oe={utenlandsoppholdSiste12Mnd:[M]},j=({tidligereUtenlandsopphold:o,saveOnNext:u,saveOnPrevious:t,cancelApplication:l,onContinueLater:T,goToPreviousStep:S,stepConfig:U})=>{const n=D.useMemo(()=>o||oe,[o]),a=K({defaultValues:n}),{fields:i,append:s,remove:r}=X({name:"utenlandsoppholdSiste12Mnd",control:a.control}),c=D.useCallback(()=>{s(M)},[s]),p=D.useCallback(m=>{r(m)},[r]);return e.jsx(Y,{children:e.jsx(W,{onCancel:l,onContinueLater:T,steps:U,children:e.jsx(J,{formMethods:a,onSubmit:u,children:e.jsxs(P,{gap:"10",children:[e.jsx(Q,{}),e.jsxs(P,{gap:"10",align:"start",children:[i.map((m,q)=>e.jsxs(D.Fragment,{children:[e.jsx(te,{index:q,fjernOpphold:p}),i.length>1&&e.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},m.id)),e.jsx(E,{type:"button",variant:"secondary",size:"small",icon:e.jsx(ee,{"aria-hidden":!0}),onClick:c,children:e.jsx(g,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),e.jsx(Z,{goToPreviousStep:S,saveDataOnPreviousClick:t})]})})})})},N=j;try{j.displayName="TidligereUtenlandsoppholdPanel",j.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPanel",props:{tidligereUtenlandsopphold:{defaultValue:null,description:"",name:"tidligereUtenlandsopphold",required:!1,type:{name:"UtenlandsoppholdTidligere"}},saveOnNext:{defaultValue:null,description:"",name:"saveOnNext",required:!0,type:{name:"(formValues: UtenlandsoppholdTidligere) => void"}},saveOnPrevious:{defaultValue:null,description:"",name:"saveOnPrevious",required:!0,type:{name:"(data: UtenlandsoppholdTidligere | undefined) => void"}},cancelApplication:{defaultValue:null,description:"",name:"cancelApplication",required:!0,type:{name:"() => void"}},onContinueLater:{defaultValue:null,description:"",name:"onContinueLater",required:!1,type:{name:"(() => void)"}},goToPreviousStep:{defaultValue:null,description:"",name:"goToPreviousStep",required:!0,type:{name:"() => void"}},stepConfig:{defaultValue:null,description:"",name:"stepConfig",required:!0,type:{name:"StepConfig[]"}}}}}catch{}const Se={title:"TidligereUtenlandsoppholdPanel",component:N},ae=({saveOnNext:o,saveOnPrevious:u,cancelApplication:t,goToPreviousStep:l})=>e.jsx(N,{saveOnNext:o,saveOnPrevious:u,cancelApplication:t,goToPreviousStep:l,stepConfig:[{id:"1",index:1,label:"Har bodd i utlandet",isSelected:!0}]}),h=ae.bind({});h.args={saveOnNext:f("button-click"),saveOnPrevious:f("button-click"),cancelApplication:f("button-click"),goToPreviousStep:f("button-click")};var C,L,V;h.parameters={...h.parameters,docs:{...(C=h.parameters)==null?void 0:C.docs,source:{originalSource:`({
  saveOnNext,
  saveOnPrevious,
  cancelApplication,
  goToPreviousStep
}) => {
  return <TidligereUtenlandsoppholdPanel saveOnNext={saveOnNext} saveOnPrevious={saveOnPrevious} cancelApplication={cancelApplication} goToPreviousStep={goToPreviousStep} stepConfig={[{
    id: '1',
    index: 1,
    label: 'Har bodd i utlandet',
    isSelected: true
  }]} />;
}`,...(V=(L=h.parameters)==null?void 0:L.docs)==null?void 0:V.source}}};const Ue=["Default"];export{h as Default,Ue as __namedExportsOrder,Se as default};
