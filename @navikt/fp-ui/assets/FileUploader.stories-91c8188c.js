import{j as n}from"./jsx-runtime-ffb262ed.js";import{r,R as Y}from"./index-76fb7be0.js";import{u as J}from"./index-b9347d04.js";import{c as Q,b as W,d as ee,a as te,e as ne,X as ae,g as C}from"./fridagerUtils-b1adacbf.js";import{u as X,F as m,V as R,L as le,U as se}from"./UiIntlProvider-8055f7f4.js";import"./_baseToString-736b9b82.js";import"./_createSet-e8529459.js";import{A as re}from"./Alert-370236ec.js";import"./_commonjsHelpers-de833af9.js";import"./index-9d475cdf.js";import"./index-d3ea75b5.js";var T=(e=>(e.ANNET="I000060",e.TERMINBEKREFTELSE="I000062",e.OMSORGSOVERTAKELSE="I000042",e.BEKREFTELSE_DELTAR_KVALIFISERINGSPROGRAM="I000051",e.BEKREFTELSE_FRA_ARBEIDSGIVER="I000065",e.BEKREFTELSE_FRA_STUDIESTED="I000061",e.BEKREFTELSE_PÅ_AVTALT_FERIE="I000036",e.DOK_AV_ALENEOMSORG="I000110",e.DOK_BEGRUNNELSE_SØKE_TILBAKE_I_TID="I000111",e.DOK_DELTAKELSE_I_INTRODUKSJONSPROGRAMMET="I000112",e.DOK_INNLEGGELSE="I000037",e.DOK_MILITÆR_SILVIL_TJENESTE="I000039",e.DOK_MORS_UTDANNING_ARBEID_SYKDOM="I000038",e.DOK_OVERFØRING_FOR_SYK="I000023",e.ETTERLØNN_ELLER_SLUTTVEDERLAG="I000044",e.FØDSELSATTEST="I000063",e.INNTEKTSOPPLYSNINGER_FRILANS_ELLER_SELVSTENDIG="I000007",e.SKJEMA_FOR_TILRETTELEGGING_OG_OMPLASSERING="I000109",e.TILBAKEBETALING="I000114",e.HV_ØVELSE="I000116",e.NAV_TILTAK="I000117",e.RESULTATREGNSKAP="I000032",e.KOPI_SKATTEMELDING="I000066",e))(T||{}),O=(e=>(e.OMSORGSOVERTAKELSE="omsorgsovertakelse",e.ADOPSJONSVEDTAK="adopsjonsvedtak",e.TERMINBEKREFTELSE="terminbekreftelse",e.FØDSELSATTEST="fødselsattest",e.ANNEN_INNTEKT="anneninntektDokumentasjon",e.UTSETTELSE_SYKDOM="utsettelseSykdomUttaksplan",e.MORS_AKTIVITET_DOKUMENTASJON="morsaktivitetdokumentasjon",e.OVERFØRING_KVOTE="dokumentasjonOverføringAvKvote",e.ALENEOMSORG="dokumentasjonAvAleneomsorg",e.SEN_ENDRING="senEndring",e.HV_ØVELSE="hvØvelse",e.NAV_TILTAK="navTiltak",e.TILBAKEBETALING="tilbakebetaling",e))(O||{}),ie=globalThis&&globalThis.__rest||function(e,l){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)l.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(a[t[s]]=e[t[s]]);return a};const oe=r.forwardRef((e,l)=>{var{title:a,titleId:t}=e,s=ie(e,["title","titleId"]);let i=X();return i=a?t||"title-"+i:void 0,r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:l,"aria-labelledby":i},s),a?r.createElement("title",{id:i},a):null,r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.25 4.5c0-.69.56-1.25 1.25-1.25H14a.75.75 0 0 1 .53.22l4 4c.141.14.22.331.22.53v11.5c0 .69-.56 1.25-1.25 1.25h-11c-.69 0-1.25-.56-1.25-1.25v-15Zm9.25 4.25c-.69 0-1.25-.56-1.25-1.25V4.75h-6.5v14.5h10.5V8.75H14.5Zm.25-2.94 1.44 1.44h-1.44V5.81Zm-.22 7.22a.75.75 0 1 0-1.06-1.06l-1.97 1.97-.97-.97a.75.75 0 1 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.06 0l2.5-2.5Z",fill:"currentColor"}))}),ce=oe;var de=globalThis&&globalThis.__rest||function(e,l){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)l.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(a[t[s]]=e[t[s]]);return a};const ue=r.forwardRef((e,l)=>{var{title:a,titleId:t}=e,s=de(e,["title","titleId"]);let i=X();return i=a?t||"title-"+i:void 0,r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:l,"aria-labelledby":i},s),a?r.createElement("title",{id:i},a):null,r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.97 9.03a.75.75 0 0 0 1.06 0l3.22-3.22v8.69a.75.75 0 0 0 1.5 0V5.81l3.22 3.22a.75.75 0 1 0 1.06-1.06l-4.5-4.5a.75.75 0 0 0-1.06 0l-4.5 4.5a.75.75 0 0 0 0 1.06ZM4.75 15.5a.75.75 0 0 0-1.5 0V19c0 .966.784 1.75 1.75 1.75h14A1.75 1.75 0 0 0 20.75 19v-3.5a.75.75 0 0 0-1.5 0V19a.25.25 0 0 1-.25.25H5a.25.25 0 0 1-.25-.25v-3.5Z",fill:"currentColor"}))}),pe=ue,me=()=>Y.createElement("div",{className:"navds-stack__spacer"});const y=({multiple:e,accept:l,onFilesSelect:a,hasUplodedAttachements:t})=>{const s=W("fileInput"),i=r.useCallback(p=>{if(p.target.files){const h=Array.from(p.target.files);a(h),p.target.value=""}},[a]),o=r.useRef(null),E=r.useCallback(()=>{o.current&&o.current.click()},[]);return n.jsxs(n.Fragment,{children:[n.jsx("input",{ref:o,className:s.element("input"),type:"file",accept:l,onChange:p=>i(p),multiple:e===!0,"data-testid":"file-upload"}),n.jsxs(Q,{className:s.element("upload_button"),variant:t?"secondary":"primary",type:"button",onClick:E,icon:n.jsx(pe,{}),iconPosition:"right",children:[t&&n.jsx(m,{id:"FileInput.Vedlegg.Lastoppknapp.Flere"}),!t&&n.jsx(m,{id:"FileInput.Vedlegg.Lastoppknapp"})]})]})};try{y.displayName="FileInput",y.__docgenInfo={description:"",displayName:"FileInput",props:{onFilesSelect:{defaultValue:null,description:"",name:"onFilesSelect",required:!0,type:{name:"(files: File[]) => void"}},multiple:{defaultValue:null,description:"",name:"multiple",required:!0,type:{name:"boolean"}},accept:{defaultValue:null,description:"",name:"accept",required:!0,type:{name:"string"}},hasUplodedAttachements:{defaultValue:null,description:"",name:"hasUplodedAttachements",required:!0,type:{name:"boolean"}}}}}catch{}const Ee=()=>{const e=J();return{i18n:(l,a)=>e.formatMessage({id:l},a)}},u=()=>Math.floor((1+Math.random())*65536).toString().substring(1),fe=()=>`${u()}${u()}-${u()}-${u()}-${u()}-${u()}${u()}${u()}`,Ie=e=>ee(e,{unitSeparator:" ",thousandsSeparator:" ",decimalPlaces:1,fixedDecimals:!1}),ge=()=>"V".concat(fe().replace(/-/g,"")),Ae=(e,l,a)=>({id:ge(),file:e,filename:e.name,filesize:e.size,uploaded:!1,pending:!1,type:l,skjemanummer:a});const F=({attachment:e,showFileSize:l,onDelete:a})=>{const{i18n:t}=Ee();return n.jsx("div",{className:"attachmentPanel",children:n.jsxs(te,{gap:"4",children:[e.pending&&n.jsx(ne,{type:"S"}),!e.pending&&n.jsx(ce,{width:24,height:24}),n.jsxs(R,{gap:"1",children:[e.url?n.jsx(le,{href:e.url,target:"_blank",children:e.filename}):n.jsx("span",{children:e.filename}),l&&n.jsx("div",{children:Ie(e.filesize)})]}),a&&n.jsxs(n.Fragment,{children:[n.jsx(me,{}),n.jsx(ae,{tabIndex:0,onClick:()=>a(e),onKeyDown:s=>{(s.code==="Space"||s.code==="Enter")&&a(e)},height:24,width:24,cursor:"pointer","aria-label":t("Attachment.Vedlegg.Slett",{navn:e.filename})})]})]})})};try{F.displayName="AttachmentInfo",F.__docgenInfo={description:"",displayName:"AttachmentInfo",props:{attachment:{defaultValue:null,description:"",name:"attachment",required:!0,type:{name:"Attachment"}},showFileSize:{defaultValue:null,description:"",name:"showFileSize",required:!1,type:{name:"boolean"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((file: Attachment) => void)"}}}}}catch{}const V=e=>{const{attachments:l,showFileSize:a,onDelete:t}=e;return n.jsx(n.Fragment,{children:l.length>0&&n.jsx(R,{gap:"2",children:l.map(s=>n.jsx(r.Fragment,{children:n.jsx(F,{attachment:s,onDelete:t,showFileSize:a})},C()))})})};try{V.displayName="AttachmentList",V.__docgenInfo={description:"",displayName:"AttachmentList",props:{attachments:{defaultValue:null,description:"",name:"attachments",required:!0,type:{name:"Attachment[]"}},showFileSize:{defaultValue:null,description:"",name:"showFileSize",required:!1,type:{name:"boolean"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((file: Attachment) => void)"}}}}}catch{}var d=(e=>(e.GENERAL="GENERAL",e.TIMEOUT="TIMEOUT",e.VALID_EXTENSION="VALID_EXTENSION",e.MAX_SIZE="MAX_SIZE",e))(d||{});const he=16777,x=({failedAttachment:e,onDelete:l})=>n.jsxs(re,{variant:"warning",closeButton:!0,onClose:()=>l(e),children:[e.error===d.GENERAL&&n.jsx(m,{id:"FailedAttachment.Vedlegg.Feilmelding.Opplasting.Feilet",values:{filename:e.filename}}),e.error===d.TIMEOUT&&n.jsx(m,{id:"FailedAttachment.Vedlegg.Feilmelding.Timeout",values:{filename:e.filename}}),e.error===d.MAX_SIZE&&n.jsx(m,{id:"FailedAttachment.Vedlegg.Feilmelding.Ugyldig.Størrelse",values:{filename:e.filename,maxStørrelse:he}}),e.error===d.VALID_EXTENSION&&n.jsx(m,{id:"FailedAttachment.Vedlegg.Feilmelding.Ugyldig.Type",values:{filename:e.filename}})]});try{x.displayName="FailedAttachment",x.__docgenInfo={description:"",displayName:"FailedAttachment",props:{failedAttachment:{defaultValue:null,description:"",name:"failedAttachment",required:!0,type:{name:"Attachment"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"(file: Attachment) => void"}}}}}catch{}const b=e=>{const{failedAttachments:l,onDelete:a}=e;return n.jsx(n.Fragment,{children:l.length>0&&n.jsx(R,{gap:"2",children:l.map(t=>n.jsx(r.Fragment,{children:n.jsx(x,{failedAttachment:t,onDelete:a})},C()))})})};try{b.displayName="FailedAttachmentList",b.__docgenInfo={description:"",displayName:"FailedAttachmentList",props:{failedAttachments:{defaultValue:null,description:"",name:"failedAttachments",required:!0,type:{name:"Attachment[]"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"(file: Attachment) => void"}}}}}catch{}const $=[".pdf",".jpeg",".jpg",".png"],_e=16777,ve=.0009765625,Se=(e,l,a)=>{const t=Ae(e,l,a);return t.pending=!0,t},Te=e=>{const l=e.split(".").pop();return l?$.includes(`.${l.toLowerCase()}`):!1},Oe=e=>e*ve<=_e,Re=async(e,l)=>{var a;if(!Te(e.file.name)){e.pending=!1,e.error=d.VALID_EXTENSION;return}if(!Oe(e.filesize)){e.pending=!1,e.error=d.MAX_SIZE;return}try{const t=await l(e);e.pending=!1,e.url=t.headers.location,e.uploaded=!0,e.uuid=t.data}catch(t){e.pending=!1,((a=t==null?void 0:t.response)==null?void 0:a.status)===408?e.error=d.TIMEOUT:e.error=d.GENERAL}},Le=[],K=({existingAttachments:e=Le,updateAttachments:l,attachmentType:a,skjemanummer:t,saveAttachment:s,multiple:i=!0})=>{const[o,E]=r.useState(e);r.useEffect(()=>{l(o.filter(c=>!c.error&&c.pending===!1))},[o]);const p=r.useCallback(c=>{const L=async I=>{for(const _ of I)await Re(_,s),E(N=>N.map(v=>v.filename===_.filename?_:v))},f=c.map(I=>Se(I,a,t));E(I=>I.filter(N=>!f.some(v=>v.filename===N.filename)).concat(f)),L(f)},[a,t,s]),h=r.useCallback(c=>{E(L=>L.filter(f=>f.filename!==c.filename))},[]),j=r.useMemo(()=>o.filter(c=>!c.error),[o]),H=r.useMemo(()=>o.filter(c=>!!c.error),[o]);return n.jsx(se,{children:n.jsxs(R,{gap:"6",children:[n.jsx(V,{attachments:j,showFileSize:!0,onDelete:h}),n.jsx(y,{accept:$.join(", "),onFilesSelect:p,hasUplodedAttachements:j.length>0,multiple:i}),n.jsx(b,{failedAttachments:H,onDelete:h})]})})},Z=K;try{K.displayName="FileUploader",K.__docgenInfo={description:"",displayName:"FileUploader",props:{updateAttachments:{defaultValue:null,description:"",name:"updateAttachments",required:!0,type:{name:"(attachments: Attachment[]) => void"}},attachmentType:{defaultValue:null,description:"",name:"attachmentType",required:!0,type:{name:"enum",value:[{value:'"omsorgsovertakelse"'},{value:'"adopsjonsvedtak"'},{value:'"terminbekreftelse"'},{value:'"fødselsattest"'},{value:'"anneninntektDokumentasjon"'},{value:'"utsettelseSykdomUttaksplan"'},{value:'"morsaktivitetdokumentasjon"'},{value:'"dokumentasjonOverføringAvKvote"'},{value:'"dokumentasjonAvAleneomsorg"'},{value:'"senEndring"'},{value:'"hvØvelse"'},{value:'"navTiltak"'},{value:'"tilbakebetaling"'}]}},skjemanummer:{defaultValue:null,description:"",name:"skjemanummer",required:!0,type:{name:"enum",value:[{value:'"I000060"'},{value:'"I000062"'},{value:'"I000042"'},{value:'"I000051"'},{value:'"I000065"'},{value:'"I000061"'},{value:'"I000036"'},{value:'"I000110"'},{value:'"I000111"'},{value:'"I000112"'},{value:'"I000037"'},{value:'"I000039"'},{value:'"I000038"'},{value:'"I000023"'},{value:'"I000044"'},{value:'"I000063"'},{value:'"I000007"'},{value:'"I000109"'},{value:'"I000114"'},{value:'"I000116"'},{value:'"I000117"'},{value:'"I000032"'},{value:'"I000066"'}]}},existingAttachments:{defaultValue:{value:"[] as Attachment[]"},description:"",name:"existingAttachments",required:!1,type:{name:"Attachment[]"}},saveAttachment:{defaultValue:null,description:"",name:"saveAttachment",required:!0,type:{name:"SaveAttachment"}},multiple:{defaultValue:{value:"true"},description:"",name:"multiple",required:!1,type:{name:"boolean"}}}}}catch{}const ke={title:"FileUploader",component:Z},M=({saveAttachment:e,existingAttachments:l})=>n.jsx(Z,{attachmentType:O.OMSORGSOVERTAKELSE,skjemanummer:T.OMSORGSOVERTAKELSE,saveAttachment:e,existingAttachments:l,updateAttachments:()=>{}}),g=M.bind({});g.args={existingAttachments:[{id:"1",filename:"Dette er en fil som er lastet opp.jpg",filesize:234,file:{},pending:!1,uploaded:!0,type:O.TERMINBEKREFTELSE,skjemanummer:T.TERMINBEKREFTELSE},{id:"2",filename:"Dette er en fil som holder på å bli lastet opp.jpg",filesize:2344,file:{},pending:!0,uploaded:!1,type:O.TERMINBEKREFTELSE,skjemanummer:T.TERMINBEKREFTELSE}]};const A=M.bind({});A.args={saveAttachment:()=>Promise.resolve({headers:{location:""},data:"test"})};const S=M.bind({});var D,G,k;g.parameters={...g.parameters,docs:{...(D=g.parameters)==null?void 0:D.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(k=(G=g.parameters)==null?void 0:G.docs)==null?void 0:k.source}}};var w,U,B;A.parameters={...A.parameters,docs:{...(w=A.parameters)==null?void 0:w.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(B=(U=A.parameters)==null?void 0:U.docs)==null?void 0:B.source}}};var P,q,z;S.parameters={...S.parameters,docs:{...(P=S.parameters)==null?void 0:P.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(z=(q=S.parameters)==null?void 0:q.docs)==null?void 0:z.source}}};const we=["VisEksisterendeVedlegg","OpplastingOk","OpplastingFeiler"];export{S as OpplastingFeiler,A as OpplastingOk,g as VisEksisterendeVedlegg,we as __namedExportsOrder,ke as default};
