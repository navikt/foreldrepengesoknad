import{j as a}from"./jsx-runtime-ffb262ed.js";import{r as i,R as H}from"./index-76fb7be0.js";import{u as z,F as I,V as L,L as J,U as Q}from"./UiIntlProvider-c599dd8b.js";import{d as W,c as ee,b as te,a as ae,e as ne,X as le,g as X}from"./fridagerUtils-51e2b68b.js";import{u as se}from"./index-886ea976.js";import"./_baseToString-736b9b82.js";import"./_createSet-e8529459.js";import{A as ie}from"./Alert-e1d25c95.js";import"./_commonjsHelpers-de833af9.js";import"./provider-7c0ce87c.js";import"./index-9d475cdf.js";import"./index-d3ea75b5.js";var S=(e=>(e.DEPRECATED_TERMINBEKREFTELSE="I000062",e.TERMINBEKREFTELSE="I000141",e.OMSORGSOVERTAKELSE="I000042",e.DEPRECATED_BEKREFTELSE_DELTAR_KVALIFISERINGSPROGRAM="I000051",e.BEKREFTELSE_DELTAR_KVALIFISERINGSPROGRAM="I000133",e.BEKREFTELSE_FRA_ARBEIDSGIVER="I000065",e.BEKREFTELSE_FRA_STUDIESTED="I000061",e.BEKREFTELSE_PÅ_AVTALT_FERIE="I000036",e.DOK_AV_ALENEOMSORG="I000110",e.DEPRECATED_DOK_BEGRUNNELSE_SØKE_TILBAKE_I_TID="I000111",e.DOK_BEGRUNNELSE_SØKE_TILBAKE_I_TID="I000118",e.DOK_DELTAKELSE_I_INTRODUKSJONSPROGRAMMET="I000112",e.DOK_INNLEGGELSE="I000037",e.DOK_INNLEGGELSE_BARN="I000124",e.DOK_INNLEGGELSE_MOR="I000120",e.DOK_INNLEGGELSE_FAR="I000122",e.DOK_SYKDOM_MOR="I000121",e.DOK_SYKDOM_FAR="I000123",e.DOK_UTDANNING_OG_ARBEID_MOR="I000130",e.DOK_UTDANNING_MOR="I000131",e.DOK_ARBEID_MOR="I000132",e.DOK_MILITÆR_SILVIL_TJENESTE="I000039",e.DOK_MORS_UTDANNING_ARBEID_SYKDOM="I000038",e.DOK_OVERFØRING_FOR_SYK="I000023",e.ETTERLØNN_ELLER_SLUTTVEDERLAG="I000044",e.FØDSELSATTEST="I000063",e.INNTEKTSOPPLYSNINGER_FRILANS_ELLER_SELVSTENDIG="I000007",e.SKJEMA_FOR_TILRETTELEGGING_OG_OMPLASSERING="I000109",e.DEPRECATED_TILBAKEBETALING="I000114",e.TILBAKEBETALING="I000119",e.HV_ØVELSE="I000116",e.NAV_TILTAK="I000117",e.RESULTATREGNSKAP="I000032",e.DEPRECATED_KOPI_SKATTEMELDING="I000066",e.SKATTEMELDING="I000140",e.ANNET="I000060",e))(S||{}),R=(e=>(e.OMSORGSOVERTAKELSE="omsorgsovertakelse",e.ADOPSJONSVEDTAK="adopsjonsvedtak",e.TERMINBEKREFTELSE="terminbekreftelse",e.FØDSELSATTEST="fødselsattest",e.ANNEN_INNTEKT="anneninntektDokumentasjon",e.UTSETTELSE_SYKDOM="utsettelseSykdomUttaksplan",e.MORS_AKTIVITET_DOKUMENTASJON="morsaktivitetdokumentasjon",e.OVERFØRING_KVOTE="dokumentasjonOverføringAvKvote",e.ALENEOMSORG="dokumentasjonAvAleneomsorg",e.HV_ØVELSE="hvØvelse",e.NAV_TILTAK="navTiltak",e.TILBAKEBETALING="tilbakebetaling",e.TILRETTELEGGING="tilrettelegging",e))(R||{}),re=globalThis&&globalThis.__rest||function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)l.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(n[t[s]]=e[t[s]]);return n};const oe=i.forwardRef((e,l)=>{var{title:n,titleId:t}=e,s=re(e,["title","titleId"]);let r=z();return r=n?t||"title-"+r:void 0,i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:l,"aria-labelledby":r},s),n?i.createElement("title",{id:r},n):null,i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.25 4.5c0-.69.56-1.25 1.25-1.25H14a.75.75 0 0 1 .53.22l4 4c.141.14.22.331.22.53v11.5c0 .69-.56 1.25-1.25 1.25h-11c-.69 0-1.25-.56-1.25-1.25v-15Zm9.25 4.25c-.69 0-1.25-.56-1.25-1.25V4.75h-6.5v14.5h10.5V8.75H14.5Zm.25-2.94 1.44 1.44h-1.44V5.81Zm-.22 7.22a.75.75 0 1 0-1.06-1.06l-1.97 1.97-.97-.97a.75.75 0 1 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.06 0l2.5-2.5Z",fill:"currentColor"}))}),de=oe;var ce=globalThis&&globalThis.__rest||function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)l.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(n[t[s]]=e[t[s]]);return n};const ue=i.forwardRef((e,l)=>{var{title:n,titleId:t}=e,s=ce(e,["title","titleId"]);let r=z();return r=n?t||"title-"+r:void 0,i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:l,"aria-labelledby":r},s),n?i.createElement("title",{id:r},n):null,i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.97 9.03a.75.75 0 0 0 1.06 0l3.22-3.22v8.69a.75.75 0 0 0 1.5 0V5.81l3.22 3.22a.75.75 0 1 0 1.06-1.06l-4.5-4.5a.75.75 0 0 0-1.06 0l-4.5 4.5a.75.75 0 0 0 0 1.06ZM4.75 15.5a.75.75 0 0 0-1.5 0V19c0 .966.784 1.75 1.75 1.75h14A1.75 1.75 0 0 0 20.75 19v-3.5a.75.75 0 0 0-1.5 0V19a.25.25 0 0 1-.25.25H5a.25.25 0 0 1-.25-.25v-3.5Z",fill:"currentColor"}))}),pe=ue,Ee=()=>H.createElement("div",{className:"navds-stack__spacer"}),p=()=>Math.floor((1+Math.random())*65536).toString().substring(1),Ie=()=>`${p()}${p()}-${p()}-${p()}-${p()}-${p()}${p()}${p()}`,me=e=>W(e,{unitSeparator:" ",thousandsSeparator:" ",decimalPlaces:1,fixedDecimals:!1}),fe=()=>"V".concat(Ie().replace(/-/g,"")),_e=(e,l,n)=>({id:fe(),file:e,filename:e.name,filesize:e.size,uploaded:!1,pending:!1,type:l,skjemanummer:n});const F=({multiple:e,accept:l,onFilesSelect:n,hasUplodedAttachements:t})=>{const s=te("fileInput"),r=i.useCallback(E=>{if(E.target.files){const h=Array.from(E.target.files);n(h),E.target.value=""}},[n]),o=i.useRef(null),m=i.useCallback(()=>{o.current&&o.current.click()},[]);return a.jsxs(a.Fragment,{children:[a.jsx("input",{ref:o,className:s.element("input"),type:"file",accept:l,onChange:E=>r(E),multiple:e===!0,"data-testid":"file-upload"}),a.jsxs(ee,{className:s.element("upload_button"),variant:t?"secondary":"primary",type:"button",onClick:m,icon:a.jsx(pe,{"aria-hidden":!0}),iconPosition:"right",children:[t&&a.jsx(I,{id:"FileInput.Vedlegg.Lastoppknapp.Flere"}),!t&&a.jsx(I,{id:"FileInput.Vedlegg.Lastoppknapp"})]})]})};try{F.displayName="FileInput",F.__docgenInfo={description:"",displayName:"FileInput",props:{onFilesSelect:{defaultValue:null,description:"",name:"onFilesSelect",required:!0,type:{name:"(files: File[]) => void"}},multiple:{defaultValue:null,description:"",name:"multiple",required:!0,type:{name:"boolean"}},accept:{defaultValue:null,description:"",name:"accept",required:!0,type:{name:"string"}},hasUplodedAttachements:{defaultValue:null,description:"",name:"hasUplodedAttachements",required:!0,type:{name:"boolean"}}}}}catch{}const Ae=()=>{const e=se();return{i18n:(l,n)=>e.formatMessage({id:l},n)}};const y=({attachment:e,showFileSize:l,onDelete:n})=>{const{i18n:t}=Ae();return a.jsx("div",{className:"attachmentPanel",children:a.jsxs(ae,{gap:"4",children:[e.pending&&a.jsx(ne,{type:"S"}),!e.pending&&a.jsx(de,{width:24,height:24,"aria-hidden":!0}),a.jsxs(L,{gap:"1",children:[e.url?a.jsx(J,{href:e.url,target:"_blank",children:e.filename}):a.jsx("span",{children:e.filename}),l&&a.jsx("div",{children:me(e.filesize)})]}),n&&a.jsxs(a.Fragment,{children:[a.jsx(Ee,{}),a.jsx(le,{tabIndex:0,onClick:()=>n(e),onKeyDown:s=>{(s.code==="Space"||s.code==="Enter")&&n(e)},height:24,width:24,cursor:"pointer","aria-label":t("Attachment.Vedlegg.Slett",{navn:e.filename})})]})]})})};try{y.displayName="AttachmentInfo",y.__docgenInfo={description:"",displayName:"AttachmentInfo",props:{attachment:{defaultValue:null,description:"",name:"attachment",required:!0,type:{name:"Attachment"}},showFileSize:{defaultValue:null,description:"",name:"showFileSize",required:!1,type:{name:"boolean"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((file: Attachment) => void)"}}}}}catch{}const D=e=>{const{attachments:l,showFileSize:n,onDelete:t}=e;return a.jsx(a.Fragment,{children:l.length>0&&a.jsx(L,{gap:"2",children:l.map(s=>a.jsx(i.Fragment,{children:a.jsx(y,{attachment:s,onDelete:t,showFileSize:n})},X()))})})};try{D.displayName="AttachmentList",D.__docgenInfo={description:"",displayName:"AttachmentList",props:{attachments:{defaultValue:null,description:"",name:"attachments",required:!0,type:{name:"Attachment[]"}},showFileSize:{defaultValue:null,description:"",name:"showFileSize",required:!1,type:{name:"boolean"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((file: Attachment) => void)"}}}}}catch{}var u=(e=>(e.GENERAL="GENERAL",e.TIMEOUT="TIMEOUT",e.VALID_EXTENSION="VALID_EXTENSION",e.MAX_SIZE="MAX_SIZE",e))(u||{});const ge=16777,V=({failedAttachment:e,onDelete:l})=>a.jsxs(ie,{variant:"warning",closeButton:!0,onClose:()=>l(e),children:[e.error===u.GENERAL&&a.jsx(I,{id:"FailedAttachment.Vedlegg.Feilmelding.Opplasting.Feilet",values:{filename:e.filename}}),e.error===u.TIMEOUT&&a.jsx(I,{id:"FailedAttachment.Vedlegg.Feilmelding.Timeout",values:{filename:e.filename}}),e.error===u.MAX_SIZE&&a.jsx(I,{id:"FailedAttachment.Vedlegg.Feilmelding.Ugyldig.Størrelse",values:{filename:e.filename,maxStørrelse:ge}}),e.error===u.VALID_EXTENSION&&a.jsx(I,{id:"FailedAttachment.Vedlegg.Feilmelding.Ugyldig.Type",values:{filename:e.filename}})]});try{V.displayName="FailedAttachment",V.__docgenInfo={description:"",displayName:"FailedAttachment",props:{failedAttachment:{defaultValue:null,description:"",name:"failedAttachment",required:!0,type:{name:"Attachment"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"(file: Attachment) => void"}}}}}catch{}const K=e=>{const{failedAttachments:l,onDelete:n}=e;return a.jsx(a.Fragment,{children:l.length>0&&a.jsx(L,{gap:"2",children:l.map(t=>a.jsx(i.Fragment,{children:a.jsx(V,{failedAttachment:t,onDelete:n})},X()))})})};try{K.displayName="FailedAttachmentList",K.__docgenInfo={description:"",displayName:"FailedAttachmentList",props:{failedAttachments:{defaultValue:null,description:"",name:"failedAttachments",required:!0,type:{name:"Attachment[]"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"(file: Attachment) => void"}}}}}catch{}const $=[".pdf",".jpeg",".jpg",".png"],he=16777,ve=.0009765625,Te=(e,l,n)=>{const t=_e(e,l,n);return t.pending=!0,t},Oe=e=>{const l=e.split(".").pop();return l?$.includes(`.${l.toLowerCase()}`):!1},Se=e=>e*ve<=he,Re=async(e,l)=>{var n;if(!Oe(e.file.name)){e.pending=!1,e.error=u.VALID_EXTENSION;return}if(!Se(e.filesize)){e.pending=!1,e.error=u.MAX_SIZE;return}try{const t=await l(e);e.pending=!1,e.url=t.headers.location,e.uploaded=!0,e.uuid=t.data}catch(t){e.pending=!1,((n=t==null?void 0:t.response)==null?void 0:n.status)===408?e.error=u.TIMEOUT:e.error=u.GENERAL}},Le=[],x=({existingAttachments:e=Le,updateAttachments:l,attachmentType:n,skjemanummer:t,saveAttachment:s,multiple:r=!0})=>{const[o,m]=i.useState(e);i.useEffect(()=>{const c=o.filter(d=>!d.error&&d.pending===!1),f=o.some(d=>!d.error&&d.pending===!0);l(c,f)},[o]);const E=i.useCallback(c=>{const f=async _=>{for(const v of _)await Re(v,s),m(N=>N.map(T=>T.filename===v.filename?v:T))},d=c.map(_=>Te(_,n,t));m(_=>_.filter(N=>!d.some(T=>T.filename===N.filename)).concat(d)),f(d)},[n,t,s]),h=i.useCallback(c=>{m(f=>f.filter(d=>d.filename!==c.filename))},[]),b=i.useMemo(()=>o.filter(c=>!c.error),[o]),Y=i.useMemo(()=>o.filter(c=>!!c.error),[o]);return a.jsx(Q,{children:a.jsxs(L,{gap:"6",children:[a.jsx(D,{attachments:b,showFileSize:!0,onDelete:h}),a.jsx(F,{accept:$.join(", "),onFilesSelect:E,hasUplodedAttachements:b.length>0,multiple:r}),a.jsx(K,{failedAttachments:Y,onDelete:h})]})})},Z=x;try{x.displayName="FileUploader",x.__docgenInfo={description:"",displayName:"FileUploader",props:{updateAttachments:{defaultValue:null,description:"",name:"updateAttachments",required:!0,type:{name:"(attachments: Attachment[], hasPendingUploads: boolean) => void"}},attachmentType:{defaultValue:null,description:"",name:"attachmentType",required:!0,type:{name:"enum",value:[{value:'"omsorgsovertakelse"'},{value:'"adopsjonsvedtak"'},{value:'"terminbekreftelse"'},{value:'"fødselsattest"'},{value:'"anneninntektDokumentasjon"'},{value:'"utsettelseSykdomUttaksplan"'},{value:'"morsaktivitetdokumentasjon"'},{value:'"dokumentasjonOverføringAvKvote"'},{value:'"dokumentasjonAvAleneomsorg"'},{value:'"hvØvelse"'},{value:'"navTiltak"'},{value:'"tilbakebetaling"'},{value:'"tilrettelegging"'}]}},skjemanummer:{defaultValue:null,description:"",name:"skjemanummer",required:!0,type:{name:"enum",value:[{value:'"I000062"'},{value:'"I000141"'},{value:'"I000042"'},{value:'"I000051"'},{value:'"I000133"'},{value:'"I000065"'},{value:'"I000061"'},{value:'"I000036"'},{value:'"I000110"'},{value:'"I000111"'},{value:'"I000118"'},{value:'"I000112"'},{value:'"I000037"'},{value:'"I000124"'},{value:'"I000120"'},{value:'"I000122"'},{value:'"I000121"'},{value:'"I000123"'},{value:'"I000130"'},{value:'"I000131"'},{value:'"I000132"'},{value:'"I000039"'},{value:'"I000038"'},{value:'"I000023"'},{value:'"I000044"'},{value:'"I000063"'},{value:'"I000007"'},{value:'"I000109"'},{value:'"I000114"'},{value:'"I000119"'},{value:'"I000116"'},{value:'"I000117"'},{value:'"I000032"'},{value:'"I000066"'},{value:'"I000140"'},{value:'"I000060"'}]}},existingAttachments:{defaultValue:{value:"[] as Attachment[]"},description:"",name:"existingAttachments",required:!1,type:{name:"Attachment[]"}},saveAttachment:{defaultValue:null,description:"",name:"saveAttachment",required:!0,type:{name:"SaveAttachment"}},multiple:{defaultValue:{value:"true"},description:"",name:"multiple",required:!1,type:{name:"boolean"}}}}}catch{}const we={title:"FileUploader",component:Z},M=({saveAttachment:e,existingAttachments:l})=>a.jsx(Z,{attachmentType:R.OMSORGSOVERTAKELSE,skjemanummer:S.OMSORGSOVERTAKELSE,saveAttachment:e,existingAttachments:l,updateAttachments:()=>{}}),A=M.bind({});A.args={existingAttachments:[{id:"1",filename:"Dette er en fil som er lastet opp.jpg",filesize:234,file:{},pending:!1,uploaded:!0,type:R.TERMINBEKREFTELSE,skjemanummer:S.TERMINBEKREFTELSE},{id:"2",filename:"Dette er en fil som holder på å bli lastet opp.jpg",filesize:2344,file:{},pending:!0,uploaded:!1,type:R.TERMINBEKREFTELSE,skjemanummer:S.TERMINBEKREFTELSE}]};const g=M.bind({});g.args={saveAttachment:()=>Promise.resolve({headers:{location:""},data:"test"})};const O=M.bind({});var G,j,B;A.parameters={...A.parameters,docs:{...(G=A.parameters)==null?void 0:G.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(B=(j=A.parameters)==null?void 0:j.docs)==null?void 0:B.source}}};var w,U,P;g.parameters={...g.parameters,docs:{...(w=g.parameters)==null?void 0:w.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(P=(U=g.parameters)==null?void 0:U.docs)==null?void 0:P.source}}};var k,q,C;O.parameters={...O.parameters,docs:{...(k=O.parameters)==null?void 0:k.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(C=(q=O.parameters)==null?void 0:q.docs)==null?void 0:C.source}}};const Ue=["VisEksisterendeVedlegg","OpplastingOk","OpplastingFeiler"];export{O as OpplastingFeiler,g as OpplastingOk,A as VisEksisterendeVedlegg,Ue as __namedExportsOrder,we as default};
