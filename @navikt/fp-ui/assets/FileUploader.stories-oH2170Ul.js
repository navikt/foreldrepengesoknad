import{j as s}from"./jsx-runtime-_e34SzbC.js";import{r as l,R as ee,g as te}from"./index-DVXBtNgz.js";import{u as re}from"./index-DSUmsmzI.js";import{b as ne}from"./dateUtils-BWhwD9yF.js";import"./dayjs.min-Dkhc0ShP.js";import{B as se,L as ie}from"./Button-toOuzPlM.js";import{u as $}from"./useId-DbilmxAP.js";import{M as _}from"./message-DizMllxX.js";import{H as ae,V as v}from"./VStack-DuVb4WaD.js";import{L as le}from"./Link-CceVKQrV.js";import{S as oe}from"./XMark-DZYhRAlK.js";import{A as de}from"./Alert-Bpg8WgwZ.js";import{H as Ee}from"./Label-Cf_oUe96.js";import"./dates-BztWV_n-.js";import"./tslib.es6-BvlsdGqA.js";import"./isBetween-BL4b7U7Z.js";import"./clsx-B-dksMZM.js";import"./useId-D3p7EPog.js";import"./composeEventHandlers-DeH74NdU.js";import"./css-CqApuV4H.js";var ce=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(e);i<t.length;i++)r.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(n[t[i]]=e[t[i]]);return n};const pe=l.forwardRef((e,r)=>{var{title:n,titleId:t}=e,i=ce(e,["title","titleId"]);let o=$();return o=n?t||"title-"+o:void 0,l.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:r,"aria-labelledby":o},i),n?l.createElement("title",{id:o},n):null,l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.25 4.5c0-.69.56-1.25 1.25-1.25H14a.75.75 0 0 1 .53.22l4 4c.141.14.22.331.22.53v11.5c0 .69-.56 1.25-1.25 1.25h-11c-.69 0-1.25-.56-1.25-1.25v-15Zm9.25 4.25c-.69 0-1.25-.56-1.25-1.25V4.75h-6.5v14.5h10.5V8.75H14.5Zm.25-2.94 1.44 1.44h-1.44V5.81Zm-.22 7.22a.75.75 0 1 0-1.06-1.06l-1.97 1.97-.97-.97a.75.75 0 1 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.06 0l2.5-2.5Z",fill:"currentColor"}))});var fe=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(e);i<t.length;i++)r.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(n[t[i]]=e[t[i]]);return n};const ue=l.forwardRef((e,r)=>{var{title:n,titleId:t}=e,i=fe(e,["title","titleId"]);let o=$();return o=n?t||"title-"+o:void 0,l.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:r,"aria-labelledby":o},i),n?l.createElement("title",{id:o},n):null,l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.97 9.03a.75.75 0 0 0 1.06 0l3.22-3.22v8.69a.75.75 0 0 0 1.5 0V5.81l3.22 3.22a.75.75 0 1 0 1.06-1.06l-4.5-4.5a.75.75 0 0 0-1.06 0l-4.5 4.5a.75.75 0 0 0 0 1.06ZM4.75 15.5a.75.75 0 0 0-1.5 0V19c0 .966.784 1.75 1.75 1.75h14A1.75 1.75 0 0 0 20.75 19v-3.5a.75.75 0 0 0-1.5 0V19a.25.25 0 0 1-.25.25H5a.25.25 0 0 1-.25-.25v-3.5Z",fill:"currentColor"}))}),ge=()=>ee.createElement("div",{className:"navds-stack__spacer"});var F=(e=>(e.DEPRECATED_TERMINBEKREFTELSE="I000062",e.TERMINBEKREFTELSE="I000141",e.OMSORGSOVERTAKELSE="I000042",e.DEPRECATED_BEKREFTELSE_DELTAR_KVALIFISERINGSPROGRAM="I000051",e.BEKREFTELSE_DELTAR_KVALIFISERINGSPROGRAM="I000133",e.BEKREFTELSE_FRA_ARBEIDSGIVER="I000065",e.BEKREFTELSE_FRA_STUDIESTED="I000061",e.BEKREFTELSE_PÅ_AVTALT_FERIE="I000036",e.DOK_AV_ALENEOMSORG="I000110",e.DEPRECATED_DOK_BEGRUNNELSE_SØKE_TILBAKE_I_TID="I000111",e.DOK_BEGRUNNELSE_SØKE_TILBAKE_I_TID="I000118",e.DOK_DELTAKELSE_I_INTRODUKSJONSPROGRAMMET="I000112",e.DOK_INNLEGGELSE="I000037",e.DOK_INNLEGGELSE_BARN="I000124",e.DOK_INNLEGGELSE_MOR="I000120",e.DOK_INNLEGGELSE_FAR="I000122",e.DOK_SYKDOM_MOR="I000121",e.DOK_SYKDOM_FAR="I000123",e.DOK_UTDANNING_OG_ARBEID_MOR="I000130",e.DOK_UTDANNING_MOR="I000131",e.DOK_ARBEID_MOR="I000132",e.DOK_MILITÆR_SILVIL_TJENESTE="I000039",e.DOK_MORS_UTDANNING_ARBEID_SYKDOM="I000038",e.DOK_OVERFØRING_FOR_SYK="I000023",e.ETTERLØNN_ELLER_SLUTTVEDERLAG="I000044",e.FØDSELSATTEST="I000063",e.INNTEKTSOPPLYSNINGER_FRILANS_ELLER_SELVSTENDIG="I000007",e.SKJEMA_FOR_TILRETTELEGGING_OG_OMPLASSERING="I000109",e.DEPRECATED_TILBAKEBETALING="I000114",e.TILBAKEBETALING="I000119",e.HV_ØVELSE="I000116",e.NAV_TILTAK="I000117",e.RESULTATREGNSKAP="I000032",e.DEPRECATED_KOPI_SKATTEMELDING="I000066",e.SKATTEMELDING="I000140",e.ANNET="I000060",e))(F||{}),x=(e=>(e.OMSORGSOVERTAKELSE="omsorgsovertakelse",e.ADOPSJONSVEDTAK="adopsjonsvedtak",e.TERMINBEKREFTELSE="terminbekreftelse",e.FØDSELSATTEST="fødselsattest",e.ANNEN_INNTEKT="anneninntektDokumentasjon",e.UTSETTELSE_SYKDOM="utsettelseSykdomUttaksplan",e.MORS_AKTIVITET_DOKUMENTASJON="morsaktivitetdokumentasjon",e.OVERFØRING_KVOTE="dokumentasjonOverføringAvKvote",e.ALENEOMSORG="dokumentasjonAvAleneomsorg",e.HV_ØVELSE="hvØvelse",e.NAV_TILTAK="navTiltak",e.TILBAKEBETALING="tilbakebetaling",e.TILRETTELEGGING="tilrettelegging",e))(x||{}),D={exports:{}};/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */D.exports=_e;D.exports.format=X;D.exports.parse=z;var Ie=/\B(?=(\d{3})+(?!\d))/g,me=/(?:\.0*|(\.[^0]+)0+)$/,I={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},Ae=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function _e(e,r){return typeof e=="string"?z(e):typeof e=="number"?X(e,r):null}function X(e,r){if(!Number.isFinite(e))return null;var n=Math.abs(e),t=r&&r.thousandsSeparator||"",i=r&&r.unitSeparator||"",o=r&&r.decimalPlaces!==void 0?r.decimalPlaces:2,p=!!(r&&r.fixedDecimals),a=r&&r.unit||"";(!a||!I[a.toLowerCase()])&&(n>=I.pb?a="PB":n>=I.tb?a="TB":n>=I.gb?a="GB":n>=I.mb?a="MB":n>=I.kb?a="KB":a="B");var E=e/I[a.toLowerCase()],f=E.toFixed(o);return p||(f=f.replace(me,"$1")),t&&(f=f.split(".").map(function(A,T){return T===0?A.replace(Ie,t):A}).join(".")),f+i+a}function z(e){if(typeof e=="number"&&!isNaN(e))return e;if(typeof e!="string")return null;var r=Ae.exec(e),n,t="b";return r?(n=parseFloat(r[1]),t=r[4].toLowerCase()):(n=parseInt(e,10),t="b"),isNaN(n)?null:Math.floor(I[t]*n)}var Te=D.exports;const Se=te(Te),g=()=>Math.floor((1+Math.random())*65536).toString().substring(1),Oe=()=>`${g()}${g()}-${g()}-${g()}-${g()}-${g()}${g()}${g()}`,Re=e=>Se(e,{unitSeparator:" ",thousandsSeparator:" ",decimalPlaces:1,fixedDecimals:!1}),Le=()=>"V".concat(Oe().replace(/-/g,"")),he=(e,r,n)=>({id:Le(),file:e,filename:e.name,filesize:e.size,uploaded:!1,pending:!1,type:r,skjemanummer:n}),H=({multiple:e,accept:r,onFilesSelect:n,hasUplodedAttachements:t})=>{const i=ne("fileInput"),o=l.useCallback(E=>{if(E.target.files){const f=Array.from(E.target.files);n(f),E.target.value=""}},[n]),p=l.useRef(null),a=l.useCallback(()=>{p.current&&p.current.click()},[]);return s.jsxs(s.Fragment,{children:[s.jsx("input",{ref:p,className:i.element("input"),type:"file",accept:r,onChange:E=>o(E),multiple:e===!0,"data-testid":"file-upload"}),s.jsxs(se,{className:i.element("upload_button"),variant:t?"secondary":"primary",type:"button",onClick:a,icon:s.jsx(ue,{"aria-hidden":!0}),iconPosition:"right",children:[t&&s.jsx(_,{id:"FileInput.Vedlegg.Lastoppknapp.Flere"}),!t&&s.jsx(_,{id:"FileInput.Vedlegg.Lastoppknapp"})]})]})};H.__docgenInfo={description:"",methods:[],displayName:"FileInput",props:{onFilesSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(files: File[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"File"}],raw:"File[]"},name:"files"}],return:{name:"void"}}},description:""},multiple:{required:!0,tsType:{name:"boolean"},description:""},accept:{required:!0,tsType:{name:"string"},description:""},hasUplodedAttachements:{required:!0,tsType:{name:"boolean"},description:""}}};const Z=({attachment:e,showFileSize:r,onDelete:n})=>{const t=re();return s.jsx("div",{className:"attachmentPanel",children:s.jsxs(ae,{gap:"4",children:[e.pending&&s.jsx(ie,{type:"S"}),!e.pending&&s.jsx(pe,{width:24,height:24,"aria-hidden":!0}),s.jsxs(v,{gap:"1",children:[e.url?s.jsx(le,{href:e.url,target:"_blank",children:e.filename}):s.jsx("span",{children:e.filename}),r&&s.jsx("div",{children:Re(e.filesize)})]}),n&&s.jsxs(s.Fragment,{children:[s.jsx(ge,{}),s.jsx(oe,{tabIndex:0,onClick:()=>n(e),onKeyDown:i=>{(i.code==="Space"||i.code==="Enter")&&n(e)},height:24,width:24,cursor:"pointer","aria-label":t.formatMessage({id:"Attachment.Vedlegg.Slett"},{navn:e.filename})})]})]})})};Z.__docgenInfo={description:"",methods:[],displayName:"AttachmentInfo"};const K=e=>{const{attachments:r,showFileSize:n,onDelete:t}=e;return s.jsx(s.Fragment,{children:r.length>0&&s.jsx(v,{gap:"2",children:r.map(i=>s.jsx(l.Fragment,{children:s.jsx(Z,{attachment:i,onDelete:t,showFileSize:n})},i.id))})})};K.__docgenInfo={description:"",methods:[],displayName:"AttachmentList"};var u=(e=>(e.GENERAL="GENERAL",e.TIMEOUT="TIMEOUT",e.VALID_EXTENSION="VALID_EXTENSION",e.MAX_SIZE="MAX_SIZE",e))(u||{});const Ne=16,k=({failedAttachment:e,onDelete:r})=>s.jsxs(de,{variant:"warning",closeButton:!0,onClose:()=>r(e),children:[e.error===u.GENERAL&&s.jsx(_,{id:"FailedAttachment.Vedlegg.Feilmelding.Opplasting.Feilet",values:{filename:e.filename}}),e.error===u.TIMEOUT&&s.jsx(_,{id:"FailedAttachment.Vedlegg.Feilmelding.Timeout",values:{filename:e.filename}}),e.error===u.MAX_SIZE&&s.jsx(_,{id:"FailedAttachment.Vedlegg.Feilmelding.Ugyldig.Størrelse",values:{filename:e.filename,maxStørrelse:Ne}}),e.error===u.VALID_EXTENSION&&s.jsx(_,{id:"FailedAttachment.Vedlegg.Feilmelding.Ugyldig.Type",values:{filename:e.filename}})]});k.__docgenInfo={description:"",methods:[],displayName:"FailedAttachment"};const Y=e=>{const{failedAttachments:r,onDelete:n}=e;return s.jsx(s.Fragment,{children:r.length>0&&s.jsx(v,{gap:"2",children:r.map(t=>s.jsx(l.Fragment,{children:s.jsx(k,{failedAttachment:t,onDelete:n})},t.id))})})};Y.__docgenInfo={description:"",methods:[],displayName:"FailedAttachmentList"};const q=[".pdf",".jpeg",".jpg",".png"],Fe=16,xe=Fe*1024*1024,ve=e=>[...new Set(e.map(r=>r.skjemanummer))].sort((r,n)=>r.localeCompare(n)),De=(e,r,n)=>{const t=he(e,r,n);return t.pending=!0,t},be=e=>{const r=e.split(".").pop();return r?q.includes(`.${r.toLowerCase()}`):!1},Ke=e=>e<=xe,Me=async(e,r)=>{var n;if(!be(e.file.name)){e.pending=!1,e.error=u.VALID_EXTENSION;return}if(!Ke(e.filesize)){e.pending=!1,e.error=u.MAX_SIZE;return}try{const t=await r(e);e.pending=!1,e.url=t.headers.location,e.uploaded=!0,e.uuid=t.data}catch(t){e.pending=!1,((n=t==null?void 0:t.response)==null?void 0:n.status)===408?e.error=u.TIMEOUT:e.error=u.GENERAL}},Ve=[],J=({existingAttachments:e=Ve,updateAttachments:r,attachmentType:n,skjemanummer:t,saveAttachment:i,multiple:o=!0,skjemanummerTextMap:p})=>{const[a,E]=l.useState(e);l.useEffect(()=>{const d=a.filter(c=>!c.error&&c.pending===!1),m=a.some(c=>!c.error&&c.pending===!0);r(d,m)},[a]);const f=l.useCallback(d=>{const m=async S=>{for(const L of S)await Me(L,i),E(b=>b.map(h=>h.filename===L.filename?L:h))},c=d.map(S=>De(S,n,t));E(S=>S.filter(b=>!c.some(h=>h.filename===b.filename)).concat(c)),m(c)},[n,t,i]),A=l.useCallback(d=>{E(m=>m.filter(c=>c.filename!==d.filename))},[]),T=l.useMemo(()=>a.filter(d=>!d.error),[a]),W=l.useMemo(()=>a.filter(d=>!!d.error),[a]);return s.jsxs(v,{gap:"6",children:[p&&a.length>0&&s.jsx(s.Fragment,{children:ve(a).map(d=>s.jsxs(s.Fragment,{children:[s.jsx(Ee,{size:"small",level:"2",children:p[d]},d),s.jsx(K,{attachments:T.filter(m=>m.skjemanummer===d),showFileSize:!0,onDelete:A})]}))}),!p&&s.jsx(K,{attachments:T,showFileSize:!0,onDelete:A}),s.jsx(H,{accept:q.join(", "),onFilesSelect:f,hasUplodedAttachements:T.length>0,multiple:o}),s.jsx(Y,{failedAttachments:W,onDelete:A})]})},Q=J;J.__docgenInfo={description:"",methods:[],displayName:"FileUploader",props:{existingAttachments:{defaultValue:{value:"[]",computed:!1},required:!1},multiple:{defaultValue:{value:"true",computed:!1},required:!1}}};const tt={title:"FileUploader",component:Q},M=({saveAttachment:e,existingAttachments:r})=>s.jsx(Q,{attachmentType:x.OMSORGSOVERTAKELSE,skjemanummer:F.OMSORGSOVERTAKELSE,saveAttachment:e,existingAttachments:r,updateAttachments:()=>{}}),O=M.bind({});O.args={existingAttachments:[{id:"1",filename:"Dette er en fil som er lastet opp.jpg",filesize:234,file:{},pending:!1,uploaded:!0,type:x.TERMINBEKREFTELSE,skjemanummer:F.TERMINBEKREFTELSE},{id:"2",filename:"Dette er en fil som holder på å bli lastet opp.jpg",filesize:2344,file:{},pending:!0,uploaded:!1,type:x.TERMINBEKREFTELSE,skjemanummer:F.TERMINBEKREFTELSE}]};const R=M.bind({});R.args={saveAttachment:()=>Promise.resolve({headers:{location:""},data:"test"})};const N=M.bind({});var V,G,y;O.parameters={...O.parameters,docs:{...(V=O.parameters)==null?void 0:V.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(y=(G=O.parameters)==null?void 0:G.docs)==null?void 0:y.source}}};var B,w,j;R.parameters={...R.parameters,docs:{...(B=R.parameters)==null?void 0:B.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(j=(w=R.parameters)==null?void 0:w.docs)==null?void 0:j.source}}};var P,U,C;N.parameters={...N.parameters,docs:{...(P=N.parameters)==null?void 0:P.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(C=(U=N.parameters)==null?void 0:U.docs)==null?void 0:C.source}}};const rt=["VisEksisterendeVedlegg","OpplastingOk","OpplastingFeiler"];export{N as OpplastingFeiler,R as OpplastingOk,O as VisEksisterendeVedlegg,rt as __namedExportsOrder,tt as default};
