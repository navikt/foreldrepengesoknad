import{j as s}from"./jsx-runtime-Du8NFWEI.js";import{r as l,R as ee,g as te}from"./index-Dl6G-zuu.js";import{u as ne}from"./index-Br48K-Zq.js";import{b as re}from"./dateUtils-CVncbOU5.js";import"./dates-BgTHPkQK.js";import{B as se,L as ie}from"./Button-C7PfoSK9.js";import{u as $}from"./useId-BnKOV0D5.js";import{F as _}from"./message-D3WIBprz.js";import{H as ae,V as v}from"./VStack-DWIsOqOD.js";import{L as le}from"./Link-DqQLotnN.js";import{X as oe}from"./XMark-DrqaqG3W.js";import{A as de}from"./Alert-CWVi0rDt.js";import{H as Ee}from"./Label-El8VFjDh.js";import"./composeEventHandlers-DeH74NdU.js";var ce=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(e);i<t.length;i++)n.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(r[t[i]]=e[t[i]]);return r};const pe=l.forwardRef((e,n)=>{var{title:r,titleId:t}=e,i=ce(e,["title","titleId"]);let o=$();return o=r?t||"title-"+o:void 0,l.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:n,"aria-labelledby":o},i),r?l.createElement("title",{id:o},r):null,l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.25 4.5c0-.69.56-1.25 1.25-1.25H14a.75.75 0 0 1 .53.22l4 4c.141.14.22.331.22.53v11.5c0 .69-.56 1.25-1.25 1.25h-11c-.69 0-1.25-.56-1.25-1.25v-15Zm9.25 4.25c-.69 0-1.25-.56-1.25-1.25V4.75h-6.5v14.5h10.5V8.75H14.5Zm.25-2.94 1.44 1.44h-1.44V5.81Zm-.22 7.22a.75.75 0 1 0-1.06-1.06l-1.97 1.97-.97-.97a.75.75 0 1 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.06 0l2.5-2.5Z",fill:"currentColor"}))}),fe=pe;var ue=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(e);i<t.length;i++)n.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(r[t[i]]=e[t[i]]);return r};const Ie=l.forwardRef((e,n)=>{var{title:r,titleId:t}=e,i=ue(e,["title","titleId"]);let o=$();return o=r?t||"title-"+o:void 0,l.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:n,"aria-labelledby":o},i),r?l.createElement("title",{id:o},r):null,l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.97 9.03a.75.75 0 0 0 1.06 0l3.22-3.22v8.69a.75.75 0 0 0 1.5 0V5.81l3.22 3.22a.75.75 0 1 0 1.06-1.06l-4.5-4.5a.75.75 0 0 0-1.06 0l-4.5 4.5a.75.75 0 0 0 0 1.06ZM4.75 15.5a.75.75 0 0 0-1.5 0V19c0 .966.784 1.75 1.75 1.75h14A1.75 1.75 0 0 0 20.75 19v-3.5a.75.75 0 0 0-1.5 0V19a.25.25 0 0 1-.25.25H5a.25.25 0 0 1-.25-.25v-3.5Z",fill:"currentColor"}))}),ge=Ie,me=()=>ee.createElement("div",{className:"navds-stack__spacer"});var F=(e=>(e.DEPRECATED_TERMINBEKREFTELSE="I000062",e.TERMINBEKREFTELSE="I000141",e.OMSORGSOVERTAKELSE="I000042",e.DEPRECATED_BEKREFTELSE_DELTAR_KVALIFISERINGSPROGRAM="I000051",e.BEKREFTELSE_DELTAR_KVALIFISERINGSPROGRAM="I000133",e.BEKREFTELSE_FRA_ARBEIDSGIVER="I000065",e.BEKREFTELSE_FRA_STUDIESTED="I000061",e.BEKREFTELSE_PÅ_AVTALT_FERIE="I000036",e.DOK_AV_ALENEOMSORG="I000110",e.DEPRECATED_DOK_BEGRUNNELSE_SØKE_TILBAKE_I_TID="I000111",e.DOK_BEGRUNNELSE_SØKE_TILBAKE_I_TID="I000118",e.DOK_DELTAKELSE_I_INTRODUKSJONSPROGRAMMET="I000112",e.DOK_INNLEGGELSE="I000037",e.DOK_INNLEGGELSE_BARN="I000124",e.DOK_INNLEGGELSE_MOR="I000120",e.DOK_INNLEGGELSE_FAR="I000122",e.DOK_SYKDOM_MOR="I000121",e.DOK_SYKDOM_FAR="I000123",e.DOK_UTDANNING_OG_ARBEID_MOR="I000130",e.DOK_UTDANNING_MOR="I000131",e.DOK_ARBEID_MOR="I000132",e.DOK_MILITÆR_SILVIL_TJENESTE="I000039",e.DOK_MORS_UTDANNING_ARBEID_SYKDOM="I000038",e.DOK_OVERFØRING_FOR_SYK="I000023",e.ETTERLØNN_ELLER_SLUTTVEDERLAG="I000044",e.FØDSELSATTEST="I000063",e.INNTEKTSOPPLYSNINGER_FRILANS_ELLER_SELVSTENDIG="I000007",e.SKJEMA_FOR_TILRETTELEGGING_OG_OMPLASSERING="I000109",e.DEPRECATED_TILBAKEBETALING="I000114",e.TILBAKEBETALING="I000119",e.HV_ØVELSE="I000116",e.NAV_TILTAK="I000117",e.RESULTATREGNSKAP="I000032",e.DEPRECATED_KOPI_SKATTEMELDING="I000066",e.SKATTEMELDING="I000140",e.ANNET="I000060",e))(F||{}),x=(e=>(e.OMSORGSOVERTAKELSE="omsorgsovertakelse",e.ADOPSJONSVEDTAK="adopsjonsvedtak",e.TERMINBEKREFTELSE="terminbekreftelse",e.FØDSELSATTEST="fødselsattest",e.ANNEN_INNTEKT="anneninntektDokumentasjon",e.UTSETTELSE_SYKDOM="utsettelseSykdomUttaksplan",e.MORS_AKTIVITET_DOKUMENTASJON="morsaktivitetdokumentasjon",e.OVERFØRING_KVOTE="dokumentasjonOverføringAvKvote",e.ALENEOMSORG="dokumentasjonAvAleneomsorg",e.HV_ØVELSE="hvØvelse",e.NAV_TILTAK="navTiltak",e.TILBAKEBETALING="tilbakebetaling",e.TILRETTELEGGING="tilrettelegging",e))(x||{}),D={exports:{}};/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */D.exports=Se;D.exports.format=X;D.exports.parse=k;var Ae=/\B(?=(\d{3})+(?!\d))/g,_e=/(?:\.0*|(\.[^0]+)0+)$/,g={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},Te=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function Se(e,n){return typeof e=="string"?k(e):typeof e=="number"?X(e,n):null}function X(e,n){if(!Number.isFinite(e))return null;var r=Math.abs(e),t=n&&n.thousandsSeparator||"",i=n&&n.unitSeparator||"",o=n&&n.decimalPlaces!==void 0?n.decimalPlaces:2,p=!!(n&&n.fixedDecimals),a=n&&n.unit||"";(!a||!g[a.toLowerCase()])&&(r>=g.pb?a="PB":r>=g.tb?a="TB":r>=g.gb?a="GB":r>=g.mb?a="MB":r>=g.kb?a="KB":a="B");var E=e/g[a.toLowerCase()],f=E.toFixed(o);return p||(f=f.replace(_e,"$1")),t&&(f=f.split(".").map(function(A,T){return T===0?A.replace(Ae,t):A}).join(".")),f+i+a}function k(e){if(typeof e=="number"&&!isNaN(e))return e;if(typeof e!="string")return null;var n=Te.exec(e),r,t="b";return n?(r=parseFloat(n[1]),t=n[4].toLowerCase()):(r=parseInt(e,10),t="b"),isNaN(r)?null:Math.floor(g[t]*r)}var Oe=D.exports;const Re=te(Oe),I=()=>Math.floor((1+Math.random())*65536).toString().substring(1),Le=()=>`${I()}${I()}-${I()}-${I()}-${I()}-${I()}${I()}${I()}`,he=e=>Re(e,{unitSeparator:" ",thousandsSeparator:" ",decimalPlaces:1,fixedDecimals:!1}),Ne=()=>"V".concat(Le().replace(/-/g,"")),Fe=(e,n,r)=>({id:Ne(),file:e,filename:e.name,filesize:e.size,uploaded:!1,pending:!1,type:n,skjemanummer:r}),z=({multiple:e,accept:n,onFilesSelect:r,hasUplodedAttachements:t})=>{const i=re("fileInput"),o=l.useCallback(E=>{if(E.target.files){const f=Array.from(E.target.files);r(f),E.target.value=""}},[r]),p=l.useRef(null),a=l.useCallback(()=>{p.current&&p.current.click()},[]);return s.jsxs(s.Fragment,{children:[s.jsx("input",{ref:p,className:i.element("input"),type:"file",accept:n,onChange:E=>o(E),multiple:e===!0,"data-testid":"file-upload"}),s.jsxs(se,{className:i.element("upload_button"),variant:t?"secondary":"primary",type:"button",onClick:a,icon:s.jsx(ge,{"aria-hidden":!0}),iconPosition:"right",children:[t&&s.jsx(_,{id:"FileInput.Vedlegg.Lastoppknapp.Flere"}),!t&&s.jsx(_,{id:"FileInput.Vedlegg.Lastoppknapp"})]})]})};z.__docgenInfo={description:"",methods:[],displayName:"FileInput",props:{onFilesSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(files: File[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"File"}],raw:"File[]"},name:"files"}],return:{name:"void"}}},description:""},multiple:{required:!0,tsType:{name:"boolean"},description:""},accept:{required:!0,tsType:{name:"string"},description:""},hasUplodedAttachements:{required:!0,tsType:{name:"boolean"},description:""}}};const H=({attachment:e,showFileSize:n,onDelete:r})=>{const t=ne();return s.jsx("div",{className:"attachmentPanel",children:s.jsxs(ae,{gap:"4",children:[e.pending&&s.jsx(ie,{type:"S"}),!e.pending&&s.jsx(fe,{width:24,height:24,"aria-hidden":!0}),s.jsxs(v,{gap:"1",children:[e.url?s.jsx(le,{href:e.url,target:"_blank",children:e.filename}):s.jsx("span",{children:e.filename}),n&&s.jsx("div",{children:he(e.filesize)})]}),r&&s.jsxs(s.Fragment,{children:[s.jsx(me,{}),s.jsx(oe,{tabIndex:0,onClick:()=>r(e),onKeyDown:i=>{(i.code==="Space"||i.code==="Enter")&&r(e)},height:24,width:24,cursor:"pointer","aria-label":t.formatMessage({id:"Attachment.Vedlegg.Slett"},{navn:e.filename})})]})]})})};H.__docgenInfo={description:"",methods:[],displayName:"AttachmentInfo"};const K=e=>{const{attachments:n,showFileSize:r,onDelete:t}=e;return s.jsx(s.Fragment,{children:n.length>0&&s.jsx(v,{gap:"2",children:n.map(i=>s.jsx(l.Fragment,{children:s.jsx(H,{attachment:i,onDelete:t,showFileSize:r})},i.id))})})};K.__docgenInfo={description:"",methods:[],displayName:"AttachmentList"};var u=(e=>(e.GENERAL="GENERAL",e.TIMEOUT="TIMEOUT",e.VALID_EXTENSION="VALID_EXTENSION",e.MAX_SIZE="MAX_SIZE",e))(u||{});const xe=16,Z=({failedAttachment:e,onDelete:n})=>s.jsxs(de,{variant:"warning",closeButton:!0,onClose:()=>n(e),children:[e.error===u.GENERAL&&s.jsx(_,{id:"FailedAttachment.Vedlegg.Feilmelding.Opplasting.Feilet",values:{filename:e.filename}}),e.error===u.TIMEOUT&&s.jsx(_,{id:"FailedAttachment.Vedlegg.Feilmelding.Timeout",values:{filename:e.filename}}),e.error===u.MAX_SIZE&&s.jsx(_,{id:"FailedAttachment.Vedlegg.Feilmelding.Ugyldig.Størrelse",values:{filename:e.filename,maxStørrelse:xe}}),e.error===u.VALID_EXTENSION&&s.jsx(_,{id:"FailedAttachment.Vedlegg.Feilmelding.Ugyldig.Type",values:{filename:e.filename}})]});Z.__docgenInfo={description:"",methods:[],displayName:"FailedAttachment"};const Y=e=>{const{failedAttachments:n,onDelete:r}=e;return s.jsx(s.Fragment,{children:n.length>0&&s.jsx(v,{gap:"2",children:n.map(t=>s.jsx(l.Fragment,{children:s.jsx(Z,{failedAttachment:t,onDelete:r})},t.id))})})};Y.__docgenInfo={description:"",methods:[],displayName:"FailedAttachmentList"};const q=[".pdf",".jpeg",".jpg",".png"],ve=16,De=ve*1024*1024,be=e=>[...new Set(e.map(n=>n.skjemanummer))].sort((n,r)=>n.localeCompare(r)),Ke=(e,n,r)=>{const t=Fe(e,n,r);return t.pending=!0,t},Me=e=>{const n=e.split(".").pop();return n?q.includes(`.${n.toLowerCase()}`):!1},Ve=e=>e<=De,Ge=async(e,n)=>{var r;if(!Me(e.file.name)){e.pending=!1,e.error=u.VALID_EXTENSION;return}if(!Ve(e.filesize)){e.pending=!1,e.error=u.MAX_SIZE;return}try{const t=await n(e);e.pending=!1,e.url=t.headers.location,e.uploaded=!0,e.uuid=t.data}catch(t){e.pending=!1,((r=t==null?void 0:t.response)==null?void 0:r.status)===408?e.error=u.TIMEOUT:e.error=u.GENERAL}},ye=[],J=({existingAttachments:e=ye,updateAttachments:n,attachmentType:r,skjemanummer:t,saveAttachment:i,multiple:o=!0,skjemanummerTextMap:p})=>{const[a,E]=l.useState(e);l.useEffect(()=>{const d=a.filter(c=>!c.error&&c.pending===!1),m=a.some(c=>!c.error&&c.pending===!0);n(d,m)},[a]);const f=l.useCallback(d=>{const m=async S=>{for(const L of S)await Ge(L,i),E(b=>b.map(h=>h.filename===L.filename?L:h))},c=d.map(S=>Ke(S,r,t));E(S=>S.filter(b=>!c.some(h=>h.filename===b.filename)).concat(c)),m(c)},[r,t,i]),A=l.useCallback(d=>{E(m=>m.filter(c=>c.filename!==d.filename))},[]),T=l.useMemo(()=>a.filter(d=>!d.error),[a]),W=l.useMemo(()=>a.filter(d=>!!d.error),[a]);return s.jsxs(v,{gap:"6",children:[p&&a.length>0&&s.jsx(s.Fragment,{children:be(a).map(d=>s.jsxs(s.Fragment,{children:[s.jsx(Ee,{size:"small",level:"2",children:p[d]},d),s.jsx(K,{attachments:T.filter(m=>m.skjemanummer===d),showFileSize:!0,onDelete:A})]}))}),!p&&s.jsx(K,{attachments:T,showFileSize:!0,onDelete:A}),s.jsx(z,{accept:q.join(", "),onFilesSelect:f,hasUplodedAttachements:T.length>0,multiple:o}),s.jsx(Y,{failedAttachments:W,onDelete:A})]})},Q=J;J.__docgenInfo={description:"",methods:[],displayName:"FileUploader",props:{existingAttachments:{defaultValue:{value:"[]",computed:!1},required:!1},multiple:{defaultValue:{value:"true",computed:!1},required:!1}}};const Je={title:"FileUploader",component:Q},M=({saveAttachment:e,existingAttachments:n})=>s.jsx(Q,{attachmentType:x.OMSORGSOVERTAKELSE,skjemanummer:F.OMSORGSOVERTAKELSE,saveAttachment:e,existingAttachments:n,updateAttachments:()=>{}}),O=M.bind({});O.args={existingAttachments:[{id:"1",filename:"Dette er en fil som er lastet opp.jpg",filesize:234,file:{},pending:!1,uploaded:!0,type:x.TERMINBEKREFTELSE,skjemanummer:F.TERMINBEKREFTELSE},{id:"2",filename:"Dette er en fil som holder på å bli lastet opp.jpg",filesize:2344,file:{},pending:!0,uploaded:!1,type:x.TERMINBEKREFTELSE,skjemanummer:F.TERMINBEKREFTELSE}]};const R=M.bind({});R.args={saveAttachment:()=>Promise.resolve({headers:{location:""},data:"test"})};const N=M.bind({});var V,G,y;O.parameters={...O.parameters,docs:{...(V=O.parameters)==null?void 0:V.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(y=(G=O.parameters)==null?void 0:G.docs)==null?void 0:y.source}}};var B,w,j;R.parameters={...R.parameters,docs:{...(B=R.parameters)==null?void 0:B.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(j=(w=R.parameters)==null?void 0:w.docs)==null?void 0:j.source}}};var P,U,C;N.parameters={...N.parameters,docs:{...(P=N.parameters)==null?void 0:P.docs,source:{originalSource:`({
  saveAttachment,
  existingAttachments
}) => {
  return <FileUploader attachmentType={AttachmentType.OMSORGSOVERTAKELSE} skjemanummer={Skjemanummer.OMSORGSOVERTAKELSE} saveAttachment={saveAttachment} existingAttachments={existingAttachments} updateAttachments={() => undefined} />;
}`,...(C=(U=N.parameters)==null?void 0:U.docs)==null?void 0:C.source}}};const Qe=["VisEksisterendeVedlegg","OpplastingOk","OpplastingFeiler"];export{N as OpplastingFeiler,R as OpplastingOk,O as VisEksisterendeVedlegg,Qe as __namedExportsOrder,Je as default};
