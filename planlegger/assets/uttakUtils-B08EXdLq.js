import{d as a,a as G,I as s,t as I}from"./Label-CxNHo45o.js";import{S as D,h as T,i as B}from"./HvemPlanleggerUtils-D1xsqW5u.js";import"./index-DVXBtNgz.js";import{b as c,a as N,e as V}from"./barnetUtils-Dtg6gkcN.js";var f=(e=>(e.Mødrekvote="MØDREKVOTE",e.Fedrekvote="FEDREKVOTE",e.Fellesperiode="FELLESPERIODE",e.Foreldrepenger="FORELDREPENGER",e.ForeldrepengerFørFødsel="FORELDREPENGER_FØR_FØDSEL",e.AktivitetsfriKvote="AKTIVITETSFRI_KVOTE",e))(f||{});const X=e=>Object.values(e.kontoer).reduce((t,r)=>t+r.dager/5,0),E=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?r.dager/5:0},_=e=>{const t=Math.floor(e/5);return{uker:t,dager:e-t*5,totaltAntallDager:e}},h=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?_(r.dager):{uker:0,dager:0,totaltAntallDager:0}},K=e=>E(e,f.ForeldrepengerFørFødsel),j=e=>E(e,f.Mødrekvote),W=e=>E(e,f.Fedrekvote),O=e=>E(e,f.AktivitetsfriKvote),x=e=>h(e,f.Fellesperiode),p=e=>h(e,f.Foreldrepenger);a.extend(G);const S=3,w=e=>a(e).isoWeekday(),v=e=>w(e)!==6&&w(e)!==7,l=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(w(e)){case 6:return a.utc(r).add(48,"hours").format(s);case 7:return a.utc(r).add(24,"hours").format(s);default:return e}},u=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(w(e)){case 6:return a.utc(r).subtract(24,"hours").format(s);case 7:return a.utc(r).subtract(48,"hours").format(s);default:return e}},Y=(e,t)=>{if(v(e)===!1)throw new Error("trekkUttaksdagerFraDato: Dato må være uttaksdag");let r=e,o=0,d=0;for(;d<Math.abs(t);){const i=a.utc(e).add(--o*24,"hours").format(s);v(i)&&(r=i,d++)}return r},y=e=>c(e)?e.overtakelsesdato:N(e)?e.termindato:e.fødselsdato,L=e=>{if(c(e))throw new Error("Kan ikke være adoptert");const t=y(e);return V(e)&&e.termindato&&a(t).isBefore(a(I(e.termindato)))?t:Y(l(t),S*5)},H=(e,t,r,o=0)=>{const d=x(t).totaltAntallDager,i=_(o),A=_(d-o),R=K(t),U=j(t),m=W(t),F=y(r),n=c(r)||e.type===D.FAR_OG_FAR?l(F):L(r),k=e.type===D.FAR_OG_FAR?u(a(n).add(U,"weeks").add(i.uker,"weeks").add(i.dager,"days").subtract(1,"day").format(s)):u(a(n).add(R,"weeks").add(U,"weeks").add(i.uker,"weeks").add(i.dager,"days").subtract(1,"day").format(s)),g=l(a(k).add(1,"day").format(s)),P=u(a(g).add(A.uker,"weeks").add(A.dager,"days").add(m,"weeks").subtract(1,"day").format(s));return e.type===D.FAR_OG_FAR&&!c(r)?{familiehendelsedato:F,startdatoPeriode1:n,sluttdatoPeriode1:P,startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}:{familiehendelsedato:F,startdatoPeriode1:n,startdatoPeriode2:g,sluttdatoPeriode1:k,sluttdatoPeriode2:P}},q=(e,t,r,o)=>{const d=y(r);if(e.type===D.FAR_OG_FAR){const F=O(t),n=p(t),k=a(d).add(F,"weeks").add(c(r)?0:6,"weeks").subtract(1,"day"),g=c(r)?a(d).add(1,"day"):a(d).add(6,"weeks");return{familiehendelsedato:d,startdatoPeriode1:l(g.format(s)),sluttdatoPeriode1:u(k.format(s)),startdatoPeriode2:l(a(k).add(1,"day").format(s)),sluttdatoPeriode2:u(a(k).add(n.uker,"weeks").add(n.dager,"days").format(s))}}if(o==="kunSøker2HarRett"&&(T(e)||B(e))){const F=O(t),n=p(t),k=a(d).add(F,"weeks").add(c(r)?0:6,"weeks").subtract(1,"day"),g=c(r)?a(d).add(1,"day"):a(d).add(6,"weeks");return{familiehendelsedato:d,startdatoPeriode1:l(g.format(s)),sluttdatoPeriode1:u(k.format(s)),startdatoPeriode2:l(a(k).add(1,"day").format(s)),sluttdatoPeriode2:u(a(k).add(n.uker,"weeks").add(n.dager,"days").format(s))}}const i=p(t),A=O(t),R=K(t),U=c(r)||e.type===D.FAR?l(d):L(r),m=u(a(U).add(i.uker,"weeks").add(i.dager,"days").add(A,"weeks").add(R,"weeks").subtract(1,"day").format(s));return{familiehendelsedato:d,startdatoPeriode1:U,sluttdatoPeriode1:m,startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}},Z=(e,t,r,o,d)=>e==="beggeHarRett"||t.type===D.FAR_OG_FAR&&!c(o)?H(t,r,o,d):q(t,r,o,e),M=(e,t)=>{const r=a(e).toDate(),o=a(t).toDate(),d=7*24*60*60*1e3,i=Math.abs(r.getTime()-o.getTime());return Math.round(i/d)},$=e=>{const{startdatoPeriode1:t,sluttdatoPeriode1:r,startdatoPeriode2:o,sluttdatoPeriode2:d}=e;let i=M(r,t);return o&&d&&(i+=M(d,o)),i};export{f as S,O as a,p as b,$ as c,x as d,X as e,Z as f,y as g,K as h,_ as i,M as w};
