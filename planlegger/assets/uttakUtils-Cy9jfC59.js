import{d as a,a as G,U as k,I as d,t as B}from"./Label-DMHnewTW.js";import{S as O,h as j,i as S}from"./HvemPlanleggerUtils-D1xsqW5u.js";import"./index-DVXBtNgz.js";import{b as i,a as N,e as V}from"./barnetUtils-Dtg6gkcN.js";var c=(e=>(e.Mødrekvote="MØDREKVOTE",e.Fedrekvote="FEDREKVOTE",e.Fellesperiode="FELLESPERIODE",e.Foreldrepenger="FORELDREPENGER",e.ForeldrepengerFørFødsel="FORELDREPENGER_FØR_FØDSEL",e.AktivitetsfriKvote="AKTIVITETSFRI_KVOTE",e))(c||{});const ee=e=>Object.values(e.kontoer).reduce((t,r)=>t+r.dager/5,0),te=e=>Object.values(e.kontoer).reduce((t,r)=>{const o=E(r.dager);return{uker:t.uker+o.uker,dager:t.dager+o.dager}},{uker:0,dager:0}),W=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?r.dager/5:0},m=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?r.dager:0},E=e=>{const t=Math.floor(e/5);return{uker:t,dager:e-t*5,totaltAntallDager:e}},_=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?E(r.dager):{uker:0,dager:0,totaltAntallDager:0}},re=e=>W(e,c.ForeldrepengerFørFødsel),I=e=>m(e,c.ForeldrepengerFørFødsel),x=e=>m(e,c.Mødrekvote),Y=e=>m(e,c.Fedrekvote),ae=e=>_(e,c.AktivitetsfriKvote),v=e=>m(e,c.AktivitetsfriKvote),H=e=>_(e,c.Fellesperiode),P=e=>_(e,c.Foreldrepenger);a.extend(G);const q=3,R=e=>a(e).isoWeekday(),M=e=>R(e)!==6&&R(e)!==7,u=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(R(e)){case 6:return a.utc(r).add(48,"hours").format(d);case 7:return a.utc(r).add(24,"hours").format(d);default:return e}},T=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(R(e)){case 6:return a.utc(r).subtract(24,"hours").format(d);case 7:return a.utc(r).subtract(48,"hours").format(d);default:return e}},z=(e,t)=>{if(M(e)===!1)throw new Error("trekkUttaksdagerFraDato: Dato må være uttaksdag");let r=e,o=0,s=0;for(;s<Math.abs(t);){const n=a.utc(e).add(--o*24,"hours").format(d);M(n)&&(r=n,s++)}return r},y=e=>i(e)?e.overtakelsesdato:N(e)?e.termindato:e.fødselsdato,L=e=>{if(i(e))throw new Error("Kan ikke være adoptert");const t=y(e);return V(e)&&e.termindato&&a(t).isBefore(a(B(e.termindato)))?t:z(u(t),q*5)},C=(e,t,r,o=0)=>{const s=parseInt(o.toString(),10),n=H(t).totaltAntallDager,g=E(s),f=E(n-s),F=I(t),U=x(t),p=Y(t),D=y(r),l=i(r)||e.type===O.FAR_OG_FAR?u(D):L(r),A=e.type===O.FAR_OG_FAR?k(a(l).toDate()).leggTil(U+g.totaltAntallDager-1):k(a(l).toDate()).leggTil(F+U+g.totaltAntallDager-1),w=u(a(A).add(1,"day").format(d)),K=k(a(w).toDate()).leggTil(f.totaltAntallDager+p-1);return e.type===O.FAR_OG_FAR&&!i(r)?{familiehendelsedato:D,startdatoPeriode1:l,sluttdatoPeriode1:a(K).format(d),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}:{familiehendelsedato:D,startdatoPeriode1:l,startdatoPeriode2:w,sluttdatoPeriode1:a(A).format(d),sluttdatoPeriode2:a(K).format(d)}},J=(e,t,r,o)=>{const s=y(r);if(e.type===O.FAR_OG_FAR){const p=v(t),D=P(t),l=k(a(s).toDate()).leggTil(p+(i(r)?0:6*5)-1),A=i(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:u(A.format(d)),sluttdatoPeriode1:T(a(l).format(d)),startdatoPeriode2:u(a(l).add(1,"day").format(d)),sluttdatoPeriode2:a(k(l).leggTil(D.totaltAntallDager)).format(d)}}if(o==="kunSøker2HarRett"&&(j(e)||S(e))){const p=v(t),D=P(t),l=k(a(s).toDate()).leggTil(p+(i(r)?0:6*5)-1),A=i(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:u(A.format(d)),sluttdatoPeriode1:T(a(l).format(d)),startdatoPeriode2:u(a(l).add(1,"day").format(d)),sluttdatoPeriode2:a(k(l).leggTil(D.totaltAntallDager)).format(d)}}const n=P(t),g=v(t),f=I(t),F=i(r)||e.type===O.FAR?u(s):L(r),U=k(a(F).toDate()).leggTil(n.totaltAntallDager+g+f-1);return{familiehendelsedato:s,startdatoPeriode1:F,sluttdatoPeriode1:a(U).format(d),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}},oe=(e,t,r,o,s)=>e==="beggeHarRett"||t.type===O.FAR_OG_FAR&&!i(o)?C(t,r,o,s):J(t,r,o,e),Q=(e,t)=>{const o=parseInt(e.getTime()/864e5)-1,s=parseInt(t.getTime()/864e5);let n=s-o;const g=(s-o)/7,f=e.getDay(),F=t.getDay();return f==0?n--:f==6&&(n-=2),F==0?n-=2:F==6&&n--,n-=parseInt(g,10)*2,n},h=(e,t)=>{const r=Q(a(e).toDate(),a(t).toDate()),o=Math.floor(r/5);return{uker:o,dager:r-o*5}},se=e=>{const{startdatoPeriode1:t,sluttdatoPeriode1:r,startdatoPeriode2:o,sluttdatoPeriode2:s}=e,n=h(t,r);if(o&&s){const g=h(o,s);return{uker:n.uker+g.uker,dager:n.dager+g.dager}}return n};export{c as S,ae as a,P as b,se as c,H as d,h as e,oe as f,y as g,ee as h,re as i,E as j,te as k};
