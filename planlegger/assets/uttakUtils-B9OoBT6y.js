import{d as o,i as h,I as d,t as K}from"./Label-8FC7ZTne.js";import{S as A,h as L,i as G}from"./HvemPlanleggerUtils-CBBhcrhA.js";import"./index-DVXBtNgz.js";import{b as l,a as I,e as T}from"./barnetUtils-Dtg6gkcN.js";var F=(e=>(e.Mødrekvote="MØDREKVOTE",e.Fedrekvote="FEDREKVOTE",e.Fellesperiode="FELLESPERIODE",e.Foreldrepenger="FORELDREPENGER",e.ForeldrepengerFørFødsel="FORELDREPENGER_FØR_FØDSEL",e.AktivitetsfriKvote="AKTIVITETSFRI_KVOTE",e))(F||{});const Q=e=>Object.values(e.kontoer).reduce((t,r)=>t+r.dager/5,0),U=(e,t)=>{const r=e.kontoer.find(a=>a.konto===t);return r?r.dager/5:0},B=(e,t)=>{const r=e.kontoer.find(a=>a.konto===t);if(r){const a=Math.floor(r.dager/5);return{uker:a,dager:r.dager-a*5}}return{uker:0,dager:0}},v=e=>U(e,F.ForeldrepengerFørFødsel),N=e=>U(e,F.Mødrekvote),V=e=>U(e,F.Fedrekvote),j=e=>U(e,F.Fellesperiode),S=e=>B(e,F.Fellesperiode),p=e=>U(e,F.Foreldrepenger),_=e=>U(e,F.AktivitetsfriKvote);o.extend(h);const W=3,R=e=>o(e).isoWeekday(),O=e=>R(e)!==6&&R(e)!==7,c=e=>{const t=o(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(R(e)){case 6:return o.utc(r).add(48,"hours").format(d);case 7:return o.utc(r).add(24,"hours").format(d);default:return e}},u=e=>{const t=o(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(R(e)){case 6:return o.utc(r).subtract(24,"hours").format(d);case 7:return o.utc(r).subtract(48,"hours").format(d);default:return e}},x=(e,t)=>{if(O(e)===!1)throw new Error("trekkUttaksdagerFraDato: Dato må være uttaksdag");let r=e,a=0,s=0;for(;s<Math.abs(t);){const i=o.utc(e).add(--a*24,"hours").format(d);O(i)&&(r=i,s++)}return r},P=e=>l(e)?e.overtakelsesdato:I(e)?e.termindato:e.fødselsdato,y=e=>{if(l(e))throw new Error("Kan ikke være adoptert");const t=P(e);return T(e)&&e.termindato&&o(t).isBefore(o(K(e.termindato)))?t:x(c(t),W*5)},Y=(e,t,r,a=0)=>{const i=j(t)-a,m=v(t),E=N(t),D=V(t),w=P(r),k=l(r)||e.type===A.FAR_OG_FAR?c(w):y(r),f=e.type===A.FAR_OG_FAR?u(o(k).add(E,"weeks").add(a,"weeks").subtract(1,"day").format(d)):u(o(k).add(m,"weeks").add(E,"weeks").add(a,"weeks").subtract(1,"day").format(d)),n=c(o(f).add(1,"day").format(d)),g=u(o(n).add(i,"weeks").add(D,"weeks").subtract(1,"day").format(d));return e.type===A.FAR_OG_FAR&&!l(r)?{familiehendelsedato:w,startdatoPeriode1:k,sluttdatoPeriode1:g,startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}:{familiehendelsedato:w,startdatoPeriode1:k,startdatoPeriode2:n,sluttdatoPeriode1:f,sluttdatoPeriode2:g}},H=(e,t,r,a)=>{const s=P(r);if(e.type===A.FAR_OG_FAR){const k=_(t),f=p(t),n=o(s).add(k,"weeks").add(l(r)?0:6,"weeks").subtract(1,"day"),g=l(r)?o(s).add(1,"day"):o(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:c(g.format(d)),sluttdatoPeriode1:u(n.format(d)),startdatoPeriode2:c(o(n).add(1,"day").format(d)),sluttdatoPeriode2:u(o(n).add(f,"weeks").format(d))}}if(a==="kunSøker2HarRett"&&(L(e)||G(e))){const k=_(t),f=p(t),n=o(s).add(k,"weeks").add(l(r)?0:6,"weeks").subtract(1,"day"),g=l(r)?o(s).add(1,"day"):o(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:c(g.format(d)),sluttdatoPeriode1:u(n.format(d)),startdatoPeriode2:c(o(n).add(1,"day").format(d)),sluttdatoPeriode2:u(o(n).add(f,"weeks").format(d))}}const i=p(t),m=_(t),E=v(t),D=l(r)||e.type===A.FAR?c(s):y(r),w=u(o(D).add(i,"weeks").add(m,"weeks").add(E,"weeks").subtract(1,"day").format(d));return{familiehendelsedato:s,startdatoPeriode1:D,sluttdatoPeriode1:w,startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}},X=(e,t,r,a,s)=>e==="beggeHarRett"||t.type===A.FAR_OG_FAR&&!l(a)?Y(t,r,a,s):H(t,r,a,e),M=(e,t)=>{const r=o(e).toDate(),a=o(t).toDate(),s=7*24*60*60*1e3,i=Math.abs(r.getTime()-a.getTime());return Math.round(i/s)},Z=e=>{const{startdatoPeriode1:t,sluttdatoPeriode1:r,startdatoPeriode2:a,sluttdatoPeriode2:s}=e;let i=M(r,t);return a&&s&&(i+=M(s,a)),i};export{F as S,_ as a,p as b,Z as c,S as d,j as e,X as f,P as g,Q as h,v as i,M as w};
