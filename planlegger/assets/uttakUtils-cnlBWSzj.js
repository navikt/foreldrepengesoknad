import{aI as E,b9 as k,a1 as p,ba as O,bb as w,k as n,b8 as F,bc as R,bd as B,be as j}from"./iframe-CKmKbywv.js";import{H as A,p as x,l as W}from"./HvemPlanleggerUtils-Ckqzekpn.js";import{e as D,a as Y,b as H}from"./barnetUtils-DqLZZUfD.js";const q=({famDato:t,tilgjengeligeStønadskontoer:e,fellesperiodeDagerMor:o,startdato:r})=>{if(o===void 0)return{søker1:[],søker2:[]};const a=E(r??t).denneEllerNeste(),i=[],l=[],m=e.find(s=>s.konto==="FELLESPERIODE").dager-o,d=e.find(s=>s.konto==="FORELDREPENGER_FØR_FØDSEL"),c=e.find(s=>s.konto==="MØDREKVOTE"),u=e.find(s=>s.konto==="FEDREKVOTE");let f=a;if(d!==void 0){const s=k(E(f).trekkFra(15),d.dager),g={forelder:p.mor,kontoType:"FORELDREPENGER_FØR_FØDSEL",fom:s.fom,tom:s.tom};i.push(g),f=E(g.tom).neste()}if(c!==void 0){const s=k(f,c.dager),g={forelder:p.mor,kontoType:"MØDREKVOTE",fom:s.fom,tom:s.tom};i.push(g),f=E(g.tom).neste()}if(o!==void 0&&o>0){const s=k(f,o),g={forelder:p.mor,kontoType:"FELLESPERIODE",fom:s.fom,tom:s.tom};i.push(g),f=E(g.tom).neste()}if(m!==void 0&&m>0){const s=k(f,m),g={forelder:p.farMedmor,kontoType:"FELLESPERIODE",fom:s.fom,tom:s.tom};l.push(g),f=E(g.tom).neste()}if(u!==void 0){const s=k(f,u.dager),g={forelder:p.farMedmor,kontoType:"FEDREKVOTE",fom:s.fom,tom:s.tom};l.push(g)}return{søker1:[...i].sort(O),søker2:[...l].sort(O)}},z=(t,e,o,r,a,i)=>{const l=E(t).denneEllerNeste(),m=[];if(o){const d={kontoType:"AKTIVITETSFRI_KVOTE",fom:k(l,r.dager).fom,tom:k(l,r.dager).tom};m.push(d);const c={kontoType:"FORELDREPENGER",fom:k(E(d.tom).neste(),e.dager).fom,tom:k(E(d.tom).neste(),e.dager).tom};m.push(c)}else if(i){const d={kontoType:"AKTIVITETSFRI_KVOTE",fom:k(l,r.dager).fom,tom:k(l,r.dager).tom};m.push(d)}else{let d=l;if(w(t)&&a&&r){const u={kontoType:"AKTIVITETSFRI_KVOTE",fom:k(l,r.dager).fom,tom:k(l,r.dager).tom};m.push(u),d=E(u.tom).neste()}const c={kontoType:e.konto,fom:k(d,e.dager).fom,tom:k(d,e.dager).tom};m.push(c)}return{søker1:m,søker2:[]}},C=(t,e)=>{const o=E(t).denneEllerNeste();return{søker1:[{kontoType:e.konto,fom:k(o,e.dager).fom,tom:k(o,e.dager).tom}],søker2:[]}},J=(t,e,o,r,a,i,l)=>e?z(t,o,r,a,i,l):C(t,o),Q=(t,e,o)=>{const r=E(t).denneEllerNeste(),a=[];if(o!==void 0){const m={kontoType:o.konto,fom:E(r).trekkFra(15),tom:E(r).forrige()};a.push(m)}const i=k(r,e.dager),l={kontoType:e.konto,fom:i.fom,tom:i.tom};return a.push(l),{søker1:[...a].sort(O),søker2:[]}},X=(t,e,o,r,a,i,l,m)=>{const d=E(m??t).denneEllerNeste(),c=[];if(o)if(i){const u={kontoType:"FORELDREPENGER",fom:k(d,e.dager).fom,tom:k(d,e.dager).tom};c.push(u)}else{const u={kontoType:"AKTIVITETSFRI_KVOTE",fom:k(d,r.dager).fom,tom:k(d,r.dager).tom};c.push(u);const f={kontoType:"FORELDREPENGER",fom:k(E(u.tom).neste(),e.dager).fom,tom:k(E(u.tom).neste(),e.dager).tom};c.push(f)}else if(l){const u={kontoType:"AKTIVITETSFRI_KVOTE",fom:k(d,r.dager).fom,tom:k(d,r.dager).tom};c.push(u)}else{let u=d;if(w(t)&&a&&!i&&r){const s={kontoType:"AKTIVITETSFRI_KVOTE",fom:k(d,r.dager).fom,tom:k(d,r.dager).tom};c.push(s),u=E(s.tom).neste()}const f={kontoType:e.konto,fom:k(u,e.dager).fom,tom:k(u,e.dager).tom};c.push(f)}return{søker1:[...c].sort(O),søker2:[]}},Z=(t,e,o,r,a,i,l,m,d,c)=>e?X(t,o,a,i,l,m,d,c):Q(t,o,r),$=({situasjon:t,famDato:e,erFarEllerMedmor:o,tilgjengeligeStønadskontoer:r,erMorUfør:a,bareFarMedmorHarRett:i,erAleneOmOmsorg:l,startdato:m,farOgFar:d})=>{const c=r.find(s=>s.konto==="FORELDREPENGER"),u=r.find(s=>s.konto==="FORELDREPENGER_FØR_FØDSEL"),f=r.find(s=>s.konto==="AKTIVITETSFRI_KVOTE");return t==="adopsjon"?J(e,o,c,a,f,i,d):Z(e,o,c,u,a,f,i,l,d,m)},it=t=>Object.values(t.kontoer).reduce((e,o)=>{const r=P(o.dager);return{uker:e.uker+r.uker,dager:e.dager+r.dager}},{uker:0,dager:0}),P=t=>{const e=Math.floor(t/5);return{uker:e,dager:t-e*5,totaltAntallDager:t}},_=(t,e)=>{const o=t.kontoer.find(r=>r.konto===e);return o?o.dager:0},L=(t,e)=>{const o=t.kontoer.find(r=>r.konto===e);return o?P(o.dager):{uker:0,dager:0,totaltAntallDager:0}},v=t=>_(t,"FORELDREPENGER_FØR_FØDSEL"),b=t=>_(t,"MØDREKVOTE"),tt=t=>_(t,"FEDREKVOTE"),kt=t=>L(t,"AKTIVITETSFRI_KVOTE"),I=t=>_(t,"AKTIVITETSFRI_KVOTE"),et=t=>L(t,"FELLESPERIODE"),y=t=>L(t,"FORELDREPENGER");n.extend(j);const ot=3,U=t=>n(t).isoWeekday(),S=t=>U(t)!==6&&U(t)!==7,T=t=>{const e=n(t).toDate(),o=t&&new Date(e.getFullYear(),e.getMonth(),e.getDate(),12);switch(U(t)){case 6:return n.utc(o).add(48,"hours").format(F);case 7:return n.utc(o).add(24,"hours").format(F);default:return t}},h=t=>{const e=n(t).toDate(),o=t&&new Date(e.getFullYear(),e.getMonth(),e.getDate(),12);switch(U(t)){case 6:return n.utc(o).subtract(24,"hours").format(F);case 7:return n.utc(o).subtract(48,"hours").format(F);default:return t}},rt=(t,e)=>{if(S(t)===!1)throw new Error("trekkUttaksdagerFraDato: Dato må være uttaksdag");let o=t,r=0,a=0;for(;a<Math.abs(e);){const i=n.utc(t).add(--r*24,"hours").format(F);S(i)&&(o=i,a++)}return o},V=t=>D(t)?t.overtakelsesdato:Y(t)?t.termindato:t.fødselsdato,K=t=>{if(D(t))throw new Error("Kan ikke være adoptert");const e=V(t);return H(t)&&t.termindato&&n(e).isBefore(n(B(t.termindato)))?T(e):rt(T(e),ot*5)},st=(t,e,o,r=0)=>{const a=Number.parseInt(r.toString(),10),i=et(e).totaltAntallDager,l=P(a),m=P(i-a),d=v(e),c=b(e),u=tt(e),f=V(o),s=D(o)||t.type===A.FAR_OG_FAR?T(T(f)):K(o),g=t.type===A.FAR_OG_FAR?R(n(s).toDate()).leggTil(c+l.totaltAntallDager-1):R(n(s).toDate()).leggTil(d+c+l.totaltAntallDager-1),N=T(n(g).add(1,"day").format(F)),M=R(n(N).toDate()).leggTil(m.totaltAntallDager+u-1);return t.type===A.FAR_OG_FAR&&!D(o)?{familiehendelsedato:f,startdatoPeriode1:s,sluttdatoPeriode1:n(M).format(F),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}:{familiehendelsedato:f,startdatoPeriode1:s,startdatoPeriode2:N,sluttdatoPeriode1:n(g).format(F),sluttdatoPeriode2:n(M).format(F)}},G=(t,e,o,r)=>{const a=V(o);if(t.type===A.FAR_OG_FAR){const u=I(e),f=y(e),s=R(n(h(a)).toDate()).leggTil(u+(D(o)?0:29)),g=D(o)?n(a):n(a).add(6,"weeks");return{familiehendelsedato:a,startdatoPeriode1:T(g.format(F)),sluttdatoPeriode1:h(n(s).format(F)),startdatoPeriode2:T(n(s).add(1,"day").format(F)),sluttdatoPeriode2:n(R(s).leggTil(f.totaltAntallDager)).format(F)}}if(r==="kunSøker2HarRett"&&(x(t)||W(t))){const u=I(e),f=y(e),s=R(n(h(a)).toDate()).leggTil(u+(D(o)?0:29)),g=D(o)?n(a):n(a).add(6,"weeks");return{familiehendelsedato:a,startdatoPeriode1:T(g.format(F)),sluttdatoPeriode1:n(s).format(F),startdatoPeriode2:T(n(s).add(1,"day").format(F)),sluttdatoPeriode2:n(R(s).leggTil(f.totaltAntallDager)).format(F)}}const i=y(e),l=I(e),m=v(e),d=D(o)||t.type===A.FAR?T(a):K(o),c=R(n(d).toDate()).leggTil(i.totaltAntallDager+l+m-1);return{familiehendelsedato:a,startdatoPeriode1:d,sluttdatoPeriode1:n(c).format(F),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}},lt=(t,e,o,r,a)=>e.type===A.FAR_OG_FAR&&!D(r)?G(e,o,r,t):t==="beggeHarRett"?st(e,o,r,a):G(e,o,r,t),ct=t=>{const{kontoer:e}=t;return{uker:e.reduce((o,r)=>Math.round(r.dager/5)+o,0),dager:e.reduce((o,r,a)=>{const i=r.dager+o;return a===e.length-1?i%5:i},0)}},ut=({erDeltUttak:t,famDato:e,tilgjengeligeStønadskontoer:o,fellesperiodeDagerMor:r,erAdopsjon:a,erFarEllerMedmor:i,erMorUfør:l,bareFarMedmorHarRett:m,erAleneOmOmsorg:d,startdato:c,farOgFar:u})=>t?q({famDato:e,tilgjengeligeStønadskontoer:o,fellesperiodeDagerMor:r,startdato:c}):$({situasjon:a?"adopsjon":"fødsel",famDato:e,erFarEllerMedmor:i,tilgjengeligeStønadskontoer:o,erMorUfør:l,bareFarMedmorHarRett:m,erAleneOmOmsorg:d,startdato:c,farOgFar:u}),mt=(t,e,o)=>t?e.filter(r=>o?r.forelder===p.farMedmor:r.forelder===p.mor):e,ft=(t,e,o)=>t?e.filter(r=>o?r.forelder===p.mor:r.forelder===p.farMedmor):[];export{kt as a,y as b,ct as c,et as d,P as e,lt as f,V as g,mt as h,ft as i,it as j,h as k,ut as l};
