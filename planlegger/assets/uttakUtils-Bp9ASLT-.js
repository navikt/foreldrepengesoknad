import{d as a,a as I,U as c,I as d,t as B}from"./Label-DMHnewTW.js";import{S as f,h as S,i as j}from"./HvemPlanleggerUtils-D1xsqW5u.js";import"./index-DVXBtNgz.js";import{b as i,a as N,e as V}from"./barnetUtils-Dtg6gkcN.js";var g=(e=>(e.Mødrekvote="MØDREKVOTE",e.Fedrekvote="FEDREKVOTE",e.Fellesperiode="FELLESPERIODE",e.Foreldrepenger="FORELDREPENGER",e.ForeldrepengerFørFødsel="FORELDREPENGER_FØR_FØDSEL",e.AktivitetsfriKvote="AKTIVITETSFRI_KVOTE",e))(g||{});const b=e=>Object.values(e.kontoer).reduce((t,r)=>{const o=R(r.dager);return{uker:t.uker+o.uker,dager:t.dager+o.dager}},{uker:0,dager:0}),R=e=>{const t=Math.floor(e/5);return{uker:t,dager:e-t*5,totaltAntallDager:e}},p=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?r.dager:0},m=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?R(r.dager):{uker:0,dager:0,totaltAntallDager:0}},L=e=>p(e,g.ForeldrepengerFørFødsel),ee=e=>m(e,g.ForeldrepengerFørFødsel),W=e=>p(e,g.Mødrekvote),x=e=>p(e,g.Fedrekvote),te=e=>m(e,g.AktivitetsfriKvote),_=e=>p(e,g.AktivitetsfriKvote),Y=e=>m(e,g.Fellesperiode),v=e=>m(e,g.Foreldrepenger);a.extend(I);const H=3,U=e=>a(e).isoWeekday(),y=e=>U(e)!==6&&U(e)!==7,u=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(U(e)){case 6:return a.utc(r).add(48,"hours").format(d);case 7:return a.utc(r).add(24,"hours").format(d);default:return e}},K=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(U(e)){case 6:return a.utc(r).subtract(24,"hours").format(d);case 7:return a.utc(r).subtract(48,"hours").format(d);default:return e}},q=(e,t)=>{if(y(e)===!1)throw new Error("trekkUttaksdagerFraDato: Dato må være uttaksdag");let r=e,o=0,s=0;for(;s<Math.abs(t);){const n=a.utc(e).add(--o*24,"hours").format(d);y(n)&&(r=n,s++)}return r},w=e=>i(e)?e.overtakelsesdato:N(e)?e.termindato:e.fødselsdato,G=e=>{if(i(e))throw new Error("Kan ikke være adoptert");const t=w(e);return V(e)&&e.termindato&&a(t).isBefore(a(B(e.termindato)))?t:q(u(t),H*5)},z=(e,t,r,o=0)=>{const s=parseInt(o.toString(),10),n=Y(t).totaltAntallDager,k=R(s),P=R(n-s),O=L(t),E=W(t),A=x(t),D=w(r),l=i(r)||e.type===f.FAR_OG_FAR?u(D):G(r),F=e.type===f.FAR_OG_FAR?c(a(l).toDate()).leggTil(E+k.totaltAntallDager-1):c(a(l).toDate()).leggTil(O+E+k.totaltAntallDager-1),M=u(a(F).add(1,"day").format(d)),h=c(a(M).toDate()).leggTil(P.totaltAntallDager+A-1);return e.type===f.FAR_OG_FAR&&!i(r)?{familiehendelsedato:D,startdatoPeriode1:l,sluttdatoPeriode1:a(h).format(d),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}:{familiehendelsedato:D,startdatoPeriode1:l,startdatoPeriode2:M,sluttdatoPeriode1:a(F).format(d),sluttdatoPeriode2:a(h).format(d)}},C=(e,t,r,o)=>{const s=w(r);if(e.type===f.FAR_OG_FAR){const A=_(t),D=v(t),l=c(a(s).toDate()).leggTil(A+(i(r)?0:6*5-1)),F=i(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:u(F.format(d)),sluttdatoPeriode1:K(a(l).format(d)),startdatoPeriode2:u(a(l).add(1,"day").format(d)),sluttdatoPeriode2:a(c(l).leggTil(D.totaltAntallDager)).format(d)}}if(o==="kunSøker2HarRett"&&(S(e)||j(e))){const A=_(t),D=v(t),l=c(a(s).toDate()).leggTil(A+(i(r)?0:6*5-1)),F=i(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:u(F.format(d)),sluttdatoPeriode1:K(a(l).format(d)),startdatoPeriode2:u(a(l).add(1,"day").format(d)),sluttdatoPeriode2:a(c(l).leggTil(D.totaltAntallDager)).format(d)}}const n=v(t),k=_(t),P=L(t),O=i(r)||e.type===f.FAR?u(s):G(r),E=c(a(O).toDate()).leggTil(n.totaltAntallDager+k+P-1);return{familiehendelsedato:s,startdatoPeriode1:O,sluttdatoPeriode1:a(E).format(d),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}},re=(e,t,r,o,s)=>e==="beggeHarRett"||t.type===f.FAR_OG_FAR&&!i(o)?z(t,r,o,s):C(t,r,o,e),J=(e,t)=>{let r=0;const o=new Date(e.getTime());for(;o<=t;){const s=o.getDay();s!==0&&s!==6&&r++,o.setDate(o.getDate()+1)}return r},T=(e,t)=>{const r=J(a(e).toDate(),a(t).toDate()),o=Math.floor(r/5);return{uker:o,dager:r-o*5}},ae=e=>{const{startdatoPeriode1:t,sluttdatoPeriode1:r,startdatoPeriode2:o,sluttdatoPeriode2:s}=e,n=T(t,r);if(o&&s){const k=T(o,s);return{uker:n.uker+k.uker,dager:n.dager+k.dager}}return n};export{g as S,te as a,v as b,ae as c,Y as d,T as e,re as f,w as g,b as h,ee as i,R as j};
