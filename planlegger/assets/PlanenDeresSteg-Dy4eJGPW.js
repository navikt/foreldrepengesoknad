import{j as e}from"./jsx-runtime-CLpGMVip.js";import{u as se,a as oe,b as S,C as s,c as h}from"./usePlanleggerNavigator-D5A2C4Zt.js";import{P as ie}from"./PlanleggerStepPage-74yA8_eh.js";import{u as le,U as B,H as ge,M as i,j as q,h as C,B as D,k as de,m as ue,n as pe}from"./VeiviserPage-BKHwxsHN.js";import{g as me,f as ke}from"./FordelingSteg-Dg2XvVLb.js";import{D as p}from"./Dekningsgrad-Bg_cIyqc.js";import{b as ce,h as Se,c as fe,g as Te}from"./HvemPlanleggerUtils-DYtKJeZ8.js";import{u as he,h as je,a as ve}from"./hvemHarRettUtils-BQOe2efP.js";import{d as Q,c as K,g as Oe,l as ye}from"./uttakUtils-ia7jdeKz.js";import{H as m}from"./HvemPlanleggerType-CugjyLV2.js";import{r as z}from"./index-CR__hKHy.js";import{u as xe}from"./useScrollBehaviour-Dvq8pEsj.js";import{U as be}from"./UttaksplanKalender-CAigPc5l.js";import{n as j}from"./validation-DYlyn1BB.js";import"./dateFormValidation-v0HcUGOV.js";import{P}from"./routes-Cyl7_Mgv.js";import{C as Re}from"./CalendarLabels-CkL8D_UL.js";import{A as De}from"./Arbeidssituasjon-i2z_eSVB.js";import{b as Pe,m as Ae}from"./barnetUtils-CpVLOGVp.js";import{b as Fe}from"./BarnehageplassSteg-BB3cKAOd.js";import{O as Ee}from"./OmÅTilpassePlanen-D9GfkVly.js";import{U as _e}from"./UforutsetteEndringer-BqaPJeHC.js";import{V as f,H as V}from"./VStack-2apmvZh_.js";import{a as J}from"./KvoteOppsummering-B0KL1Rvt.js";import{S as Ne}from"./PersonGroup-B--Zxy9X.js";import{T as A}from"./ToggleGroup-CAcqY4_i.js";const Ue=typeof window<"u"&&window.matchMedia===void 0,Me=(g,k)=>{const[d,n]=z.useState(k);return z.useEffect(()=>{if(Ue)return;const T=window.matchMedia(g);n(T.matches);const t=a=>{n(a.matches)};return T.addEventListener("change",t),()=>{T.removeEventListener("change",t)}},[g]),d},Ie="_calendar_wfn3i_1",He={calendar:Ie},we=(g,k,d)=>{const n=Q(g===p.HUNDRE_PROSENT?k[p.HUNDRE_PROSENT]:k[p.ÅTTI_PROSENT]);return d.antallDagerSøker1>n.totaltAntallDager?n.totaltAntallDager:d.antallDagerSøker1},Le=({stønadskontoer:g,locale:k})=>{const d=le(),n=se(k),T=oe();xe();const t=j(S(s.HVEM_PLANLEGGER)),a=j(S(s.OM_BARNET)),v=j(S(s.HVOR_LANG_PERIODE)),c=j(S(s.ARBEIDSSITUASJON)),W=S(s.UTTAKSPLAN)||[],l=S(s.FORDELING),F=h(s.FORDELING),X=j(h(s.HVOR_LANG_PERIODE)),O=h(s.UTTAKSPLAN),y=h(s.ORIGINAL_UTTAKSPLAN),x=h(s.TILPASS_PLAN),E=g[p.HUNDRE_PROSENT],_=g[p.ÅTTI_PROSENT],Y=Fe(a),N=v.dekningsgrad===p.HUNDRE_PROSENT?E:_,Z=Q(N),$=o=>{const G=o;X({dekningsgrad:G}),l&&F({antallDagerSøker1:we(G,g,l)})},b=()=>{const o=[...W];return o.push([...r.søker1,...r.søker2]),o},u=he(c),ee=t.type===m.FAR_OG_FAR&&(u==="kunSøker1HarRett"||u==="kunSøker2HarRett"),U=K(E),M=K(_),I=Oe(a),R=ce(t),H=je(u,t)||ve(u,t);let w;(t.type===m.MOR_OG_MEDMOR||t.type===m.MOR_OG_FAR)&&u==="kunSøker2HarRett"&&(w=B(B(I).denneEllerNeste()).leggTil(30));const L=Se(t,u),r=ye({erDeltUttak:l!==void 0,famDato:I,startdato:w,tilgjengeligeStønadskontoer:N.kontoer,fellesperiodeDagerMor:l==null?void 0:l.antallDagerSøker1,bareFarMedmorHarRett:H,erAdopsjon:Pe(a),erFarEllerMedmor:L,erMorUfør:(c==null?void 0:c.status)===De.UFØR,erAleneOmOmsorg:t.type===m.FAR||t.type===m.MOR,farOgFar:t.type===m.FAR_OG_FAR}),te=fe(t,d),re=Te(t,d),ne=!0,ae=Me("screen and (min-width: 480)");return e.jsx("form",{children:e.jsx(ie,{steps:T,goToStep:n.goToNextStep,children:e.jsxs(f,{gap:"6",children:[e.jsxs(V,{justify:"space-between",children:[e.jsx(ge,{size:"medium",spacing:!0,level:"2",children:e.jsx(i,{id:"OversiktSteg.Tittel",values:{erAleneforsørger:R}})}),e.jsx(f,{gap:"1",children:e.jsx(q,{size:"xsmall",variant:"secondary",type:"button",icon:e.jsx(J,{height:24,width:24,fontSize:"1-5rem","aria-hidden":!0}),onClick:()=>{O(b()),y([...r.søker1,...r.søker2]),x(!0),n.goToNextStep(P.TILPASS_PLANEN)},children:e.jsx(i,{id:"OversiktSteg.Infoboks.Tilpass"})})})]}),ee&&a.erFødsel&&e.jsx(C,{header:e.jsx(i,{id:"OversiktSteg.Infoboks.FarOgFar.DereHarOppgitt"}),icon:e.jsx(Ne,{height:24,width:24,fontSize:"1.5rem",color:"#0067C5","aria-hidden":!0}),color:"green",children:e.jsxs("div",{children:[e.jsx(D,{children:e.jsx(i,{id:"OversiktSteg.Infoboks.FarOgFar.DenSomErBiologisk"})}),e.jsx(D,{children:e.jsx(i,{id:"OversiktSteg.Infoboks.FarOgFar.HvisDetErStebarnsadopsjon"})})]})}),e.jsxs(f,{gap:"1",children:[e.jsxs(A,{defaultValue:v==null?void 0:v.dekningsgrad,size:ae?"medium":"small",variant:"neutral",onChange:$,style:{width:"100%"},children:[e.jsx(A.Item,{value:p.HUNDRE_PROSENT,children:e.jsx(i,{id:"OversiktSteg.100",values:{uker:U.uker,dager:U.dager}})}),e.jsx(A.Item,{value:p.ÅTTI_PROSENT,children:e.jsx(i,{id:"OversiktSteg.80",values:{uker:M.uker,dager:M.dager}})})]}),u==="beggeHarRett"&&(!a.erFødsel||t.type!==m.FAR_OG_FAR)&&e.jsx(de,{defaultValue:l==null?void 0:l.antallDagerSøker1,label:"Velg fordeling fellesperiode",hideLabel:!0,name:"antallDagerSøker1",onChange:o=>{F({antallDagerSøker1:parseInt(o.target.value,10)})},children:me(Z).map(o=>e.jsx("option",{value:o.antallUkerOgDagerSøker1.totaltAntallDager,children:ke(d,o,t,te,re,ne)},o.antallUkerOgDagerSøker1.totaltAntallDager))})]}),e.jsx(f,{gap:"5",children:e.jsx("div",{className:He.calendar,children:e.jsx(be,{bareFarHarRett:H,erFarEllerMedmor:L,harAktivitetskravIPeriodeUtenUttak:!1,søkersPerioder:r.søker1,annenPartsPerioder:r.søker2,navnAnnenPart:"Test",barn:Ae(a),planleggerLegend:e.jsx(Re,{hvemPlanlegger:t,barnet:a,hvemHarRett:u,uttaksplan:[...r.søker1,...r.søker2]}),barnehagestartdato:Y})})}),e.jsx(C,{header:e.jsx(i,{id:"OversiktSteg.Infoboks.Utkast",values:{erAleneforsørger:R}}),color:"gray",icon:e.jsx(J,{height:24,width:24,fontSize:"1-5rem","aria-hidden":!0}),children:e.jsxs(f,{gap:"2",children:[e.jsx(ue,{children:e.jsx(i,{id:"OversiktSteg.Infoboks.Utkast.Tekst",values:{erAleneforsørger:R}})}),e.jsx(V,{children:e.jsx(q,{variant:"primary",type:"button",onClick:()=>{O(b()),y([...r.søker1,...r.søker2]),x(!0),n.goToNextStep(P.TILPASS_PLANEN)},children:e.jsx(D,{size:"small",children:e.jsx(i,{id:"OversiktSteg.Infoboks.TilpassPlanen"})})})})]})}),e.jsxs(f,{gap:"1",children:[e.jsx(Ee,{arbeidssituasjon:c,barnet:a,hvemPlanlegger:t}),e.jsx(_e,{arbeidssituasjon:c,hvemPlanlegger:t,barnet:a})]}),e.jsx(pe,{goToPreviousStep:n.goToPreviousDefaultStep,nextButtonOnClick:()=>{O(b()),y([...r.søker1,...r.søker2]),x(!1),n.goToNextStep(P.OPPSUMMERING)},isJumpToEndButton:!0,useSimplifiedTexts:!0})]})})})};Le.__docgenInfo={description:"",methods:[],displayName:"PlanenDeresSteg",props:{stønadskontoer:{required:!0,tsType:{name:"signature",type:"object",raw:`{
    '80': TilgjengeligeStønadskontoerForDekningsgrad;
    '100': TilgjengeligeStønadskontoerForDekningsgrad;
}`,signature:{properties:[{key:"80",value:{name:"signature",type:"object",raw:`{
    kontoer: Stønadskonto[];
    minsteretter: TilgjengeligeMinsterettskontoer;
    tillegg?: TilgjengeligeKontoTillegg;
}`,signature:{properties:[{key:"kontoer",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    konto: StønadskontoType;
    dager: number;
}`,signature:{properties:[{key:"konto",value:{name:"StønadskontoType",required:!0}},{key:"dager",value:{name:"number",required:!0}}]}}],raw:"Stønadskonto[]",required:!0}},{key:"minsteretter",value:{name:"signature",type:"object",raw:`{
    [MinsterettType.farRundtFødsel]: number;
    [MinsterettType.toTette]: number;
}`,signature:{properties:[]},required:!0}},{key:"tillegg",value:{name:"signature",type:"object",raw:`{
    [KontoTilleggType.prematur]: number;
    [KontoTilleggType.flerbarn]: number;
}`,signature:{properties:[]},required:!1}}]},required:!0}},{key:"100",value:{name:"signature",type:"object",raw:`{
    kontoer: Stønadskonto[];
    minsteretter: TilgjengeligeMinsterettskontoer;
    tillegg?: TilgjengeligeKontoTillegg;
}`,signature:{properties:[{key:"kontoer",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    konto: StønadskontoType;
    dager: number;
}`,signature:{properties:[{key:"konto",value:{name:"StønadskontoType",required:!0}},{key:"dager",value:{name:"number",required:!0}}]}}],raw:"Stønadskonto[]",required:!0}},{key:"minsteretter",value:{name:"signature",type:"object",raw:`{
    [MinsterettType.farRundtFødsel]: number;
    [MinsterettType.toTette]: number;
}`,signature:{properties:[]},required:!0}},{key:"tillegg",value:{name:"signature",type:"object",raw:`{
    [KontoTilleggType.prematur]: number;
    [KontoTilleggType.flerbarn]: number;
}`,signature:{properties:[]},required:!1}}]},required:!0}}]}},description:""},locale:{required:!0,tsType:{name:"union",raw:"LocaleNo | 'en'",elements:[{name:"union",raw:"'nb' | 'nn'",elements:[{name:"literal",value:"'nb'"},{name:"literal",value:"'nn'"}]},{name:"literal",value:"'en'"}]},description:""}}};export{Le as P};
