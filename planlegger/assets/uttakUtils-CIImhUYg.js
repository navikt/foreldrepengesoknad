import{d as a,a as I,U as u,I as d,t as B}from"./Label-DMHnewTW.js";import{S as A,h as j,i as S}from"./HvemPlanleggerUtils-D1xsqW5u.js";import"./index-DVXBtNgz.js";import{b as g,a as N,e as V}from"./barnetUtils-Dtg6gkcN.js";var c=(e=>(e.Mødrekvote="MØDREKVOTE",e.Fedrekvote="FEDREKVOTE",e.Fellesperiode="FELLESPERIODE",e.Foreldrepenger="FORELDREPENGER",e.ForeldrepengerFørFødsel="FORELDREPENGER_FØR_FØDSEL",e.AktivitetsfriKvote="AKTIVITETSFRI_KVOTE",e))(c||{});const b=e=>Object.values(e.kontoer).reduce((t,r)=>t+r.dager/5,0),ee=e=>Object.values(e.kontoer).reduce((t,r)=>{const o=R(r.dager);return{uker:t.uker+o.uker,dager:t.dager+o.dager}},{uker:0,dager:0}),m=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?r.dager:0},R=e=>{const t=Math.floor(e/5);return{uker:t,dager:e-t*5,totaltAntallDager:e}},v=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?R(r.dager):{uker:0,dager:0,totaltAntallDager:0}},L=e=>m(e,c.ForeldrepengerFørFødsel),te=e=>v(e,c.ForeldrepengerFørFødsel),W=e=>m(e,c.Mødrekvote),x=e=>m(e,c.Fedrekvote),re=e=>v(e,c.AktivitetsfriKvote),P=e=>m(e,c.AktivitetsfriKvote),Y=e=>v(e,c.Fellesperiode),_=e=>v(e,c.Foreldrepenger);a.extend(I);const H=3,p=e=>a(e).isoWeekday(),T=e=>p(e)!==6&&p(e)!==7,k=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(p(e)){case 6:return a.utc(r).add(48,"hours").format(d);case 7:return a.utc(r).add(24,"hours").format(d);default:return e}},h=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(p(e)){case 6:return a.utc(r).subtract(24,"hours").format(d);case 7:return a.utc(r).subtract(48,"hours").format(d);default:return e}},q=(e,t)=>{if(T(e)===!1)throw new Error("trekkUttaksdagerFraDato: Dato må være uttaksdag");let r=e,o=0,s=0;for(;s<Math.abs(t);){const l=a.utc(e).add(--o*24,"hours").format(d);T(l)&&(r=l,s++)}return r},y=e=>g(e)?e.overtakelsesdato:N(e)?e.termindato:e.fødselsdato,G=e=>{if(g(e))throw new Error("Kan ikke være adoptert");const t=y(e);return V(e)&&e.termindato&&a(t).isBefore(a(B(e.termindato)))?t:q(k(t),H*5)},z=(e,t,r,o=0)=>{const s=parseInt(o.toString(),10),l=Y(t).totaltAntallDager,n=R(s),F=R(l-s),E=L(t),U=W(t),O=x(t),D=y(r),i=g(r)||e.type===A.FAR_OG_FAR?k(D):G(r),f=e.type===A.FAR_OG_FAR?u(a(i).toDate()).leggTil(U+n.totaltAntallDager-1):u(a(i).toDate()).leggTil(E+U+n.totaltAntallDager-1),w=k(a(f).add(1,"day").format(d)),M=u(a(w).toDate()).leggTil(F.totaltAntallDager+O-1);return e.type===A.FAR_OG_FAR&&!g(r)?{familiehendelsedato:D,startdatoPeriode1:i,sluttdatoPeriode1:a(M).format(d),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}:{familiehendelsedato:D,startdatoPeriode1:i,startdatoPeriode2:w,sluttdatoPeriode1:a(f).format(d),sluttdatoPeriode2:a(M).format(d)}},C=(e,t,r,o)=>{const s=y(r);if(e.type===A.FAR_OG_FAR){const O=P(t),D=_(t),i=u(a(s).toDate()).leggTil(O+(g(r)?0:6*5-1)),f=g(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:k(f.format(d)),sluttdatoPeriode1:h(a(i).format(d)),startdatoPeriode2:k(a(i).add(1,"day").format(d)),sluttdatoPeriode2:a(u(i).leggTil(D.totaltAntallDager)).format(d)}}if(o==="kunSøker2HarRett"&&(j(e)||S(e))){const O=P(t),D=_(t),i=u(a(s).toDate()).leggTil(O+(g(r)?0:6*5-1)),f=g(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:k(f.format(d)),sluttdatoPeriode1:h(a(i).format(d)),startdatoPeriode2:k(a(i).add(1,"day").format(d)),sluttdatoPeriode2:a(u(i).leggTil(D.totaltAntallDager)).format(d)}}const l=_(t),n=P(t),F=L(t),E=g(r)||e.type===A.FAR?k(s):G(r),U=u(a(E).toDate()).leggTil(l.totaltAntallDager+n+F-1);return{familiehendelsedato:s,startdatoPeriode1:E,sluttdatoPeriode1:a(U).format(d),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}},ae=(e,t,r,o,s)=>e==="beggeHarRett"||t.type===A.FAR_OG_FAR&&!g(o)?z(t,r,o,s):C(t,r,o,e),J=(e,t)=>{let r;if(t<e)return-1;const o=e.getDay(),s=t.getDay();let l=o==0?7:o,n=s==0?7:s;l=l>5?5:l,n=n>5?5:n;const F=Math.floor((t.getTime()-e.getTime())/6048e5);return l<=n?r=F*5+(n-l):r=(F+1)*5-(l-n),(o>=6||o==0)&&r--,r+1},K=(e,t)=>{const r=J(a(e).toDate(),a(t).toDate()),o=Math.floor(r/5);return{uker:o,dager:r-o*5}},oe=e=>{const{startdatoPeriode1:t,sluttdatoPeriode1:r,startdatoPeriode2:o,sluttdatoPeriode2:s}=e,l=K(t,r);if(o&&s){const n=K(o,s);return{uker:l.uker+n.uker,dager:l.dager+n.dager}}return l};export{c as S,re as a,_ as b,oe as c,Y as d,K as e,ae as f,y as g,ee as h,te as i,R as j,b as k};
