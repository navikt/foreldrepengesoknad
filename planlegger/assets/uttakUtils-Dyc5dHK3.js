import{d as a,a as L,U as F,I as n,t as G}from"./Label-DMHnewTW.js";import{S as U,h as B,i as j}from"./HvemPlanleggerUtils-D1xsqW5u.js";import"./index-DVXBtNgz.js";import{b as i,a as N,e as V}from"./barnetUtils-Dtg6gkcN.js";var g=(e=>(e.Mødrekvote="MØDREKVOTE",e.Fedrekvote="FEDREKVOTE",e.Fellesperiode="FELLESPERIODE",e.Foreldrepenger="FORELDREPENGER",e.ForeldrepengerFørFødsel="FORELDREPENGER_FØR_FØDSEL",e.AktivitetsfriKvote="AKTIVITETSFRI_KVOTE",e))(g||{});const b=e=>Object.values(e.kontoer).reduce((t,r)=>t+r.dager/5,0),ee=e=>Object.values(e.kontoer).reduce((t,r)=>{const o=E(r.dager);return{uker:t.uker+o.uker,dager:t.dager+o.dager}},{uker:0,dager:0}),W=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?r.dager/5:0},p=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?r.dager:0},E=e=>{const t=Math.floor(e/5);return{uker:t,dager:e-t*5,totaltAntallDager:e}},_=(e,t)=>{const r=e.kontoer.find(o=>o.konto===t);return r?E(r.dager):{uker:0,dager:0,totaltAntallDager:0}},te=e=>W(e,g.ForeldrepengerFørFødsel),h=e=>p(e,g.ForeldrepengerFørFødsel),x=e=>p(e,g.Mødrekvote),S=e=>p(e,g.Fedrekvote),re=e=>_(e,g.AktivitetsfriKvote),v=e=>p(e,g.AktivitetsfriKvote),Y=e=>_(e,g.Fellesperiode),P=e=>_(e,g.Foreldrepenger);a.extend(L);const H=3,R=e=>a(e).isoWeekday(),K=e=>R(e)!==6&&R(e)!==7,D=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(R(e)){case 6:return a.utc(r).add(48,"hours").format(n);case 7:return a.utc(r).add(24,"hours").format(n);default:return e}},M=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(R(e)){case 6:return a.utc(r).subtract(24,"hours").format(n);case 7:return a.utc(r).subtract(48,"hours").format(n);default:return e}},q=(e,t)=>{if(K(e)===!1)throw new Error("trekkUttaksdagerFraDato: Dato må være uttaksdag");let r=e,o=0,s=0;for(;s<Math.abs(t);){const d=a.utc(e).add(--o*24,"hours").format(n);K(d)&&(r=d,s++)}return r},y=e=>i(e)?e.overtakelsesdato:N(e)?e.termindato:e.fødselsdato,I=e=>{if(i(e))throw new Error("Kan ikke være adoptert");const t=y(e);return V(e)&&e.termindato&&a(t).isBefore(a(G(e.termindato)))?t:q(D(t),H*5)},z=(e,t,r,o=0)=>{const s=Y(t).totaltAntallDager,d=E(o),c=E(s-o),A=h(t),k=x(t),m=S(t),f=y(r),u=i(r)||e.type===U.FAR_OG_FAR?D(f):I(r),l=e.type===U.FAR_OG_FAR?F(a(u).toDate()).leggTil(k+d.totaltAntallDager-1):F(a(u).toDate()).leggTil(A+k+d.totaltAntallDager-1),O=D(a(l).add(1,"day").format(n)),w=F(a(O).toDate()).leggTil(c.totaltAntallDager+m-1);return e.type===U.FAR_OG_FAR&&!i(r)?{familiehendelsedato:f,startdatoPeriode1:u,sluttdatoPeriode1:a(w).format(n),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}:{familiehendelsedato:f,startdatoPeriode1:u,startdatoPeriode2:O,sluttdatoPeriode1:a(l).format(n),sluttdatoPeriode2:a(w).format(n)}},C=(e,t,r,o)=>{const s=y(r);if(e.type===U.FAR_OG_FAR){const f=v(t),u=P(t),l=F(a(s).toDate()).leggTil(f+(i(r)?0:6*5)-1),O=i(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:D(O.format(n)),sluttdatoPeriode1:M(a(l).format(n)),startdatoPeriode2:D(a(l).add(1,"day").format(n)),sluttdatoPeriode2:a(F(l).leggTil(u.totaltAntallDager)).format(n)}}if(o==="kunSøker2HarRett"&&(B(e)||j(e))){const f=v(t),u=P(t),l=F(a(s).toDate()).leggTil(f+(i(r)?0:6*5)-1),O=i(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:D(O.format(n)),sluttdatoPeriode1:M(a(l).format(n)),startdatoPeriode2:D(a(l).add(1,"day").format(n)),sluttdatoPeriode2:a(F(l).leggTil(u.totaltAntallDager)).format(n)}}const d=P(t),c=v(t),A=h(t),k=i(r)||e.type===U.FAR?D(s):I(r),m=F(a(k).toDate()).leggTil(d.totaltAntallDager+c+A-1);return{familiehendelsedato:s,startdatoPeriode1:k,sluttdatoPeriode1:a(m).format(n),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}},ae=(e,t,r,o,s)=>e==="beggeHarRett"||t.type===U.FAR_OG_FAR&&!i(o)?z(t,r,o,s):C(t,r,o,e),J=(e,t)=>{const o=parseInt(e.getTime()/864e5)-1,s=parseInt(t.getTime()/864e5);let d=s-o;const c=(s-o)/7,A=e.getDay(),k=t.getDay();return A==0?d--:A==6&&(d-=2),k==0?d-=2:k==6&&d--,d-=parseInt(c,10)*2,d},T=(e,t)=>{const r=J(a(e).toDate(),a(t).toDate()),o=Math.floor(r/5);return{uker:o,dager:r-o*5}},oe=e=>{const{startdatoPeriode1:t,sluttdatoPeriode1:r,startdatoPeriode2:o,sluttdatoPeriode2:s}=e,d=T(t,r);if(o&&s){const c=T(o,s);return{uker:d.uker+c.uker,dager:d.dager+c.dager}}return d};export{g as S,re as a,P as b,oe as c,Y as d,T as e,ae as f,y as g,b as h,te as i,E as j,ee as k};
