import{d as a,c as B,b as d,U as c,t as I}from"./Label-CXFT65WO.js";import{S as f,h as S,i as j}from"./HvemPlanleggerUtils-D1xsqW5u.js";import"./index-CTjT7uj6.js";import{b as n,a as N,e as V}from"./barnetUtils-Dtg6gkcN.js";var u=(t=>(t.Mødrekvote="MØDREKVOTE",t.Fedrekvote="FEDREKVOTE",t.Fellesperiode="FELLESPERIODE",t.Foreldrepenger="FORELDREPENGER",t.ForeldrepengerFørFødsel="FORELDREPENGER_FØR_FØDSEL",t.AktivitetsfriKvote="AKTIVITETSFRI_KVOTE",t))(u||{});const b=t=>Object.values(t.kontoer).reduce((e,r)=>{const o=R(r.dager);return{uker:e.uker+o.uker,dager:e.dager+o.dager}},{uker:0,dager:0}),R=t=>{const e=Math.floor(t/5);return{uker:e,dager:t-e*5,totaltAntallDager:t}},m=(t,e)=>{const r=t.kontoer.find(o=>o.konto===e);return r?r.dager:0},w=(t,e)=>{const r=t.kontoer.find(o=>o.konto===e);return r?R(r.dager):{uker:0,dager:0,totaltAntallDager:0}},L=t=>m(t,u.ForeldrepengerFørFødsel),W=t=>m(t,u.Mødrekvote),x=t=>m(t,u.Fedrekvote),tt=t=>w(t,u.AktivitetsfriKvote),P=t=>m(t,u.AktivitetsfriKvote),Y=t=>w(t,u.Fellesperiode),_=t=>w(t,u.Foreldrepenger);a.extend(B);const H=3,U=t=>a(t).isoWeekday(),K=t=>U(t)!==6&&U(t)!==7,g=t=>{const e=a(t).toDate(),r=t&&new Date(e.getFullYear(),e.getMonth(),e.getDate(),12);switch(U(t)){case 6:return a.utc(r).add(48,"hours").format(d);case 7:return a.utc(r).add(24,"hours").format(d);default:return t}},v=t=>{const e=a(t).toDate(),r=t&&new Date(e.getFullYear(),e.getMonth(),e.getDate(),12);switch(U(t)){case 6:return a.utc(r).subtract(24,"hours").format(d);case 7:return a.utc(r).subtract(48,"hours").format(d);default:return t}},q=(t,e)=>{if(K(t)===!1)throw new Error("trekkUttaksdagerFraDato: Dato må være uttaksdag");let r=t,o=0,s=0;for(;s<Math.abs(e);){const i=a.utc(t).add(--o*24,"hours").format(d);K(i)&&(r=i,s++)}return r},M=t=>n(t)?t.overtakelsesdato:N(t)?t.termindato:t.fødselsdato,G=t=>{if(n(t))throw new Error("Kan ikke være adoptert");const e=M(t);return V(t)&&t.termindato&&a(e).isBefore(a(I(t.termindato)))?e:q(g(e),H*5)},z=(t,e,r,o=0)=>{const s=parseInt(o.toString(),10),i=Y(e).totaltAntallDager,k=R(s),p=R(i-s),O=L(e),E=W(e),A=x(e),D=M(r),l=n(r)||t.type===f.FAR_OG_FAR?g(g(D)):G(r),F=t.type===f.FAR_OG_FAR?c(a(l).toDate()).leggTil(E+k.totaltAntallDager-1):c(a(l).toDate()).leggTil(O+E+k.totaltAntallDager-1),h=g(a(F).add(1,"day").format(d)),y=c(a(h).toDate()).leggTil(p.totaltAntallDager+A-1);return t.type===f.FAR_OG_FAR&&!n(r)?{familiehendelsedato:D,startdatoPeriode1:l,sluttdatoPeriode1:a(y).format(d),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}:{familiehendelsedato:D,startdatoPeriode1:l,startdatoPeriode2:h,sluttdatoPeriode1:a(F).format(d),sluttdatoPeriode2:a(y).format(d)}},C=(t,e,r,o)=>{const s=M(r);if(t.type===f.FAR_OG_FAR){const A=P(e),D=_(e),l=c(a(v(s)).toDate()).leggTil(A+(n(r)?0:6*5-1)),F=n(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:g(F.format(d)),sluttdatoPeriode1:v(a(l).format(d)),startdatoPeriode2:g(a(l).add(1,"day").format(d)),sluttdatoPeriode2:a(c(l).leggTil(D.totaltAntallDager)).format(d)}}if(o==="kunSøker2HarRett"&&(S(t)||j(t))){const A=P(e),D=_(e),l=c(a(v(s)).toDate()).leggTil(A+(n(r)?0:6*5-1)),F=n(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:g(F.format(d)),sluttdatoPeriode1:a(l).format(d),startdatoPeriode2:g(a(l).add(1,"day").format(d)),sluttdatoPeriode2:a(c(l).leggTil(D.totaltAntallDager)).format(d)}}const i=_(e),k=P(e),p=L(e),O=n(r)||t.type===f.FAR?g(s):G(r),E=c(a(O).toDate()).leggTil(i.totaltAntallDager+k+p-1);return{familiehendelsedato:s,startdatoPeriode1:O,sluttdatoPeriode1:a(E).format(d),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}},et=(t,e,r,o,s)=>t==="beggeHarRett"||e.type===f.FAR_OG_FAR&&!n(o)?z(e,r,o,s):C(e,r,o,t),J=(t,e)=>{let r=0;const o=new Date(t.getTime());for(;o<=e;){const s=o.getDay();s!==0&&s!==6&&r++,o.setDate(o.getDate()+1)}return r},T=(t,e)=>{const r=J(a(t).toDate(),a(e).toDate()),o=Math.floor(r/5);return{uker:o,dager:r-o*5}},rt=t=>{const{startdatoPeriode1:e,sluttdatoPeriode1:r,startdatoPeriode2:o,sluttdatoPeriode2:s}=t,i=T(e,r);if(o&&s){const k=T(o,s);return{uker:i.uker+k.uker,dager:i.dager+k.dager}}return i};export{u as S,tt as a,_ as b,rt as c,Y as d,v as e,et as f,M as g,T as h,R as i,b as j};
