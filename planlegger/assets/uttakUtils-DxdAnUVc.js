import{d as a,i as h,I as o,t as K}from"./Uttaksdagen-oR0d4Gua.js";import{S as w,c as L,d as G}from"./HvemPlanleggerUtils-CHTffTZd.js";import"./index-DVXBtNgz.js";import{b as c,a as I,e as T}from"./barnetUtils-Dtg6gkcN.js";var F=(e=>(e.Mødrekvote="MØDREKVOTE",e.Fedrekvote="FEDREKVOTE",e.Fellesperiode="FELLESPERIODE",e.Foreldrepenger="FORELDREPENGER",e.ForeldrepengerFørFødsel="FORELDREPENGER_FØR_FØDSEL",e.AktivitetsfriKvote="AKTIVITETSFRI_KVOTE",e))(F||{});const J=e=>Object.values(e.kontoer).reduce((t,r)=>t+r.dager/5,0),U=(e,t)=>{const r=e.kontoer.find(d=>d.konto===t);return r?r.dager/5:0},M=e=>U(e,F.ForeldrepengerFørFødsel),B=e=>U(e,F.Mødrekvote),N=e=>U(e,F.Fedrekvote),V=e=>U(e,F.Fellesperiode),p=e=>U(e,F.Foreldrepenger),_=e=>U(e,F.AktivitetsfriKvote);a.extend(h);const j=3,D=e=>a(e).isoWeekday(),O=e=>D(e)!==6&&D(e)!==7,k=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(D(e)){case 6:return a.utc(r).add(48,"hours").format(o);case 7:return a.utc(r).add(24,"hours").format(o);default:return e}},u=e=>{const t=a(e).toDate(),r=e&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);switch(D(e)){case 6:return a.utc(r).subtract(24,"hours").format(o);case 7:return a.utc(r).subtract(48,"hours").format(o);default:return e}},W=(e,t)=>{if(O(e)===!1)throw new Error("trekkUttaksdagerFraDato: Dato må være uttaksdag");let r=e,d=0,s=0;for(;s<Math.abs(t);){const i=a.utc(e).add(--d*24,"hours").format(o);O(i)&&(r=i,s++)}return r},P=e=>c(e)?e.overtakelsesdato:I(e)?e.termindato:e.fødselsdato,y=e=>{if(c(e))throw new Error("Kan ikke være adoptert");const t=P(e);return T(e)&&e.termindato&&a(t).isBefore(a(K(e.termindato)))?t:W(k(t),j*5)},x=(e,t,r,d=0)=>{const i=V(t)-d,g=M(t),R=B(t),m=N(t),E=P(r),l=c(r)||e.type===w.FAR_OG_FAR?k(E):y(r),f=e.type===w.FAR_OG_FAR?u(a(l).add(R,"weeks").add(d,"weeks").subtract(1,"day").format(o)):u(a(l).add(g,"weeks").add(R,"weeks").add(d,"weeks").subtract(1,"day").format(o)),n=k(a(f).add(1,"day").format(o)),A=u(a(n).add(i,"weeks").add(m,"weeks").subtract(1,"day").format(o));return e.type===w.FAR_OG_FAR&&!c(r)?{familiehendelsedato:E,startdatoPeriode1:l,sluttdatoPeriode1:A,startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}:{familiehendelsedato:E,startdatoPeriode1:l,startdatoPeriode2:n,sluttdatoPeriode1:f,sluttdatoPeriode2:A}},Y=(e,t,r,d)=>{const s=P(r);if(e.type===w.FAR_OG_FAR){const l=_(t),f=p(t),n=a(s).add(l,"weeks").add(c(r)?0:6,"weeks").subtract(1,"day"),A=c(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:k(A.format(o)),sluttdatoPeriode1:u(n.format(o)),startdatoPeriode2:k(a(n).add(1,"day").format(o)),sluttdatoPeriode2:u(a(n).add(f,"weeks").format(o))}}if(d==="kunSøker2HarRett"&&(L(e)||G(e))){const l=_(t),f=p(t),n=a(s).add(l,"weeks").add(c(r)?0:6,"weeks").subtract(1,"day"),A=c(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:k(A.format(o)),sluttdatoPeriode1:u(n.format(o)),startdatoPeriode2:k(a(n).add(1,"day").format(o)),sluttdatoPeriode2:u(a(n).add(f,"weeks").format(o))}}const i=p(t),g=_(t),R=M(t),m=c(r)||e.type===w.FAR?k(s):y(r),E=u(a(m).add(i,"weeks").add(g,"weeks").add(R,"weeks").subtract(1,"day").format(o));return{familiehendelsedato:s,startdatoPeriode1:m,sluttdatoPeriode1:E,startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}},Q=(e,t,r,d,s)=>e==="beggeHarRett"||t.type===w.FAR_OG_FAR&&!c(d)?x(t,r,d,s):Y(t,r,d,e),v=(e,t)=>{const r=a(e).toDate(),d=a(t).toDate(),s=7*24*60*60*1e3,i=Math.abs(r.getTime()-d.getTime());return Math.round(i/s)},S=e=>{const{startdatoPeriode1:t,sluttdatoPeriode1:r,startdatoPeriode2:d,sluttdatoPeriode2:s}=e;let i=v(r,t);return d&&s&&(i+=v(s,d)),i};export{F as S,_ as a,p as b,S as c,V as d,J as e,Q as f,P as g,M as h,v as w};
