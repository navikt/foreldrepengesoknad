import{d as a,a as I,U as u,I as d,t as B}from"./Label-DMHnewTW.js";import{S as A,h as S,i as N}from"./HvemPlanleggerUtils-D1xsqW5u.js";import"./index-DVXBtNgz.js";import{b as g,a as V,e as W}from"./barnetUtils-Dtg6gkcN.js";var k=(t=>(t.Mødrekvote="MØDREKVOTE",t.Fedrekvote="FEDREKVOTE",t.Fellesperiode="FELLESPERIODE",t.Foreldrepenger="FORELDREPENGER",t.ForeldrepengerFørFødsel="FORELDREPENGER_FØR_FØDSEL",t.AktivitetsfriKvote="AKTIVITETSFRI_KVOTE",t))(k||{});const b=t=>Object.values(t.kontoer).reduce((e,r)=>{const o=R(r.dager);return{uker:e.uker+o.uker,dager:e.dager+o.dager}},{uker:0,dager:0}),R=t=>{const e=Math.floor(t/5);return{uker:e,dager:t-e*5,totaltAntallDager:t}},p=(t,e)=>{const r=t.kontoer.find(o=>o.konto===e);return r?r.dager:0},w=(t,e)=>{const r=t.kontoer.find(o=>o.konto===e);return r?R(r.dager):{uker:0,dager:0,totaltAntallDager:0}},L=t=>p(t,k.ForeldrepengerFørFødsel),j=t=>p(t,k.Mødrekvote),x=t=>p(t,k.Fedrekvote),tt=t=>w(t,k.AktivitetsfriKvote),_=t=>p(t,k.AktivitetsfriKvote),Y=t=>w(t,k.Fellesperiode),v=t=>w(t,k.Foreldrepenger);a.extend(I);const H=3,m=t=>a(t).isoWeekday(),y=t=>m(t)!==6&&m(t)!==7,n=t=>{const e=a(t).toDate(),r=t&&new Date(e.getFullYear(),e.getMonth(),e.getDate(),12);switch(m(t)){case 6:return a.utc(r).add(48,"hours").format(d);case 7:return a.utc(r).add(24,"hours").format(d);default:return t}},K=t=>{const e=a(t).toDate(),r=t&&new Date(e.getFullYear(),e.getMonth(),e.getDate(),12);switch(m(t)){case 6:return a.utc(r).subtract(24,"hours").format(d);case 7:return a.utc(r).subtract(48,"hours").format(d);default:return t}},q=(t,e)=>{if(y(t)===!1)throw new Error("trekkUttaksdagerFraDato: Dato må være uttaksdag");let r=t,o=0,s=0;for(;s<Math.abs(e);){const l=a.utc(t).add(--o*24,"hours").format(d);y(l)&&(r=l,s++)}return r},h=t=>g(t)?t.overtakelsesdato:V(t)?t.termindato:t.fødselsdato,G=t=>{if(g(t))throw new Error("Kan ikke være adoptert");const e=h(t);return W(t)&&t.termindato&&a(e).isBefore(a(B(t.termindato)))?e:q(n(e),H*5)},z=(t,e,r,o=0)=>{const s=parseInt(o.toString(),10),l=Y(e).totaltAntallDager,D=R(s),P=R(l-s),E=L(e),U=j(e),O=x(e),F=h(r),c=g(r)||t.type===A.FAR_OG_FAR?n(F):G(r),i=t.type===A.FAR_OG_FAR?u(a(c).toDate()).leggTil(U+D.totaltAntallDager-1):u(a(c).toDate()).leggTil(E+U+D.totaltAntallDager-1),f=n(a(i).add(1,"day").format(d)),M=u(a(f).toDate()).leggTil(P.totaltAntallDager+O-1);return t.type===A.FAR_OG_FAR&&!g(r)?{familiehendelsedato:F,startdatoPeriode1:c,sluttdatoPeriode1:a(M).format(d),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}:{familiehendelsedato:F,startdatoPeriode1:c,startdatoPeriode2:f,sluttdatoPeriode1:a(i).format(d),sluttdatoPeriode2:a(M).format(d)}},C=(t,e,r,o)=>{const s=h(r);if(t.type===A.FAR_OG_FAR){const O=_(e),F=v(e),c=a(n(s)).toDate(),i=u(c).leggTil(O+(g(r)?0:6*5-1)),f=g(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:n(f.format(d)),sluttdatoPeriode1:K(a(i).format(d)),startdatoPeriode2:n(a(i).add(1,"day").format(d)),sluttdatoPeriode2:a(u(i).leggTil(F.totaltAntallDager)).format(d)}}if(o==="kunSøker2HarRett"&&(S(t)||N(t))){const O=_(e),F=v(e),c=a(n(s)).toDate(),i=u(c).leggTil(O+(g(r)?0:6*5-1)),f=g(r)?a(s).add(1,"day"):a(s).add(6,"weeks");return{familiehendelsedato:s,startdatoPeriode1:n(f.format(d)),sluttdatoPeriode1:K(a(i).format(d)),startdatoPeriode2:n(a(i).add(1,"day").format(d)),sluttdatoPeriode2:a(u(i).leggTil(F.totaltAntallDager)).format(d)}}const l=v(e),D=_(e),P=L(e),E=g(r)||t.type===A.FAR?n(s):G(r),U=u(a(E).toDate()).leggTil(l.totaltAntallDager+D+P-1);return{familiehendelsedato:s,startdatoPeriode1:E,sluttdatoPeriode1:a(U).format(d),startdatoPeriode2:void 0,sluttdatoPeriode2:void 0}},et=(t,e,r,o,s)=>t==="beggeHarRett"||e.type===A.FAR_OG_FAR&&!g(o)?z(e,r,o,s):C(e,r,o,t),J=(t,e)=>{let r=0;const o=new Date(t.getTime());for(;o<=e;){const s=o.getDay();s!==0&&s!==6&&r++,o.setDate(o.getDate()+1)}return r},T=(t,e)=>{const r=J(a(t).toDate(),a(e).toDate()),o=Math.floor(r/5);return{uker:o,dager:r-o*5}},rt=t=>{const{startdatoPeriode1:e,sluttdatoPeriode1:r,startdatoPeriode2:o,sluttdatoPeriode2:s}=t,l=T(e,r);if(o&&s){const D=T(o,s);return{uker:l.uker+D.uker,dager:l.dager+D.dager}}return l};export{k as S,tt as a,v as b,rt as c,Y as d,T as e,et as f,h as g,R as h,b as i};
