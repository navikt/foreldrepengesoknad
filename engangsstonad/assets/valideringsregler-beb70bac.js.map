{"version":3,"file":"valideringsregler-beb70bac.js","sources":["../../src/fpcommon/validering/valideringsregler.ts"],"sourcesContent":["import { etterDagensDato, formatDateExtended, hasValue } from '@navikt/fp-common';\nimport { dateIsWithinRange } from '@navikt/fp-validation';\nimport dayjs from 'dayjs';\nimport { IntlShape } from 'react-intl';\n\nconst validateDateInRange = (\n    intl: IntlShape,\n    date: Date | undefined,\n    minDate: Date,\n    maxDate: Date,\n    isFomDate: boolean,\n) => {\n    if (date === undefined) {\n        if (isFomDate) {\n            return intl.formatMessage({ id: 'valideringsfeil.fraOgMedDato.gyldigDato' });\n        }\n\n        return intl.formatMessage({ id: 'valideringsfeil.tilOgMedDato.gyldigDato' });\n    }\n\n    if (!dateIsWithinRange(date, minDate, maxDate)) {\n        return intl.formatMessage(\n            { id: 'valideringsfeil.dateOutsideRange' },\n            {\n                fom: formatDateExtended(minDate),\n                tom: formatDateExtended(maxDate),\n            },\n        );\n    }\n\n    return null;\n};\n\nexport const validateFromDate = (\n    intl: IntlShape,\n    date: Date | undefined,\n    minDate: Date,\n    maxDate: Date,\n    toDate?: Date,\n) => {\n    const error = validateDateInRange(intl, date, minDate, maxDate, true);\n    if (error !== undefined) {\n        return error;\n    }\n    if (toDate && dayjs(date).isAfter(toDate, 'day')) {\n        // TODO Bør ha generell id\n        return intl.formatMessage({ id: 'valideringsfeil.utenlandsopphold.førTilDato' });\n    }\n    return undefined;\n};\n\nexport const validateToDate = (\n    intl: IntlShape,\n    date: Date | undefined,\n    minDate: Date,\n    maxDate: Date,\n    fromDate?: Date,\n) => {\n    const error = validateDateInRange(intl, date, minDate, maxDate, false);\n    if (error !== undefined) {\n        return error;\n    }\n    if (fromDate && dayjs(date).isBefore(fromDate, 'day')) {\n        // TODO Bør ha generell id\n        return intl.formatMessage({ id: 'valideringsfeil.utenlandsopphold.etterFraDato' });\n    }\n    return undefined;\n};\n\nexport const isValidFormattedDateString = (dateString = ''): boolean => {\n    return /\\d{1,2}.\\d{1,2}.(\\d{2}|\\d{4})$/.test(dateString);\n};\n\n//TODO Denne kan vel skrivast meir generell og ha generelle feilmeldingar?\nexport const validateAdopsjonFødselDate = (\n    dato: string | undefined,\n    adopsjonsdato: string | undefined,\n    intl: IntlShape,\n) => {\n    if (!hasValue(dato)) {\n        return intl.formatMessage({ id: 'valideringsfeil.omBarnet.fodselsdato.duMåOppgi' });\n    }\n\n    if (!isValidFormattedDateString(dato)) {\n        return intl.formatMessage({ id: 'invalidFormatErrorKey.fødselsdato' });\n    }\n\n    if (!dato || !adopsjonsdato) {\n        return undefined;\n    }\n    if (etterDagensDato(dato)) {\n        return intl.formatMessage({ id: 'valideringsfeil.omBarnet.fodselsdato.måVæreIdagEllerTidligere' });\n    }\n    return undefined;\n};\n"],"names":["validateDateInRange","intl","date","minDate","maxDate","isFomDate","dateIsWithinRange","formatDateExtended","validateFromDate","toDate","error","dayjs","validateToDate","fromDate","isValidFormattedDateString","dateString","validateAdopsjonFødselDate","dato","adopsjonsdato","hasValue","etterDagensDato"],"mappings":"wNAKA,MAAMA,EAAsB,CACxBC,EACAC,EACAC,EACAC,EACAC,IAEIH,IAAS,OACLG,EACOJ,EAAK,cAAc,CAAE,GAAI,yCAA2C,CAAA,EAGxEA,EAAK,cAAc,CAAE,GAAI,yCAA2C,CAAA,EAG1EK,EAAkBJ,EAAMC,EAASC,CAAO,EAUtC,KATIH,EAAK,cACR,CAAE,GAAI,kCAAmC,EACzC,CACI,IAAKM,EAAmBJ,CAAO,EAC/B,IAAKI,EAAmBH,CAAO,CACnC,CAAA,EAOCI,EAAmB,CAC5BP,EACAC,EACAC,EACAC,EACAK,IACC,CACD,MAAMC,EAAQV,EAAoBC,EAAMC,EAAMC,EAASC,EAAS,EAAI,EACpE,GAAIM,IAAU,OACH,OAAAA,EAEX,GAAID,GAAUE,EAAMT,CAAI,EAAE,QAAQO,EAAQ,KAAK,EAE3C,OAAOR,EAAK,cAAc,CAAE,GAAI,6CAA+C,CAAA,CAGvF,EAEaW,EAAiB,CAC1BX,EACAC,EACAC,EACAC,EACAS,IACC,CACD,MAAMH,EAAQV,EAAoBC,EAAMC,EAAMC,EAASC,EAAS,EAAK,EACrE,GAAIM,IAAU,OACH,OAAAA,EAEX,GAAIG,GAAYF,EAAMT,CAAI,EAAE,SAASW,EAAU,KAAK,EAEhD,OAAOZ,EAAK,cAAc,CAAE,GAAI,+CAAiD,CAAA,CAGzF,EAEaa,EAA6B,CAACC,EAAa,KAC7C,iCAAiC,KAAKA,CAAU,EAI9CC,EAA6B,CACtCC,EACAC,EACAjB,IACC,CACG,GAAA,CAACkB,EAASF,CAAI,EACd,OAAOhB,EAAK,cAAc,CAAE,GAAI,gDAAkD,CAAA,EAGlF,GAAA,CAACa,EAA2BG,CAAI,EAChC,OAAOhB,EAAK,cAAc,CAAE,GAAI,mCAAqC,CAAA,EAGrE,GAAA,GAACgB,GAAQ,CAACC,IAGVE,EAAgBH,CAAI,EACpB,OAAOhB,EAAK,cAAc,CAAE,GAAI,+DAAiE,CAAA,CAGzG"}