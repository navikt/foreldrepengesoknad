import{j as o,a as g}from"./jsx-runtime-2c139190.js";import{T as ee,M as ne,F as te,g as oe,Y as v,d as c,h as de,i as l,j as P,k as Q,l as j,m as H,a as R,H as ae,n as K,B as U,o as y,p as le,q as re,r as x,A as se,b as z,s as ie,t as pe,v as _,U as w,w as q,x as me,y as W}from"./IntlProvider-b8504b65.js";import{R as C}from"./index-b14cf94f.js";import{Q as ue,o as ce,s as fe,U as ge,g as he}from"./stepConfig-a71985ec.js";import{U as u,u as ve,l as Ue,b as M,L as ye,c as ke}from"./globals-851e6499.js";import{g as f}from"./i18nUtils-2b2b3c89.js";import{f as I}from"./dateUtils-a90ca7e6.js";import{u as be}from"./useEngangsstønadContext-06ad1c88.js";import{P as Fe}from"./PageKeys-d7db1a78.js";function Ne(e){var n=e.name,t=e.labels,a=e.listRenderer,i=e.formRenderer,r=e.sortFunc,s=e.onAfterChange,p=e.dialogWidth,d=e.shouldCloseOnOverlayClick,m=e.error,h=e.maxItems,G=e.useFastField,J=e.confirmDelete,T=e.validate,b=C.useContext(ee),X=G?te:oe;return C.createElement(X,{name:n,validate:T?function(F){return T(F,n)}:void 0},function(F){var N=F.field,E=F.form;return C.createElement(ne,{labels:t,items:N.value,error:m||(b?b.getAndRenderFieldErrorMessage(N,E):void 0),maxItems:h,dialogWidth:p,shouldCloseOnOverlayClick:d,confirmDelete:J,onChange:function(k){var D=r?k.sort(r):k;E.setFieldValue(N.name,D),s&&s(D),b&&b.onAfterFieldValueSet()},formRenderer:i,listRenderer:function(k){var D=k.onEdit,Z=k.onDelete;return a({items:N.value,onDelete:Z,onEdit:D})}})})}const De={[u.harBoddUtenforNorgeSiste12Mnd]:{isAnswered:({harBoddUtenforNorgeSiste12Mnd:e})=>e!==v.UNANSWERED,isIncluded:()=>!0,visibilityFilter:({skalBoUtenforNorgeNeste12Mnd:e})=>e!==v.UNANSWERED},[u.utenlandsoppholdSiste12Mnd]:{isAnswered:({utenlandsoppholdSiste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({harBoddUtenforNorgeSiste12Mnd:e})=>e===v.YES},[u.skalBoUtenforNorgeNeste12Mnd]:{isAnswered:({skalBoUtenforNorgeNeste12Mnd:e})=>e!==v.UNANSWERED,isIncluded:()=>!0},[u.utenlandsoppholdNeste12Mnd]:{isAnswered:({utenlandsoppholdNeste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({skalBoUtenforNorgeNeste12Mnd:e})=>e===v.YES}},Me=ue(De),Be=e=>{const{fom:n,landkode:t,tom:a}=e;return n!==void 0&&t!==void 0&&a!==void 0};c.extend(de);const Ie=(e,n,t)=>c(e).isBetween(n,t,"day","[]"),$=(e,n,t,a,i)=>{if(n===void 0)return i?l(e,"valideringsfeil.fraOgMedDato.gyldigDato"):l(e,"valideringsfeil.tilOgMedDato.gyldigDato");if(!Ie(n,t,a))return l(e,"valideringsfeil.dateOutsideRange",{fom:I(t),tom:I(a)})},Se=(e,n,t,a,i)=>{const r=$(e,n,t,a,!0);if(r!==void 0)return r;if(i&&c(n).isAfter(i,"day"))return l(e,"valideringsfeil.utenlandsopphold.førTilDato")},Ce=(e,n,t,a,i)=>{const r=$(e,n,t,a,!1);if(r!==void 0)return r;if(i&&c(n).isBefore(i,"day"))return l(e,"valideringsfeil.utenlandsopphold.etterFraDato")},Y={validateToDate:Ce,validateFromDate:Se},Le=(e,n)=>{if(e.length===0)return l(n,"valideringsfeil.utenlandsopphold.neste12Måneder.ikkeRegistrert");const t=e.map(a=>({from:c(a.fom).toDate(),to:c(a.tom).toDate()}));if(P(t))return l(n,"valideringsfeil.utenlandsopphold.overlapp");if(Q(t,{from:new Date,to:j}))return l(n,"valideringsfeil.utenlandsoppholdUtenforPeriode")},Ve=(e,n)=>{if(e.length===0)return l(n,"valideringsfeil.utenlandsopphold.siste12Måneder.ikkeRegistrert");const t=e.map(a=>({from:c(a.fom).toDate(),to:c(a.tom).toDate()}));if(P(t))return l(n,"valideringsfeil.utenlandsopphold.overlapp");if(Q(t,{from:H,to:new Date}))return l(n,"valideringsfeil.utenlandsoppholdUtenforPeriode")},B=le(),Ae=e=>({fom:e.fom,tom:e.tom,landkode:e.landkode}),V=({maxDate:e,minDate:n,bosted:t,onSubmit:a,onCancel:i,erFremtidigOpphold:r})=>{const s=R(),p=d=>{const m={...t,fom:d.fom,tom:d.tom,landkode:d.landkode};if(Be(m))a(m);else throw new Error("BostedUtlandForm: Formvalues is not a valid BostedUtland on submit.")};return o(B.FormikWrapper,{initialValues:t?Ae(t):{},onSubmit:p,renderForm:({values:d})=>g(B.Form,{onCancel:i,children:[o(ae,{size:"medium",children:o(K,{id:"utenlandsopphold.leggTilUtenlandsopphold.tittel"})}),o(U,{children:o(B.DateIntervalPicker,{legend:f(s,"utenlandsopphold.leggTilUtenlandsopphold.tidsrom"),fromDatepickerProps:{name:"fom",label:f(s,"utenlandsopphold.leggTilUtenlandsopphold.fraogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:n,invalidFormatError:"valideringsfeil.fraOgMedDato.gyldigDato",maxDate:y(d.tom)||e,validate:m=>d.tom&&d.fom&&c(d.tom).isSame(d.fom)?f(s,"valideringsfeil.fomErLikTom"):Y.validateFromDate(s,y(m),n,e,y(d.tom))},toDatepickerProps:{name:"tom",label:f(s,"utenlandsopphold.leggTilUtenlandsopphold.tilogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:y(d.fom)||n,maxDate:e,invalidFormatError:"valideringsfeil.tilOgMedDato.gyldigDato",validate:m=>d.tom&&d.fom&&c(d.tom).isSame(d.fom)?f(s,"valideringsfeil.tomErLikFom"):Y.validateToDate(s,y(m),n,e,y(d.fom))}})}),o(U,{margin:"xl",children:o(B.CountrySelect,{name:"landkode",label:r?f(s,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandSkalDuBoI"):f(s,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandHarDuBoddI"),validate:m=>{if(m===""||!m)return r?l(s,"valideringsfeil.leggTilUtenlandsopphold.landDuSkalBoIPåkreved"):l(s,"valideringsfeil.leggTilUtenlandsopphold.landDuHarBoddIPåkrevd")},useAlpha3Code:!1})})]})})};try{V.displayName="BostedUtlandForm",V.__docgenInfo={description:"",displayName:"BostedUtlandForm",props:{minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},bosted:{defaultValue:null,description:"",name:"bosted",required:!1,type:{name:"BostedUtland"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: BostedUtland) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const L=z("bostedUtlandList"),A=({bosteder:e,onDelete:n,onEdit:t})=>{const a=R();return o(re,{getItemId:r=>r.id,getItemTitle:r=>x(r.landkode,a.locale),onDelete:n,onEdit:t,labelRenderer:r=>{const s=x(r.landkode,a.locale);return g("div",{className:L.element("label"),children:[g("span",{className:L.element("land"),children:[t&&o(se,{onClick:()=>t(r),children:s}),!t&&o("span",{children:s})]}),g("span",{className:L.element("dato"),children:[I(c(r.fom).toDate())," -"," ",I(c(r.tom).toDate())]})]})},items:e})};try{A.displayName="BostedUtlandList",A.__docgenInfo={description:"",displayName:"BostedUtlandList",props:{bosteder:{defaultValue:null,description:"",name:"bosteder",required:!0,type:{name:"BostedUtland[]"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((opphold: BostedUtland) => void)"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((opphold: BostedUtland) => void)"}}}}}catch{}function S({name:e,minDate:n,maxDate:t,validate:a,labels:i,erFremtidigOpphold:r}){return o(Ne,{name:e,labels:i,validate:a,dialogWidth:"narrow",sortFunc:ie,formRenderer:({onSubmit:s,onCancel:p,item:d})=>o(V,{bosted:d,minDate:n,maxDate:t,onSubmit:s,onCancel:p,erFremtidigOpphold:r}),listRenderer:({items:s,onEdit:p,onDelete:d})=>o(A,{bosteder:s,onEdit:p,onDelete:d}),shouldCloseOnOverlayClick:!0})}try{S.displayName="BostedUtlandListAndDialog",S.__docgenInfo={description:"",displayName:"BostedUtlandListAndDialog",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"FieldNames"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"any"}},minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"ModalFormAndListLabels"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const Oe=e=>{const{harBoddUtenforNorgeSiste12Mnd:n,skalBoUtenforNorgeNeste12Mnd:t,utenlandsoppholdNeste12Mnd:a,utenlandsoppholdSiste12Mnd:i}=e;return{harBoddUtenforNorgeSiste12Mnd:n,skalBoUtenforNorgeNeste12Mnd:t,utenlandsoppholdNeste12Mnd:t===v.YES?a:[],utenlandsoppholdSiste12Mnd:n===v.YES?i:[]}};const O=()=>{const e=R(),n=z("utenlandsopphold"),t=ve(),{state:a,dispatch:i}=be(),r=a.søknad.utenlandsopphold;Ue("sidevisning",{app:"engangsstonadny",team:"foreldrepenger",pageKey:Fe.Utenlandsopphold});const s=p=>{i(ke.setUtenlandsopphold({skalBoUtenforNorgeNeste12Mnd:p.skalBoUtenforNorgeNeste12Mnd,harBoddUtenforNorgeSiste12Mnd:p.harBoddUtenforNorgeSiste12Mnd,utenlandsoppholdNeste12Mnd:p.utenlandsoppholdNeste12Mnd||[],utenlandsoppholdSiste12Mnd:p.utenlandsoppholdSiste12Mnd||[]})),t("/soknad/oppsummering")};return o(M.FormikWrapper,{initialValues:r,onSubmit:p=>s(p),renderForm:({values:p})=>{const d=Me.getVisbility(p),m=d.areAllQuestionsAnswered();return o(pe,{bannerTitle:f(e,"søknad.pageheading"),activeStepId:"utenlandsopphold",pageTitle:f(e,"søknad.utenlandsopphold"),onCancel:()=>ce(i,t),steps:fe,children:o(M.Form,{includeButtons:!1,includeValidationSummary:!0,cleanup:h=>Oe(h),noButtonsContentRenderer:m?void 0:()=>o(ge,{children:l(e,"søknad.footer.spørsmålMåBesvares")}),children:g("div",{className:n.block,children:[d.isVisible(u.skalBoUtenforNorgeNeste12Mnd)&&g(U,{padBottom:"l",children:[o(M.YesOrNoQuestion,{legend:l(e,"utenlandsopphold.neste12Måneder.spørsmål"),name:u.skalBoUtenforNorgeNeste12Mnd,labels:{no:l(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddINorge"),yes:l(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:_}),o(w,{apneLabel:l(e,"utenlandsopphold.neste12MånederInfotekst.apneLabel"),children:l(e,"utenlandsopphold.neste12MånederInfotekst")}),d.isVisible(u.utenlandsoppholdNeste12Mnd)&&o(U,{padBottom:"l",children:o(S,{name:u.utenlandsoppholdNeste12Mnd,minDate:q,maxDate:j,labels:{addLabel:l(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold neste 12 måneder"},erFremtidigOpphold:!0,validate:h=>Le(h,e)})})]}),d.isVisible(u.harBoddUtenforNorgeSiste12Mnd)&&g(U,{margin:"xl",children:[o(M.YesOrNoQuestion,{legend:l(e,"utenlandsopphold.siste12Måneder.spørsmål"),name:u.harBoddUtenforNorgeSiste12Mnd,labels:{no:l(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddINorge"),yes:l(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:_}),o(w,{apneLabel:l(e,"utenlandsopphold.siste12MånederInfotekst.apneLabel"),children:l(e,"utenlandsopphold.siste12MånederInfotekst")}),d.isVisible(u.utenlandsoppholdSiste12Mnd)&&o(U,{padBottom:"xl",children:o(S,{minDate:H,maxDate:q,name:u.utenlandsoppholdSiste12Mnd,labels:{addLabel:l(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold siste 12 måneder"},erFremtidigOpphold:!1,validate:h=>Ve(h,e)})})]}),o(U,{margin:"xl",children:g(me,{children:[o(W,{variant:"secondary",as:ye,to:he("utenlandsopphold"),children:o(K,{id:"backlink.label"})}),m&&o(W,{type:"submit",children:l(e,"søknad.gåVidere")})]})})]})})})}})},Pe=O;try{O.displayName="Utenlandsopphold",O.__docgenInfo={description:"",displayName:"Utenlandsopphold",props:{}}}catch{}export{Pe as U};
//# sourceMappingURL=Utenlandsopphold-9b95c866.js.map
