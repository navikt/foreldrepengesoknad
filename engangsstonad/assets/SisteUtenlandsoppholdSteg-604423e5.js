import{j as e}from"./jsx-runtime-69eee039.js";import{r as h}from"./index-7c191284.js";import{u as F,k as s,p as E,q as P,V as x,F as S,d as O,T as L,r as C,g as A,P as H}from"./IntlProvider-6f18ce9f.js";import{a as R,i as v,v as U,d as B,e as V,u as $,f as q,F as w,E as z,S as G}from"./StepButtonsHookForm-ef5a06d8.js";import{c as Y}from"./countryUtils-91d8df56.js";import{D as M}from"./Datepicker-50ebcfd3.js";import{S as J}from"./Select-cd02e5c6.js";import{a as K,u as Q,b as _,E as T,c as W}from"./useEsNavigator-db836096.js";import{P as y}from"./paths-77448497.js";const N=(t,m,a,n)=>{const r=m.map(i=>({from:s(i.fom).toDate(),to:s(i.tom).toDate()})).concat({from:s(a).toDate(),to:s(n).toDate()});return C(r)?t.formatMessage({id:"valideringsfeil.utenlandsopphold.overlapp"}):null},j=({index:t,fjernOpphold:m})=>{const a=F(),{watch:n,trigger:c,formState:{isSubmitted:r}}=R(),i=n("utenlandsoppholdSiste12Mnd").filter((o,p)=>p!==t),l=n(`utenlandsoppholdSiste12Mnd.${t}.fom`),d=n(`utenlandsoppholdSiste12Mnd.${t}.tom`),u=s(E).toDate(),g=d?s(d).toDate():s(P).toDate(),D=l?s(l).toDate():s(E).toDate(),f=s(P).toDate();return e.jsxs(x,{gap:"5",align:"start",children:[e.jsx(J,{name:`utenlandsoppholdSiste12Mnd.${t}.landkode`,label:e.jsx(S,{id:"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandHarDuBoddI"}),validate:[v(a.formatMessage({id:"valideringsfeil.leggTilUtenlandsopphold.landDuHarBoddIPåkrevd"}))],children:Y().map(o=>e.jsx("option",{value:o[0],children:o[1]},o[0]))}),e.jsx(M,{name:`utenlandsoppholdSiste12Mnd.${t}.fom`,label:e.jsx(S,{id:"utenlandsopphold.leggTilUtenlandsopphold.fraogmed"}),minDate:u,maxDate:g,validate:[v(a.formatMessage({id:"valideringsfeil.leggTilUtenlandsopphold.landFomDuSkalBoIPåkreved"})),U(a.formatMessage({id:"valideringsfeil.fomErLikTom"}),d),o=>B(a,s(o).toDate(),u,g,s(d).toDate()),o=>N(a,i,o,d)],onChange:()=>r&&c()}),e.jsx(M,{name:`utenlandsoppholdSiste12Mnd.${t}.tom`,label:e.jsx(S,{id:"utenlandsopphold.leggTilUtenlandsopphold.tilogmed"}),minDate:D,maxDate:f,validate:[v(a.formatMessage({id:"valideringsfeil.leggTilUtenlandsopphold.landTomDuHarBoddIPåkreved"})),U(a.formatMessage({id:"valideringsfeil.tomErLikFom"}),l),o=>V(a,s(o).toDate(),D,f,s(l).toDate()),o=>N(a,i,l,o)],onChange:()=>r&&c()}),t>0&&e.jsx(O,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(L,{"aria-hidden":!0}),onClick:()=>m(t),children:e.jsx(S,{id:"utenlandsopphold.knapp.SlettOpphold"})})]})};try{j.displayName="SisteUtenlandsoppholdPeriode",j.__docgenInfo={description:"",displayName:"SisteUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const b={fom:"",tom:"",landkode:""},X={utenlandsoppholdSiste12Mnd:[b]},k=()=>{const t=F(),m=K(),a=Q(),n=_(T.UTENLANDSOPPHOLD),c=_(T.UTENLANDSOPPHOLD_SISTE),r=W(T.UTENLANDSOPPHOLD_SISTE),i=h.useMemo(()=>c||X,[]),l=$({defaultValues:i}),{fields:d,append:u,remove:g}=q({name:"utenlandsoppholdSiste12Mnd",control:l.control}),D=h.useCallback(()=>{u(b)},[u]),f=h.useCallback(p=>{g(p)},[g]),o=h.useCallback(p=>{r(p),a.goToNextStep(n!=null&&n.skalBoUtenforNorgeNeste12Mnd?y.NESTE_UTENLANDSOPPHOLD:y.OPPSUMMERING)},[]);return e.jsx(A,{bannerTitle:t.formatMessage({id:"Søknad.Pageheading"}),pageTitle:t.formatMessage({id:"søknad.utenlandsopphold.tidligere"}),onCancel:a.avbrytSøknad,steps:m.stepConfig,activeStepId:m.activeStepId,useNoTempSavingText:!0,children:e.jsx(w,{formMethods:l,onSubmit:o,children:e.jsxs(x,{gap:"10",children:[e.jsx(z,{}),e.jsxs(x,{gap:"10",align:"start",children:[d.map((p,I)=>e.jsxs(h.Fragment,{children:[e.jsx(j,{index:I,fjernOpphold:f}),d.length>1&&e.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},p.id)),e.jsx(O,{type:"button",variant:"secondary",size:"small",icon:e.jsx(H,{"aria-hidden":!0}),onClick:D,children:e.jsx(S,{id:"utenlandsopphold.knapp.leggTilLand"})})]}),e.jsx(G,{goToPreviousStep:a.goToPreviousDefaultStep,saveDataOnPreviousClick:r})]})})})},re=k;try{k.displayName="SisteUtenlandsoppholdSteg",k.__docgenInfo={description:"",displayName:"SisteUtenlandsoppholdSteg",props:{}}}catch{}export{re as S};
//# sourceMappingURL=SisteUtenlandsoppholdSteg-604423e5.js.map
