import{r as a}from"./index-7c191284.js";import{l as I}from"./amplitude-a97f1527.js";import{j as P}from"./jsx-runtime-69eee039.js";import{P as o,u as h,b as N,c as k,d as M}from"./paths-15c3400b.js";import{g as d,D as C,J as B,K as A,M as U,u as b}from"./IntlProvider-323f7bb7.js";d.extend(C);d.extend(B);const F=e=>{if(e==null)throw Error("Data er ikke oppgitt");return e},Y=e=>d(e).isAfter(A,"day"),z=e=>d(e).isBefore(A,"day");d.extend(U);const H=/(19|20)\d{2}-(0?[1-9]|1[0-2])-(0?[1-9]|1\d|2\d|3[01])$/,L=e=>e==null||e.toString().trim().length===0,X=e=>t=>L(t)?e:null,Z=e=>t=>L(t)||H.test(t)?null:e,ee=e=>t=>d(t).isAfter(A)?e:null,te=(e,t)=>s=>t&&s&&d(t).isSame(s)?e:null,se=(e,t,s)=>d(e).isBetween(t,s,"day","[]");var u=(e=>(e.SØKERSITUASJON="SØKERSITUASJON",e.OM_BARNET="OM_BARNET",e.DOKUMENTASJON="DOKUMENTASJON",e.UTENLANDSOPPHOLD="UTENLANDSOPPHOLD",e.UTENLANDSOPPHOLD_PERIODER="UTENLANDSOPPHOLD_PERIODER",e))(u||{});const x={},y=a.createContext(x),S=a.createContext(void 0),R=({children:e,initialState:t,testDispatcher:s})=>{const[n,i]=a.useReducer((c,l)=>{switch(l.type){case"update":return{...c,[l.key]:l.data};case"reset":return{};default:throw new Error}},t||x),r=a.useCallback(c=>{s&&s(c),i(c)},[]);return P.jsx(y.Provider,{value:n,children:P.jsx(S.Provider,{value:r,children:e})})},T=e=>{const t=a.useContext(S);return a.useCallback(s=>{t&&t({type:"update",key:e,data:s})},[])},g=()=>{const e=a.useContext(S);return a.useCallback((t,s)=>{e&&e({type:"update",key:t,data:s})},[])},O=()=>{const e=a.useContext(S);return a.useCallback(()=>{e&&e({type:"reset"})},[])},v=e=>a.useContext(y)[e],m=()=>{const e=a.useContext(y);return a.useCallback(t=>e[t],[])};try{R.displayName="EsDataContext",R.__docgenInfo={description:"",displayName:"EsDataContext",props:{initialState:{defaultValue:null,description:"",name:"initialState",required:!1,type:{name:"EsDataMap"}},testDispatcher:{defaultValue:null,description:"",name:"testDispatcher",required:!1,type:{name:"((action: Action) => void)"}}}}}catch{}try{T.displayName="useEsStateSaveFn",T.__docgenInfo={description:"Hook returns save function for one specific data type",displayName:"useEsStateSaveFn",props:{}}}catch{}try{g.displayName="useAllStateSaveFn",g.__docgenInfo={description:"Hook returns save function usable with all data types",displayName:"useAllStateSaveFn",props:{}}}catch{}try{O.displayName="useEsStateResetFn",O.__docgenInfo={description:"Hook returns state reset function",displayName:"useEsStateResetFn",props:{}}}catch{}try{v.displayName="useEsStateData",v.__docgenInfo={description:"Hook returns data for one specific data type",displayName:"useEsStateData",props:{}}}catch{}try{m.displayName="useEsStateAllDataFn",m.__docgenInfo={description:"Hook returns function capable of getting all types of data from context state",displayName:"useEsStateAllDataFn",props:{}}}catch{}const K={[o.SØKERSITUASJON]:"SøkersituasjonSteg.Søkersituasjon",[o.OM_BARNET]:"OmBarnetSteg.OmBarnet",[o.TERMINBEKREFTELSE]:"søknad.termin",[o.ADOPSJONSBEKREFTELSE]:"søknad.adopsjon",[o.UTENLANDSOPPHOLD]:"søknad.utenlandsopphold",[o.UTENLANDSOPPHOLD_PERIODER]:"søknad.utenlandsopphold.periode",[o.OPPSUMMERING]:"søknad.oppsummering"},j=(e,t)=>N.indexOf(t)>N.indexOf(e),D=(e,t,s,n,i)=>e&&j(s,n)||!!i(t),J=(e,t,s)=>{if(e===o.UTENLANDSOPPHOLD_PERIODER){const n=s(u.UTENLANDSOPPHOLD),i=!(n!=null&&n.harKunBoddINorge);return D(i,u.UTENLANDSOPPHOLD_PERIODER,o.UTENLANDSOPPHOLD,t,s)}return!1},w=(e,t,s)=>{const n=s(u.OM_BARNET);return e===o.TERMINBEKREFTELSE&&n&&"erBarnetFødt"in n?D(!n.erBarnetFødt,u.DOKUMENTASJON,o.OM_BARNET,t,s):e===o.ADOPSJONSBEKREFTELSE&&n&&"adopsjonAvEktefellesBarn"in n?D(!0,u.DOKUMENTASJON,o.OM_BARNET,t,s):!1},V=()=>{const e=b(),t=h(),s=m(),n=a.useMemo(()=>F(Object.values(o).find(r=>r===decodeURIComponent(t.pathname))),[]),i=a.useMemo(()=>N.flatMap(r=>k.includes(r)||J(r,n,s)||w(r,n,s)?[r]:[]),[]);return a.useMemo(()=>({activeStepId:n,stepConfig:i.map((r,c)=>({id:r,label:e.formatMessage({id:K[r]}),index:c}))}),[])},ae=()=>{const e=M(),{activeStepId:t,stepConfig:s}=V(),n=O();a.useEffect(()=>{I("sidevisning",{app:"engangsstonadny",team:"foreldrepenger",pageKey:t})},[]);const i=a.useCallback(()=>{var E;const p=s.findIndex(f=>f.id===t)-1,_=((E=s[p])==null?void 0:E.id)||o.VELKOMMEN;e(_)},[e,s,t]),r=a.useCallback(p=>{e(p)},[e]),c=a.useCallback(()=>{var E;const p=s.findIndex(f=>f.id===t)+1,_=((E=s[p])==null?void 0:E.id)||o.KVITTERING;e(_)},[e,s,t]),l=a.useCallback(()=>{n(),e(o.VELKOMMEN)},[]);return a.useMemo(()=>({goToPreviousDefaultStep:i,goToNextStep:r,goToNextDefaultStep:c,avbrytSøknad:l}),[i,c,r])};export{u as E,V as a,v as b,T as c,se as d,R as e,Z as f,ee as g,z as h,X as i,Y as j,F as n,ae as u,te as v};
//# sourceMappingURL=useEsNavigator-7d967be7.js.map
