import{j as e}from"./jsx-runtime-69eee039.js";import{r as c}from"./index-7c191284.js";import{k as t,u as M,q as D,s as f,V as x,F as u,d as P,T as C,r as O,g as I,P as L}from"./IntlProvider-6f18ce9f.js";import{a as R,i as k,v as _,d as A,e as V,u as $,f as q,F as B,E as H,S as w}from"./StepButtonsHookForm-ef5a06d8.js";import{c as z}from"./countryUtils-91d8df56.js";import{D as y}from"./Datepicker-50ebcfd3.js";import{S as Y}from"./Select-cd02e5c6.js";import{a as G,u as J,b as K,E as F,c as Q}from"./useEsNavigator-db836096.js";const j=t("9999-31-12").toDate(),U=(o,p,s,d)=>{const m=p.map(l=>({from:t(l.fom).toDate(),to:l.tom?t(l.tom).toDate():j})).concat({from:t(s).toDate(),to:d?t(d).toDate():j});return O(m)?o.formatMessage({id:"valideringsfeil.utenlandsopphold.overlapp"}):null},T=({index:o,fjernOpphold:p})=>{const s=M(),{watch:d,trigger:i,formState:{isSubmitted:m}}=R(),l=d("utenlandsoppholdNeste12Mnd").filter((a,h)=>h!==o),r=d(`utenlandsoppholdNeste12Mnd.${o}.fom`),n=d(`utenlandsoppholdNeste12Mnd.${o}.tom`),g=t(D).toDate(),S=n?t(n).toDate():t(f).toDate(),v=t(r||D).toDate(),N=t(f).toDate();return e.jsxs(x,{gap:"5",align:"start",children:[e.jsx(Y,{name:`utenlandsoppholdNeste12Mnd.${o}.landkode`,label:e.jsx(u,{id:"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandSkalDuBoI"}),validate:[k(s.formatMessage({id:"valideringsfeil.leggTilUtenlandsopphold.landDuSkalBoIPåkreved"}))],children:z().map(a=>e.jsx("option",{value:a[0],children:a[1]},a[0]))}),e.jsx(y,{name:`utenlandsoppholdNeste12Mnd.${o}.fom`,label:e.jsx(u,{id:"utenlandsopphold.leggTilUtenlandsopphold.fraogmed"}),minDate:t(D).toDate(),maxDate:n?t(n).toDate():t(f).toDate(),validate:[k(s.formatMessage({id:"valideringsfeil.leggTilUtenlandsopphold.landFomDuSkalBoIPåkreved"})),_(s.formatMessage({id:"valideringsfeil.fomErLikTom"}),n),a=>A(s,t(a).toDate(),g,S,t(n).toDate()),a=>U(s,l,a,n)],onChange:()=>m&&i()}),e.jsx(y,{name:`utenlandsoppholdNeste12Mnd.${o}.tom`,label:e.jsx(u,{id:"utenlandsopphold.leggTilUtenlandsopphold.tilogmed"}),minDate:v,maxDate:N,validate:[_(s.formatMessage({id:"valideringsfeil.tomErLikFom"}),r),a=>V(s,t(a||j).toDate(),t(r||D).toDate(),t(f).toDate(),t(r).toDate()),a=>U(s,l,r,a)],onChange:()=>m&&i()}),o>0&&e.jsx(P,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(C,{"aria-hidden":!0}),onClick:()=>p(o),children:e.jsx(u,{id:"utenlandsopphold.knapp.SlettOpphold"})})]})};try{T.displayName="NesteUtenlandsoppholdPanel",T.__docgenInfo={description:"",displayName:"NesteUtenlandsoppholdPanel",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const b={fom:"",tom:"",landkode:""},W={utenlandsoppholdNeste12Mnd:[b]},E=()=>{const o=M(),p=G(),s=J(),d=K(F.UTENLANDSOPPHOLD_NESTE),i=Q(F.UTENLANDSOPPHOLD_NESTE),m=c.useMemo(()=>d||W,[]),l=$({defaultValues:m}),{fields:r,append:n,remove:g}=q({name:"utenlandsoppholdNeste12Mnd",control:l.control}),S=c.useCallback(()=>{n(b)},[n]),v=c.useCallback(a=>{g(a)},[g]),N=c.useCallback(a=>{i(a),s.goToNextDefaultStep()},[]);return e.jsx(I,{bannerTitle:o.formatMessage({id:"Søknad.Pageheading"}),pageTitle:o.formatMessage({id:"søknad.utenlandsopphold.fremtidig"}),onCancel:s.avbrytSøknad,steps:p.stepConfig,activeStepId:p.activeStepId,useNoTempSavingText:!0,children:e.jsx(B,{formMethods:l,onSubmit:N,children:e.jsxs(x,{gap:"10",children:[e.jsx(H,{}),e.jsxs(x,{gap:"10",align:"start",children:[r.map((a,h)=>e.jsxs(c.Fragment,{children:[e.jsx(T,{index:h,fjernOpphold:v}),r.length>1&&e.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},a.id)),e.jsx(P,{type:"button",variant:"secondary",size:"small",icon:e.jsx(L,{"aria-hidden":!0}),onClick:S,children:e.jsx(u,{id:"utenlandsopphold.knapp.leggTilLand"})})]}),e.jsx(w,{goToPreviousStep:s.goToPreviousDefaultStep,saveDataOnPreviousClick:i})]})})})},le=E;try{E.displayName="NesteUtenlandsoppholdSteg",E.__docgenInfo={description:"",displayName:"NesteUtenlandsoppholdSteg",props:{}}}catch{}export{le as N};
//# sourceMappingURL=NesteUtenlandsoppholdSteg-d88dd3f9.js.map
