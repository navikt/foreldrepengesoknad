import{j as t}from"./jsx-runtime-69eee039.js";import{e as a,E as f,H as q,u as b,J as d,g as c,K as B,N as K,O as Y,i,d as l,Q as $,c as Q,G as H,r as G,f as I,F as J,b as z}from"./IntlProvider-bd5bd23c.js";import{r as X}from"./index-7c191284.js";import{E as w,a as Z,A as W,i as v}from"./AttachmentList-a94a7fda.js";import{g as r}from"./i18nUtils-2b2b3c89.js";import{Y as o,n as ee,g as te,l as C,L as se,i as ne}from"./globals-4607b9db.js";import{a as u}from"./dateUtils-4b6e0f8d.js";import{Q as re,o as ae,s as oe,U as le,g as ie}from"./stepConfig-b0c7120d.js";import{u as de}from"./useEngangsstønadContext-4b4715d4.js";import{P as pe}from"./PageKeys-d7db1a78.js";const me=()=>{ue(w.LOGIN_URL+"?redirect="+window.location.origin)},ue=e=>{window.location.href=e},k=Z.create({baseURL:w.REST_API_URL,withCredentials:!0});k.interceptors.request.use(e=>(e.withCredentials=!0,e.timeout=60*1e3,e));k.interceptors.response.use(e=>e,e=>{var s;return e.response&&e.response.status===401&&((s=e==null?void 0:e.config)!=null&&s.url)&&!e.config.url.includes("/soknad")&&me(),Promise.reject(e)});const ce=()=>k.get("/personinfo"),ge=e=>k.post("/soknad",e,{headers:{"content-type":"application/json;"}}),xe={getPerson:ce,sendSøknad:ge},g=({tittel:e,children:s})=>t.jsx(a,{children:t.jsx(f,{children:t.jsxs(f.Item,{children:[t.jsx(f.Header,{children:t.jsx(q,{level:"2",size:"small",children:e})}),t.jsx(f.Content,{children:s})]})})});try{g.displayName="Oppsummeringspunkt",g.__docgenInfo={description:"",displayName:"Oppsummeringspunkt",props:{tittel:{defaultValue:null,description:"",name:"tittel",required:!0,type:{name:"string"}}}}}catch{}const he=(e,s,n)=>s?`${e} ${s} ${n}`:`${e} ${n}`,O=({barn:e})=>{const s=b();let n;return e.antallBarn==="1"?n=r(s,"oppsummering.omBarnet.ettBarn"):e.antallBarn==="2"&&e.adopsjonAvEktefellesBarn===o.UNANSWERED?n=r(s,"oppsummering.omBarnet.tvillinger"):e.antallBarn==="2"&&e.adopsjonAvEktefellesBarn!==o.UNANSWERED?n=r(s,"oppsummering.omBarnet.toBarn"):n=r(s,"oppsummering.omBarnet.flereBarn",{antall:e.antallBarn}),t.jsxs("div",{children:[t.jsx(a,{padBottom:"l",children:t.jsx(d,{label:r(s,"oppsummering.text.soknadenGjelder"),text:n})}),e.adopsjonAvEktefellesBarn!==o.UNANSWERED&&t.jsxs("div",{children:[t.jsx(a,{padBottom:"l",children:t.jsx(d,{label:r(s,"oppsummering.text.medAdopsjonsdato"),text:u(e.adopsjonsdato)})}),t.jsxs(a,{padBottom:"l",children:[t.jsx(c,{className:"textWithLabel__label",children:e.fødselsdatoer.length>1?r(s,"oppsummering.text.medFødselsdatoer"):r(s,"oppsummering.text.medFødselsdato")}),e.fødselsdatoer.map((p,m)=>t.jsx(a,{padBottom:"s",children:t.jsx(B,{children:u(e.fødselsdatoer[m])})},K()))]})]}),e.adopsjonAvEktefellesBarn!==o.UNANSWERED&&t.jsxs(a,{padBottom:"l",className:"oppsummering__attachments",children:[t.jsx(c,{className:"textWithLabel__label",children:r(s,"oppsummering.text.vedlagtOmsorgsovertakelseBekreftelse")}),t.jsx(W,{attachments:e.omsorgsovertakelse.filter(p=>!v(p))})]}),e.erBarnetFødt===o.YES&&t.jsx(a,{padBottom:"l",children:t.jsx(d,{label:r(s,"oppsummering.text.medFødselsdato"),text:u(e.fødselsdatoer[0])})}),e.erBarnetFødt===o.NO&&e.termindato&&e.terminbekreftelsedato&&t.jsxs("div",{children:[t.jsx(a,{padBottom:"l",children:t.jsx(d,{label:r(s,"oppsummering.text.medTermindato"),text:u(e.termindato)})}),t.jsxs(a,{padBottom:"l",className:"oppsummering__attachments",children:[t.jsx(c,{className:"textWithLabel__label",children:r(s,"oppsummering.text.vedlagtTerminbekreftelse")}),t.jsx(W,{attachments:e.terminbekreftelse.filter(p=>!v(p))})]}),t.jsx(a,{padBottom:"l",children:t.jsx(d,{label:r(s,"oppsummering.text.somErDatert"),text:u(e.terminbekreftelsedato)})})]})]})};try{O.displayName="OmBarnetOppsummering",O.__docgenInfo={description:"",displayName:"OmBarnetOppsummering",props:{barn:{defaultValue:null,description:"",name:"barn",required:!0,type:{name:"OmBarnetFormData"}}}}}catch{}const j=({utenlandsoppholdListe:e})=>t.jsx("ul",{className:"landOppsummering",children:e.map(s=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx(B,{children:Y.getName(s.landkode,"nb")}),t.jsxs(B,{children:[u(s.fom)," - ",u(s.tom)]})]},`${s.landkode}${s.fom}`))});try{j.displayName="LandOppsummering",j.__docgenInfo={description:"",displayName:"LandOppsummering",props:{utenlandsoppholdListe:{defaultValue:null,description:"",name:"utenlandsoppholdListe",required:!0,type:{name:"BostedUtland[]"}}}}}catch{}const M=(e,s,n)=>l(e).isBetween(l(s),l(n),"day","[]"),R=(e,s)=>s.utenlandsoppholdSiste12Mnd.some(n=>M(e,n.fom,n.tom))||s.utenlandsoppholdNeste12Mnd.some(n=>M(e,n.fom,n.tom)),A=({barn:e,informasjonOmUtenlandsopphold:s})=>{const n=b();return t.jsxs(a,{children:[s.harBoddUtenforNorgeSiste12Mnd===o.NO?t.jsx(a,{padBottom:"l",children:t.jsx(d,{label:r(n,"oppsummering.text.boddSisteTolv"),text:i(n,"norge")})}):t.jsxs(a,{padBottom:"l",className:"textWithLabel",children:[t.jsx(c,{className:"textWithLabel__label",children:r(n,"oppsummering.text.boddSisteTolv")}),t.jsx(j,{utenlandsoppholdListe:s.utenlandsoppholdSiste12Mnd})]}),s.skalBoUtenforNorgeNeste12Mnd===o.NO?t.jsx(a,{padBottom:"l",children:t.jsx(d,{label:r(n,"oppsummering.text.neste12mnd"),text:r(n,"medlemmskap.radiobutton.boNorge")})}):t.jsxs(a,{padBottom:"l",className:"textWithLabel",children:[t.jsx(c,{className:"textWithLabel__label",children:r(n,"oppsummering.text.neste12mnd")}),t.jsx(j,{utenlandsoppholdListe:s.utenlandsoppholdNeste12Mnd})]}),e.erBarnetFødt===o.NO&&t.jsx(a,{padBottom:"l",children:t.jsx(d,{label:r(n,"oppsummering.text.ogKommerPåFødselstidspunktet"),text:R(e.termindato,s)?r(n,"medlemmskap.radiobutton.vareUtlandet"):r(n,"medlemmskap.radiobutton.vareNorge")})}),e.erBarnetFødt===o.YES&&t.jsx(a,{padBottom:"l",children:t.jsx(d,{label:r(n,"oppsummering.text.varPåFødselstidspunktet"),text:R(e.fødselsdatoer[0],s)?r(n,"oppsummering.utenlandsopphold.iUtlandet"):r(n,"oppsummering.utenlandsopphold.iNorge")})})]})};try{A.displayName="UtenlandsoppholdOppsummering",A.__docgenInfo={description:"",displayName:"UtenlandsoppholdOppsummering",props:{barn:{defaultValue:null,description:"",name:"barn",required:!0,type:{name:"OmBarnetFormData"}},informasjonOmUtenlandsopphold:{defaultValue:null,description:"",name:"informasjonOmUtenlandsopphold",required:!0,type:{name:"UtenlandsoppholdFormData"}}}}}catch{}var F=(e=>(e.oppgittKorrekteOpplysninger="oppgittKorrekteOpplysninger",e))(F||{});const fe={oppgittKorrekteOpplysninger:!1},N=ee(),je={[F.oppgittKorrekteOpplysninger]:{isIncluded:()=>!0,isAnswered:({oppgittKorrekteOpplysninger:e})=>e===!0}},ke=re(je);l.extend($);const _e=e=>Array.isArray(e)&&e.some(s=>s.filename),ye=e=>e.filter(s=>!v(s)),V=e=>{const s=[];return Object.keys(e).forEach(n=>{typeof e[n]=="object"&&(_e(e[n])?(s.push(...ye(e[n])),delete e[n]):s.push(...V(e[n])))}),s},Ne=e=>e.adopsjonAvEktefellesBarn!==o.UNANSWERED?{adopsjonAvEktefellesBarn:e.adopsjonAvEktefellesBarn===o.YES,søkerAdopsjonAlene:e.søkerAdopsjonAlene===o.YES,adopsjonsdato:l(e.adopsjonsdato).toDate(),antallBarn:parseInt(e.antallBarn,10),fødselsdatoer:e.fødselsdatoer.map(s=>l.utc(s).toDate())}:e.erBarnetFødt===o.YES?{antallBarn:parseInt(e.antallBarn,10),erBarnetFødt:!0,fødselsdatoer:[l.utc(e.fødselsdatoer[0]).toDate()]}:{antallBarn:parseInt(e.antallBarn,10),erBarnetFødt:!1,termindato:l.utc(e.termindato).toDate(),terminbekreftelseDato:l.utc(e.terminbekreftelsedato).toDate()},T=e=>e.map(s=>({land:s.landkode,tidsperiode:{fom:l.utc(s.fom).toDate(),tom:l.utc(s.tom).toDate()}})),Be=e=>({senereOpphold:T(e.utenlandsoppholdNeste12Mnd),tidligereOpphold:T(e.utenlandsoppholdSiste12Mnd),iNorgeNeste12Mnd:e.skalBoUtenforNorgeNeste12Mnd===o.YES,iNorgeSiste12Mnd:e.harBoddUtenforNorgeSiste12Mnd===o.YES}),ve=(e,s)=>{const{omBarnet:n,utenlandsopphold:p}=e.søknad,m=Ne(n),x=Be(p);return{barn:m,type:"engangsstønad",erEndringssøknad:!1,informasjonOmUtenlandsopphold:x,søker:{språkkode:s},vedlegg:V(JSON.parse(JSON.stringify(e.søknad)))}},E=({søkerNavn:e,søkerFnr:s})=>t.jsx("div",{children:t.jsx(a,{padBottom:"l",children:t.jsx(d,{label:e,text:s})})});try{E.displayName="OmDegOppsummering",E.__docgenInfo={description:"",displayName:"OmDegOppsummering",props:{søkerNavn:{defaultValue:null,description:"",name:"søkerNavn",required:!0,type:{name:"string"}},søkerFnr:{defaultValue:null,description:"",name:"søkerFnr",required:!0,type:{name:"string"}}}}}catch{}const S=({person:e,locale:s})=>{const n=b(),p=z("oppsummering"),{state:m,dispatch:x}=de(),_=te(),[D,L]=X.useState(!1);C("sidevisning",{app:"engangsstonadny",team:"foreldrepenger",pageKey:pe.Oppsummering});const P=async()=>{const y=ve(m,s);L(!0);try{xe.sendSøknad(y).then(h=>{x(ne.setKvittering(h.data)),_("/kvittering"),L(!1)}),C("skjema fullført",{app:"engangsstonadny",team:"foreldrepenger"})}catch{_("/kvittering")}};return t.jsx(N.FormikWrapper,{initialValues:fe,onSubmit:()=>P(),renderForm:({values:y})=>{const h=ke.getVisbility(y).areAllQuestionsAnswered();return t.jsx(Q,{bannerTitle:i(n,"søknad.pageheading"),activeStepId:"oppsummering",pageTitle:i(n,"søknad.oppsummering"),onCancel:()=>ae(x,_),steps:oe,children:t.jsxs(N.Form,{includeButtons:!1,noButtonsContentRenderer:h?void 0:()=>t.jsx(le,{children:i(n,"søknad.footer.spørsmålMåBesvares")}),children:[t.jsx(a,{padBottom:"l",children:t.jsx(H,{children:i(n,"oppsummering.text.lesNoye")})}),t.jsxs("div",{className:p.block,children:[t.jsx(g,{tittel:i(n,"søknad.omDeg"),children:t.jsx(E,{søkerNavn:he(e.fornavn,e.mellomnavn,e.etternavn),søkerFnr:e.fnr})}),t.jsx(g,{tittel:i(n,"søknad.omBarnet"),children:t.jsx(O,{barn:m.søknad.omBarnet})}),t.jsx(g,{tittel:i(n,"søknad.utenlandsopphold"),children:t.jsx(A,{barn:m.søknad.omBarnet,informasjonOmUtenlandsopphold:m.søknad.utenlandsopphold})})]}),t.jsx(a,{margin:"xl",children:t.jsx(N.ConfirmationCheckbox,{name:F.oppgittKorrekteOpplysninger,label:i(n,"oppsummering.text.samtykke")})}),t.jsx(a,{margin:"xl",children:t.jsxs(G,{children:[t.jsx(I,{variant:"secondary",as:se,to:ie("oppsummering"),children:t.jsx(J,{id:"backlink.label"})}),h&&t.jsx(I,{type:"submit",disabled:D,loading:D,children:i(n,"oppsummering.button.sendSøknad")})]})})]})})}})},We=S;try{S.displayName="Oppsummering",S.__docgenInfo={description:"",displayName:"Oppsummering",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"Person"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'},{value:'"en"'}]}}}}}catch{}export{xe as A,We as O,k as f};
//# sourceMappingURL=Oppsummering-0397c53e.js.map
