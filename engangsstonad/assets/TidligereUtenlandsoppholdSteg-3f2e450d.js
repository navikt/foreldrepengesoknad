import{j as t}from"./jsx-runtime-69eee039.js";import{r as h}from"./index-7c191284.js";import{g as a,u as F,k as E,m as j,V as U,F as f,c as O,T as b,n as R,e as C,P as A}from"./IntlProvider-4e33f46c.js";import{u as H,b as B,c as V,D as P,a as $,d as q,F as G,E as w,S as z}from"./ErrorSummaryHookForm-c5bb13eb.js";import{i as K,a as W,u as Y,n as J,b as y,E as v,c as Q}from"./useEsNavigator-418925c5.js";import{P as L}from"./paths-6fc4bb0b.js";import{c as X}from"./countryUtils-91dff4fa.js";import{f as M}from"./dateUtils-eef781fc.js";const _=(e,n,o,s,r)=>n===void 0?r?e.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"}):e.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"}):K(n,o,s)?null:e.formatMessage({id:"valideringsfeil.dateOutsideRange"},{fom:M(o),tom:M(s)}),Z=(e,n,o,s,r)=>{const d=_(e,n,o,s,!0);if(d!==void 0)return d;if(r&&a(n).isAfter(r,"day"))return e.formatMessage({id:"valideringsfeil.utenlandsopphold.førTilDato"})},ee=(e,n,o,s,r)=>{const d=_(e,n,o,s,!1);if(d!==void 0)return d;if(r&&a(n).isBefore(r,"day"))return e.formatMessage({id:"valideringsfeil.utenlandsopphold.etterFraDato"})},k=(e,n,o,s)=>{const d=n.map(m=>({from:a(m.fom).toDate(),to:a(m.tom).toDate()})).concat({from:a(o).toDate(),to:a(s).toDate()});return R(d)?e.formatMessage({id:"TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"}):null},te=({index:e,fjernOpphold:n})=>{const o=F(),{isRequired:s,date:{isDatesNotTheSame:r}}=H(),{watch:d,trigger:m,formState:{isSubmitted:c}}=B(),u=d("utenlandsoppholdSiste12Mnd").filter((l,I)=>I!==e),i=d(`utenlandsoppholdSiste12Mnd.${e}.fom`),p=d(`utenlandsoppholdSiste12Mnd.${e}.tom`),T=a(E).toDate(),D=p?a(p).toDate():a(j).toDate(),S=i?a(i).toDate():a(E).toDate(),g=a(j).toDate();return t.jsxs(U,{gap:"5",align:"start",children:[t.jsx(V,{name:`utenlandsoppholdSiste12Mnd.${e}.landkode`,label:t.jsx(f,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[s("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd")],children:X().map(l=>t.jsx("option",{value:l[0],children:l[1]},l[0]))}),t.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${e}.fom`,label:t.jsx(f,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:T,maxDate:D,validate:[s("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved"),r("TidligereUtenlandsoppholdSteg.FomErLikTom",p),l=>Z(o,a(l).toDate(),T,D,a(p).toDate()),l=>k(o,u,l,p)],onChange:()=>c&&m()}),t.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${e}.tom`,label:t.jsx(f,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:S,maxDate:g,validate:[s("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved"),r("TidligereUtenlandsoppholdSteg.TomErLikFom",i),l=>ee(o,a(l).toDate(),S,g,a(i).toDate()),l=>k(o,u,i,l)],onChange:()=>c&&m()}),e>0&&t.jsx(O,{type:"button",variant:"tertiary",size:"small",icon:t.jsx(b,{"aria-hidden":!0}),onClick:()=>n(e),children:t.jsx(f,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{TidligereUtenlandsoppholdPeriode.displayName="TidligereUtenlandsoppholdPeriode",TidligereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const N={fom:"",tom:"",landkode:""},oe={utenlandsoppholdSiste12Mnd:[N]},x=()=>{const e=F(),n=W(),o=Y(),s=J(y(v.UTENLANDSOPPHOLD)),r=y(v.UTENLANDSOPPHOLD_TIDLIGERE),d=Q(v.UTENLANDSOPPHOLD_TIDLIGERE),m=h.useMemo(()=>r||oe,[]),c=$({defaultValues:m}),{fields:u,append:i,remove:p}=q({name:"utenlandsoppholdSiste12Mnd",control:c.control}),T=h.useCallback(()=>{i(N)},[i]),D=h.useCallback(g=>{p(g)},[p]),S=h.useCallback(g=>{d(g),o.goToNextStep(s.skalBoUtenforNorgeNeste12Mnd?L.SENERE_UTENLANDSOPPHOLD:L.OPPSUMMERING)},[]);return t.jsx(C,{bannerTitle:e.formatMessage({id:"Søknad.Pageheading"}),pageTitle:e.formatMessage({id:"TidligereUtenlandsoppholdSteg.Tidligere"}),onCancel:o.avbrytSøknad,steps:n.stepConfig,activeStepId:n.activeStepId,useNoTempSavingText:!0,children:t.jsx(G,{formMethods:c,onSubmit:S,children:t.jsxs(U,{gap:"10",children:[t.jsx(w,{}),t.jsxs(U,{gap:"10",align:"start",children:[u.map((g,l)=>t.jsxs(h.Fragment,{children:[t.jsx(te,{index:l,fjernOpphold:D}),u.length>1&&t.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},g.id)),t.jsx(O,{type:"button",variant:"secondary",size:"small",icon:t.jsx(A,{"aria-hidden":!0}),onClick:T,children:t.jsx(f,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),t.jsx(z,{goToPreviousStep:o.goToPreviousDefaultStep,saveDataOnPreviousClick:d})]})})})},ge=x;try{x.displayName="TidligereUtenlandsoppholdSteg",x.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdSteg",props:{}}}catch{}export{ge as T};
//# sourceMappingURL=TidligereUtenlandsoppholdSteg-3f2e450d.js.map
