import{j as n,a as l}from"./jsx-runtime-670450c2.js";import{B as a,E as _,H as K,u as D,Y as o,J as p,j as g,K as x,N as Y,O as $,i as d,d as i,Q,W as H,C as G,G as J,D as z,n as W,F as X,b as Z}from"./IntlProvider-57b8ad96.js";import{r as ee}from"./index-f1f749bf.js";import{E as V,a as te,A as C,i as A}from"./AttachmentList-6cb95fa9.js";import{g as r}from"./i18nUtils-2b2b3c89.js";import{f as c}from"./dateUtils-f8664f5c.js";import{Q as ne,o as se,s as re,U as ae,g as oe}from"./stepConfig-492ecd1c.js";import{u as le}from"./useEngangsstønadContext-6baf485a.js";import{u as ie,l as M,L as de,c as pe}from"./globals-b60e87b3.js";import{P as me}from"./PageKeys-d7db1a78.js";const ue=()=>{ce(V.LOGIN_URL+"?redirect="+window.location.origin)},ce=e=>{window.location.href=e},B=te.create({baseURL:V.REST_API_URL,withCredentials:!0});B.interceptors.request.use(e=>(e.withCredentials=!0,e.timeout=60*1e3,e));B.interceptors.response.use(e=>e,e=>{var t;return e.response&&e.response.status===401&&((t=e==null?void 0:e.config)!=null&&t.url)&&!e.config.url.includes("/soknad")&&ue(),Promise.reject(e)});const ge=()=>B.get("/personinfo"),he=e=>B.post("/soknad",e,{headers:{"content-type":"application/json;"}}),fe={getPerson:ge,sendSøknad:he},h=({tittel:e,children:t})=>n(a,{children:n(_,{children:l(_.Item,{children:[n(_.Header,{children:n(K,{level:"2",size:"small",children:e})}),n(_.Content,{children:t})]})})});try{h.displayName="Oppsummeringspunkt",h.__docgenInfo={description:"",displayName:"Oppsummeringspunkt",props:{tittel:{defaultValue:null,description:"",name:"tittel",required:!0,type:{name:"string"}}}}}catch{}const ke=(e,t,s)=>t?`${e} ${t} ${s}`:`${e} ${s}`,S=({barn:e})=>{const t=D();let s;return e.antallBarn==="1"?s=r(t,"oppsummering.omBarnet.ettBarn"):e.antallBarn==="2"&&e.adopsjonAvEktefellesBarn===o.UNANSWERED?s=r(t,"oppsummering.omBarnet.tvillinger"):e.antallBarn==="2"&&e.adopsjonAvEktefellesBarn!==o.UNANSWERED?s=r(t,"oppsummering.omBarnet.toBarn"):s=r(t,"oppsummering.omBarnet.flereBarn",{antall:e.antallBarn}),l("div",{children:[n(a,{padBottom:"l",children:n(p,{label:r(t,"oppsummering.text.soknadenGjelder"),text:s})}),e.adopsjonAvEktefellesBarn!==o.UNANSWERED&&l("div",{children:[n(a,{padBottom:"l",children:n(p,{label:r(t,"oppsummering.text.medAdopsjonsdato"),text:c(e.adopsjonsdato)})}),l(a,{padBottom:"l",children:[n(g,{className:"textWithLabel__label",children:e.fødselsdatoer.length>1?r(t,"oppsummering.text.medFødselsdatoer"):r(t,"oppsummering.text.medFødselsdato")}),e.fødselsdatoer.map((m,u)=>n(a,{padBottom:"s",children:n(x,{children:c(e.fødselsdatoer[u])})},Y()))]})]}),e.adopsjonAvEktefellesBarn!==o.UNANSWERED&&l(a,{padBottom:"l",className:"oppsummering__attachments",children:[n(g,{className:"textWithLabel__label",children:r(t,"oppsummering.text.vedlagtOmsorgsovertakelseBekreftelse")}),n(C,{attachments:e.omsorgsovertakelse.filter(m=>!A(m))})]}),e.erBarnetFødt===o.YES&&n(a,{padBottom:"l",children:n(p,{label:r(t,"oppsummering.text.medFødselsdato"),text:c(e.fødselsdatoer[0])})}),e.erBarnetFødt===o.NO&&e.termindato&&e.terminbekreftelsedato&&l("div",{children:[n(a,{padBottom:"l",children:n(p,{label:r(t,"oppsummering.text.medTermindato"),text:c(e.termindato)})}),l(a,{padBottom:"l",className:"oppsummering__attachments",children:[n(g,{className:"textWithLabel__label",children:r(t,"oppsummering.text.vedlagtTerminbekreftelse")}),n(C,{attachments:e.terminbekreftelse.filter(m=>!A(m))})]}),n(a,{padBottom:"l",children:n(p,{label:r(t,"oppsummering.text.somErDatert"),text:c(e.terminbekreftelsedato)})})]})]})};try{S.displayName="OmBarnetOppsummering",S.__docgenInfo={description:"",displayName:"OmBarnetOppsummering",props:{barn:{defaultValue:null,description:"",name:"barn",required:!0,type:{name:"OmBarnetFormData"}}}}}catch{}const y=({utenlandsoppholdListe:e})=>n("ul",{className:"landOppsummering",children:e.map(t=>l("div",{style:{display:"flex",justifyContent:"space-between"},children:[n(x,{children:$.getName(t.landkode,"nb")}),l(x,{children:[c(t.fom)," - ",c(t.tom)]})]},`${t.landkode}${t.fom}`))});try{y.displayName="LandOppsummering",y.__docgenInfo={description:"",displayName:"LandOppsummering",props:{utenlandsoppholdListe:{defaultValue:null,description:"",name:"utenlandsoppholdListe",required:!0,type:{name:"BostedUtland[]"}}}}}catch{}const T=(e,t,s)=>i(e).isBetween(i(t),i(s),"day","[]"),w=(e,t)=>t.utenlandsoppholdSiste12Mnd.some(s=>T(e,s.fom,s.tom))||t.utenlandsoppholdNeste12Mnd.some(s=>T(e,s.fom,s.tom)),E=({barn:e,informasjonOmUtenlandsopphold:t})=>{const s=D();return l(a,{children:[t.harBoddUtenforNorgeSiste12Mnd===o.NO?n(a,{padBottom:"l",children:n(p,{label:r(s,"oppsummering.text.boddSisteTolv"),text:d(s,"norge")})}):l(a,{padBottom:"l",className:"textWithLabel",children:[n(g,{className:"textWithLabel__label",children:r(s,"oppsummering.text.boddSisteTolv")}),n(y,{utenlandsoppholdListe:t.utenlandsoppholdSiste12Mnd})]}),t.skalBoUtenforNorgeNeste12Mnd===o.NO?n(a,{padBottom:"l",children:n(p,{label:r(s,"oppsummering.text.neste12mnd"),text:r(s,"medlemmskap.radiobutton.boNorge")})}):l(a,{padBottom:"l",className:"textWithLabel",children:[n(g,{className:"textWithLabel__label",children:r(s,"oppsummering.text.neste12mnd")}),n(y,{utenlandsoppholdListe:t.utenlandsoppholdNeste12Mnd})]}),e.erBarnetFødt===o.NO&&n(a,{padBottom:"l",children:n(p,{label:r(s,"oppsummering.text.ogKommerPåFødselstidspunktet"),text:w(e.termindato,t)?r(s,"medlemmskap.radiobutton.vareUtlandet"):r(s,"medlemmskap.radiobutton.vareNorge")})}),e.erBarnetFødt===o.YES&&n(a,{padBottom:"l",children:n(p,{label:r(s,"oppsummering.text.varPåFødselstidspunktet"),text:w(e.fødselsdatoer[0],t)?r(s,"oppsummering.utenlandsopphold.iUtlandet"):r(s,"oppsummering.utenlandsopphold.iNorge")})})]})};try{E.displayName="UtenlandsoppholdOppsummering",E.__docgenInfo={description:"",displayName:"UtenlandsoppholdOppsummering",props:{barn:{defaultValue:null,description:"",name:"barn",required:!0,type:{name:"OmBarnetFormData"}},informasjonOmUtenlandsopphold:{defaultValue:null,description:"",name:"informasjonOmUtenlandsopphold",required:!0,type:{name:"UtenlandsoppholdFormData"}}}}}catch{}var L=(e=>(e.oppgittKorrekteOpplysninger="oppgittKorrekteOpplysninger",e))(L||{});const _e={oppgittKorrekteOpplysninger:!1},O=Q(),ye={[L.oppgittKorrekteOpplysninger]:{isIncluded:()=>!0,isAnswered:({oppgittKorrekteOpplysninger:e})=>e===!0}},Be=ne(ye);i.extend(H);const Ne=e=>Array.isArray(e)&&e.some(t=>t.filename),ve=e=>e.filter(t=>!A(t)),P=e=>{const t=[];return Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(Ne(e[s])?(t.push(...ve(e[s])),delete e[s]):t.push(...P(e[s])))}),t},Oe=e=>e.adopsjonAvEktefellesBarn!==o.UNANSWERED?{adopsjonAvEktefellesBarn:e.adopsjonAvEktefellesBarn===o.YES,søkerAdopsjonAlene:e.søkerAdopsjonAlene===o.YES,adopsjonsdato:i(e.adopsjonsdato).toDate(),antallBarn:parseInt(e.antallBarn,10),fødselsdatoer:e.fødselsdatoer.map(t=>i.utc(t).toDate())}:e.erBarnetFødt===o.YES?{antallBarn:parseInt(e.antallBarn,10),erBarnetFødt:!0,fødselsdatoer:[i.utc(e.fødselsdatoer[0]).toDate()]}:{antallBarn:parseInt(e.antallBarn,10),erBarnetFødt:!1,termindato:i.utc(e.termindato).toDate(),terminbekreftelseDato:i.utc(e.terminbekreftelsedato).toDate()},R=e=>e.map(t=>({land:t.landkode,tidsperiode:{fom:i.utc(t.fom).toDate(),tom:i.utc(t.tom).toDate()}})),xe=e=>({senereOpphold:R(e.utenlandsoppholdNeste12Mnd),tidligereOpphold:R(e.utenlandsoppholdSiste12Mnd),iNorgeNeste12Mnd:e.skalBoUtenforNorgeNeste12Mnd===o.YES,iNorgeSiste12Mnd:e.harBoddUtenforNorgeSiste12Mnd===o.YES}),Ae=(e,t)=>{const{omBarnet:s,utenlandsopphold:m}=e.søknad,u=Oe(s),f=xe(m);return{barn:u,type:"engangsstønad",erEndringssøknad:!1,informasjonOmUtenlandsopphold:f,søker:{språkkode:t},vedlegg:P(JSON.parse(JSON.stringify(e.søknad)))}},b=({søkerNavn:e,søkerFnr:t})=>n("div",{children:n(a,{padBottom:"l",children:n(p,{label:e,text:t})})});try{b.displayName="OmDegOppsummering",b.__docgenInfo={description:"",displayName:"OmDegOppsummering",props:{søkerNavn:{defaultValue:null,description:"",name:"søkerNavn",required:!0,type:{name:"string"}},søkerFnr:{defaultValue:null,description:"",name:"søkerFnr",required:!0,type:{name:"string"}}}}}catch{}const F=({person:e,locale:t})=>{const s=D(),m=Z("oppsummering"),{state:u,dispatch:f}=le(),N=ie(),[U,I]=ee.useState(!1);M("sidevisning",{app:"engangsstonadny",team:"foreldrepenger",pageKey:me.Oppsummering});const q=async()=>{const v=Ae(u,t);I(!0);try{fe.sendSøknad(v).then(k=>{f(pe.setKvittering(k.data)),N("/kvittering"),I(!1)}),M("skjema fullført",{app:"engangsstonadny",team:"foreldrepenger"})}catch{N("/kvittering")}};return n(O.FormikWrapper,{initialValues:_e,onSubmit:()=>q(),renderForm:({values:v})=>{const k=Be.getVisbility(v).areAllQuestionsAnswered();return n(G,{bannerTitle:d(s,"søknad.pageheading"),activeStepId:"oppsummering",pageTitle:d(s,"søknad.oppsummering"),onCancel:()=>se(f,N),steps:re,children:l(O.Form,{includeButtons:!1,noButtonsContentRenderer:k?void 0:()=>n(ae,{children:d(s,"søknad.footer.spørsmålMåBesvares")}),children:[n(a,{padBottom:"l",children:n(J,{children:d(s,"oppsummering.text.lesNoye")})}),l("div",{className:m.block,children:[n(h,{tittel:d(s,"søknad.omDeg"),children:n(b,{søkerNavn:ke(e.fornavn,e.mellomnavn,e.etternavn),søkerFnr:e.fnr})}),n(h,{tittel:d(s,"søknad.omBarnet"),children:n(S,{barn:u.søknad.omBarnet})}),n(h,{tittel:d(s,"søknad.utenlandsopphold"),children:n(E,{barn:u.søknad.omBarnet,informasjonOmUtenlandsopphold:u.søknad.utenlandsopphold})})]}),n(a,{margin:"xl",children:n(O.ConfirmationCheckbox,{name:L.oppgittKorrekteOpplysninger,label:d(s,"oppsummering.text.samtykke")})}),n(a,{margin:"xl",children:l(z,{children:[n(W,{variant:"secondary",as:de,to:oe("oppsummering"),children:n(X,{id:"backlink.label"})}),k&&n(W,{type:"submit",disabled:U,loading:U,children:d(s,"oppsummering.button.sendSøknad")})]})})]})})}})},Ce=F;try{F.displayName="Oppsummering",F.__docgenInfo={description:"",displayName:"Oppsummering",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"Person"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'},{value:'"en"'}]}}}}}catch{}export{fe as A,Ce as O,B as f};
//# sourceMappingURL=Oppsummering-b77da942.js.map
