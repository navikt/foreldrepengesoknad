import{j as n}from"./jsx-runtime-69eee039.js";import{d as c,j as X,i as l,k as w,l as W,m as Y,n as P,u as L,H as Z,F as Q,e as h,o as ee,p as ne,b as H,s as te,c as oe,v as A,U as O,q as T,r as de,f as E}from"./IntlProvider-bd5bd23c.js";import{R as ae}from"./index-7c191284.js";import{T as le,M as se,F as re,m as ie,U as u,Y as v,I as U,n as pe,o as _,g as me,l as ue,p as N,L as ce,i as fe}from"./globals-4607b9db.js";import{Q as ge,o as he,s as ve,U as Ue,g as ke}from"./stepConfig-b0c7120d.js";import{g as f}from"./i18nUtils-2b2b3c89.js";import{f as M}from"./dateUtils-4b6e0f8d.js";import{u as ye}from"./useEngangsstønadContext-4b4715d4.js";import{P as be}from"./PageKeys-d7db1a78.js";function xe(e){var t=e.name,o=e.labels,a=e.listRenderer,i=e.formRenderer,s=e.sortFunc,r=e.onAfterChange,p=e.dialogWidth,d=e.shouldCloseOnOverlayClick,m=e.error,g=e.maxItems,z=e.useFastField,$=e.confirmDelete,V=e.validate,y=ae.useContext(le),G=z?re:ie;return n.jsx(G,{name:t,validate:V?function(b){return V(b,t)}:void 0,children:function(b){var x=b.field,R=b.form;return n.jsx(se,{labels:o,items:x.value,error:m||(y?y.getAndRenderFieldErrorMessage(x,R):void 0),maxItems:g,dialogWidth:p,shouldCloseOnOverlayClick:d,confirmDelete:$,onChange:function(k){var F=s?k.sort(s):k;R.setFieldValue(x.name,F),r&&r(F),y&&y.onAfterFieldValueSet()},formRenderer:i,listRenderer:function(k){var F=k.onEdit,J=k.onDelete;return a({items:x.value,onDelete:J,onEdit:F})}})}})}const Fe={[u.harBoddUtenforNorgeSiste12Mnd]:{isAnswered:({harBoddUtenforNorgeSiste12Mnd:e})=>e!==v.UNANSWERED,isIncluded:()=>!0,visibilityFilter:({skalBoUtenforNorgeNeste12Mnd:e})=>e!==v.UNANSWERED},[u.utenlandsoppholdSiste12Mnd]:{isAnswered:({utenlandsoppholdSiste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({harBoddUtenforNorgeSiste12Mnd:e})=>e===v.YES},[u.skalBoUtenforNorgeNeste12Mnd]:{isAnswered:({skalBoUtenforNorgeNeste12Mnd:e})=>e!==v.UNANSWERED,isIncluded:()=>!0},[u.utenlandsoppholdNeste12Mnd]:{isAnswered:({utenlandsoppholdNeste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({skalBoUtenforNorgeNeste12Mnd:e})=>e===v.YES}},Ne=ge(Fe),De=e=>{const{fom:t,landkode:o,tom:a}=e;return t!==void 0&&o!==void 0&&a!==void 0};c.extend(X);const Me=(e,t,o)=>c(e).isBetween(t,o,"day","[]"),K=(e,t,o,a,i)=>{if(t===void 0)return i?l(e,"valideringsfeil.fraOgMedDato.gyldigDato"):l(e,"valideringsfeil.tilOgMedDato.gyldigDato");if(!Me(t,o,a))return l(e,"valideringsfeil.dateOutsideRange",{fom:M(o),tom:M(a)})},Be=(e,t,o,a,i)=>{const s=K(e,t,o,a,!0);if(s!==void 0)return s;if(i&&c(t).isAfter(i,"day"))return l(e,"valideringsfeil.utenlandsopphold.førTilDato")},je=(e,t,o,a,i)=>{const s=K(e,t,o,a,!1);if(s!==void 0)return s;if(i&&c(t).isBefore(i,"day"))return l(e,"valideringsfeil.utenlandsopphold.etterFraDato")},q={validateToDate:je,validateFromDate:Be},Ie=(e,t)=>{if(e.length===0)return l(t,"valideringsfeil.utenlandsopphold.neste12Måneder.ikkeRegistrert");const o=e.map(a=>({from:c(a.fom).toDate(),to:c(a.tom).toDate()}));if(w(o))return l(t,"valideringsfeil.utenlandsopphold.overlapp");if(W(o,{from:new Date,to:Y}))return l(t,"valideringsfeil.utenlandsoppholdUtenforPeriode")},Se=(e,t)=>{if(e.length===0)return l(t,"valideringsfeil.utenlandsopphold.siste12Måneder.ikkeRegistrert");const o=e.map(a=>({from:c(a.fom).toDate(),to:c(a.tom).toDate()}));if(w(o))return l(t,"valideringsfeil.utenlandsopphold.overlapp");if(W(o,{from:P,to:new Date}))return l(t,"valideringsfeil.utenlandsoppholdUtenforPeriode")},D=pe(),Ce=e=>({fom:e.fom,tom:e.tom,landkode:e.landkode}),I=({maxDate:e,minDate:t,bosted:o,onSubmit:a,onCancel:i,erFremtidigOpphold:s})=>{const r=L(),p=d=>{const m={...o,fom:d.fom,tom:d.tom,landkode:d.landkode};if(De(m))a(m);else throw new Error("BostedUtlandForm: Formvalues is not a valid BostedUtland on submit.")};return n.jsx(D.FormikWrapper,{initialValues:o?Ce(o):{},onSubmit:p,renderForm:({values:d})=>n.jsxs(D.Form,{onCancel:i,children:[n.jsx(Z,{size:"medium",children:n.jsx(Q,{id:"utenlandsopphold.leggTilUtenlandsopphold.tittel"})}),n.jsx(h,{children:n.jsx(D.DateIntervalPicker,{legend:f(r,"utenlandsopphold.leggTilUtenlandsopphold.tidsrom"),fromDatepickerProps:{name:"fom",label:f(r,"utenlandsopphold.leggTilUtenlandsopphold.fraogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:t,invalidFormatError:"valideringsfeil.fraOgMedDato.gyldigDato",maxDate:U(d.tom)||e,validate:m=>d.tom&&d.fom&&c(d.tom).isSame(d.fom)?f(r,"valideringsfeil.fomErLikTom"):q.validateFromDate(r,U(m),t,e,U(d.tom))},toDatepickerProps:{name:"tom",label:f(r,"utenlandsopphold.leggTilUtenlandsopphold.tilogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:U(d.fom)||t,maxDate:e,invalidFormatError:"valideringsfeil.tilOgMedDato.gyldigDato",validate:m=>d.tom&&d.fom&&c(d.tom).isSame(d.fom)?f(r,"valideringsfeil.tomErLikFom"):q.validateToDate(r,U(m),t,e,U(d.fom))}})}),n.jsx(h,{margin:"xl",children:n.jsx(D.CountrySelect,{name:"landkode",label:s?f(r,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandSkalDuBoI"):f(r,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandHarDuBoddI"),validate:m=>{if(m===""||!m)return s?l(r,"valideringsfeil.leggTilUtenlandsopphold.landDuSkalBoIPåkreved"):l(r,"valideringsfeil.leggTilUtenlandsopphold.landDuHarBoddIPåkrevd")},useAlpha3Code:!1})})]})})};try{I.displayName="BostedUtlandForm",I.__docgenInfo={description:"",displayName:"BostedUtlandForm",props:{minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},bosted:{defaultValue:null,description:"",name:"bosted",required:!1,type:{name:"BostedUtland"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: BostedUtland) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const j=H("bostedUtlandList"),S=({bosteder:e,onDelete:t,onEdit:o})=>{const a=L(),i=s=>{const r=_(s.landkode,a.locale);return n.jsxs("div",{className:j.element("label"),children:[n.jsxs("span",{className:j.element("land"),children:[o&&n.jsx(ne,{onClick:()=>o(s),children:r}),!o&&n.jsx("span",{children:r})]}),n.jsxs("span",{className:j.element("dato"),children:[M(c(s.fom).toDate())," -"," ",M(c(s.tom).toDate())]})]})};return n.jsx(ee,{getItemId:s=>s.id,getItemTitle:s=>_(s.landkode,a.locale),onDelete:t,onEdit:o,labelRenderer:i,items:e})};try{S.displayName="BostedUtlandList",S.__docgenInfo={description:"",displayName:"BostedUtlandList",props:{bosteder:{defaultValue:null,description:"",name:"bosteder",required:!0,type:{name:"BostedUtland[]"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((opphold: BostedUtland) => void)"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((opphold: BostedUtland) => void)"}}}}}catch{}function B({name:e,minDate:t,maxDate:o,validate:a,labels:i,erFremtidigOpphold:s}){return n.jsx(xe,{name:e,labels:i,validate:a,dialogWidth:"narrow",sortFunc:te,formRenderer:({onSubmit:r,onCancel:p,item:d})=>n.jsx(I,{bosted:d,minDate:t,maxDate:o,onSubmit:r,onCancel:p,erFremtidigOpphold:s}),listRenderer:({items:r,onEdit:p,onDelete:d})=>n.jsx(S,{bosteder:r,onEdit:p,onDelete:d}),shouldCloseOnOverlayClick:!0})}try{B.displayName="BostedUtlandListAndDialog",B.__docgenInfo={description:"",displayName:"BostedUtlandListAndDialog",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"FieldNames"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"any"}},minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"ModalFormAndListLabels"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const Le=e=>{const{harBoddUtenforNorgeSiste12Mnd:t,skalBoUtenforNorgeNeste12Mnd:o,utenlandsoppholdNeste12Mnd:a,utenlandsoppholdSiste12Mnd:i}=e;return{harBoddUtenforNorgeSiste12Mnd:t,skalBoUtenforNorgeNeste12Mnd:o,utenlandsoppholdNeste12Mnd:o===v.YES?a:[],utenlandsoppholdSiste12Mnd:t===v.YES?i:[]}};const C=()=>{const e=L(),t=H("utenlandsopphold"),o=me(),{state:a,dispatch:i}=ye(),s=a.søknad.utenlandsopphold;ue("sidevisning",{app:"engangsstonadny",team:"foreldrepenger",pageKey:be.Utenlandsopphold});const r=p=>{i(fe.setUtenlandsopphold({skalBoUtenforNorgeNeste12Mnd:p.skalBoUtenforNorgeNeste12Mnd,harBoddUtenforNorgeSiste12Mnd:p.harBoddUtenforNorgeSiste12Mnd,utenlandsoppholdNeste12Mnd:p.utenlandsoppholdNeste12Mnd||[],utenlandsoppholdSiste12Mnd:p.utenlandsoppholdSiste12Mnd||[]})),o("/soknad/oppsummering")};return n.jsx(N.FormikWrapper,{initialValues:s,onSubmit:p=>r(p),renderForm:({values:p})=>{const d=Ne.getVisbility(p),m=d.areAllQuestionsAnswered();return n.jsx(oe,{bannerTitle:f(e,"søknad.pageheading"),activeStepId:"utenlandsopphold",pageTitle:f(e,"søknad.utenlandsopphold"),onCancel:()=>he(i,o),steps:ve,children:n.jsx(N.Form,{includeButtons:!1,includeValidationSummary:!0,cleanup:g=>Le(g),noButtonsContentRenderer:m?void 0:()=>n.jsx(Ue,{children:l(e,"søknad.footer.spørsmålMåBesvares")}),children:n.jsxs("div",{className:t.block,children:[d.isVisible(u.skalBoUtenforNorgeNeste12Mnd)&&n.jsxs(h,{padBottom:"l",children:[n.jsx(N.YesOrNoQuestion,{legend:l(e,"utenlandsopphold.neste12Måneder.spørsmål"),name:u.skalBoUtenforNorgeNeste12Mnd,labels:{no:l(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddINorge"),yes:l(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:A}),n.jsx(O,{apneLabel:l(e,"utenlandsopphold.neste12MånederInfotekst.apneLabel"),children:l(e,"utenlandsopphold.neste12MånederInfotekst")}),d.isVisible(u.utenlandsoppholdNeste12Mnd)&&n.jsx(h,{padBottom:"l",children:n.jsx(B,{name:u.utenlandsoppholdNeste12Mnd,minDate:T,maxDate:Y,labels:{addLabel:l(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold neste 12 måneder"},erFremtidigOpphold:!0,validate:g=>Ie(g,e)})})]}),d.isVisible(u.harBoddUtenforNorgeSiste12Mnd)&&n.jsxs(h,{margin:"xl",children:[n.jsx(N.YesOrNoQuestion,{legend:l(e,"utenlandsopphold.siste12Måneder.spørsmål"),name:u.harBoddUtenforNorgeSiste12Mnd,labels:{no:l(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddINorge"),yes:l(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:A}),n.jsx(O,{apneLabel:l(e,"utenlandsopphold.siste12MånederInfotekst.apneLabel"),children:l(e,"utenlandsopphold.siste12MånederInfotekst")}),d.isVisible(u.utenlandsoppholdSiste12Mnd)&&n.jsx(h,{padBottom:"xl",children:n.jsx(B,{minDate:P,maxDate:T,name:u.utenlandsoppholdSiste12Mnd,labels:{addLabel:l(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold siste 12 måneder"},erFremtidigOpphold:!1,validate:g=>Se(g,e)})})]}),n.jsx(h,{margin:"xl",children:n.jsxs(de,{children:[n.jsx(E,{variant:"secondary",as:ce,to:ke("utenlandsopphold"),children:n.jsx(Q,{id:"backlink.label"})}),m&&n.jsx(E,{type:"submit",children:l(e,"søknad.gåVidere")})]})})]})})})}})},We=C;try{C.displayName="Utenlandsopphold",C.__docgenInfo={description:"",displayName:"Utenlandsopphold",props:{}}}catch{}export{We as U};
//# sourceMappingURL=Utenlandsopphold-b9c9b454.js.map
