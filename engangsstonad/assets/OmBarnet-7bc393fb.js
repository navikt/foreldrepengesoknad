import{j as t}from"./jsx-runtime-69eee039.js";import{Y as i,D as j,i as s,E as A,J as L,K as U,N as $,O as G,P as H,Q as X,u as y,e as u,V as K,d as B,W as z,X as J,U as C,F as T,Z as q,a as Z,c as ee,C as ne,f as w,b as te}from"./IntlProvider-ef4e63fe.js";import{O as r,n as p,g as ae,o as re,l as ie,L as se,i as le}from"./globals-6fd0556b.js";import"./index-7c191284.js";import{Q as oe,o as de,s as me,U as ue,g as pe}from"./stepConfig-a0c3b87b.js";import{g as l}from"./i18nUtils-2b2b3c89.js";import{u as ce}from"./useEngangsstønadContext-88a967fc.js";import{a as je,E as ge,A as Be,i as ve,m as M}from"./AttachmentList-ea05ddc5.js";import{P as fe}from"./PageKeys-d7db1a78.js";const xe={[r.adopsjonAvEktefellesBarn]:{isIncluded:({situasjon:e})=>e==="adopsjon",isAnswered:({adopsjonAvEktefellesBarn:e})=>e!==i.UNANSWERED,visibilityFilter:({situasjon:e})=>e==="adopsjon"},[r.erBarnetFødt]:{isIncluded:({situasjon:e})=>e==="fødsel",isAnswered:({erBarnetFødt:e})=>e!==i.UNANSWERED,visibilityFilter:({situasjon:e})=>e==="fødsel"},[r.antallBarn]:{isIncluded:()=>!0,isAnswered:({antallBarn:e})=>j(e),visibilityFilter:({adopsjonAvEktefellesBarn:e,erBarnetFødt:n,adopsjonsdato:a})=>n!==i.UNANSWERED||e!==i.UNANSWERED&&j(a)},[r.adopsjonsdato]:{isIncluded:({adopsjonAvEktefellesBarn:e})=>e!==i.UNANSWERED,isAnswered:({adopsjonsdato:e})=>j(e),visibilityFilter:({adopsjonAvEktefellesBarn:e})=>e!==i.UNANSWERED},[r.søkerAdopsjonAlene]:{isIncluded:({situasjon:e,kjønn:n,adopsjonAvEktefellesBarn:a})=>e==="adopsjon"&&n==="M"&&a===i.NO,isAnswered:({søkerAdopsjonAlene:e})=>e!==i.UNANSWERED,visibilityFilter:({adopsjonAvEktefellesBarn:e,fødselsdatoer:n})=>e===i.NO&&(n==null?void 0:n.length)>0&&n[0]!==""},[r.fødselsdatoer]:{isIncluded:({erBarnetFødt:e,adopsjonAvEktefellesBarn:n})=>e===i.YES||n!==i.UNANSWERED,isAnswered:({fødselsdatoer:e})=>(e==null?void 0:e.length)>0&&e[0]!=="",visibilityFilter:({antallBarn:e})=>j(e)},[r.omsorgsovertakelse]:{isIncluded:({adopsjonAvEktefellesBarn:e})=>e!==i.UNANSWERED,isAnswered:({omsorgsovertakelse:e})=>(e==null?void 0:e.length)>0,visibilityFilter:({adopsjonAvEktefellesBarn:e,fødselsdatoer:n,søkerAdopsjonAlene:a,kjønn:m})=>e===i.YES&&(n==null?void 0:n.length)>0&&n[0]!==""||e===i.NO&&a!==i.UNANSWERED||m==="K"&&(n==null?void 0:n.length)>0&&n[0]!==""},[r.termindato]:{isIncluded:({erBarnetFødt:e})=>e===i.NO,isAnswered:({termindato:e})=>j(e),visibilityFilter:({antallBarn:e})=>j(e)},[r.terminbekreftelse]:{isIncluded:({erBarnetFødt:e})=>e===i.NO,isAnswered:({terminbekreftelse:e})=>(e==null?void 0:e.length)>0,visibilityFilter:({termindato:e})=>j(e)},[r.terminbekreftelsedato]:{isIncluded:({erBarnetFødt:e})=>e===i.NO,isAnswered:({terminbekreftelsedato:e})=>j(e),visibilityFilter:({terminbekreftelse:e})=>(e==null?void 0:e.length)>0}},Ee=oe(xe),be=e=>{const n={};return n.antallBarn=void 0,n.erBarnetFødt=i.UNANSWERED,n.adopsjonAvEktefellesBarn=i.UNANSWERED,n.søkerAdopsjonAlene=i.UNANSWERED,e.erBarnetFødt===i.YES&&(n.antallBarn=e.antallBarn,n.fødselsdatoer=e.fødselsdatoer,n.erBarnetFødt=e.erBarnetFødt),e.erBarnetFødt===i.NO&&(n.antallBarn=e.antallBarn,n.erBarnetFødt=e.erBarnetFødt,n.terminbekreftelse=e.terminbekreftelse,n.terminbekreftelsedato=e.terminbekreftelsedato,n.termindato=e.termindato),e.adopsjonAvEktefellesBarn!==i.UNANSWERED&&(n.antallBarn=e.antallBarn,n.adopsjonsdato=e.adopsjonsdato,n.fødselsdatoer=e.fødselsdatoer,n.omsorgsovertakelse=e.omsorgsovertakelse,n.adopsjonAvEktefellesBarn=e.adopsjonAvEktefellesBarn,n.søkerAdopsjonAlene=e.søkerAdopsjonAlene),n},Fe=(e,n)=>{if(!j(e))return s(n,"valideringsfeil.omBarnet.adopsjonDato.ektefellensBarn.duMåOppgi");if(!A.isValidFormattedDateString(e))return s(n,"invalidFormatErrorKey.adopsjonsdato");if(L(e))return s(n,"valideringsfeil.omBarnet.adopsjonDato.forLangtFremITid")},ke=(e,n)=>{if(!j(e))return s(n,"valideringsfeil.omBarnet.adopsjonDato.overtaOmsorg.duMåOppgi");if(L(e))return s(n,"valideringsfeil.omBarnet.adopsjonDato.forLangtFremITid")},he=(e,n)=>{if(!j(e))return s(n,"valideringsfeil.omBarnet.fodselsdato.duMåOppgi");if(U(e))return s(n,"valideringsfeil.omBarnet.fodselsdato.måVæreIdagEllerTidligere");if($(e))return s(n,"valideringsfeil.omBarnet.fodselsdato.ikkeMerEnn6MånederTilbake")},Ae=(e,n,a)=>{if(!j(e))return s(a,"valideringsfeil.omBarnet.fodselsdato.duMåOppgi");if(!A.isValidFormattedDateString(e))return s(a,"invalidFormatErrorKey.fødselsdato");if(!(!e||!n)&&U(e))return s(a,"valideringsfeil.omBarnet.fodselsdato.måVæreIdagEllerTidligere")},ye=(e,n)=>{if(!j(e))return s(n,"valideringsfeil.omBarnet.termindato.duMåOppgi");if(!A.isValidFormattedDateString(e))return s(n,"invalidFormatErrorKey.termindato");if(!G(e))return s(n,"valideringsfeil.omBarnet.termindato.termindatoKanIkkeVære3UkerFraIdag");if(H(e))return s(n,"valideringsfeil.omBarnet.termindato.duMåVæreIUke22")},Ne=(e,n,a)=>{if(!j(e))return s(a,"valideringsfeil.omBarnet.terminbekreftelseDato.duMåOppgi");if(!(!e||!n)){if(!A.isValidFormattedDateString(e))return s(a,"invalidFormatErrorKey.terminBekreftelsedato");if(U(e))return s(a,"valideringsfeil.omBarnet.terminbekreftelseDato.måVæreIdagEllerTidligere");if(!X(e,n))return s(a,"valideringsfeil.omBarnet.terminbekreftelseDato.duMåVæreIUke22")}},Se=({visibility:e,formValues:n})=>{const a=y();return n.erBarnetFødt===i.NO||n.erBarnetFødt===i.UNANSWERED?null:t.jsxs(t.Fragment,{children:[e.isVisible(r.antallBarn)&&t.jsxs(t.Fragment,{children:[t.jsx(u,{margin:"xl",children:t.jsx(p.RadioGroup,{name:r.antallBarn,radios:[{label:s(a,"omBarnet.radiobutton.ettbarn"),value:"1"},{label:s(a,"omBarnet.radiobutton.tvillinger"),value:"2"},{label:s(a,"omBarnet.radiobutton.flere"),value:"3"}],legend:l(a,"omBarnet.text.antallBarn.født")})}),n.antallBarn&&parseInt(n.antallBarn,10)>=3&&t.jsx(u,{margin:"xl",children:t.jsxs(p.Select,{name:r.antallBarn,label:l(a,"omBarnet.text.antallBarn.født"),children:[t.jsx("option",{value:"3",children:"3"}),t.jsx("option",{value:"4",children:"4"}),t.jsx("option",{value:"5",children:"5"}),t.jsx("option",{value:"6",children:"6"}),t.jsx("option",{value:"7",children:"7"}),t.jsx("option",{value:"8",children:"8"}),t.jsx("option",{value:"9",children:"9"})]})})]}),e.isVisible(r.fødselsdatoer)&&t.jsx(u,{margin:"xl",children:t.jsx(K,{name:r.fødselsdatoer,render:()=>[t.jsx(p.DatePicker,{name:`${r.fødselsdatoer}.0`,label:l(a,"søknad.fødselsdato"),minDate:B().subtract(6,"month").toDate(),maxDate:B().toDate(),validate:m=>he(m,a),placeholder:"dd.mm.åååå"},`${r.fødselsdatoer}.0`)]})})]})};try{Fdt.displayName="Fdt",Fdt.__docgenInfo={description:"",displayName:"Fdt",props:{formValues:{defaultValue:null,description:"",name:"formValues",required:!0,type:{name:"OmBarnetFormData"}},visibility:{defaultValue:null,description:"",name:"visibility",required:!0,type:{name:"QuestionVisibility<OmBarnetFormField, undefined>"}}}}}catch{}var O=(e=>(e.TERMINBEKREFTELSE="terminbekreftelse",e.OMSORGSOVERTAKELSE="omsorgsovertakelse",e))(O||{}),I=(e=>(e.TERMINBEKREFTELSE="I000062",e.OMSORGSOVERTAKELSE="I000042",e))(I||{});function De(e){const n={withCredentials:!0,timeout:45e3,headers:{"content-type":"multipart/form-data"}},a=new FormData;a.append("id",e.id),a.append("vedlegg",e.file,e.filename);const m=`${ge.REST_API_URL}/storage/vedlegg`;return je.post(m,a,n)}const Oe={saveAttachment:De},P=[".pdf",".jpeg",".jpg",".png"],Ie=(e,n)=>n===r.terminbekreftelse?M(e,O.TERMINBEKREFTELSE,I.TERMINBEKREFTELSE):M(e,O.OMSORGSOVERTAKELSE,I.OMSORGSOVERTAKELSE),_e=(e,n)=>{const a=Ie(e,n);return a.pending=!0,a},Re=({pending:e,uploaded:n,file:{name:a}})=>!e&&!n||!Ve(a),Ve=e=>{const n=e.split(".").pop();return P.includes(`.${n.toLowerCase()}`)};let W;const h=({attachments:e,name:n,onFileInputClick:a,label:m,legend:v,description:E,...b})=>{const{values:F}=z();async function N(o){try{const c=await Oe.saveAttachment(o);o=f(o),o.url=c.headers.location,o.uploaded=!0,o.uuid=c.data}catch{f(o)}}async function S(o,c){for(const x of o)await N(x),d(o,x,c);const g=[...o.filter(Re)];D(o,g,c)}function D(o,c,g){c.forEach(x=>{x=f(x),d(o,x,g)})}function d(o,c,g){g(o.indexOf(c),c)}function f(o){return o.pending=!1,o}function k(o,c){const g=_e(o,n);return c(g),g}return t.jsxs(t.Fragment,{children:[t.jsx(J,{name:n,accept:P.join(", "),onFilesSelect:async(o,{push:c,replace:g,remove:x})=>{W=x;const Q=o.map(Y=>k(Y,c));await S([...F[n],...Q],g)},onClick:a,legend:v,buttonLabel:m,description:E,...b}),t.jsx(u,{margin:"xl",children:t.jsx(Be,{attachments:e.filter(o=>!ve(o)),showFileSize:!0,onDelete:o=>{W(e.indexOf(o))}})})]})};try{h.displayName="FormikFileUploader",h.__docgenInfo={description:"",displayName:"FormikFileUploader",props:{attachments:{defaultValue:null,description:"",name:"attachments",required:!0,type:{name:"Attachment[]"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"enum",value:[{value:'"erBarnetFødt"'},{value:'"adopsjonAvEktefellesBarn"'},{value:'"antallBarn"'},{value:'"adopsjonsdato"'},{value:'"søkerAdopsjonAlene"'},{value:'"fødselsdatoer"'},{value:'"termindato"'},{value:'"omsorgsovertakelse"'},{value:'"terminbekreftelse"'},{value:'"terminbekreftelsedato"'}]}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},legend:{defaultValue:null,description:"",name:"legend",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"any"}},onFileInputClick:{defaultValue:null,description:"",name:"onFileInputClick",required:!1,type:{name:"(() => void)"}}}}}catch{}const _=({visibility:e,formValues:n})=>{const a=y();return n.erBarnetFødt===i.YES||n.erBarnetFødt===i.UNANSWERED?null:t.jsxs(t.Fragment,{children:[e.isVisible(r.antallBarn)&&t.jsxs(t.Fragment,{children:[t.jsx(u,{margin:"xl",children:t.jsx(p.RadioGroup,{name:r.antallBarn,radios:[{label:s(a,"omBarnet.radiobutton.ettbarn"),value:"1"},{label:s(a,"omBarnet.radiobutton.tvillinger"),value:"2"},{label:s(a,"omBarnet.radiobutton.flere"),value:"3"}],legend:l(a,"omBarnet.text.antallBarn.termin")})}),n.antallBarn&&parseInt(n.antallBarn,10)>=3&&t.jsx(u,{margin:"xl",children:t.jsxs(p.Select,{name:r.antallBarn,label:s(a,"omBarnet.text.antallBarn.termin"),children:[t.jsx("option",{value:"3",children:"3"}),t.jsx("option",{value:"4",children:"4"}),t.jsx("option",{value:"5",children:"5"}),t.jsx("option",{value:"6",children:"6"}),t.jsx("option",{value:"7",children:"7"}),t.jsx("option",{value:"8",children:"8"}),t.jsx("option",{value:"9",children:"9"})]})})]}),e.isVisible(r.termindato)&&t.jsx(u,{margin:"xl",children:t.jsx(p.DatePicker,{name:r.termindato,label:l(a,"søknad.termindato"),minDate:B().subtract(3,"week").toDate(),maxDate:B().add(18,"weeks").add(3,"days").toDate(),validate:m=>ye(m,a),placeholder:"dd.mm.åååå"})}),e.isVisible(r.terminbekreftelse)&&t.jsx(t.Fragment,{children:t.jsxs(u,{margin:"xl",children:[t.jsx(h,{attachments:n.terminbekreftelse||[],label:l(a,"vedlegg.lastoppknapp.label"),legend:l(a,"vedlegg.terminbekreftelse"),description:l(a,"terminbekreftelsen.text.terminbekreftelsen"),name:r.terminbekreftelse}),t.jsx(C,{apneLabel:t.jsx(T,{id:"psg.åpneLabel"}),children:t.jsx(q,{backgroundColor:"white"})})]})}),e.isVisible(r.terminbekreftelsedato)&&t.jsx(u,{margin:"xl",children:t.jsx(p.DatePicker,{name:r.terminbekreftelsedato,label:l(a,"søknad.terminbekreftelsesdato"),minDate:B(n.termindato).subtract(18,"week").subtract(3,"day").toDate(),maxDate:B().toDate(),validate:m=>Ne(m,n.termindato,a)})})]})};try{_.displayName="Termin",_.__docgenInfo={description:"",displayName:"Termin",props:{formValues:{defaultValue:null,description:"",name:"formValues",required:!0,type:{name:"OmBarnetFormData"}},visibility:{defaultValue:null,description:"",name:"visibility",required:!0,type:{name:"QuestionVisibility<OmBarnetFormField, undefined>"}}}}}catch{}const R=({visibility:e,formValues:n})=>{const a=y();return n.adopsjonAvEktefellesBarn===i.UNANSWERED?null:t.jsxs(t.Fragment,{children:[e.isVisible(r.adopsjonsdato)&&t.jsx(u,{margin:"xl",children:t.jsx(p.DatePicker,{name:r.adopsjonsdato,label:n.adopsjonAvEktefellesBarn===i.YES?l(a,"omBarnet.adopsjon.spørsmål.stebarnsadopsjondato"):l(a,"omBarnet.adopsjon.spørsmål.overtaomsorgdato"),minDate:B().subtract(6,"month").toDate(),validate:n.adopsjonAvEktefellesBarn===i.YES?m=>Fe(m,a):m=>ke(m,a),placeholder:"dd.mm.åååå"})}),e.isVisible(r.antallBarn)&&t.jsxs(t.Fragment,{children:[t.jsx(u,{margin:"xl",children:t.jsx(p.RadioGroup,{name:r.antallBarn,radios:[{label:s(a,"omBarnet.radiobutton.ettbarn"),value:"1"},{label:s(a,"omBarnet.radiobutton.toBarn"),value:"2"},{label:s(a,"omBarnet.radiobutton.flere"),value:"3"}],legend:l(a,"omBarnet.adopsjon.spørsmål.antallBarnAdoptert")})}),n.antallBarn&&parseInt(n.antallBarn,10)>=3&&t.jsx(u,{margin:"xl",children:t.jsxs(p.Select,{name:r.antallBarn,label:l(a,"omBarnet.text.antallBarn.omsorgsovertakelse"),children:[t.jsx("option",{value:"3",children:"3"}),t.jsx("option",{value:"4",children:"4"}),t.jsx("option",{value:"5",children:"5"}),t.jsx("option",{value:"6",children:"6"}),t.jsx("option",{value:"7",children:"7"}),t.jsx("option",{value:"8",children:"8"}),t.jsx("option",{value:"9",children:"9"})]})})]}),e.isVisible(r.fødselsdatoer)&&t.jsx(u,{margin:"xl",children:t.jsx(K,{name:r.fødselsdatoer,render:()=>[...Array(parseInt(n.antallBarn,10))].map((m,v)=>t.jsx(u,{padBottom:"xl",children:t.jsx(p.DatePicker,{name:`${r.fødselsdatoer}.${v}`,label:n.antallBarn==="1"?l(a,"søknad.fødselsdato"):l(a,`omBarnet.adopsjon.spørsmål.fødselsdato.${v+1}`),minDate:B().subtract(15,"year").toDate(),maxDate:B().toDate(),validate:E=>Ae(E,n.adopsjonsdato,a),placeholder:"dd.mm.åååå"})},`${v}`))})}),e.isVisible(r.søkerAdopsjonAlene)&&t.jsx(u,{margin:"xl",children:t.jsx(p.YesOrNoQuestion,{name:r.søkerAdopsjonAlene,legend:l(a,"omBarnet.adopsjon.spørsmål.adoptererDuAlene"),labels:{no:l(a,"omBarnet.adopsjon.text.nei"),yes:l(a,"omBarnet.adopsjon.text.ja")}})}),e.isVisible(r.omsorgsovertakelse)&&t.jsx(t.Fragment,{children:t.jsxs(u,{margin:"xl",children:[t.jsx(h,{attachments:n.omsorgsovertakelse||[],label:l(a,"vedlegg.lastoppknapp.label"),legend:l(a,"vedlegg.adopsjon"),name:r.omsorgsovertakelse,description:l(a,"omBarnet.adopsjon.veilederpanel.adopsjon.text")}),t.jsx(C,{apneLabel:t.jsx(T,{id:"psg.åpneLabel"}),children:t.jsx(q,{backgroundColor:"white"})})]})})]})};try{R.displayName="Adopsjon",R.__docgenInfo={description:"",displayName:"Adopsjon",props:{formValues:{defaultValue:null,description:"",name:"formValues",required:!0,type:{name:"OmBarnetFormData"}},visibility:{defaultValue:null,description:"",name:"visibility",required:!0,type:{name:"QuestionVisibility<OmBarnetFormField, undefined>"}},kjønn:{defaultValue:null,description:"",name:"kjønn",required:!0,type:{name:"enum",value:[{value:'"M"'},{value:'"K"'}]}}}}}catch{}const Ue=(e,n,a)=>e==="adopsjon"&&n!==i.UNANSWERED||e==="fødsel"&&a!==i.UNANSWERED,V=({person:e})=>{const n=y(),a=te("omBarnet"),m=ae();Z(s(n,"søknad.omBarnet"));const{state:v,dispatch:E}=ce(),b=v.søknad.søkersituasjon,{omBarnet:F}=v.søknad,{situasjon:N}=b,S=Ue(N,F.erBarnetFødt,F.adopsjonAvEktefellesBarn)?re:F;ie("sidevisning",{app:"engangsstonadny",team:"foreldrepenger",pageKey:fe.OmBarnet});const D=d=>{E(le.setOmBarnet({erBarnetFødt:d.erBarnetFødt,adopsjonAvEktefellesBarn:d.adopsjonAvEktefellesBarn,antallBarn:d.antallBarn,adopsjonsdato:d.adopsjonsdato,søkerAdopsjonAlene:d.søkerAdopsjonAlene,fødselsdatoer:d.fødselsdatoer||[],termindato:d.termindato,terminbekreftelse:d.terminbekreftelse||[],omsorgsovertakelse:d.omsorgsovertakelse||[],terminbekreftelsedato:d.terminbekreftelsedato})),m("/soknad/utenlandsopphold")};return t.jsx(p.FormikWrapper,{initialValues:S,onSubmit:d=>D(d),renderForm:({values:d})=>{const f=Ee.getVisbility({...d,situasjon:b.situasjon,kjønn:e.kjønn}),k=f.areAllQuestionsAnswered();return t.jsx(ee,{bannerTitle:l(n,"søknad.pageheading"),activeStepId:"omBarnet",pageTitle:l(n,"søknad.omBarnet"),onCancel:()=>de(E,m),steps:me,children:t.jsx(p.Form,{includeButtons:!1,cleanup:()=>be(d),noButtonsContentRenderer:k?void 0:()=>t.jsx(ue,{children:s(n,"søknad.footer.spørsmålMåBesvares")}),children:t.jsxs("div",{className:a.block,children:[b.situasjon==="adopsjon"?t.jsx(u,{children:t.jsx(p.YesOrNoQuestion,{name:r.adopsjonAvEktefellesBarn,legend:l(n,"omBarnet.adopsjon.spørsmål.stebarnsadopsjon"),labels:{no:l(n,"omBarnet.adopsjon.text.nei"),yes:l(n,"omBarnet.adopsjon.text.ja")}})}):t.jsx(u,{children:t.jsx(p.YesOrNoQuestion,{name:r.erBarnetFødt,legend:l(n,"omBarnet.spørsmål.erBarnetFødt"),labels:{no:l(n,"omBarnet.radiobutton.nei"),yes:l(n,"omBarnet.radiobutton.ja")}})}),t.jsx(R,{visibility:f,formValues:d,kjønn:e.kjønn}),t.jsx(Se,{visibility:f,formValues:d}),t.jsx(_,{visibility:f,formValues:d}),t.jsx(u,{margin:"xl",textAlignCenter:!0,children:t.jsxs(ne,{children:[t.jsx(w,{variant:"secondary",as:se,to:pe("omBarnet"),children:t.jsx(T,{id:"backlink.label"})}),k&&t.jsx(w,{type:"submit",children:s(n,"søknad.gåVidere")})]})})]})})})}})},Qe=V;try{V.displayName="OmBarnet",V.__docgenInfo={description:"",displayName:"OmBarnet",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"Person"}}}}}catch{}export{Qe as O};
//# sourceMappingURL=OmBarnet-7bc393fb.js.map
