var de=Object.defineProperty;var pe=(e,n,r)=>n in e?de(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var R=(e,n,r)=>pe(e,typeof n!="symbol"?n+"":n,r);import{a0 as ge,j as s,a1 as ue,a2 as me,u as fe,a3 as Ee,a4 as Se,a5 as ke,d as Ne,a6 as he,a7 as ve,i as be}from"./dateFormValidation-DU24VlAX.js";import{d as xe,R as je,e as ee,f as Ie,g as Re,C as k,h as Ae,n as ne,i as we,j as E,N as ye,P as f,E as Te}from"./useEsNavigator-bP7v46Jf.js";import{D as P,M as _e}from"./DokumentasjonSteg-46QaojCJ.js";import{r as m,a as Me}from"./index-CTjT7uj6.js";import{a as Oe,g as te}from"./apiInterceptor-DfqAa4et.js";import"./index-CYM-y3Gt.js";import{b as Ce,u as w,a as y,o as T,e as De,n as Pe}from"./nn_NO-i82sJ50o.js";import{e as Ue,O as Le}from"./OppsummeringSteg-BkL_8n1v.js";import{e as Fe,b as Ke,a as Ve}from"./OmBarnet-BV6De4cI.js";import{O as He}from"./OmBarnetSteg-zBWDhSGs.js";import{S as Be}from"./SøkersituasjonSteg-B31DxLS0.js";import{S as Ge}from"./SenereUtenlandsoppholdSteg-Bo6FFKJS.js";import{T as Je}from"./TidligereUtenlandsoppholdSteg-5pyXpigD.js";import{U as $e}from"./UtenlandsoppholdSteg-DZ25oBye.js";import{V as qe}from"./Velkommen-c6Qn3ahQ.js";import"./index-BRV0Se7Z.js";import"./ErrorSummaryHookForm-Dqq_26vw.js";import"./BoIUtlandetOppsummeringspunkt-CGpRylLi.js";import"./ConfirmationPanel-DTfY85Wr.js";import"./TidligereUtenlandsoppholdPanel-DJ8cbMbZ.js";const{Axios:Ln,AxiosError:Fn,CanceledError:Kn,isCancel:Vn,CancelToken:Hn,VERSION:Bn,all:Gn,Cancel:Jn,isAxiosError:Ye,spread:$n,toFormData:qn,AxiosHeaders:Yn,HttpStatusCode:zn,formToJSON:Qn,getAdapter:Wn,mergeConfig:Xn}=Oe;class S extends Error{constructor(r,t,o){super(r);R(this,"callId");R(this,"timestamp");this.callId=t,this.timestamp=o}}class I extends Error{constructor(){super("API_ACCESS_ERROR")}}const ze=e=>e instanceof I||e instanceof S,se=e=>!!(e&&typeof e=="object"&&"isAxiosError"in e),U=(e,n)=>{const[r,t]=m.useState(),[o,p]=m.useState(!1),[l,i]=m.useState();return m.useEffect(()=>{let c=!1;return(async()=>{var u,a;try{p(!0);const g=await e.get(n,{withCredentials:!0,timeout:60*1e3});c||t(g.data)}catch(g){Ye(g)?((u=g.response)==null?void 0:u.status)===401||((a=g.response)==null?void 0:a.status)===403?i(new I):i(new S(g.message)):g instanceof Error?i(new S(g.message)):i(new S(String(g)))}finally{p(!1)}})(),()=>{c=!0}},[e,n]),{data:r,loading:o,error:l}},L="ukjent uuid",re=async(e,n,r,t,o=!1,p)=>{var l,i,c,d,u,a;try{return(await e.post(n,r,{withCredentials:!0,timeout:6e4,signal:p,headers:o?{"content-type":"application/json;"}:{}})).data}catch(g){if(se(g)&&g.code!=="ERR_CANCELED"){if(((l=g.response)==null?void 0:l.status)===401||((i=g.response)==null?void 0:i.status)===403)throw new I;const N=(d=(c=g.response)==null?void 0:c.data)!=null&&d.uuid?g.response.data.uuid:L,h=N!==L?N.slice(0,8):N;throw new S(t+h,N,(a=(u=g.response)==null?void 0:u.data)==null?void 0:a.timestamp)}throw g instanceof Error?new S(g.message):new S(String(g))}},F="ukjent uuid",O=async(e,n,r,t,o)=>{var p,l,i,c;try{return(await e.delete(n,{withCredentials:!0,timeout:6e4,signal:o,data:t})).data}catch(d){if(se(d)&&d.code!=="ERR_CANCELED"){if(((p=d.response)==null?void 0:p.status)===401||((l=d.response)==null?void 0:l.status)===403)throw new I;const u=(c=(i=d.response)==null?void 0:i.data)!=null&&c.uuid?d.response.data.uuid:F,a=u!==F?u.slice(0,8):u;throw new S(r+a)}throw d instanceof Error?new S(d.message):new S(String(d))}};/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Qe="6";try{window.__reactRouterVersion=Qe}catch{}const We="startTransition",K=Me[We];function Xe(e){let{basename:n,children:r,future:t,window:o}=e,p=m.useRef();p.current==null&&(p.current=xe({window:o,v5Compat:!0}));let l=p.current,[i,c]=m.useState({action:l.action,location:l.location}),{v7_startTransition:d}=t||{},u=m.useCallback(a=>{d&&K?K(()=>c(a)):c(a)},[c,d]);return m.useLayoutEffect(()=>l.listen(u),[l,u]),m.createElement(je,{basename:n,children:r,location:i.location,navigationType:i.action,navigator:l,future:t})}var V;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(V||(V={}));var H;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(H||(H={}));const Ze="From {fom} until {tom}",en={tidsperiode:Ze,"tidsperiode.kort":"{fom} - {tom}"},nn="Fra {fom} til {tom}",tn={tidsperiode:nn,"tidsperiode.kort":"{fom} - {tom}"},sn="Frå {fom} til {tom}",rn={tidsperiode:sn,"tidsperiode.kort":"{fom} - {tom}"},an=e=>{window.location.href=e},ae="selectedLocale",on=()=>sessionStorage.getItem(ae)||"nb",ln=e=>{sessionStorage.setItem(ae,e)},_={nb:tn,nn:rn,en},oe=1,B="Det har oppstått et problem med mellomlagring av søknaden. Vennligst prøv igjen senere. Hvis problemet vedvarer, kontakt oss og oppgi feil id: ",cn=(e,n,r)=>{const t=ee(),o=Ie(),p=Re(),[l,i]=m.useState(!1),c=m.useRef();return m.useEffect(()=>{l&&(async()=>{i(!1);const a=o[k.CURRENT_PATH];a?(t(a),await re(e,"/rest/storage/engangsstonad",{version:oe,locale:n,...o},B)):(await O(e,"/rest/storage/engangsstonad",B),r(!1),p(),t("/")),c.current&&c.current()})().catch(a=>{ge(a.message),c.current&&c.current()})},[l]),m.useCallback(()=>(i(!0),new Promise(a=>{c.current=a})),[])},dn=()=>{const e=document.getElementById("nav:appSettings"),n=JSON.parse(e.text);return{APP_VERSION:n.APP_VERSION,INNSYN:n.INNSYN}},A=dn(),pn=(e,n)=>{const r=(n==null?void 0:n.vedlegg.map(t=>t.id))||[];if(Fe(e))return{type:"adopsjon",antallBarn:e.antallBarn,fødselsdatoer:e.fødselsdatoer.map(t=>t.dato),adopsjonsdato:e.adopsjonsdato,adopsjonAvEktefellesBarn:e.adopsjonAvEktefellesBarn,vedleggreferanser:r};if(Ke(e))return{type:"fødsel",antallBarn:e.antallBarn,fødselsdato:e.fødselsdato,vedleggreferanser:[]};if(Ve(e)&&n&&Ue(n))return{type:"termin",antallBarn:e.antallBarn,termindato:e.termindato,terminbekreftelseDato:n.terminbekreftelsedato,vedleggreferanser:r};throw Error("Det er feil i data om barnet")},G="Det har oppstått et problem med innsending av søknaden. Vennligst prøv igjen senere. Hvis problemet vedvarer, kontakt oss og oppgi feil id: ",gn=(e,n,r)=>{const t=Ae(),[o,p]=m.useState(),l=m.useCallback(async i=>{const c=ne(t(k.OM_BARNET)),d=t(k.DOKUMENTASJON),u=t(k.UTENLANDSOPPHOLD_TIDLIGERE),a=t(k.UTENLANDSOPPHOLD_SENERE),g={type:"engangsstønad",språkkode:n,barn:pn(c,d),utenlandsopphold:((u==null?void 0:u.utenlandsoppholdSiste12Mnd)||[]).concat((a==null?void 0:a.utenlandsoppholdNeste12Mnd)||[]),vedlegg:(d==null?void 0:d.vedlegg.map(h=>({...h,dokumenterer:{type:"barn"}})))||[]};let N;try{N=await re(e,"/rest/soknad/engangsstonad",g,G,!0,i)}catch(h){if(ze(h))p(h);else throw new Error("This should never happen")}if(N){try{await O(e,"/rest/storage/engangsstonad",G,i)}catch{}r(N)}},[t,n,r,e]);return m.useMemo(()=>({sendSøknad:l,errorSendSøknad:o}),[l,o])},v=te(),C=()=>s.jsx("div",{style:{textAlign:"center",padding:"12rem 0"},children:s.jsx(ue,{size:"2xlarge"})}),D=({error:e})=>s.jsx(me,{appName:"Engangsstønad",errorMessage:e.message,retryCallback:()=>location.reload()}),ie=({locale:e,onChangeLocale:n,søker:r,mellomlagretData:t})=>{const o=ee(),[p,l]=m.useState(!1),[i,c]=m.useState(),{sendSøknad:d,errorSendSøknad:u}=gn(v,e,c),a=cn(v,e,l);return m.useEffect(()=>{t!=null&&t[k.CURRENT_PATH]&&(l(!0),t.locale&&n(t.locale),o(t[k.CURRENT_PATH]))},[t]),i?A.INNSYN?(an(i.saksNr?`${A.INNSYN}/sak/${i.saksNr}/redirectFromSoknad`:`${A.INNSYN}/redirectFromSoknad`),s.jsx(C,{})):s.jsx("div",{children:"Redirected to Innsyn"}):u?s.jsx(D,{error:u}):s.jsxs(we,{children:[!p&&s.jsx(E,{path:"*",element:s.jsx(ye,{to:f.VELKOMMEN})}),s.jsx(E,{path:f.VELKOMMEN,element:s.jsx(qe,{locale:e,onChangeLocale:n,startSøknad:l,erVelkommen:p,mellomlagreOgNaviger:a})}),p&&s.jsxs(s.Fragment,{children:[s.jsx(E,{path:f.SØKERSITUASJON,element:s.jsx(Be,{mellomlagreOgNaviger:a})}),s.jsx(E,{path:f.OM_BARNET,element:s.jsx(He,{kjønn:r.kjønn,mellomlagreOgNaviger:a})}),s.jsx(E,{path:f.TERMINBEKREFTELSE,element:s.jsx(P,{mellomlagreOgNaviger:a})}),s.jsx(E,{path:f.ADOPSJONSBEKREFTELSE,element:s.jsx(P,{mellomlagreOgNaviger:a})}),s.jsx(E,{path:f.UTENLANDSOPPHOLD,element:s.jsx($e,{mellomlagreOgNaviger:a})}),s.jsx(E,{path:f.TIDLIGERE_UTENLANDSOPPHOLD,element:s.jsx(Je,{mellomlagreOgNaviger:a})}),s.jsx(E,{path:f.SENERE_UTENLANDSOPPHOLD,element:s.jsx(Ge,{mellomlagreOgNaviger:a})}),s.jsx(E,{path:f.OPPSUMMERING,element:s.jsx(Le,{sendSøknad:d,mellomlagreOgNaviger:a})})]})]})};C.__docgenInfo={description:"",methods:[],displayName:"Spinner"};D.__docgenInfo={description:"",methods:[],displayName:"ApiErrorHandler"};ie.__docgenInfo={description:"",methods:[],displayName:"EngangsstønadRoutes"};const le=({locale:e,onChangeLocale:n})=>{const r=fe();Ee(r.formatMessage({id:"Søknad.Pagetitle"}));const{data:t,error:o}=U(v,"/rest/personinfo"),{data:p,loading:l,error:i}=U(v,"/rest/storage/engangsstonad");if(o||i)return s.jsx(D,{error:ne(o||i)});if(!t||l)return s.jsx(C,{});if(!Se(t.fødselsdato))return s.jsx(ke,{appnavn:"Engangsstønad"});const c=(p==null?void 0:p.version)===oe?p:void 0;return s.jsx(Te,{initialState:c,children:s.jsx(ie,{locale:e,onChangeLocale:n,søker:t,mellomlagretData:c})})};le.__docgenInfo={description:"",methods:[],displayName:"Engangsstønad"};const un={...Pe,...w.nb,...y.nb,...T.nb,..._.nb},ce=on(),mn={nb:un,nn:{...Ce,...w.nn,...y.nn,...T.nn,..._.nn},en:{...De,...w.en,...y.en,...T.en,..._.en}};Ne.locale(ce);const fn=async()=>{try{await O(v,"/rest/engangsstonad","Feil ved sletting av mellomlagret data")}catch{}location.reload()},M=()=>{const[e,n]=m.useState(ce),r=m.useCallback(t=>{ln(t),n(t),document.documentElement.setAttribute("lang",t)},[]);return s.jsx(he,{locale:e,messagesGroupedByLocale:mn,children:s.jsx(ve,{appName:"Engangsstønad",retryCallback:fn,children:s.jsx(Xe,{children:s.jsx(le,{locale:e,onChangeLocale:r})})})})};M.__docgenInfo={description:"",methods:[],displayName:"AppContainer"};const En={mottattDato:"2019-02-19T13:40:45.115",referanseId:"3959c880-83d2-4f01-b107-035fa7693758",leveranseStatus:"PÅ_VENT",journalId:"439772941"},Zn={title:"Applikasjon - Engangsstønad (AppContainer)",component:M,render:({søker:e,mellomlagretData:n,doLogging:r=!0})=>{be();const t=te(),o=new _e(t);return o.onGet("/rest/personinfo").reply(()=>(r&&console.log("network request: get /personinfo"),[200,e])),o.onGet("/rest/storage/engangsstonad").reply(()=>(r&&console.log("network request: get /storage/engangstonad"),[200,n])),o.onPost("/rest/soknad/engangsstonad").reply(()=>(r&&console.log("network request: post /soknad/engangsstonad"),[200,En])),o.onPost("/rest/storage/engangsstonad").reply(()=>(r&&console.log("network request: post /storage/engangstonad"),[200])),o.onDelete("/rest/storage/engangsstonad").reply(()=>(r&&console.log("network request: delete /storage/engangstonad"),[200])),o.onPost("/rest/storage/engangsstonad/vedlegg").reply(200),o.onPost("/rest/storage/engangsstonad/vedlegg").reply(200),s.jsx(M,{})}},b={args:{søker:{fnr:"11111111111",fornavn:"Henrikke",etternavn:"Ibsen",kjønn:"K",fødselsdato:"1979-01-28",bankkonto:{kontonummer:"49875234987",banknavn:"Storebank"},barn:[]}}},x={args:{mellomlagretData:{version:1,locale:"nb",[k.SØKERSITUASJON]:{situasjon:"fødsel"},[k.CURRENT_PATH]:f.SØKERSITUASJON},søker:{fnr:"11111111111",fornavn:"Henrikke",etternavn:"Ibsen",kjønn:"K",fødselsdato:"1979-01-28",bankkonto:{kontonummer:"49875234987",banknavn:"Storebank"},barn:[]}}},j={args:{søker:{fnr:"1231111111",fornavn:"Espen",etternavn:"Utvikler",kjønn:"M",fødselsdato:"1979-01-28",bankkonto:{kontonummer:"49875234987",banknavn:"Storebank"},barn:[]}}};var J,$,q;b.parameters={...b.parameters,docs:{...(J=b.parameters)==null?void 0:J.docs,source:{originalSource:`{
  args: {
    søker: {
      fnr: '11111111111',
      fornavn: 'Henrikke',
      etternavn: 'Ibsen',
      kjønn: 'K',
      fødselsdato: '1979-01-28',
      bankkonto: {
        kontonummer: '49875234987',
        banknavn: 'Storebank'
      },
      barn: []
    }
  }
}`,...(q=($=b.parameters)==null?void 0:$.docs)==null?void 0:q.source}}};var Y,z,Q;x.parameters={...x.parameters,docs:{...(Y=x.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    mellomlagretData: {
      version: 1,
      locale: 'nb',
      [ContextDataType.SØKERSITUASJON]: {
        situasjon: 'fødsel'
      },
      [ContextDataType.CURRENT_PATH]: Path.SØKERSITUASJON
    },
    søker: {
      fnr: '11111111111',
      fornavn: 'Henrikke',
      etternavn: 'Ibsen',
      kjønn: 'K',
      fødselsdato: '1979-01-28',
      bankkonto: {
        kontonummer: '49875234987',
        banknavn: 'Storebank'
      },
      barn: []
    }
  }
}`,...(Q=(z=x.parameters)==null?void 0:z.docs)==null?void 0:Q.source}}};var W,X,Z;j.parameters={...j.parameters,docs:{...(W=j.parameters)==null?void 0:W.docs,source:{originalSource:`{
  args: {
    søker: {
      fnr: '1231111111',
      fornavn: 'Espen',
      etternavn: 'Utvikler',
      kjønn: 'M',
      fødselsdato: '1979-01-28',
      bankkonto: {
        kontonummer: '49875234987',
        banknavn: 'Storebank'
      },
      barn: []
    }
  }
}`,...(Z=(X=j.parameters)==null?void 0:X.docs)==null?void 0:Z.source}}};const et=["SøkerErKvinne","SøkerErKvinneMedMellomlagretData","SøkerErMann"];export{b as SøkerErKvinne,x as SøkerErKvinneMedMellomlagretData,j as SøkerErMann,et as __namedExportsOrder,Zn as default};
