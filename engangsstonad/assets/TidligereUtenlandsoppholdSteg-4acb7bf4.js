import{j as t}from"./jsx-runtime-69eee039.js";import{r as h}from"./index-7c191284.js";import{h as a,u as k,q as x,r as j,V as v,F as T,d as N,T as C,s as R,f as V,P as A}from"./IntlProvider-d1862383.js";import{a as H,b as B,D as P,u as $,c as G,F as q,E as w,S as z}from"./ErrorSummaryHookForm-9cdf2015.js";import{i as f,f as y,a as K,u as W,n as Y,b as L,E as U,c as J,P as F}from"./useEsNavigator-45988804.js";import{i as Q,c as X}from"./dateUtils-bc9093dd.js";import{f as O}from"./dateUtils-f848cbd7.js";const I=(e,n,o,d,s)=>n===void 0?e(s?"Valideringsfeil.FraOgMedDato.GyldigDato":"Valideringsfeil.TilOgMedDato.GyldigDato"):Q(n,o,d)?null:e("Valideringsfeil.DateOutsideRange",{fom:O(o),tom:O(d)}),Z=(e,n,o,d,s)=>{const r=I(e,n,o,d,!0);if(r!==void 0)return r;if(s&&a(n).isAfter(s,"day"))return e("Valideringsfeil.Utenlandsopphold.FørTilDato")},ee=(e,n,o,d,s)=>{const r=I(e,n,o,d,!1);if(r!==void 0)return r;if(s&&a(n).isBefore(s,"day"))return e("Valideringsfeil.Utenlandsopphold.EtterFraDato")},_=(e,n,o,d)=>{const r=n.map(g=>({from:a(g.fom).toDate(),to:a(g.tom).toDate()})).concat({from:a(o).toDate(),to:a(d).toDate()});return R(r)?e("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"):null},te=({index:e,fjernOpphold:n})=>{const{i18n:o}=k(),{watch:d,trigger:s,formState:{isSubmitted:r}}=H(),g=d("utenlandsoppholdSiste12Mnd").filter((l,c)=>c!==e),i=d(`utenlandsoppholdSiste12Mnd.${e}.fom`),p=d(`utenlandsoppholdSiste12Mnd.${e}.tom`),m=a(x).toDate(),u=p?a(p).toDate():a(j).toDate(),D=i?a(i).toDate():a(x).toDate(),S=a(j).toDate();return t.jsxs(v,{gap:"5",align:"start",children:[t.jsx(B,{name:`utenlandsoppholdSiste12Mnd.${e}.landkode`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[f(o("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd"))],children:X().map(l=>t.jsx("option",{value:l[0],children:l[1]},l[0]))}),t.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${e}.fom`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:m,maxDate:u,validate:[f(o("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved")),y(o("TidligereUtenlandsoppholdSteg.FomErLikTom"),p),l=>Z(o,a(l).toDate(),m,u,a(p).toDate()),l=>_(o,g,l,p)],onChange:()=>r&&s()}),t.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${e}.tom`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:D,maxDate:S,validate:[f(o("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved")),y(o("TidligereUtenlandsoppholdSteg.TomErLikFom"),i),l=>ee(o,a(l).toDate(),D,S,a(i).toDate()),l=>_(o,g,i,l)],onChange:()=>r&&s()}),e>0&&t.jsx(N,{type:"button",variant:"tertiary",size:"small",icon:t.jsx(C,{"aria-hidden":!0}),onClick:()=>n(e),children:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{TidligereUtenlandsoppholdPeriode.displayName="TidligereUtenlandsoppholdPeriode",TidligereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const M={fom:"",tom:"",landkode:""},oe={utenlandsoppholdSiste12Mnd:[M]},E=()=>{const{i18n:e}=k(),n=K(),o=W(),d=Y(L(U.UTENLANDSOPPHOLD)),s=L(U.UTENLANDSOPPHOLD_TIDLIGERE),r=J(U.UTENLANDSOPPHOLD_TIDLIGERE),g=h.useMemo(()=>s||oe,[]),i=$({defaultValues:g}),{fields:p,append:m,remove:u}=G({name:"utenlandsoppholdSiste12Mnd",control:i.control}),D=h.useCallback(()=>{m(M)},[m]),S=h.useCallback(c=>{u(c)},[u]),l=h.useCallback(c=>{r(c),o.goToNextStep(d.skalBoUtenforNorgeNeste12Mnd?F.SENERE_UTENLANDSOPPHOLD:F.OPPSUMMERING)},[]);return t.jsx(V,{bannerTitle:e("Søknad.Pageheading"),pageTitle:e("TidligereUtenlandsoppholdSteg.Tidligere"),onCancel:o.avbrytSøknad,steps:n.stepConfig,activeStepId:n.activeStepId,useNoTempSavingText:!0,children:t.jsx(q,{formMethods:i,onSubmit:l,children:t.jsxs(v,{gap:"10",children:[t.jsx(w,{}),t.jsxs(v,{gap:"10",align:"start",children:[p.map((c,b)=>t.jsxs(h.Fragment,{children:[t.jsx(te,{index:b,fjernOpphold:S}),p.length>1&&t.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},c.id)),t.jsx(N,{type:"button",variant:"secondary",size:"small",icon:t.jsx(A,{"aria-hidden":!0}),onClick:D,children:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),t.jsx(z,{goToPreviousStep:o.goToPreviousDefaultStep,saveDataOnPreviousClick:r})]})})})},pe=E;try{E.displayName="TidligereUtenlandsoppholdSteg",E.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdSteg",props:{}}}catch{}export{pe as T};
//# sourceMappingURL=TidligereUtenlandsoppholdSteg-4acb7bf4.js.map
