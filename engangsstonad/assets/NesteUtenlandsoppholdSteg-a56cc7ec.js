import{j as e}from"./jsx-runtime-69eee039.js";import{r as c}from"./index-7c191284.js";import{j as t,u as b,o as D,q as f,V as S,F as u,d as P,T as F,p as O,g as I,P as L}from"./IntlProvider-6b2e8efe.js";import{a as R,O as A,x as _,u as V,b as $,C as q,D as w,w as B}from"./index.es-1c07523a.js";import{c as z}from"./countryUtils-8377bc9a.js";import{i as k,v as y,a as H,b as Y}from"./valideringsregler-4276fa64.js";import{a as G,u as J,b as K,E as U,c as Q}from"./useEsNavigator-196eef3f.js";const j=t("9999-31-12").toDate(),M=(o,p,s,d)=>{const m=p.map(l=>({from:t(l.fom).toDate(),to:l.tom?t(l.tom).toDate():j})).concat({from:t(s).toDate(),to:d?t(d).toDate():j});return O(m)?o.formatMessage({id:"valideringsfeil.utenlandsopphold.overlapp"}):null},T=({index:o,fjernOpphold:p})=>{const s=b(),{watch:d,trigger:i,formState:{isSubmitted:m}}=R(),l=d("utenlandsoppholdNeste12Mnd").filter((a,h)=>h!==o),r=d(`utenlandsoppholdNeste12Mnd.${o}.fom`),n=d(`utenlandsoppholdNeste12Mnd.${o}.tom`),g=t(D).toDate(),v=n?t(n).toDate():t(f).toDate(),N=t(r||D).toDate(),x=t(f).toDate();return e.jsxs(S,{gap:"5",align:"start",children:[e.jsx(A,{name:`utenlandsoppholdNeste12Mnd.${o}.landkode`,label:e.jsx(u,{id:"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandSkalDuBoI"}),validate:[k(s.formatMessage({id:"valideringsfeil.leggTilUtenlandsopphold.landDuSkalBoIPåkreved"}))],children:z().map(a=>e.jsx("option",{value:a[0],children:a[1]},a[0]))}),e.jsx(_,{name:`utenlandsoppholdNeste12Mnd.${o}.fom`,label:e.jsx(u,{id:"utenlandsopphold.leggTilUtenlandsopphold.fraogmed"}),minDate:t(D).toDate(),maxDate:n?t(n).toDate():t(f).toDate(),validate:[k(s.formatMessage({id:"valideringsfeil.leggTilUtenlandsopphold.landFomDuSkalBoIPåkreved"})),y(s.formatMessage({id:"valideringsfeil.fomErLikTom"}),n),a=>H(s,t(a).toDate(),g,v,t(n).toDate()),a=>M(s,l,a,n)],onChange:()=>m&&i()}),e.jsx(_,{name:`utenlandsoppholdNeste12Mnd.${o}.tom`,label:e.jsx(u,{id:"utenlandsopphold.leggTilUtenlandsopphold.tilogmed"}),minDate:N,maxDate:x,validate:[y(s.formatMessage({id:"valideringsfeil.tomErLikFom"}),r),a=>Y(s,t(a||j).toDate(),t(r||D).toDate(),t(f).toDate(),t(r).toDate()),a=>M(s,l,r,a)],onChange:()=>m&&i()}),o>0&&e.jsx(P,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(F,{"aria-hidden":!0}),onClick:()=>p(o),children:e.jsx(u,{id:"utenlandsopphold.knapp.SlettOpphold"})})]})};try{T.displayName="NesteUtenlandsoppholdPanel",T.__docgenInfo={description:"",displayName:"NesteUtenlandsoppholdPanel",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const C={fom:"",tom:"",landkode:""},W={utenlandsoppholdNeste12Mnd:[C]},E=()=>{const o=b(),p=G(),s=J(),d=K(U.UTENLANDSOPPHOLD_NESTE),i=Q(U.UTENLANDSOPPHOLD_NESTE),m=c.useMemo(()=>d||W,[]),l=V({defaultValues:m}),{fields:r,append:n,remove:g}=$({name:"utenlandsoppholdNeste12Mnd",control:l.control}),v=c.useCallback(()=>{n(C)},[n]),N=c.useCallback(a=>{g(a)},[g]),x=c.useCallback(a=>{i(a),s.goToNextDefaultStep()},[]);return e.jsx(I,{bannerTitle:o.formatMessage({id:"Søknad.Pageheading"}),pageTitle:o.formatMessage({id:"søknad.utenlandsopphold.fremtidig"}),onCancel:s.avbrytSøknad,steps:p.stepConfig,activeStepId:p.activeStepId,useNoTempSavingText:!0,children:e.jsx(q,{formMethods:l,onSubmit:x,children:e.jsxs(S,{gap:"10",children:[e.jsx(w,{}),e.jsxs(S,{gap:"10",align:"start",children:[r.map((a,h)=>e.jsxs(c.Fragment,{children:[e.jsx(T,{index:h,fjernOpphold:N}),r.length>1&&e.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},a.id)),e.jsx(P,{type:"button",variant:"secondary",size:"small",icon:e.jsx(L,{"aria-hidden":!0}),onClick:v,children:e.jsx(u,{id:"utenlandsopphold.knapp.leggTilLand"})})]}),e.jsx(B,{goToPreviousStep:s.goToPreviousDefaultStep,saveDataOnPreviousClick:i})]})})})},ne=E;try{E.displayName="NesteUtenlandsoppholdSteg",E.__docgenInfo={description:"",displayName:"NesteUtenlandsoppholdSteg",props:{}}}catch{}export{ne as N};
//# sourceMappingURL=NesteUtenlandsoppholdSteg-a56cc7ec.js.map
