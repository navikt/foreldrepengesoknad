import{j as t}from"./jsx-runtime-69eee039.js";import{r as h}from"./index-7c191284.js";import{g as o,u as O,m as E,n as j,V as U,F as T,c as _,T as b,o as R,e as C,P as A}from"./IntlProvider-705c2bb3.js";import{u as H,b as B,c as V,D as P,a as $,d as q,F as G,E as w,S as z}from"./ErrorSummaryHookForm-581b703a.js";import{i as K,a as W,u as Y,n as J,b as y,E as v,c as Q,P as L}from"./useEsNavigator-8eca5e12.js";import{c as X}from"./countryUtils-ea39d97c.js";import{f as M}from"./dateUtils-f49d068a.js";const k=(e,n,a,s,r)=>n===void 0?r?e.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"}):e.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"}):K(n,a,s)?null:e.formatMessage({id:"valideringsfeil.dateOutsideRange"},{fom:M(a),tom:M(s)}),Z=(e,n,a,s,r)=>{const d=k(e,n,a,s,!0);if(d!==void 0)return d;if(r&&o(n).isAfter(r,"day"))return e.formatMessage({id:"valideringsfeil.utenlandsopphold.førTilDato"})},ee=(e,n,a,s,r)=>{const d=k(e,n,a,s,!1);if(d!==void 0)return d;if(r&&o(n).isBefore(r,"day"))return e.formatMessage({id:"valideringsfeil.utenlandsopphold.etterFraDato"})},F=(e,n,a,s)=>{const d=n.map(m=>({from:o(m.fom).toDate(),to:o(m.tom).toDate()})).concat({from:o(a).toDate(),to:o(s).toDate()});return R(d)?e.formatMessage({id:"TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"}):null},te=({index:e,fjernOpphold:n})=>{const a=O(),{isRequired:s,date:{isDatesNotTheSame:r}}=H(),{watch:d,trigger:m,formState:{isSubmitted:c}}=B(),u=d("utenlandsoppholdSiste12Mnd").filter((l,I)=>I!==e),i=d(`utenlandsoppholdSiste12Mnd.${e}.fom`),p=d(`utenlandsoppholdSiste12Mnd.${e}.tom`),f=o(E).toDate(),D=p?o(p).toDate():o(j).toDate(),S=i?o(i).toDate():o(E).toDate(),g=o(j).toDate();return t.jsxs(U,{gap:"5",align:"start",children:[t.jsx(V,{name:`utenlandsoppholdSiste12Mnd.${e}.landkode`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[s("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd")],children:X().map(l=>t.jsx("option",{value:l[0],children:l[1]},l[0]))}),t.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${e}.fom`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:f,maxDate:D,validate:[s("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved"),r("TidligereUtenlandsoppholdSteg.FomErLikTom",p),l=>Z(a,o(l).toDate(),f,D,o(p).toDate()),l=>F(a,u,l,p)],onChange:()=>c&&m()}),t.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${e}.tom`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:S,maxDate:g,validate:[s("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved"),r("TidligereUtenlandsoppholdSteg.TomErLikFom",i),l=>ee(a,o(l).toDate(),S,g,o(i).toDate()),l=>F(a,u,i,l)],onChange:()=>c&&m()}),e>0&&t.jsx(_,{type:"button",variant:"tertiary",size:"small",icon:t.jsx(b,{"aria-hidden":!0}),onClick:()=>n(e),children:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{TidligereUtenlandsoppholdPeriode.displayName="TidligereUtenlandsoppholdPeriode",TidligereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const N={fom:"",tom:"",landkode:""},ae={utenlandsoppholdSiste12Mnd:[N]},x=()=>{const e=O(),n=W(),a=Y(),s=J(y(v.UTENLANDSOPPHOLD)),r=y(v.UTENLANDSOPPHOLD_TIDLIGERE),d=Q(v.UTENLANDSOPPHOLD_TIDLIGERE),m=h.useMemo(()=>r||ae,[]),c=$({defaultValues:m}),{fields:u,append:i,remove:p}=q({name:"utenlandsoppholdSiste12Mnd",control:c.control}),f=h.useCallback(()=>{i(N)},[i]),D=h.useCallback(g=>{p(g)},[p]),S=h.useCallback(g=>{d(g),a.goToNextStep(s.skalBoUtenforNorgeNeste12Mnd?L.SENERE_UTENLANDSOPPHOLD:L.OPPSUMMERING)},[]);return t.jsx(C,{bannerTitle:e.formatMessage({id:"Søknad.Pageheading"}),pageTitle:e.formatMessage({id:"TidligereUtenlandsoppholdSteg.Tidligere"}),onCancel:a.avbrytSøknad,steps:n.stepConfig,activeStepId:n.activeStepId,useNoTempSavingText:!0,children:t.jsx(G,{formMethods:c,onSubmit:S,children:t.jsxs(U,{gap:"10",children:[t.jsx(w,{}),t.jsxs(U,{gap:"10",align:"start",children:[u.map((g,l)=>t.jsxs(h.Fragment,{children:[t.jsx(te,{index:l,fjernOpphold:D}),u.length>1&&t.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},g.id)),t.jsx(_,{type:"button",variant:"secondary",size:"small",icon:t.jsx(A,{"aria-hidden":!0}),onClick:f,children:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),t.jsx(z,{goToPreviousStep:a.goToPreviousDefaultStep,saveDataOnPreviousClick:d})]})})})},pe=x;try{x.displayName="TidligereUtenlandsoppholdSteg",x.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdSteg",props:{}}}catch{}export{pe as T};
//# sourceMappingURL=TidligereUtenlandsoppholdSteg-042a8105.js.map
