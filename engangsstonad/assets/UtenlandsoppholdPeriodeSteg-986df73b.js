import{j as e}from"./jsx-runtime-69eee039.js";import{r as j}from"./index-7c191284.js";import{g as o,u as N,k as x,m as h,V as E,b as C,T as B,F as i,c as $,n as w,o as _,R as v,p as z,q as F,r as J,e as Y,P as G}from"./IntlProvider-79b89341.js";import{u as W,b as K,c as Q,R as k,D as M,a as X,d as Z,F as ee,E as ae,S as oe}from"./ErrorSummaryHookForm-191d9635.js";import{c as te}from"./countryUtils-64ad3222.js";import{i as re,a as ne,u as se,b as de,E as O,c as le}from"./useEsNavigator-fe1453fa.js";import{f as b}from"./dateUtils-243f90f9.js";const L=(a,s,r,n,l)=>s===void 0?l?a.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"}):a.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"}):re(s,r,n)?null:a.formatMessage({id:"valideringsfeil.dateOutsideRange"},{fom:b(r),tom:b(n)}),ie=(a,s,r,n,l)=>{const d=L(a,s,r,n,!0);if(d!==void 0)return d;if(l&&o(s).isAfter(l,"day"))return a.formatMessage({id:"valideringsfeil.utenlandsopphold.førTilDato"})},pe=(a,s,r,n,l)=>{const d=L(a,s,r,n,!1);if(d!==void 0)return d;if(l&&o(s).isBefore(l,"day"))return a.formatMessage({id:"valideringsfeil.utenlandsopphold.etterFraDato"})},I=(a,s,r,n)=>{const d=s.map(m=>({from:o(m.fom).toDate(),to:m.tom?o(m.tom).toDate():F})).concat({from:o(r).toDate(),to:n?o(n).toDate():F});return J(d)?a.formatMessage({id:"UtenlandsoppholdPeriodePanel.Valideringsfeil.Utenlandsopphold.Overlapp"}):null},y=({index:a,fjernOpphold:s})=>{const r=N(),{isRequired:n,date:{isDatesNotTheSame:l}}=W(),{watch:d,trigger:m,setValue:P,resetField:g,formState:{isSubmitted:f}}=K(),D=d("perioder").filter((t,u)=>u!==a),U=d(`perioder.${a}.harFlyttetUtForMerEnn12MånderSiden`),S=d(`perioder.${a}.skalBoIUtlandetMerEnEttÅrFremover`),p=d(`perioder.${a}.fom`),c=d(`perioder.${a}.tom`),R=o(x).toDate(),A=c?o(c).toDate():o(h).toDate(),q=o(p||x).toDate(),H=o(h).toDate();return e.jsxs(e.Fragment,{children:[e.jsxs(E,{gap:"2",children:[e.jsx("hr",{style:{width:"100%"},color:"#99C4DD"}),e.jsxs(C,{justify:"space-between",children:[e.jsx(B,{variant:"info",children:e.jsx(i,{id:"UtenlandsoppholdPeriodePanel.OppholdIUtlandet"})}),a>0&&e.jsx($,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(w,{"aria-hidden":!0}),onClick:()=>s(a),children:e.jsx(i,{id:"UtenlandsoppholdPeriodePanel.SlettOpphold"})})]})]}),e.jsxs(E,{gap:"10",align:"start",children:[e.jsx(Q,{name:`perioder.${a}.landkode`,label:e.jsx(i,{id:"UtenlandsoppholdPeriodePanel.Land"}),validate:[n("UtenlandsoppholdPeriodePanel.Validering.Land.Required")],children:te().map(t=>e.jsx("option",{value:t[0],children:t[1]},t[0]))}),e.jsxs(k,{name:`perioder.${a}.harFlyttetUtForMerEnn12MånderSiden`,label:e.jsx(i,{id:"UtenlandsoppholdPeriodePanel.Historisk.Spørsmål"}),validate:[n("UtenlandsoppholdPeriodePanel.Historisk.IsRequired")],onChange:t=>{if(t){const u=o(x).format(_);P(`perioder.${a}.fom`,u)}else t===!1&&g(`perioder.${a}.fom`)},children:[e.jsx(v,{value:!1,children:e.jsx(i,{id:"UtenlandsoppholdPeriodePanel.Nei"})}),e.jsx(v,{value:!0,children:e.jsx(i,{id:"UtenlandsoppholdPeriodePanel.Ja"})})]}),U===!1&&e.jsx(M,{name:`perioder.${a}.fom`,label:e.jsx(i,{id:"UtenlandsoppholdPeriodePanel.Fraogmed"}),minDate:R,maxDate:c?o(c).toDate():o(h).toDate(),validate:[n("UtenlandsoppholdPeriodePanel.Validering.Fraogmed.Required"),l("valideringsfeil.fomErLikTom",c),t=>ie(r,o(t).toDate(),R,A,o(c).toDate()),t=>I(r,D,t,c)],onChange:()=>f&&m()}),e.jsxs(k,{name:`perioder.${a}.skalBoIUtlandetMerEnEttÅrFremover`,label:e.jsx(i,{id:"UtenlandsoppholdPeriodePanel.Fremtidig.Spørsmål"}),validate:[n("UtenlandsoppholdPeriodePanel.Fremtidig.IsRequired")],onChange:t=>{if(t){const u=o(h).format(_);P(`perioder.${a}.tom`,u)}else t===!1&&g(`perioder.${a}.tom`)},children:[e.jsx(v,{value:!1,children:e.jsx(i,{id:"UtenlandsoppholdPeriodePanel.Nei"})}),e.jsx(v,{value:!0,children:e.jsx(i,{id:"UtenlandsoppholdPeriodePanel.Ja"})})]}),S===!1&&e.jsx(M,{name:`perioder.${a}.tom`,label:e.jsx(i,{id:"UtenlandsoppholdPeriodePanel.Tilogmed"}),minDate:q,maxDate:H,validate:[n("UtenlandsoppholdPeriodePanel.Validering.Tilogmed.Required"),l("valideringsfeil.tomErLikFom",p),t=>pe(r,o(t||F).toDate(),o(p||z).toDate(),o(h).toDate(),o(p).toDate()),t=>I(r,D,p,t)],onChange:()=>f&&m()})]})]})};try{y.displayName="UtenlandsoppholdPeriodePanel",y.__docgenInfo={description:"",displayName:"UtenlandsoppholdPeriodePanel",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const V={fom:"",tom:"",landkode:""},me={perioder:[V]},T=()=>{const a=N(),s=ne(),r=se(),n=de(O.UTENLANDSOPPHOLD_PERIODER),l=le(O.UTENLANDSOPPHOLD_PERIODER),d=j.useMemo(()=>n||me,[]),m=X({defaultValues:d}),{fields:P,append:g,remove:f}=Z({name:"perioder",control:m.control}),D=j.useCallback(()=>{g(V)},[g]),U=j.useCallback(p=>{f(p)},[f]),S=j.useCallback(p=>{l(p),r.goToNextDefaultStep()},[]);return e.jsx(Y,{bannerTitle:a.formatMessage({id:"Søknad.Pageheading"}),pageTitle:a.formatMessage({id:"UtenlandsoppholdPeriodeSteg.Title"}),onCancel:r.avbrytSøknad,steps:s.stepConfig,activeStepId:s.activeStepId,useNoTempSavingText:!0,children:e.jsx(ee,{formMethods:m,onSubmit:S,children:e.jsxs(E,{gap:"10",children:[e.jsx(ae,{}),P.map((p,c)=>e.jsx(y,{index:c,fjernOpphold:U},p.id)),e.jsx(C,{children:e.jsx($,{type:"button",variant:"secondary",size:"small",icon:e.jsx(G,{"aria-hidden":!0}),onClick:D,children:e.jsx(i,{id:"utenlandsopphold.knapp.leggTilLand"})})}),e.jsx(oe,{goToPreviousStep:r.goToPreviousDefaultStep,saveDataOnPreviousClick:l})]})})})},je=T;try{T.displayName="UtenlandsoppholdPeriodeSteg",T.__docgenInfo={description:"",displayName:"UtenlandsoppholdPeriodeSteg",props:{}}}catch{}export{je as U};
//# sourceMappingURL=UtenlandsoppholdPeriodeSteg-986df73b.js.map
