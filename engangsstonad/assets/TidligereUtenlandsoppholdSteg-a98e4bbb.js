import{j as t}from"./jsx-runtime-69eee039.js";import{r as h}from"./index-7c191284.js";import{g as o,u as O,m as x,n as j,V as v,F as T,c as _,T as b,o as R,e as C,P as V}from"./IntlProvider-87524b3e.js";import{u as A,b as H,c as B,D as P,a as $,d as G,F as q,E as w,S as z}from"./ErrorSummaryHookForm-0994505a.js";import{i as K,a as W,u as Y,n as J,b as y,E as U,c as Q,P as L}from"./useEsNavigator-15397b1a.js";import{c as X}from"./countryUtils-28eedc59.js";import{f as F}from"./dateUtils-16b0c801.js";const k=(e,n,a,s,r)=>n===void 0?r?e.formatMessage({id:"Valideringsfeil.FraOgMedDato.GyldigDato"}):e.formatMessage({id:"Valideringsfeil.TilOgMedDato.GyldigDato"}):K(n,a,s)?null:e.formatMessage({id:"Valideringsfeil.DateOutsideRange"},{fom:F(a),tom:F(s)}),Z=(e,n,a,s,r)=>{const d=k(e,n,a,s,!0);if(d!==void 0)return d;if(r&&o(n).isAfter(r,"day"))return e.formatMessage({id:"Valideringsfeil.Utenlandsopphold.FørTilDato"})},ee=(e,n,a,s,r)=>{const d=k(e,n,a,s,!1);if(d!==void 0)return d;if(r&&o(n).isBefore(r,"day"))return e.formatMessage({id:"Valideringsfeil.Utenlandsopphold.EtterFraDato"})},M=(e,n,a,s)=>{const d=n.map(m=>({from:o(m.fom).toDate(),to:o(m.tom).toDate()})).concat({from:o(a).toDate(),to:o(s).toDate()});return R(d)?e.formatMessage({id:"TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"}):null},te=({index:e,fjernOpphold:n})=>{const a=O(),{isRequired:s,date:{isDatesNotTheSame:r}}=A(),{watch:d,trigger:m,formState:{isSubmitted:c}}=H(),u=d("utenlandsoppholdSiste12Mnd").filter((l,I)=>I!==e),i=d(`utenlandsoppholdSiste12Mnd.${e}.fom`),p=d(`utenlandsoppholdSiste12Mnd.${e}.tom`),D=o(x).toDate(),f=p?o(p).toDate():o(j).toDate(),S=i?o(i).toDate():o(x).toDate(),g=o(j).toDate();return t.jsxs(v,{gap:"5",align:"start",children:[t.jsx(B,{name:`utenlandsoppholdSiste12Mnd.${e}.landkode`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[s("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd")],children:X().map(l=>t.jsx("option",{value:l[0],children:l[1]},l[0]))}),t.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${e}.fom`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:D,maxDate:f,validate:[s("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved"),r("TidligereUtenlandsoppholdSteg.FomErLikTom",p),l=>Z(a,o(l).toDate(),D,f,o(p).toDate()),l=>M(a,u,l,p)],onChange:()=>c&&m()}),t.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${e}.tom`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:S,maxDate:g,validate:[s("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved"),r("TidligereUtenlandsoppholdSteg.TomErLikFom",i),l=>ee(a,o(l).toDate(),S,g,o(i).toDate()),l=>M(a,u,i,l)],onChange:()=>c&&m()}),e>0&&t.jsx(_,{type:"button",variant:"tertiary",size:"small",icon:t.jsx(b,{"aria-hidden":!0}),onClick:()=>n(e),children:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{TidligereUtenlandsoppholdPeriode.displayName="TidligereUtenlandsoppholdPeriode",TidligereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const N={fom:"",tom:"",landkode:""},ae={utenlandsoppholdSiste12Mnd:[N]},E=()=>{const e=O(),n=W(),a=Y(),s=J(y(U.UTENLANDSOPPHOLD)),r=y(U.UTENLANDSOPPHOLD_TIDLIGERE),d=Q(U.UTENLANDSOPPHOLD_TIDLIGERE),m=h.useMemo(()=>r||ae,[]),c=$({defaultValues:m}),{fields:u,append:i,remove:p}=G({name:"utenlandsoppholdSiste12Mnd",control:c.control}),D=h.useCallback(()=>{i(N)},[i]),f=h.useCallback(g=>{p(g)},[p]),S=h.useCallback(g=>{d(g),a.goToNextStep(s.skalBoUtenforNorgeNeste12Mnd?L.SENERE_UTENLANDSOPPHOLD:L.OPPSUMMERING)},[]);return t.jsx(C,{bannerTitle:e.formatMessage({id:"Søknad.Pageheading"}),pageTitle:e.formatMessage({id:"TidligereUtenlandsoppholdSteg.Tidligere"}),onCancel:a.avbrytSøknad,steps:n.stepConfig,activeStepId:n.activeStepId,useNoTempSavingText:!0,children:t.jsx(q,{formMethods:c,onSubmit:S,children:t.jsxs(v,{gap:"10",children:[t.jsx(w,{}),t.jsxs(v,{gap:"10",align:"start",children:[u.map((g,l)=>t.jsxs(h.Fragment,{children:[t.jsx(te,{index:l,fjernOpphold:f}),u.length>1&&t.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},g.id)),t.jsx(_,{type:"button",variant:"secondary",size:"small",icon:t.jsx(V,{"aria-hidden":!0}),onClick:D,children:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),t.jsx(z,{goToPreviousStep:a.goToPreviousDefaultStep,saveDataOnPreviousClick:d})]})})})},pe=E;try{E.displayName="TidligereUtenlandsoppholdSteg",E.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdSteg",props:{}}}catch{}export{pe as T};
//# sourceMappingURL=TidligereUtenlandsoppholdSteg-a98e4bbb.js.map
