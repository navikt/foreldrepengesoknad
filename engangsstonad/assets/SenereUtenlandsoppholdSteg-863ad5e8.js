import{j as t}from"./jsx-runtime-69eee039.js";import{r as S}from"./index-7c191284.js";import{g as o,u as M,n as D,p as f,V as x,F as h,c as L,T as b,q as j,o as C,e as I,P as R}from"./IntlProvider-705c2bb3.js";import{u as A,b as V,c as B,D as F,a as $,d as H,F as q,E as w,S as z}from"./ErrorSummaryHookForm-581b703a.js";import{c as K}from"./countryUtils-ea39d97c.js";import{i as W,a as Y,u as G,b as J,E as N,c as Q}from"./useEsNavigator-8eca5e12.js";import{f as k}from"./dateUtils-f49d068a.js";const P=(e,n,a,s,r)=>n===void 0?r?e.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"}):e.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"}):W(n,a,s)?null:e.formatMessage({id:"valideringsfeil.dateOutsideRange"},{fom:k(a),tom:k(s)}),X=(e,n,a,s,r)=>{const d=P(e,n,a,s,!0);if(d!==void 0)return d;if(r&&o(n).isAfter(r,"day"))return e.formatMessage({id:"valideringsfeil.utenlandsopphold.førTilDato"})},Z=(e,n,a,s,r)=>{const d=P(e,n,a,s,!1);if(d!==void 0)return d;if(r&&o(n).isBefore(r,"day"))return e.formatMessage({id:"valideringsfeil.utenlandsopphold.etterFraDato"})},_=(e,n,a,s)=>{const d=n.map(i=>({from:o(i.fom).toDate(),to:i.tom?o(i.tom).toDate():j})).concat({from:o(a).toDate(),to:s?o(s).toDate():j});return C(d)?e.formatMessage({id:"SenereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"}):null},ee=({index:e,fjernOpphold:n})=>{const a=M(),{isRequired:s,date:{isDatesNotTheSame:r}}=A(),{watch:d,trigger:i,formState:{isSubmitted:c}}=V(),u=d("utenlandsoppholdNeste12Mnd").filter((l,y)=>y!==e),m=d(`utenlandsoppholdNeste12Mnd.${e}.fom`),p=d(`utenlandsoppholdNeste12Mnd.${e}.tom`),v=o(D).toDate(),U=p?o(p).toDate():o(f).toDate(),g=o(m||D).toDate(),T=o(f).toDate();return t.jsxs(x,{gap:"5",align:"start",children:[t.jsx(B,{name:`utenlandsoppholdNeste12Mnd.${e}.landkode`,label:t.jsx(h,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Spørsmål.HvilketLandSkalDuBoI"}),validate:[s("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuSkalBoIPåkreved")],children:K().map(l=>t.jsx("option",{value:l[0],children:l[1]},l[0]))}),t.jsx(F,{name:`utenlandsoppholdNeste12Mnd.${e}.fom`,label:t.jsx(h,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:o(D).toDate(),maxDate:p?o(p).toDate():o(f).toDate(),validate:[s("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved"),r("SenereUtenlandsoppholdSteg.FomErLikTom",p),l=>X(a,o(l).toDate(),v,U,o(p).toDate()),l=>_(a,u,l,p)],onChange:()=>c&&i()}),t.jsx(F,{name:`utenlandsoppholdNeste12Mnd.${e}.tom`,label:t.jsx(h,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:g,maxDate:T,validate:[s("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuSkalBoIPåkreved"),r("SenereUtenlandsoppholdSteg.TomErLikFom",m),l=>Z(a,o(l||j).toDate(),o(m||D).toDate(),o(f).toDate(),o(m).toDate()),l=>_(a,u,m,l)],onChange:()=>c&&i()}),e>0&&t.jsx(L,{type:"button",variant:"tertiary",size:"small",icon:t.jsx(b,{"aria-hidden":!0}),onClick:()=>n(e),children:t.jsx(h,{id:"SenereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{SenereUtenlandsoppholdPeriode.displayName="SenereUtenlandsoppholdPeriode",SenereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"SenereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const O={fom:"",tom:"",landkode:""},te={utenlandsoppholdNeste12Mnd:[O]},E=()=>{const e=M(),n=Y(),a=G(),s=J(N.UTENLANDSOPPHOLD_SENERE),r=Q(N.UTENLANDSOPPHOLD_SENERE),d=S.useMemo(()=>s||te,[]),i=$({defaultValues:d}),{fields:c,append:u,remove:m}=H({name:"utenlandsoppholdNeste12Mnd",control:i.control}),p=S.useCallback(()=>{u(O)},[u]),v=S.useCallback(g=>{m(g)},[m]),U=S.useCallback(g=>{r(g),a.goToNextDefaultStep()},[]);return t.jsx(I,{bannerTitle:e.formatMessage({id:"Søknad.Pageheading"}),pageTitle:e.formatMessage({id:"SenereUtenlandsoppholdSteg.Fremtidig"}),onCancel:a.avbrytSøknad,steps:n.stepConfig,activeStepId:n.activeStepId,useNoTempSavingText:!0,children:t.jsx(q,{formMethods:i,onSubmit:U,children:t.jsxs(x,{gap:"10",children:[t.jsx(w,{}),t.jsxs(x,{gap:"10",align:"start",children:[c.map((g,T)=>t.jsxs(S.Fragment,{children:[t.jsx(ee,{index:T,fjernOpphold:v}),c.length>1&&t.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},g.id)),t.jsx(L,{type:"button",variant:"secondary",size:"small",icon:t.jsx(R,{"aria-hidden":!0}),onClick:p,children:t.jsx(h,{id:"SenereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),t.jsx(z,{goToPreviousStep:a.goToPreviousDefaultStep,saveDataOnPreviousClick:r})]})})})},ie=E;try{E.displayName="SenereUtenlandsoppholdSteg",E.__docgenInfo={description:"",displayName:"SenereUtenlandsoppholdSteg",props:{}}}catch{}export{ie as S};
//# sourceMappingURL=SenereUtenlandsoppholdSteg-863ad5e8.js.map
