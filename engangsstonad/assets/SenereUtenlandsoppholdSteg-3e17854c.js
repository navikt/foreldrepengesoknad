import{j as t}from"./jsx-runtime-69eee039.js";import{r as S}from"./index-7c191284.js";import{g as o,u as M,n as D,p as f,V as x,F as h,c as L,T as b,q as E,o as C,e as I,P as R}from"./IntlProvider-87524b3e.js";import{u as V,b as A,c as B,D as y,a as $,d as H,F as q,E as w,S as z}from"./ErrorSummaryHookForm-0994505a.js";import{c as G}from"./countryUtils-28eedc59.js";import{i as K,a as W,u as Y,b as J,E as N,c as Q}from"./useEsNavigator-15397b1a.js";import{f as k}from"./dateUtils-16b0c801.js";const P=(e,n,a,s,r)=>n===void 0?r?e.formatMessage({id:"Valideringsfeil.FraOgMedDato.GyldigDato"}):e.formatMessage({id:"Valideringsfeil.TilOgMedDato.GyldigDato"}):K(n,a,s)?null:e.formatMessage({id:"Valideringsfeil.DateOutsideRange"},{fom:k(a),tom:k(s)}),X=(e,n,a,s,r)=>{const d=P(e,n,a,s,!0);if(d!==void 0)return d;if(r&&o(n).isAfter(r,"day"))return e.formatMessage({id:"Valideringsfeil.Utenlandsopphold.FørTilDato"})},Z=(e,n,a,s,r)=>{const d=P(e,n,a,s,!1);if(d!==void 0)return d;if(r&&o(n).isBefore(r,"day"))return e.formatMessage({id:"Valideringsfeil.Utenlandsopphold.EtterFraDato"})},_=(e,n,a,s)=>{const d=n.map(i=>({from:o(i.fom).toDate(),to:i.tom?o(i.tom).toDate():E})).concat({from:o(a).toDate(),to:s?o(s).toDate():E});return C(d)?e.formatMessage({id:"SenereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"}):null},ee=({index:e,fjernOpphold:n})=>{const a=M(),{isRequired:s,date:{isDatesNotTheSame:r}}=V(),{watch:d,trigger:i,formState:{isSubmitted:g}}=A(),u=d("utenlandsoppholdNeste12Mnd").filter((l,F)=>F!==e),m=d(`utenlandsoppholdNeste12Mnd.${e}.fom`),p=d(`utenlandsoppholdNeste12Mnd.${e}.tom`),U=o(D).toDate(),v=p?o(p).toDate():o(f).toDate(),c=o(m||D).toDate(),T=o(f).toDate();return t.jsxs(x,{gap:"5",align:"start",children:[t.jsx(B,{name:`utenlandsoppholdNeste12Mnd.${e}.landkode`,label:t.jsx(h,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Spørsmål.HvilketLandSkalDuBoI"}),validate:[s("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuSkalBoIPåkreved")],children:G().map(l=>t.jsx("option",{value:l[0],children:l[1]},l[0]))}),t.jsx(y,{name:`utenlandsoppholdNeste12Mnd.${e}.fom`,label:t.jsx(h,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:o(D).toDate(),maxDate:p?o(p).toDate():o(f).toDate(),validate:[s("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved"),r("SenereUtenlandsoppholdSteg.FomErLikTom",p),l=>X(a,o(l).toDate(),U,v,o(p).toDate()),l=>_(a,u,l,p)],onChange:()=>g&&i()}),t.jsx(y,{name:`utenlandsoppholdNeste12Mnd.${e}.tom`,label:t.jsx(h,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:c,maxDate:T,validate:[s("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuSkalBoIPåkreved"),r("SenereUtenlandsoppholdSteg.TomErLikFom",m),l=>Z(a,o(l||E).toDate(),o(m||D).toDate(),o(f).toDate(),o(m).toDate()),l=>_(a,u,m,l)],onChange:()=>g&&i()}),e>0&&t.jsx(L,{type:"button",variant:"tertiary",size:"small",icon:t.jsx(b,{"aria-hidden":!0}),onClick:()=>n(e),children:t.jsx(h,{id:"SenereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{SenereUtenlandsoppholdPeriode.displayName="SenereUtenlandsoppholdPeriode",SenereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"SenereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const O={fom:"",tom:"",landkode:""},te={utenlandsoppholdNeste12Mnd:[O]},j=()=>{const e=M(),n=W(),a=Y(),s=J(N.UTENLANDSOPPHOLD_SENERE),r=Q(N.UTENLANDSOPPHOLD_SENERE),d=S.useMemo(()=>s||te,[]),i=$({defaultValues:d}),{fields:g,append:u,remove:m}=H({name:"utenlandsoppholdNeste12Mnd",control:i.control}),p=S.useCallback(()=>{u(O)},[u]),U=S.useCallback(c=>{m(c)},[m]),v=S.useCallback(c=>{r(c),a.goToNextDefaultStep()},[]);return t.jsx(I,{bannerTitle:e.formatMessage({id:"Søknad.Pageheading"}),pageTitle:e.formatMessage({id:"SenereUtenlandsoppholdSteg.Fremtidig"}),onCancel:a.avbrytSøknad,steps:n.stepConfig,activeStepId:n.activeStepId,useNoTempSavingText:!0,children:t.jsx(q,{formMethods:i,onSubmit:v,children:t.jsxs(x,{gap:"10",children:[t.jsx(w,{}),t.jsxs(x,{gap:"10",align:"start",children:[g.map((c,T)=>t.jsxs(S.Fragment,{children:[t.jsx(ee,{index:T,fjernOpphold:U}),g.length>1&&t.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},c.id)),t.jsx(L,{type:"button",variant:"secondary",size:"small",icon:t.jsx(R,{"aria-hidden":!0}),onClick:p,children:t.jsx(h,{id:"SenereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),t.jsx(z,{goToPreviousStep:a.goToPreviousDefaultStep,saveDataOnPreviousClick:r})]})})})},ie=j;try{j.displayName="SenereUtenlandsoppholdSteg",j.__docgenInfo={description:"",displayName:"SenereUtenlandsoppholdSteg",props:{}}}catch{}export{ie as S};
//# sourceMappingURL=SenereUtenlandsoppholdSteg-3e17854c.js.map
