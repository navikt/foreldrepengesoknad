import{j as t}from"./jsx-runtime-69eee039.js";import{r as h}from"./index-7c191284.js";import{g as a,q as x,r as j,V as v,F as T,c as k,T as C,s as R,e as V,P as A}from"./IntlProvider-b1910645.js";import{a as H,b as B,D as P,u as $,c as G,F as q,E as w,S as z}from"./ErrorSummaryHookForm-c68e3e28.js";import{i as f,f as y,a as K,u as W,n as Y,b as L,E as U,c as J,P as F}from"./useEsNavigator-ab39ef68.js";import{i as Q,c as X}from"./dateUtils-92ad7896.js";import{f as O}from"./dateUtils-60b1ece6.js";import{u as N}from"./useCustomI18n-46d968c1.js";const I=(e,n,o,l,d)=>n===void 0?e(d?"Valideringsfeil.FraOgMedDato.GyldigDato":"Valideringsfeil.TilOgMedDato.GyldigDato"):Q(n,o,l)?null:e("Valideringsfeil.DateOutsideRange",{fom:O(o),tom:O(l)}),Z=(e,n,o,l,d)=>{const r=I(e,n,o,l,!0);if(r!==void 0)return r;if(d&&a(n).isAfter(d,"day"))return e("Valideringsfeil.Utenlandsopphold.FørTilDato")},ee=(e,n,o,l,d)=>{const r=I(e,n,o,l,!1);if(r!==void 0)return r;if(d&&a(n).isBefore(d,"day"))return e("Valideringsfeil.Utenlandsopphold.EtterFraDato")},_=(e,n,o,l)=>{const r=n.map(g=>({from:a(g.fom).toDate(),to:a(g.tom).toDate()})).concat({from:a(o).toDate(),to:a(l).toDate()});return R(r)?e("TidligereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"):null},te=({index:e,fjernOpphold:n})=>{const{i18n:o}=N(),{watch:l,trigger:d,formState:{isSubmitted:r}}=H(),g=l("utenlandsoppholdSiste12Mnd").filter((s,c)=>c!==e),i=l(`utenlandsoppholdSiste12Mnd.${e}.fom`),p=l(`utenlandsoppholdSiste12Mnd.${e}.tom`),m=a(x).toDate(),u=p?a(p).toDate():a(j).toDate(),D=i?a(i).toDate():a(x).toDate(),S=a(j).toDate();return t.jsxs(v,{gap:"5",align:"start",children:[t.jsx(B,{name:`utenlandsoppholdSiste12Mnd.${e}.landkode`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Spørsmål.HvilketLandHarDuBoddI"}),validate:[f(o("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuHarBoddIPåkrevd"))],children:X().map(s=>t.jsx("option",{value:s[0],children:s[1]},s[0]))}),t.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${e}.fom`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:m,maxDate:u,validate:[f(o("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved")),y(o("TidligereUtenlandsoppholdSteg.FomErLikTom"),p),s=>Z(o,a(s).toDate(),m,u,a(p).toDate()),s=>_(o,g,s,p)],onChange:()=>r&&d()}),t.jsx(P,{name:`utenlandsoppholdSiste12Mnd.${e}.tom`,label:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:D,maxDate:S,validate:[f(o("TidligereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuHarBoddIPåkreved")),y(o("TidligereUtenlandsoppholdSteg.TomErLikFom"),i),s=>ee(o,a(s).toDate(),D,S,a(i).toDate()),s=>_(o,g,i,s)],onChange:()=>r&&d()}),e>0&&t.jsx(k,{type:"button",variant:"tertiary",size:"small",icon:t.jsx(C,{"aria-hidden":!0}),onClick:()=>n(e),children:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{TidligereUtenlandsoppholdPeriode.displayName="TidligereUtenlandsoppholdPeriode",TidligereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const M={fom:"",tom:"",landkode:""},oe={utenlandsoppholdSiste12Mnd:[M]},E=()=>{const{i18n:e}=N(),n=K(),o=W(),l=Y(L(U.UTENLANDSOPPHOLD)),d=L(U.UTENLANDSOPPHOLD_TIDLIGERE),r=J(U.UTENLANDSOPPHOLD_TIDLIGERE),g=h.useMemo(()=>d||oe,[]),i=$({defaultValues:g}),{fields:p,append:m,remove:u}=G({name:"utenlandsoppholdSiste12Mnd",control:i.control}),D=h.useCallback(()=>{m(M)},[m]),S=h.useCallback(c=>{u(c)},[u]),s=h.useCallback(c=>{r(c),o.goToNextStep(l.skalBoUtenforNorgeNeste12Mnd?F.SENERE_UTENLANDSOPPHOLD:F.OPPSUMMERING)},[]);return t.jsx(V,{bannerTitle:e("Søknad.Pageheading"),pageTitle:e("TidligereUtenlandsoppholdSteg.Tidligere"),onCancel:o.avbrytSøknad,steps:n.stepConfig,activeStepId:n.activeStepId,useNoTempSavingText:!0,children:t.jsx(q,{formMethods:i,onSubmit:s,children:t.jsxs(v,{gap:"10",children:[t.jsx(w,{}),t.jsxs(v,{gap:"10",align:"start",children:[p.map((c,b)=>t.jsxs(h.Fragment,{children:[t.jsx(te,{index:b,fjernOpphold:S}),p.length>1&&t.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},c.id)),t.jsx(k,{type:"button",variant:"secondary",size:"small",icon:t.jsx(A,{"aria-hidden":!0}),onClick:D,children:t.jsx(T,{id:"TidligereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),t.jsx(z,{goToPreviousStep:o.goToPreviousDefaultStep,saveDataOnPreviousClick:r})]})})})},ge=E;try{E.displayName="TidligereUtenlandsoppholdSteg",E.__docgenInfo={description:"",displayName:"TidligereUtenlandsoppholdSteg",props:{}}}catch{}export{ge as T};
//# sourceMappingURL=TidligereUtenlandsoppholdSteg-a9f305b6.js.map
