import{r as n}from"./index-7c191284.js";import{l as I}from"./amplitude-a97f1527.js";import{j as m}from"./jsx-runtime-69eee039.js";import{P as o,u as U,b as f,c as h,d as k}from"./paths-6fc4bb0b.js";import{g as E,s as x,t as v,v as B,D as H,w as C,u as F}from"./IntlProvider-4e33f46c.js";E.extend(x);E.extend(v);const b=e=>{if(e==null)throw Error("Data er ikke oppgitt");return e},ee=(e,s,t)=>E(e).isBetween(s,t,"day","[]"),y=e=>e==null||e.toString().trim().length===0,te=e=>({isRequired:t=>a=>y(a)?e.formatMessage({id:t}):null});E.extend(B);const K=E().add(18,"week").add(3,"day").startOf("day").toDate(),j=E().startOf("day").subtract(21,"days"),w=E().add(1,"year").startOf("day").toDate(),G=/(19|20)\d{2}-(0?[1-9]|1[0-2])-(0?[1-9]|1\d|2\d|3[01])$/,se=e=>({isValidDate:r=>i=>y(i)||G.test(i)?null:e.formatMessage({id:r}),isBeforeTodayOrToday:r=>i=>E(i).isAfter(H)?e.formatMessage({id:r}):null,isAfterOrSameAsSixMonthsAgo:r=>i=>E(i).isBefore(C)?e.formatMessage({id:r}):null,isDatesNotTheSame:(r,i)=>u=>i&&u&&E(i).isSame(u)?e.formatMessage({id:r}):null,isLessThanThreeWeeksAgo:r=>i=>E(i).isBefore(j)?e.formatMessage({id:r}):null,erI22SvangerskapsukeEllerSenere:r=>i=>E(i).isAfter(K)?e.formatMessage({id:r}):null,isMaxOneYearIntoTheFuture:r=>i=>E(i).isAfter(w)?e.formatMessage({id:r}):null});var S=(e=>(e.SØKERSITUASJON="SØKERSITUASJON",e.OM_BARNET="OM_BARNET",e.DOKUMENTASJON="DOKUMENTASJON",e.UTENLANDSOPPHOLD="UTENLANDSOPPHOLD",e.UTENLANDSOPPHOLD_SENERE="UTENLANDSOPPHOLD_SENERE",e.UTENLANDSOPPHOLD_TIDLIGERE="UTENLANDSOPPHOLD_TIDLIGERE",e))(S||{});const M={},T=n.createContext(M),_=n.createContext(void 0),g=({children:e,initialState:s,testDispatcher:t})=>{const[a,d]=n.useReducer((l,p)=>{switch(p.type){case"update":return{...l,[p.key]:p.data};case"reset":return{};default:throw new Error}},s||M),c=n.useCallback(l=>{t&&t(l),d(l)},[]);return m.jsx(T.Provider,{value:a,children:m.jsx(_.Provider,{value:c,children:e})})},L=e=>{const s=n.useContext(_);return n.useCallback(t=>{s&&s({type:"update",key:e,data:t})},[])},P=()=>{const e=n.useContext(_);return n.useCallback((s,t)=>{e&&e({type:"update",key:s,data:t})},[])},D=()=>{const e=n.useContext(_);return n.useCallback(()=>{e&&e({type:"reset"})},[])},R=e=>n.useContext(T)[e],A=()=>{const e=n.useContext(T);return n.useCallback(s=>e[s],[])};try{g.displayName="EsDataContext",g.__docgenInfo={description:"",displayName:"EsDataContext",props:{initialState:{defaultValue:null,description:"",name:"initialState",required:!1,type:{name:"EsDataMap"}},testDispatcher:{defaultValue:null,description:"",name:"testDispatcher",required:!1,type:{name:"((action: Action) => void)"}}}}}catch{}try{L.displayName="useEsStateSaveFn",L.__docgenInfo={description:"Hook returns save function for one specific data type",displayName:"useEsStateSaveFn",props:{}}}catch{}try{P.displayName="useAllStateSaveFn",P.__docgenInfo={description:"Hook returns save function usable with all data types",displayName:"useAllStateSaveFn",props:{}}}catch{}try{D.displayName="useEsStateResetFn",D.__docgenInfo={description:"Hook returns state reset function",displayName:"useEsStateResetFn",props:{}}}catch{}try{R.displayName="useEsStateData",R.__docgenInfo={description:"Hook returns data for one specific data type",displayName:"useEsStateData",props:{}}}catch{}try{A.displayName="useEsStateAllDataFn",A.__docgenInfo={description:"Hook returns function capable of getting all types of data from context state",displayName:"useEsStateAllDataFn",props:{}}}catch{}const V={[o.SØKERSITUASJON]:"SøkersituasjonSteg.Søkersituasjon",[o.OM_BARNET]:"OmBarnetSteg.OmBarnet",[o.TERMINBEKREFTELSE]:"søknad.termin",[o.ADOPSJONSBEKREFTELSE]:"søknad.adopsjon",[o.UTENLANDSOPPHOLD]:"UtenlandsoppholdSteg.Utenlandsopphold",[o.TIDLIGERE_UTENLANDSOPPHOLD]:"TidligereUtenlandsoppholdSteg.Tidligere",[o.SENERE_UTENLANDSOPPHOLD]:"SenereUtenlandsoppholdSteg.Fremtidig",[o.OPPSUMMERING]:"søknad.oppsummering"},J=(e,s)=>f.indexOf(s)>f.indexOf(e),N=(e,s,t,a,d)=>e&&J(t,a)||!!d(s),Y=(e,s,t)=>{if(e===o.TIDLIGERE_UTENLANDSOPPHOLD){const a=t(S.UTENLANDSOPPHOLD),d=!!(a!=null&&a.harBoddUtenforNorgeSiste12Mnd);return N(d,S.UTENLANDSOPPHOLD_TIDLIGERE,o.UTENLANDSOPPHOLD,s,t)}if(e===o.SENERE_UTENLANDSOPPHOLD){const a=t(S.UTENLANDSOPPHOLD),d=!!(a!=null&&a.skalBoUtenforNorgeNeste12Mnd);return N(d,S.UTENLANDSOPPHOLD_SENERE,o.UTENLANDSOPPHOLD,s,t)}return!1},q=(e,s,t)=>{const a=t(S.OM_BARNET);return e===o.TERMINBEKREFTELSE&&a&&"erBarnetFødt"in a?N(!a.erBarnetFødt,S.DOKUMENTASJON,o.OM_BARNET,s,t):e===o.ADOPSJONSBEKREFTELSE&&a&&"adopsjonAvEktefellesBarn"in a?N(!0,S.DOKUMENTASJON,o.OM_BARNET,s,t):!1},W=()=>{const e=F(),s=U(),t=A(),a=n.useMemo(()=>b(Object.values(o).find(c=>c===decodeURIComponent(s.pathname))),[]),d=n.useMemo(()=>f.flatMap(c=>h.includes(c)||Y(c,a,t)||q(c,a,t)?[c]:[]),[]);return n.useMemo(()=>({activeStepId:a,stepConfig:d.map((c,l)=>({id:c,label:e.formatMessage({id:V[c]}),index:l}))}),[])},ae=()=>{const e=k(),{activeStepId:s,stepConfig:t}=W(),a=D();n.useEffect(()=>{I("sidevisning",{app:"engangsstonadny",team:"foreldrepenger",pageKey:s})},[]);const d=n.useCallback(()=>{var u;const r=t.findIndex(O=>O.id===s)-1,i=((u=t[r])==null?void 0:u.id)||o.VELKOMMEN;e(i)},[e,t,s]),c=n.useCallback(r=>{e(r)},[e]),l=n.useCallback(()=>{var u;const r=t.findIndex(O=>O.id===s)+1,i=((u=t[r])==null?void 0:u.id)||o.KVITTERING;e(i)},[e,t,s]),p=n.useCallback(()=>{a(),e(o.VELKOMMEN)},[]);return n.useMemo(()=>({goToPreviousDefaultStep:d,goToNextStep:c,goToNextDefaultStep:l,avbrytSøknad:p}),[d,l,c])};export{S as E,W as a,R as b,L as c,g as d,se as e,te as g,ee as i,b as n,ae as u};
//# sourceMappingURL=useEsNavigator-418925c5.js.map
