import{j as t}from"./jsx-runtime-69eee039.js";import{r as c}from"./index-7c191284.js";import{g as a,r as h,t as D,V as x,F as u,c as L,T as C,v as E,s as I,e as M,P as R}from"./IntlProvider-b1910645.js";import{a as V,b as A,D as y,u as B,c as $,F as H,E as q,S as w}from"./ErrorSummaryHookForm-c68e3e28.js";import{i as z,c as G}from"./dateUtils-92ad7896.js";import{i as T,f as F,a as K,u as W,b as Y,E as N,c as J}from"./useEsNavigator-ab39ef68.js";import{f as k}from"./dateUtils-60b1ece6.js";import{u as P}from"./useCustomI18n-46d968c1.js";const O=(e,s,o,r,l)=>s===void 0?e(l?"Valideringsfeil.FraOgMedDato.GyldigDato":"Valideringsfeil.TilOgMedDato.GyldigDato"):z(s,o,r)?null:e("Valideringsfeil.DateOutsideRange",{fom:k(o),tom:k(r)}),Q=(e,s,o,r,l)=>{const d=O(e,s,o,r,!0);if(d!==void 0)return d;if(l&&a(s).isAfter(l,"day"))return e("Valideringsfeil.Utenlandsopphold.FørTilDato")},X=(e,s,o,r,l)=>{const d=O(e,s,o,r,!1);if(d!==void 0)return d;if(l&&a(s).isBefore(l,"day"))return e("Valideringsfeil.Utenlandsopphold.EtterFraDato")},_=(e,s,o,r)=>{const d=s.map(i=>({from:a(i.fom).toDate(),to:i.tom?a(i.tom).toDate():E})).concat({from:a(o).toDate(),to:r?a(r).toDate():E});return I(d)?e("SenereUtenlandsoppholdSteg.Valideringsfeil.Utenlandsopphold.Overlapp"):null},Z=({index:e,fjernOpphold:s})=>{const{i18n:o}=P(),{watch:r,trigger:l,formState:{isSubmitted:d}}=V(),i=r("utenlandsoppholdNeste12Mnd").filter((n,S)=>S!==e),m=r(`utenlandsoppholdNeste12Mnd.${e}.fom`),p=r(`utenlandsoppholdNeste12Mnd.${e}.tom`),g=a(h).toDate(),f=p?a(p).toDate():a(D).toDate(),U=a(m||h).toDate(),v=a(D).toDate();return t.jsxs(x,{gap:"5",align:"start",children:[t.jsx(A,{name:`utenlandsoppholdNeste12Mnd.${e}.landkode`,label:t.jsx(u,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Spørsmål.HvilketLandSkalDuBoI"}),validate:[T(o("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandDuSkalBoIPåkreved"))],children:G().map(n=>t.jsx("option",{value:n[0],children:n[1]},n[0]))}),t.jsx(y,{name:`utenlandsoppholdNeste12Mnd.${e}.fom`,label:t.jsx(u,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Fraogmed"}),minDate:a(h).toDate(),maxDate:p?a(p).toDate():a(D).toDate(),validate:[T(o("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandFomDuSkalBoIPåkreved")),F(o("SenereUtenlandsoppholdSteg.FomErLikTom"),p),n=>Q(o,a(n).toDate(),g,f,a(p).toDate()),n=>_(o,i,n,p)],onChange:()=>d&&l()}),t.jsx(y,{name:`utenlandsoppholdNeste12Mnd.${e}.tom`,label:t.jsx(u,{id:"SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.Tilogmed"}),minDate:U,maxDate:v,validate:[T(o("SenereUtenlandsoppholdSteg.LeggTilUtenlandsopphold.LandTomDuSkalBoIPåkreved")),F(o("SenereUtenlandsoppholdSteg.TomErLikFom"),m),n=>X(o,a(n||E).toDate(),a(m||h).toDate(),a(D).toDate(),a(m).toDate()),n=>_(o,i,m,n)],onChange:()=>d&&l()}),e>0&&t.jsx(L,{type:"button",variant:"tertiary",size:"small",icon:t.jsx(C,{"aria-hidden":!0}),onClick:()=>s(e),children:t.jsx(u,{id:"SenereUtenlandsoppholdSteg.Knapp.SlettOpphold"})})]})};try{SenereUtenlandsoppholdPeriode.displayName="SenereUtenlandsoppholdPeriode",SenereUtenlandsoppholdPeriode.__docgenInfo={description:"",displayName:"SenereUtenlandsoppholdPeriode",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const b={fom:"",tom:"",landkode:""},ee={utenlandsoppholdNeste12Mnd:[b]},j=()=>{const{i18n:e}=P(),s=K(),o=W(),r=Y(N.UTENLANDSOPPHOLD_SENERE),l=J(N.UTENLANDSOPPHOLD_SENERE),d=c.useMemo(()=>r||ee,[]),i=B({defaultValues:d}),{fields:m,append:p,remove:g}=$({name:"utenlandsoppholdNeste12Mnd",control:i.control}),f=c.useCallback(()=>{p(b)},[p]),U=c.useCallback(n=>{g(n)},[g]),v=c.useCallback(n=>{l(n),o.goToNextDefaultStep()},[]);return t.jsx(M,{bannerTitle:e("Søknad.Pageheading"),pageTitle:e("SenereUtenlandsoppholdSteg.Fremtidig"),onCancel:o.avbrytSøknad,steps:s.stepConfig,activeStepId:s.activeStepId,useNoTempSavingText:!0,children:t.jsx(H,{formMethods:i,onSubmit:v,children:t.jsxs(x,{gap:"10",children:[t.jsx(q,{}),t.jsxs(x,{gap:"10",align:"start",children:[m.map((n,S)=>t.jsxs(c.Fragment,{children:[t.jsx(Z,{index:S,fjernOpphold:U}),m.length>1&&t.jsx("hr",{style:{width:"100%"},color:"#99C4DD"})]},n.id)),t.jsx(L,{type:"button",variant:"secondary",size:"small",icon:t.jsx(R,{"aria-hidden":!0}),onClick:f,children:t.jsx(u,{id:"SenereUtenlandsoppholdSteg.Knapp.LeggTilLand"})})]}),t.jsx(w,{goToPreviousStep:o.goToPreviousDefaultStep,saveDataOnPreviousClick:l})]})})})},pe=j;try{j.displayName="SenereUtenlandsoppholdSteg",j.__docgenInfo={description:"",displayName:"SenereUtenlandsoppholdSteg",props:{}}}catch{}export{pe as S};
//# sourceMappingURL=SenereUtenlandsoppholdSteg-300563a4.js.map
