var de=Object.defineProperty;var pe=(e,s,r)=>s in e?de(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r;var I=(e,s,r)=>pe(e,typeof s!="symbol"?s+"":s,r);import{a4 as ge,j as t,a5 as ue,a6 as me,u as fe,a7 as Ee,a8 as Se,a9 as ke,d as he,aa as Ne,ab as ve,i as be}from"./dateFormValidation-Cbu5YQSB.js";import{d as xe,R as je,e as ne,f as Re,g as Ae,C as k,h as Ie,n as te,i as Te,j as E,N as we,P as f,E as ye}from"./useEsNavigator-dgVk1PI3.js";import{A as R,E as j,D as P,M as _e}from"./DokumentasjonSteg-DL97GoT4.js";import{r as g,a as Me}from"./index-CTjT7uj6.js";import"./index-CYM-y3Gt.js";import{a as Ce}from"./apiInterceptor-CrVXazgP.js";import{b as Oe,u as T,a as w,o as y,e as Ue,n as De}from"./nn_NO-DweTONi9.js";import{e as Pe,O as Le}from"./OppsummeringSteg-DG-Ch9yK.js";import{e as Fe,b as Ke,a as He}from"./OmBarnet-BV6De4cI.js";import{O as Ve}from"./OmBarnetSteg-Cb2BCyHa.js";import{S as Be}from"./SøkersituasjonSteg-KKLBqmtF.js";import{S as Ge}from"./SenereUtenlandsoppholdSteg-CmfKUrzH.js";import{T as Je}from"./TidligereUtenlandsoppholdSteg-GObgizPf.js";import{U as $e}from"./UtenlandsoppholdSteg-BRHdztkP.js";import{V as qe}from"./Velkommen-DmSShodJ.js";import"./index-BRV0Se7Z.js";import"./ErrorSummaryHookForm-PcEcOEo7.js";import"./BoIUtlandetOppsummering-YbYinP28.js";import"./ConfirmationPanel-B4hWLAUY.js";import"./TidligereUtenlandsoppholdPanel-CG8i3J16.js";/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ye="6";try{window.__reactRouterVersion=Ye}catch{}const ze="startTransition",L=Me[ze];function Qe(e){let{basename:s,children:r,future:n,window:u}=e,d=g.useRef();d.current==null&&(d.current=xe({window:u,v5Compat:!0}));let i=d.current,[o,l]=g.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},m=g.useCallback(a=>{c&&L?L(()=>l(a)):l(a)},[l,c]);return g.useLayoutEffect(()=>i.listen(m),[i,m]),g.createElement(je,{basename:s,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}var F;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(F||(F={}));var K;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(K||(K={}));const{Axios:Pn,AxiosError:Ln,CanceledError:Fn,isCancel:Kn,CancelToken:Hn,VERSION:Vn,all:Bn,Cancel:Gn,isAxiosError:We,spread:Jn,toFormData:$n,AxiosHeaders:qn,HttpStatusCode:Yn,formToJSON:zn,getAdapter:Qn,mergeConfig:Wn}=Ce;class S extends Error{constructor(r,n,u){super(r);I(this,"callId");I(this,"timestamp");this.callId=n,this.timestamp=u}}class A extends Error{constructor(){super("API_ACCESS_ERROR")}}const Xe=e=>e instanceof A||e instanceof S,se=e=>!!(e&&typeof e=="object"&&"isAxiosError"in e),H=(e,s)=>{const[r,n]=g.useState(),[u,d]=g.useState(!1),[i,o]=g.useState();return g.useEffect(()=>{let l=!1;return(async()=>{var m,a;try{d(!0);const p=await e.get(s,{withCredentials:!0,timeout:60*1e3});l||n(p.data)}catch(p){We(p)?((m=p.response)==null?void 0:m.status)===401||((a=p.response)==null?void 0:a.status)===403?o(new A):o(new S(p.message)):p instanceof Error?o(new S(p.message)):o(new S(String(p)))}finally{d(!1)}})(),()=>{l=!0}},[e,s]),{data:r,loading:u,error:i}},V="ukjent uuid",re=async(e,s,r,n,u=!1,d)=>{var i,o,l,c,m,a;try{return(await e.post(s,r,{withCredentials:!0,timeout:6e4,signal:d,headers:u?{"content-type":"application/json;"}:{}})).data}catch(p){if(se(p)&&p.code!=="ERR_CANCELED"){if(((i=p.response)==null?void 0:i.status)===401||((o=p.response)==null?void 0:o.status)===403)throw new A;const h=(c=(l=p.response)==null?void 0:l.data)!=null&&c.uuid?p.response.data.uuid:V,N=h!==V?h.slice(0,8):h;throw new S(n+N,h,(a=(m=p.response)==null?void 0:m.data)==null?void 0:a.timestamp)}throw p instanceof Error?new S(p.message):new S(String(p))}},B="ukjent uuid",O=async(e,s,r,n,u)=>{var d,i,o,l;try{return(await e.delete(s,{withCredentials:!0,timeout:6e4,signal:u,data:n})).data}catch(c){if(se(c)&&c.code!=="ERR_CANCELED"){if(((d=c.response)==null?void 0:d.status)===401||((i=c.response)==null?void 0:i.status)===403)throw new A;const m=(l=(o=c.response)==null?void 0:o.data)!=null&&l.uuid?c.response.data.uuid:B,a=m!==B?m.slice(0,8):m;throw new S(r+a)}throw c instanceof Error?new S(c.message):new S(String(c))}},Ze="From {fom} until {tom}",en={tidsperiode:Ze,"tidsperiode.kort":"{fom} - {tom}"},nn="Fra {fom} til {tom}",tn={tidsperiode:nn,"tidsperiode.kort":"{fom} - {tom}"},sn="Frå {fom} til {tom}",rn={tidsperiode:sn,"tidsperiode.kort":"{fom} - {tom}"},an=e=>{window.location.href=e},ae="selectedLocale",on=()=>sessionStorage.getItem(ae)||"nb",ln=e=>{sessionStorage.setItem(ae,e)},_={nb:tn,nn:rn,en},oe=2,G="Det har oppstått et problem med mellomlagring av søknaden. Vennligst prøv igjen senere. Hvis problemet vedvarer, kontakt oss og oppgi feil id: ",cn=(e,s,r)=>{const n=ne(),u=Re(),d=Ae(),[i,o]=g.useState(!1),l=g.useRef();return g.useEffect(()=>{i&&(async()=>{o(!1);const a=u[k.CURRENT_PATH];a?(n(a),await re(e,"/rest/storage/engangsstonad",{version:oe,locale:s,...u},G)):(await O(e,"/rest/storage/engangsstonad",G),r(!1),d(),n("/")),l.current&&l.current()})().catch(a=>{ge(a.message),l.current&&l.current()})},[i]),g.useCallback(()=>(o(!0),new Promise(a=>{l.current=a})),[])},dn=(e,s)=>{const r=(s==null?void 0:s.vedlegg.map(n=>n.id))||[];if(Fe(e))return{type:"adopsjon",antallBarn:e.antallBarn,fødselsdatoer:e.fødselsdatoer.map(n=>n.dato),adopsjonsdato:e.adopsjonsdato,adopsjonAvEktefellesBarn:e.adopsjonAvEktefellesBarn,vedleggreferanser:r};if(Ke(e))return{type:"fødsel",antallBarn:e.antallBarn,fødselsdato:e.fødselsdato,vedleggreferanser:[]};if(He(e)&&s&&Pe(s))return{type:"termin",antallBarn:e.antallBarn,termindato:e.termindato,terminbekreftelseDato:s.terminbekreftelsedato,vedleggreferanser:r};throw Error("Det er feil i data om barnet")},J="Det har oppstått et problem med innsending av søknaden. Vennligst prøv igjen senere. Hvis problemet vedvarer, kontakt oss og oppgi feil id: ",pn=(e,s,r)=>{const n=Ie(),[u,d]=g.useState(),i=g.useCallback(async o=>{const l=te(n(k.OM_BARNET)),c=n(k.DOKUMENTASJON),m=n(k.UTENLANDSOPPHOLD_TIDLIGERE),a=n(k.UTENLANDSOPPHOLD_SENERE),p={type:"engangsstønad",språkkode:s,barn:dn(l,c),utenlandsopphold:(m??[]).concat(a??[]),vedlegg:(c==null?void 0:c.vedlegg.map(N=>({...N,dokumenterer:{type:"barn"}})))||[]};let h;try{h=await re(e,"/rest/soknad/engangsstonad",p,J,!0,o)}catch(N){if(Xe(N))d(N);else throw new Error("This should never happen")}if(h){try{await O(e,"/rest/storage/engangsstonad",J,o)}catch{}r(h)}},[n,s,r,e]);return g.useMemo(()=>({sendSøknad:i,errorSendSøknad:u}),[i,u])},M=R(),U=()=>t.jsx("div",{style:{textAlign:"center",padding:"12rem 0"},children:t.jsx(ue,{size:"2xlarge"})}),D=({error:e})=>t.jsx(me,{appName:"Engangsstønad",errorMessage:e.message,retryCallback:()=>location.reload()}),ie=({locale:e,onChangeLocale:s,søker:r,mellomlagretData:n})=>{const u=ne(),[d,i]=g.useState(!1),[o,l]=g.useState(),{sendSøknad:c,errorSendSøknad:m}=pn(R(),e,l),a=cn(R(),e,i);return g.useEffect(()=>{n!=null&&n[k.CURRENT_PATH]&&(i(!0),n.locale&&s(n.locale),u(n[k.CURRENT_PATH]))},[n]),o?j.INNSYN?(an(o.saksNr?`${j.INNSYN}/sak/${o.saksNr}/redirectFromSoknad`:`${j.INNSYN}/redirectFromSoknad`),t.jsx(U,{})):t.jsx("div",{children:"Redirected to Innsyn"}):m?t.jsx(D,{error:m}):t.jsxs(Te,{children:[!d&&t.jsx(E,{path:"*",element:t.jsx(we,{to:f.VELKOMMEN})}),t.jsx(E,{path:f.VELKOMMEN,element:t.jsx(qe,{locale:e,onChangeLocale:s,startSøknad:i,erVelkommen:d,mellomlagreOgNaviger:a})}),d&&t.jsxs(t.Fragment,{children:[t.jsx(E,{path:f.SØKERSITUASJON,element:t.jsx(Be,{mellomlagreOgNaviger:a})}),t.jsx(E,{path:f.OM_BARNET,element:t.jsx(Ve,{kjønn:r.kjønn,mellomlagreOgNaviger:a})}),t.jsx(E,{path:f.TERMINBEKREFTELSE,element:t.jsx(P,{mellomlagreOgNaviger:a})}),t.jsx(E,{path:f.ADOPSJONSBEKREFTELSE,element:t.jsx(P,{mellomlagreOgNaviger:a})}),t.jsx(E,{path:f.UTENLANDSOPPHOLD,element:t.jsx($e,{mellomlagreOgNaviger:a})}),t.jsx(E,{path:f.TIDLIGERE_UTENLANDSOPPHOLD,element:t.jsx(Je,{mellomlagreOgNaviger:a})}),t.jsx(E,{path:f.SENERE_UTENLANDSOPPHOLD,element:t.jsx(Ge,{mellomlagreOgNaviger:a})}),t.jsx(E,{path:f.OPPSUMMERING,element:t.jsx(Le,{sendSøknad:c,mellomlagreOgNaviger:a})})]})]})};U.__docgenInfo={description:"",methods:[],displayName:"Spinner"};D.__docgenInfo={description:"",methods:[],displayName:"ApiErrorHandler"};ie.__docgenInfo={description:"",methods:[],displayName:"EngangsstønadRoutes"};const le=({locale:e,onChangeLocale:s})=>{const r=fe();Ee(r.formatMessage({id:"Søknad.Pagetitle"}));const{data:n,error:u}=H(M,"/rest/personinfo"),{data:d,loading:i,error:o}=H(M,"/rest/storage/engangsstonad");if(u||o)return t.jsx(D,{error:te(u||o)});if(!n||i)return t.jsx(U,{});if(!Se(n.fødselsdato))return t.jsx(ke,{appnavn:"Engangsstønad"});const l=(d==null?void 0:d.version)===oe?d:void 0;return t.jsx(ye,{initialState:l,children:t.jsx(ie,{locale:e,onChangeLocale:s,søker:n,mellomlagretData:l})})};le.__docgenInfo={description:"",methods:[],displayName:"Engangsstønad"};const gn={...De,...T.nb,...w.nb,...y.nb,..._.nb},ce=on(),un={nb:gn,nn:{...Oe,...T.nn,...w.nn,...y.nn,..._.nn},en:{...Ue,...T.en,...w.en,...y.en,..._.en}};he.locale(ce);const mn=async()=>{try{await O(M,"/rest/engangsstonad","Feil ved sletting av mellomlagret data")}catch{}location.reload()},C=()=>{const[e,s]=g.useState(ce),r=g.useCallback(n=>{ln(n),s(n),document.documentElement.setAttribute("lang",n)},[]);return t.jsx(Ne,{locale:e,messagesGroupedByLocale:un,children:t.jsx(ve,{appName:"Engangsstønad",retryCallback:mn,children:t.jsx(Qe,{basename:j.PUBLIC_PATH,children:t.jsx(le,{locale:e,onChangeLocale:r})})})})};C.__docgenInfo={description:"",methods:[],displayName:"AppContainer"};const fn={mottattDato:"2019-02-19T13:40:45.115",referanseId:"3959c880-83d2-4f01-b107-035fa7693758",leveranseStatus:"PÅ_VENT",journalId:"439772941"},Xn={title:"Applikasjon - Engangsstønad (AppContainer)",component:C,render:({søker:e,mellomlagretData:s,doLogging:r=!0})=>{be();const n=new _e(R());return n.onGet("/rest/personinfo").reply(()=>(r&&console.log("network request: get /personinfo"),[200,e])),n.onGet("/rest/storage/engangsstonad").reply(()=>(r&&console.log("network request: get /storage/engangstonad"),[200,s])),n.onPost("/rest/soknad/engangsstonad").reply(()=>(r&&console.log("network request: post /soknad/engangsstonad"),[200,fn])),n.onPost("/rest/storage/engangsstonad").reply(()=>(r&&console.log("network request: post /storage/engangstonad"),[200])),n.onDelete("/rest/storage/engangsstonad").reply(()=>(r&&console.log("network request: delete /storage/engangstonad"),[200])),n.onPost("/rest/storage/engangsstonad/vedlegg").reply(200),n.onPost("/rest/storage/engangsstonad/vedlegg").reply(200),t.jsx(C,{})}},v={args:{søker:{fnr:"11111111111",fornavn:"Henrikke",etternavn:"Ibsen",kjønn:"K",fødselsdato:"1979-01-28",bankkonto:{kontonummer:"49875234987",banknavn:"Storebank"},barn:[]}}},b={args:{mellomlagretData:{version:1,locale:"nb",[k.SØKERSITUASJON]:{situasjon:"fødsel"},[k.CURRENT_PATH]:f.SØKERSITUASJON},søker:{fnr:"11111111111",fornavn:"Henrikke",etternavn:"Ibsen",kjønn:"K",fødselsdato:"1979-01-28",bankkonto:{kontonummer:"49875234987",banknavn:"Storebank"},barn:[]}}},x={args:{søker:{fnr:"1231111111",fornavn:"Espen",etternavn:"Utvikler",kjønn:"M",fødselsdato:"1979-01-28",bankkonto:{kontonummer:"49875234987",banknavn:"Storebank"},barn:[]}}};var $,q,Y;v.parameters={...v.parameters,docs:{...($=v.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    søker: {
      fnr: '11111111111',
      fornavn: 'Henrikke',
      etternavn: 'Ibsen',
      kjønn: 'K',
      fødselsdato: '1979-01-28',
      bankkonto: {
        kontonummer: '49875234987',
        banknavn: 'Storebank'
      },
      barn: []
    }
  }
}`,...(Y=(q=v.parameters)==null?void 0:q.docs)==null?void 0:Y.source}}};var z,Q,W;b.parameters={...b.parameters,docs:{...(z=b.parameters)==null?void 0:z.docs,source:{originalSource:`{
  args: {
    mellomlagretData: {
      version: 1,
      locale: 'nb',
      [ContextDataType.SØKERSITUASJON]: {
        situasjon: 'fødsel'
      },
      [ContextDataType.CURRENT_PATH]: Path.SØKERSITUASJON
    },
    søker: {
      fnr: '11111111111',
      fornavn: 'Henrikke',
      etternavn: 'Ibsen',
      kjønn: 'K',
      fødselsdato: '1979-01-28',
      bankkonto: {
        kontonummer: '49875234987',
        banknavn: 'Storebank'
      },
      barn: []
    }
  }
}`,...(W=(Q=b.parameters)==null?void 0:Q.docs)==null?void 0:W.source}}};var X,Z,ee;x.parameters={...x.parameters,docs:{...(X=x.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    søker: {
      fnr: '1231111111',
      fornavn: 'Espen',
      etternavn: 'Utvikler',
      kjønn: 'M',
      fødselsdato: '1979-01-28',
      bankkonto: {
        kontonummer: '49875234987',
        banknavn: 'Storebank'
      },
      barn: []
    }
  }
}`,...(ee=(Z=x.parameters)==null?void 0:Z.docs)==null?void 0:ee.source}}};const Zn=["SøkerErKvinne","SøkerErKvinneMedMellomlagretData","SøkerErMann"];export{v as SøkerErKvinne,b as SøkerErKvinneMedMellomlagretData,x as SøkerErMann,Zn as __namedExportsOrder,Xn as default};
