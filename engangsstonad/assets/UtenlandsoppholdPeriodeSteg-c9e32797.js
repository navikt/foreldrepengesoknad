import{j as e}from"./jsx-runtime-69eee039.js";import{r as U}from"./index-7c191284.js";import{u as N,g as o,n as E,o as P,V as F,b as C,T as A,F as s,c as $,p as H,q as M,R as S,r as B,s as T,t as w,e as z,P as J}from"./IntlProvider-323f7bb7.js";import{a as Y,b as G,R as k,D as R,u as K,c as Q,F as W,E as X,S as Z}from"./ErrorSummaryHookForm-6083ef49.js";import{c as ee}from"./countryUtils-ac55b9bd.js";import{i as f,v as b,a as ae,u as oe,b as te,E as O,c as re}from"./useEsNavigator-7d967be7.js";import{v as se,a as ne}from"./valideringsregler-beb70bac.js";const I=(a,m,r,n)=>{const u=m.map(d=>({from:o(d.fom).toDate(),to:d.tom?o(d.tom).toDate():T})).concat({from:o(r).toDate(),to:n?o(n).toDate():T});return w(u)?a.formatMessage({id:"UtenlandsoppholdPeriodePanel.Valideringsfeil.Utenlandsopphold.Overlapp"}):null},y=({index:a,fjernOpphold:m})=>{const r=N(),{watch:n,trigger:c,setValue:u,resetField:d,formState:{isSubmitted:D}}=Y(),g=n("perioder").filter((t,h)=>h!==a),j=n(`perioder.${a}.harFlyttetUtForMerEnn12MånderSiden`),x=n(`perioder.${a}.skalBoIUtlandetMerEnEttÅrFremover`),p=n(`perioder.${a}.fom`),l=n(`perioder.${a}.tom`),i=o(E).toDate(),v=l?o(l).toDate():o(P).toDate(),V=o(p||E).toDate(),q=o(P).toDate();return e.jsxs(e.Fragment,{children:[e.jsxs(F,{gap:"2",children:[e.jsx("hr",{style:{width:"100%"},color:"#99C4DD"}),e.jsxs(C,{justify:"space-between",children:[e.jsx(A,{variant:"info",children:e.jsx(s,{id:"UtenlandsoppholdPeriodePanel.OppholdIUtlandet"})}),a>0&&e.jsx($,{type:"button",variant:"tertiary",size:"small",icon:e.jsx(H,{"aria-hidden":!0}),onClick:()=>m(a),children:e.jsx(s,{id:"UtenlandsoppholdPeriodePanel.SlettOpphold"})})]})]}),e.jsxs(F,{gap:"10",align:"start",children:[e.jsx(G,{name:`perioder.${a}.landkode`,label:e.jsx(s,{id:"UtenlandsoppholdPeriodePanel.Land"}),validate:[f(r.formatMessage({id:"UtenlandsoppholdPeriodePanel.Validering.Land.Required"}))],children:ee().map(t=>e.jsx("option",{value:t[0],children:t[1]},t[0]))}),e.jsxs(k,{name:`perioder.${a}.harFlyttetUtForMerEnn12MånderSiden`,label:e.jsx(s,{id:"UtenlandsoppholdPeriodePanel.Historisk.Spørsmål"}),validate:[f(r.formatMessage({id:"UtenlandsoppholdPeriodePanel.Historisk.IsRequired"}))],onChange:t=>{if(t){const h=o(E).format(M);u(`perioder.${a}.fom`,h)}else t===!1&&d(`perioder.${a}.fom`)},children:[e.jsx(S,{value:!1,children:e.jsx(s,{id:"UtenlandsoppholdPeriodePanel.Nei"})}),e.jsx(S,{value:!0,children:e.jsx(s,{id:"UtenlandsoppholdPeriodePanel.Ja"})})]}),j===!1&&e.jsx(R,{name:`perioder.${a}.fom`,label:e.jsx(s,{id:"UtenlandsoppholdPeriodePanel.Fraogmed"}),minDate:i,maxDate:l?o(l).toDate():o(P).toDate(),validate:[f(r.formatMessage({id:"UtenlandsoppholdPeriodePanel.Validering.Fraogmed.Required"})),b(r.formatMessage({id:"valideringsfeil.fomErLikTom"}),l),t=>se(r,o(t).toDate(),i,v,o(l).toDate()),t=>I(r,g,t,l)],onChange:()=>D&&c()}),e.jsxs(k,{name:`perioder.${a}.skalBoIUtlandetMerEnEttÅrFremover`,label:e.jsx(s,{id:"UtenlandsoppholdPeriodePanel.Fremtidig.Spørsmål"}),validate:[f(r.formatMessage({id:"UtenlandsoppholdPeriodePanel.Fremtidig.IsRequired"}))],onChange:t=>{if(t){const h=o(P).format(M);u(`perioder.${a}.tom`,h)}else t===!1&&d(`perioder.${a}.tom`)},children:[e.jsx(S,{value:!1,children:e.jsx(s,{id:"UtenlandsoppholdPeriodePanel.Nei"})}),e.jsx(S,{value:!0,children:e.jsx(s,{id:"UtenlandsoppholdPeriodePanel.Ja"})})]}),x===!1&&e.jsx(R,{name:`perioder.${a}.tom`,label:e.jsx(s,{id:"UtenlandsoppholdPeriodePanel.Tilogmed"}),minDate:V,maxDate:q,validate:[f(r.formatMessage({id:"UtenlandsoppholdPeriodePanel.Validering.Tilogmed.Required"})),b(r.formatMessage({id:"valideringsfeil.tomErLikFom"}),p),t=>ne(r,o(t||T).toDate(),o(p||B).toDate(),o(P).toDate(),o(p).toDate()),t=>I(r,g,p,t)],onChange:()=>D&&c()})]})]})};try{y.displayName="UtenlandsoppholdPeriodePanel",y.__docgenInfo={description:"",displayName:"UtenlandsoppholdPeriodePanel",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},fjernOpphold:{defaultValue:null,description:"",name:"fjernOpphold",required:!0,type:{name:"(index: number) => void"}}}}}catch{}const L={fom:"",tom:"",landkode:""},de={perioder:[L]},_=()=>{const a=N(),m=ae(),r=oe(),n=te(O.UTENLANDSOPPHOLD_PERIODER),c=re(O.UTENLANDSOPPHOLD_PERIODER),u=U.useMemo(()=>n||de,[]),d=K({defaultValues:u}),{fields:D,append:g,remove:j}=Q({name:"perioder",control:d.control}),x=U.useCallback(()=>{g(L)},[g]),p=U.useCallback(i=>{j(i)},[j]),l=U.useCallback(i=>{c(i),r.goToNextDefaultStep()},[]);return e.jsx(z,{bannerTitle:a.formatMessage({id:"Søknad.Pageheading"}),pageTitle:a.formatMessage({id:"UtenlandsoppholdPeriodeSteg.Title"}),onCancel:r.avbrytSøknad,steps:m.stepConfig,activeStepId:m.activeStepId,useNoTempSavingText:!0,children:e.jsx(W,{formMethods:d,onSubmit:l,children:e.jsxs(F,{gap:"10",children:[e.jsx(X,{}),D.map((i,v)=>e.jsx(y,{index:v,fjernOpphold:p},i.id)),e.jsx(C,{children:e.jsx($,{type:"button",variant:"secondary",size:"small",icon:e.jsx(J,{"aria-hidden":!0}),onClick:x,children:e.jsx(s,{id:"utenlandsopphold.knapp.leggTilLand"})})}),e.jsx(Z,{goToPreviousStep:r.goToPreviousDefaultStep,saveDataOnPreviousClick:c})]})})})},ge=_;try{_.displayName="UtenlandsoppholdPeriodeSteg",_.__docgenInfo={description:"",displayName:"UtenlandsoppholdPeriodeSteg",props:{}}}catch{}export{ge as U};
//# sourceMappingURL=UtenlandsoppholdPeriodeSteg-c9e32797.js.map
