import{r as n}from"./index-7c191284.js";import{l as k}from"./amplitude-a97f1527.js";import{j as g}from"./jsx-runtime-69eee039.js";import{P as i,u as x,b as O,c as v,d as L}from"./paths-15c3400b.js";import{g as d,v as B,w as C,D,x as U,y as F,u as b}from"./IntlProvider-79b89341.js";d.extend(B);d.extend(C);const H=e=>{if(e==null)throw Error("Data er ikke oppgitt");return e},ee=e=>d(e).isAfter(D,"day"),te=e=>d(e).isBefore(D,"day"),se=(e,t,s)=>d(e).isBetween(t,s,"day","[]"),h=e=>e==null||e.toString().trim().length===0,ae=e=>({isRequired:s=>a=>h(a)?e.formatMessage({id:s}):null});d.extend(U);const K=d().add(18,"week").add(3,"day").startOf("day").toDate(),j=d().startOf("day").subtract(21,"days"),w=d().add(1,"year").startOf("day").toDate(),V=/(19|20)\d{2}-(0?[1-9]|1[0-2])-(0?[1-9]|1\d|2\d|3[01])$/,ne=e=>({isValidDate:o=>r=>h(r)||V.test(r)?null:e.formatMessage({id:o}),isBeforeTodayOrToday:o=>r=>d(r).isAfter(D)?e.formatMessage({id:o}):null,isAfterOrSameAsSixMonthsAgo:o=>r=>d(r).isBefore(F)?e.formatMessage({id:o}):null,isDatesNotTheSame:(o,r)=>p=>r&&p&&d(r).isSame(p)?e.formatMessage({id:o}):null,isLessThanThreeWeeksAgo:o=>r=>d(r).isBefore(j)?e.formatMessage({id:o}):null,erI22SvangerskapsukeEllerSenere:o=>r=>d(r).isAfter(K)?e.formatMessage({id:o}):null,isMaxOneYearIntoTheFuture:o=>r=>d(r).isAfter(w)?e.formatMessage({id:o}):null});var S=(e=>(e.SØKERSITUASJON="SØKERSITUASJON",e.OM_BARNET="OM_BARNET",e.DOKUMENTASJON="DOKUMENTASJON",e.UTENLANDSOPPHOLD="UTENLANDSOPPHOLD",e.UTENLANDSOPPHOLD_PERIODER="UTENLANDSOPPHOLD_PERIODER",e))(S||{});const I={},T=n.createContext(I),f=n.createContext(void 0),y=({children:e,initialState:t,testDispatcher:s})=>{const[a,u]=n.useReducer((l,E)=>{switch(E.type){case"update":return{...l,[E.key]:E.data};case"reset":return{};default:throw new Error}},t||I),c=n.useCallback(l=>{s&&s(l),u(l)},[]);return g.jsx(T.Provider,{value:a,children:g.jsx(f.Provider,{value:c,children:e})})},R=e=>{const t=n.useContext(f);return n.useCallback(s=>{t&&t({type:"update",key:e,data:s})},[])},P=()=>{const e=n.useContext(f);return n.useCallback((t,s)=>{e&&e({type:"update",key:t,data:s})},[])},N=()=>{const e=n.useContext(f);return n.useCallback(()=>{e&&e({type:"reset"})},[])},M=e=>n.useContext(T)[e],A=()=>{const e=n.useContext(T);return n.useCallback(t=>e[t],[])};try{y.displayName="EsDataContext",y.__docgenInfo={description:"",displayName:"EsDataContext",props:{initialState:{defaultValue:null,description:"",name:"initialState",required:!1,type:{name:"EsDataMap"}},testDispatcher:{defaultValue:null,description:"",name:"testDispatcher",required:!1,type:{name:"((action: Action) => void)"}}}}}catch{}try{R.displayName="useEsStateSaveFn",R.__docgenInfo={description:"Hook returns save function for one specific data type",displayName:"useEsStateSaveFn",props:{}}}catch{}try{P.displayName="useAllStateSaveFn",P.__docgenInfo={description:"Hook returns save function usable with all data types",displayName:"useAllStateSaveFn",props:{}}}catch{}try{N.displayName="useEsStateResetFn",N.__docgenInfo={description:"Hook returns state reset function",displayName:"useEsStateResetFn",props:{}}}catch{}try{M.displayName="useEsStateData",M.__docgenInfo={description:"Hook returns data for one specific data type",displayName:"useEsStateData",props:{}}}catch{}try{A.displayName="useEsStateAllDataFn",A.__docgenInfo={description:"Hook returns function capable of getting all types of data from context state",displayName:"useEsStateAllDataFn",props:{}}}catch{}const J={[i.SØKERSITUASJON]:"SøkersituasjonSteg.Søkersituasjon",[i.OM_BARNET]:"OmBarnetSteg.OmBarnet",[i.TERMINBEKREFTELSE]:"søknad.termin",[i.ADOPSJONSBEKREFTELSE]:"søknad.adopsjon",[i.UTENLANDSOPPHOLD]:"søknad.utenlandsopphold",[i.UTENLANDSOPPHOLD_PERIODER]:"søknad.utenlandsopphold.periode",[i.OPPSUMMERING]:"søknad.oppsummering"},G=(e,t)=>O.indexOf(t)>O.indexOf(e),m=(e,t,s,a,u)=>e&&G(s,a)||!!u(t),Y=(e,t,s)=>{if(e===i.UTENLANDSOPPHOLD_PERIODER){const a=s(S.UTENLANDSOPPHOLD),u=!(a!=null&&a.harKunBoddINorge);return m(u,S.UTENLANDSOPPHOLD_PERIODER,i.UTENLANDSOPPHOLD,t,s)}return!1},q=(e,t,s)=>{const a=s(S.OM_BARNET);return e===i.TERMINBEKREFTELSE&&a&&"erBarnetFødt"in a?m(!a.erBarnetFødt,S.DOKUMENTASJON,i.OM_BARNET,t,s):e===i.ADOPSJONSBEKREFTELSE&&a&&"adopsjonAvEktefellesBarn"in a?m(!0,S.DOKUMENTASJON,i.OM_BARNET,t,s):!1},W=()=>{const e=b(),t=x(),s=A(),a=n.useMemo(()=>H(Object.values(i).find(c=>c===decodeURIComponent(t.pathname))),[]),u=n.useMemo(()=>O.flatMap(c=>v.includes(c)||Y(c,a,s)||q(c,a,s)?[c]:[]),[]);return n.useMemo(()=>({activeStepId:a,stepConfig:u.map((c,l)=>({id:c,label:e.formatMessage({id:J[c]}),index:l}))}),[])},oe=()=>{const e=L(),{activeStepId:t,stepConfig:s}=W(),a=N();n.useEffect(()=>{k("sidevisning",{app:"engangsstonadny",team:"foreldrepenger",pageKey:t})},[]);const u=n.useCallback(()=>{var p;const o=s.findIndex(_=>_.id===t)-1,r=((p=s[o])==null?void 0:p.id)||i.VELKOMMEN;e(r)},[e,s,t]),c=n.useCallback(o=>{e(o)},[e]),l=n.useCallback(()=>{var p;const o=s.findIndex(_=>_.id===t)+1,r=((p=s[o])==null?void 0:p.id)||i.KVITTERING;e(r)},[e,s,t]),E=n.useCallback(()=>{a(),e(i.VELKOMMEN)},[]);return n.useMemo(()=>({goToPreviousDefaultStep:u,goToNextStep:c,goToNextDefaultStep:l,avbrytSøknad:E}),[u,l,c])};export{S as E,W as a,M as b,R as c,y as d,te as e,ee as f,ae as g,ne as h,se as i,H as n,oe as u};
//# sourceMappingURL=useEsNavigator-fe1453fa.js.map
