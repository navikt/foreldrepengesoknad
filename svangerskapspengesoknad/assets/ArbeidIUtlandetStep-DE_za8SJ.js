import{j as e}from"./tslib.es6-C_-gbNBy.js";import{g as L,h as C,j as B,i as l,T as G,k as V,l as H,D as I,b as h,c as J,e as M,R as K,a as A,o as D,n as x,u as w,F as P,E as $,S as z}from"./minMax-DNM2E0N-.js";import{u as j,V as E,a as S,K as q,B as T,N as Q,M as c,f as b,z as W,O as X,Q as Y,J as Z,R as ee,c as ae}from"./ByttBrowserModal-DkV6ZvDc.js";import"./index-CTjT7uj6.js";import"./FrilansPanel-DdODBdl-.js";import{f as te,e as re}from"./EgenNæring-BaE2fK_g.js";import{u as v,C as g,b as U,a as u}from"./routes-pb7fG1UE.js";import{u as ie,a as se,g as de,s as ne}from"./useSvpNavigator-Blu6zUZc.js";import{g as oe}from"./validationUtils-DSdP68ax.js";import{S as le}from"./Plus-C788Nq4q.js";const _={fom:"",tom:"",pågående:void 0,arbeidsgiverNavn:"",land:""},N=()=>{const n=Z("arbeidIUtlandet"),a=j(),r=L(),{fields:i,append:m,remove:s}=C({name:"arbeidIUtlandet",control:r.control}),o=r.watch("arbeidIUtlandet"),f=a.formatMessage({id:"arbeidIUtlandet.navn"});return e.jsxs(e.Fragment,{children:[i.map((p,t)=>e.jsxs(E,{gap:"10",children:[e.jsxs(S,{justify:"space-between",children:[e.jsx(B,{name:`arbeidIUtlandet.${t}.land`,style:{width:"var(--app-text-input-width)"},label:a.formatMessage({id:"arbeidIUtlandet.land"}),validate:[l(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetLand.påkrevd"}))],children:q().map(d=>e.jsx("option",{value:d[0],children:d[1]},d[0]))}),t!==0&&e.jsx(T,{className:n.element("delete"),icon:e.jsx(Q,{"aria-hidden":!0}),type:"button",variant:"tertiary",onClick:()=>s(t),children:e.jsx(c,{id:"perioder.varierende.slett"})})]}),e.jsx(G,{name:`arbeidIUtlandet.${t}.arbeidsgiverNavn`,style:{width:"var(--app-text-input-width)"},label:f,validate:[l(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetNavn.påkrevd"})),V(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetNavn.forLang"}),100),H(d=>a.formatMessage({id:"valideringsfeil.fritekst.kanIkkeInneholdeTegn"},{feltNavn:f,ugyldigeTegn:d}))],maxLength:100}),e.jsx(I,{name:`arbeidIUtlandet.${t}.fom`,label:a.formatMessage({id:"arbeidIUtlandet.fom"}),validate:[l(a.formatMessage({id:"valideringsfeil.fraOgMedDato.påkrevd"})),h(a.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"})),J(a.formatMessage({id:"valideringsfeil.fraOgMedDato.erIFremtiden"})),M(a.formatMessage({id:"valideringsfeil.fraOgMedDato.førTilDato"}),o[t].tom)],maxDate:b().toDate(),minDate:W}),e.jsxs(K,{name:`arbeidIUtlandet.${t}.pågående`,label:e.jsx(c,{id:"ArbeidsforholdOppsummering.næring.pågående"}),validate:[l(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetPågående.påkrevd"}))],children:[e.jsx(A,{value:!0,children:"Ja"}),e.jsx(A,{value:!1,children:"Nei"})]}),o[t].pågående===!1&&e.jsx(I,{name:`arbeidIUtlandet.${t}.tom`,label:a.formatMessage({id:"arbeidIUtlandet.tom"}),description:a.formatMessage({id:"ArbeidIUtlandetFieldArray.arbeid.tom.description"}),validate:[l(a.formatMessage({id:"valideringsfeil.tilOgMedDato.påkrevd"})),h(a.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"})),M(a.formatMessage({id:"valideringsfeil.tilOgMedDato.erIFremtiden"}),b().add(9,"month")),D(a.formatMessage({id:"valideringsfeil.tilOgMedDato.arbeidIUtlandet.merEnn5MånederSiden"}),X()),D(a.formatMessage({id:"valideringsfeil.tilOgMedDato.etterFraDato"}),o[t].fom)],maxDate:b().add(9,"month").toDate(),minDate:oe(o[t].fom,ee)}),t<i.length-1&&e.jsx(Y,{})]},p.id)),e.jsx(S,{children:e.jsx(T,{icon:e.jsx(le,{"aria-hidden":!0}),type:"button",variant:"secondary",onClick:()=>m(_),children:e.jsx(c,{id:"arbeidIUtlandet.tittel.ny"})})})]})};N.__docgenInfo={description:"",methods:[],displayName:"ArbeidIUtlandetFieldArray"};const ge=(n,a,r)=>{const i=de(a,n);if(ne(n,i,r.harJobbetSomFrilans,r.harJobbetSomSelvstendigNæringsdrivende))if(i.length===0){const s=r.harJobbetSomFrilans?te:re;return{nextRoute:u.SKJEMA,nextTilretteleggingId:s}}else return{nextRoute:u.SKJEMA,nextTilretteleggingId:i[0].arbeidsgiverId};return{nextRoute:u.VELG_ARBEID}},me=({mellomlagreSøknadOgNaviger:n,avbrytSøknad:a,arbeidsforhold:r})=>{const i=j(),m=ie(r),s=se(n,r),o=v(g.ARBEID_I_UTLANDET),f=x(v(g.OM_BARNET)),p=x(v(g.ARBEIDSFORHOLD_OG_INNTEKT)),t=U(g.ARBEID_I_UTLANDET),d=U(g.VALGT_TILRETTELEGGING_ID),k=O=>{t(O);const{nextRoute:R,nextTilretteleggingId:F}=ge(f.termindato,r,p);return d(F),s.goToNextStep(R)},y=w({shouldUnregister:!0,defaultValues:o||{arbeidIUtlandet:[_]}});return e.jsx(ae,{bannerTitle:i.formatMessage({id:"søknad.pageheading"}),onCancel:a,steps:m,onContinueLater:s.fortsettSøknadSenere,onStepChange:s.goToNextStep,children:e.jsx(P,{formMethods:y,onSubmit:k,children:e.jsxs(E,{gap:"10",children:[e.jsx($,{}),e.jsx(N,{}),e.jsx(z,{goToPreviousStep:s.goToPreviousDefaultStep})]})})})};me.__docgenInfo={description:"",methods:[],displayName:"ArbeidIUtlandetStep"};export{me as A};
