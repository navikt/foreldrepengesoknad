import{u as V,j as a,B as D,F as g,a as w}from"./Modal-5f6515f6.js";import{r as C}from"./index-f1f2c4b1.js";import{g as R,Y as u,i as s,a as h,d,k as _,S as P,B as l,l as U,R as S,j as Y}from"./fridagerUtils-57eeeb7b.js";import"./_baseToString-375081cd.js";import"./_createSet-53ab95fd.js";import{e as b,n as j,f as L,h as O}from"./dateUtils-8d85eca7.js";import{u as W,C as B,a as x,b as Q}from"./routes-345f7acb.js";import{j as q,h as f,k as G,u as H,f as z}from"./useFortsettSøknadSenere-e239225e.js";import{i as J}from"./check-dates-d5278c7f.js";import{Q as K}from"./index-47edccfa.js";var r=(e=>(e.erBarnetFødt="erBarnetFødt",e.termindato="termindato",e.fødselsdato="fødselsdato",e))(r||{});const m=R(),X=()=>({[r.erBarnetFødt]:u.UNANSWERED,[r.fødselsdato]:void 0,[r.termindato]:""}),Z=(e,t)=>({erBarnetFødt:t.isVisible(r.erBarnetFødt)?e.erBarnetFødt:u.UNANSWERED,termindato:t.isVisible(r.termindato)?e.termindato:"",fødselsdato:t.isVisible(r.fødselsdato)?e.fødselsdato:""}),$=e=>{const t=X();return e?{...t,erBarnetFødt:q(e.erBarnetFødt),termindato:e.termindato,fødselsdato:e.fødselsdato}:t},ee=e=>({erBarnetFødt:!!G(e.erBarnetFødt),termindato:e.termindato,fødselsdato:e.fødselsdato}),te=(e,t)=>e===u.YES&&f(t)&&J(new Date(t))?b(new Date(t)):b(new Date),ae={[r.erBarnetFødt]:{isIncluded:()=>!0,isAnswered:({erBarnetFødt:e})=>e!==u.UNANSWERED},[r.termindato]:{isIncluded:()=>!0,isAnswered:({termindato:e})=>f(e)},[r.fødselsdato]:{isIncluded:({erBarnetFødt:e})=>e===u.YES,isAnswered:({fødselsdato:e})=>f(e)}},re=K(ae),ne=(e,t)=>i=>{if(!f(i))return s(e,"valideringsfeil.barnet.termindato.duMåOppgi");if(!h(i))return s(e,"valideringsfeil.barnet.termindato.ugyldigDatoFormat");if(d(i).isSameOrAfter(j(new Date),"day"))return s(e,"valideringsfeil.barnet.termindato.forLangtFremITid");if(d(i).isBefore(b(new Date),"day")&&!t)return s(e,"valideringsfeil.barnet.termindato.vennligstOppgiBarnetsFødselsDato");if(d(i).isBefore(L(new Date),"day"))return s(e,"valideringsfeil.barnet.termindato.forLangtTilbakeITid");if(t&&!d(i).subtract(6,"months").isSameOrBefore(d(t),"day"))return s(e,"valideringsfeil.barnet.termindato.6mndEtterFødsel");if(t&&!d(i).add(1,"months").isSameOrAfter(d(t),"day"))return s(e,"valideringsfeil.barnet.termindato.1mndFørFødsel")},se=e=>t=>{if(!f(t))return s(e,"valideringsfeil.barnet.fødselsdato.duMåOppgi");if(!h(t))return s(e,"valideringsfeil.barnet.fødselsdato.ugyldigDatoFormat");if(_(t))return s(e,"valideringsfeil.barnet.fødselsdato.måVæreIdagEllerTidligere");if(d(t).isBefore(O(new Date),"day"))return s(e,"valideringsfeil.barnet.termindato.forLangtTilbakeITid")},v=({mellomlagreSøknadOgNaviger:e,avbrytSøknad:t,søkerInfo:i})=>{const n=V(),k=H(n,i.arbeidsforhold),[F,y]=C.useState(!1),I=z(),T=W(B.OM_BARNET),N=x(B.OM_BARNET),M=x(B.APP_ROUTE),E=o=>{y(!0);const p=ee(o);N(p),M(Q.UTENLANDSOPPHOLD),e()};return a.jsx(m.FormikWrapper,{initialValues:$(T),onSubmit:E,renderForm:({values:o})=>{const p=re.getVisbility({...o}),A=te(o.erBarnetFødt,o.fødselsdato);return a.jsx(P,{bannerTitle:n.formatMessage({id:"søknad.pageheading"}),activeStepId:"barnet",pageTitle:n.formatMessage({id:"steps.label.barnet"}),onCancel:t,steps:k,onContinueLater:I,children:a.jsxs(m.Form,{includeButtons:!1,includeValidationSummary:!0,cleanup:c=>Z(c,p),children:[a.jsxs(l,{padBottom:"xxl",children:[a.jsx(l,{padBottom:"m",children:a.jsx(m.YesOrNoQuestion,{name:r.erBarnetFødt,legend:n.formatMessage({id:"barnet.erBarnetFødt"}),validate:c=>U(c,n.formatMessage({id:"valideringsfeil.barnet.erBarnetFødt.påkrevd"}))})}),a.jsx(S,{header:n.formatMessage({id:"barnet.erBarnetFødt.merInfo.tittel"}),children:a.jsx(D,{children:a.jsx(g,{id:"barnet.erBarnetFødt.merInfo.tekst"})})})]}),a.jsx(l,{padBottom:"xxl",visible:p.isVisible(r.fødselsdato),children:a.jsx(m.DatePicker,{name:r.fødselsdato,label:n.formatMessage({id:"barnet.fødselsdato"}),minDate:O(new Date),maxDate:d().toDate(),validate:se(n),placeholder:"dd.mm.åååå"})}),a.jsxs(l,{padBottom:"xxl",visible:!0,children:[a.jsx(l,{padBottom:"l",children:a.jsx(m.DatePicker,{name:r.termindato,label:n.formatMessage({id:"barnet.termindato"}),placeholder:"dd.mm.åååå",minDate:A,maxDate:j(new Date),validate:ne(n,o.fødselsdato)})}),a.jsx(S,{header:n.formatMessage({id:"barnet.termindato.merInfo.tittel"}),children:a.jsx(D,{children:a.jsx(g,{id:"barnet.termindato.merInfo.tekst"})})})]}),a.jsx(l,{padBottom:"l",children:a.jsx(Y,{children:a.jsx(w,{type:"submit",disabled:F,loading:F,children:a.jsx(g,{id:"søknad.gåVidere"})})})})]})})}})};try{v.displayName="Barnet",v.__docgenInfo={description:"",displayName:"Barnet",props:{mellomlagreSøknadOgNaviger:{defaultValue:null,description:"",name:"mellomlagreSøknadOgNaviger",required:!0,type:{name:"() => Promise<void>"}},avbrytSøknad:{defaultValue:null,description:"",name:"avbrytSøknad",required:!0,type:{name:"() => Promise<void>"}},søkerInfo:{defaultValue:null,description:"",name:"søkerInfo",required:!0,type:{name:"Søkerinfo"}}}}}catch{}export{v as B};
