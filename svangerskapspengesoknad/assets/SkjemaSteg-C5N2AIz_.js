import{f as V,e as _,r as R,au as M,j as e,av as q,aw as P,Z as S,ax as w,b1 as C,aB as E,$ as T,a2 as O,a3 as B,ay as H}from"./iframe-lraxnqHq.js";import{e as k,C as v,d as $}from"./routes-C0sIg0kg.js";import{d as z,e as J,j as K,g as U,l as X,F as y}from"./useSvpNavigator-CuwlnJiB.js";import{k as Z}from"./index-CkVZ0UWK.js";import{S as Q,A as W}from"./attachmentType-DJ1vFT-G.js";import{B as Y}from"./Bedriftsbanner-CsFEVuOd.js";const ee=(n,i)=>async r=>{const g=new FormData;g.append("id",r.id),g.append("vedlegg",r.file,r.filename);const t=await Z.post(`${n}/rest/storage/${i}/vedlegg`,{body:g});return{headers:{location:t.headers.get("Location")},data:await t.text()}},re=40,te=(n,i)=>i===E?n.formatMessage({id:"skjema.vedlegg.label.selvstendig"}):i===y?n.formatMessage({id:"skjema.vedlegg.label.frilanser"}):n.formatMessage({id:"skjema.vedlegg.label.arbeidsgiver"}),ae=({mellomlagreSøknadOgNaviger:n,avbrytSøknad:i,arbeidsforhold:r,maxAntallVedlegg:g=re})=>{const t=V(),b=z(r),d=J(n,r),j=K(),a=_(j.tilretteleggingId),o=k(v.TILRETTELEGGINGER_VEDLEGG),c=k(v.VALGTE_ARBEIDSFORHOLD),h=$(v.TILRETTELEGGINGER_VEDLEGG),[A,G]=R.useState(!1),x=s=>{if(s.vedlegg.length===0)return l.setError("vedlegg",{message:t.formatMessage({id:"SkjemaSteg.MinstEttDokument"})}),Promise.resolve();const u=o?Object.keys(o).filter(p=>p!==a).reduce((p,D)=>p+o[D].length,0):0,F=s.vedlegg?s.vedlegg.length:0,f=u+F-g;return f>0?(l.setError("vedlegg",{message:t.formatMessage({id:"skjema.maks40Filer"},{antallVedlegg:f})}),Promise.resolve()):(h({...o,[a]:s.vedlegg}),d.goToNextDefaultStep())},m={vedlegg:o?o[a]:void 0},l=M({defaultValues:m}),I=(s,u)=>{G(u),l.setValue("vedlegg",s,{shouldDirty:!0,shouldTouch:!0}),u||l.clearErrors("vedlegg")},L=U(a,r),N=X(t,a,r);return e.jsx(q,{bannerTitle:t.formatMessage({id:"søknad.pageheading"}),onCancel:i,steps:b,onContinueLater:d.fortsettSøknadSenere,onStepChange:d.goToStep,noFieldsRequired:!0,children:e.jsx(P,{formMethods:l,onSubmit:x,children:e.jsxs(S,{gap:"10",children:[e.jsx(w,{}),c&&c.length>1&&e.jsx(Y,{arbeidsforholdType:L,arbeidsforholdNavn:N}),e.jsx(S,{gap:"4",children:e.jsx(C,{label:te(t,a),description:a===y||a===E?e.jsx(T,{id:"skjema.vedlegg.description.frilansSN"}):e.jsx(T,{id:"skjema.vedlegg.description.arbeidsgiver",values:{a:s=>e.jsx(O,{rel:"noopener noreferrer",href:B.arbeidstilsynetSkjema,target:"_blank",children:s})}}),attachmentType:W.TILRETTELEGGING,skjemanummer:Q.SKJEMA_FOR_TILRETTELEGGING_OG_OMPLASSERING,existingAttachments:m==null?void 0:m.vedlegg,updateAttachments:I,saveAttachment:ee("./","svangerskapspenger")})}),e.jsx(H,{goToPreviousStep:d.goToPreviousDefaultStep,isDisabledAndLoading:A})]})})})};ae.__docgenInfo={description:"",methods:[],displayName:"SkjemaSteg",props:{mellomlagreSøknadOgNaviger:{required:!0,tsType:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},avbrytSøknad:{required:!0,tsType:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},arbeidsforhold:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    arbeidsgiverId: string;
    arbeidsgiverIdType: string;
    arbeidsgiverNavn: string;
    stillingsprosent: number;
    fom: string;
    tom?: string;
}`,signature:{properties:[{key:"arbeidsgiverId",value:{name:"string",required:!0}},{key:"arbeidsgiverIdType",value:{name:"string",required:!0}},{key:"arbeidsgiverNavn",value:{name:"string",required:!0}},{key:"stillingsprosent",value:{name:"number",required:!0}},{key:"fom",value:{name:"string",required:!0}},{key:"tom",value:{name:"string",required:!1}}]}}],raw:"Arbeidsforhold[]"},description:""},maxAntallVedlegg:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"40",computed:!1}}}};export{ae as S};
