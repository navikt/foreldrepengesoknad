import{u as V,j as r}from"./index-f7e8eec7.js";import{m as te,r as q,d as v,V as se,c as ge,o as de,b as le,p as oe}from"./VStack-1b7d0c8f.js";import{T as x,d as me,R as N,a as g,D as M,e as fe,u as ve,F as ue,E as Ne,S as ce}from"./ErrorSummaryHookForm-b3689071.js";import{u as E,C as m,b as D,c as pe,A as Ee,a as h}from"./routes-999d7714.js";import"./index-f1f2c4b1.js";import{r as Me,i as s,t as he,v as ke,b as k,c as I,q as xe,f as b,w as T,o as y,x as Se,u as je,a as De,n as G,p as Ie,s as C,g as be}from"./useSvpNavigator-7f6afa8c.js";import{N as f,e as Te}from"./EgenNæring-1a3aa973.js";import{f as ye}from"./Frilans-f45bffb0.js";import{T as B,a as P,g as _e}from"./validationUtils-9ec7b8ab.js";import{b as Ae}from"./velgArbeidFormUtils-95eaeee3.js";import{F as t,B as _}from"./Button-07c65ca4.js";import{R as H}from"./ReadMore-c884ad2a.js";const Ve=/^[0-9]*$/,Re=n=>{let a=2,i=0;for(let d=n.length-2;d>=0;--d)i+=parseInt(n.charAt(d),10)*a,++a>7&&(a=2);const e=11-i%11;return e===11?0:e},Fe=n=>Ve.test(n)&&n.length===9,Le=n=>n.charAt(0)==="8"||n.charAt(0)==="9",Oe=n=>!n||Fe(n)===!1||Le(n)===!1||n==="999999999"?!1:Re(n)===parseInt(n.charAt(8),10),Ge=/^\d+([,.]\d+)?$/,w=n=>a=>Me(a)||Ge.test(a.toString())?null:n,J=(n,a)=>i=>i>=a?null:n,Be=(n,a)=>i=>{const e=(i||"").trim();if(!a&&!e)return n.formatMessage({id:"valideringsfeil.egenNæringOrgnr.påkrevd"});if(e.length>0&&ke(e))return n.formatMessage({id:"valideringsfeil.egenNæringOrgnr.inneholderMellomrom"});if(e.length>0&&!Oe(e))return n.formatMessage({id:"valideringsfeil.egenNæringOrgnr.ugyldigFormat"})},A=({orgNummerErValgfritt:n,registrertINorge:a})=>{const i=V(),e=i.formatMessage({id:"egenNæring.orgnr"}),d=n?`${e} ${i.formatMessage({id:"valgfritt"})}`:e;return r.jsxs(r.Fragment,{children:[a&&r.jsx(x,{name:"organisasjonsnummer",label:d,validate:[Be(i,n)]}),a===!1&&r.jsx(me,{name:"registrertILand",label:i.formatMessage({id:"egenNæring.registrertILand"}),validate:[s(i.formatMessage({id:"valideringsfeil.egenNæringLand.påkrevd"})),he(i.formatMessage({id:"valideringsfeil.egenNæringLand.ikkeNorge"}),"NO")],children:te().map(l=>r.jsx("option",{value:l[0],children:l[1]},l[0]))})]})};try{A.displayName="OrgnummerEllerLand",A.__docgenInfo={description:"",displayName:"OrgnummerEllerLand",props:{orgNummerErValgfritt:{defaultValue:null,description:"",name:"orgNummerErValgfritt",required:!0,type:{name:"boolean"}},registrertINorge:{defaultValue:null,description:"",name:"registrertINorge",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const Pe=({egenNæringFom:n,egenNæringTom:a,varigEndring:i})=>{const e=V(),d=e.formatMessage({id:"egenNæring.varigEndringBeskrivelse.label"});return r.jsxs(r.Fragment,{children:[r.jsxs(N,{name:"hattVarigEndringAvNæringsinntektSiste4Kalenderår",label:e.formatMessage({id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringHattVarigEndringDeSiste4Årene.påkrevd"}))],children:[r.jsx(g,{value:!0,children:r.jsx(t,{id:"ja"})}),r.jsx(g,{value:!1,children:r.jsx(t,{id:"nei"})})]}),r.jsx(H,{header:e.formatMessage({id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info.åpneLabel"}),children:r.jsx(_,{children:r.jsx(t,{id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info"})})}),i&&r.jsxs(r.Fragment,{children:[r.jsx(M,{name:"varigEndringDato",label:e.formatMessage({id:"egenNæring.egenNæringVarigEndringDato"}),validate:[s(e.formatMessage({id:"valideringsfeil.varigEndringDato.påkrevd"})),k(e.formatMessage({id:"valideringsfeil.varigEndringDato.gyldigDato"})),I(e.formatMessage({id:"valideringsfeil.varigEndringDato.erIFremtiden"})),xe(e.formatMessage({id:"valideringsfeil.varigEndringDato.mindreEnn4ÅrSiden"}),q),b(e.formatMessage({id:"valideringsfeil.varigEndringDato.førFraDato"}),n),T(e.formatMessage({id:"valideringsfeil.varigEndringDato.etterTilDato"}),a)],maxDate:v(),minDate:n}),r.jsx(x,{name:"varigEndringInntektEtterEndring",label:e.formatMessage({id:"egenNæring.egenNæringVarigEndringInntektEtterEndring"}),description:e.formatMessage({id:"egenNæring.egenNæringVarigEndringInntektEtterEndring.description"}),validate:[s(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.påkrevd"})),y(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.forLang"}),9),w(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.ugyldigFormat"})),J(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.mindreEnnNull"}),0)]}),r.jsx(fe,{name:"varigEndringBeskrivelse",label:d,minLength:B,maxLength:P,validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringVarigEndringBeskrivelse.påkrevd"})),y(e.formatMessage({id:"valideringsfeil.egenNæringVarigEndringBeskrivelse.forLang"}),P),Se(e.formatMessage({id:"valideringsfeil.egenNæringVarigEndringBeskrivelse.forKort"}),B)]})]})]})};try{VarigEndringSprsml.displayName="VarigEndringSprsml",VarigEndringSprsml.__docgenInfo={description:"",displayName:"VarigEndringSprsml",props:{egenNæringFom:{defaultValue:null,description:"",name:"egenNæringFom",required:!0,type:{name:"string"}},egenNæringTom:{defaultValue:null,description:"",name:"egenNæringTom",required:!0,type:{name:"string"}},varigEndring:{defaultValue:null,description:"",name:"varigEndring",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const Ke=(n,a,i)=>{const e=be(a,n);if(C(n,e,i.harJobbetSomFrilans,i.harJobbetSomSelvstendigNæringsdrivende))if(e.length===0){const l=i.harJobbetSomFrilans?ye:Te;return{nextRoute:h.SKJEMA,nextTilretteleggingId:l}}else return{nextRoute:h.SKJEMA,nextTilretteleggingId:e[0].arbeidsgiverId};return{nextRoute:h.VELG_ARBEID}},qe=(n,a,i)=>{const e=n.harHattArbeidIUtlandet?h.ARBEID_I_UTLANDET:void 0;return e?{nextRoute:e}:Ke(a,i,n)},K=n=>le(n)?!n||v(n).startOf("day").isAfter(q,"day"):!0,Ce=(n,a)=>i=>!a&&!i?n.formatMessage({id:"valideringsfeil.egenNæringNavn.påkrevd"}):i&&i.length>100?n.formatMessage({id:"valideringsfeil.egenNæringNavn.forLang"}):null,rr=({mellomlagreSøknadOgNaviger:n,avbrytSøknad:a,arbeidsforhold:i})=>{const e=V(),d=je(i),l=De(n,i),$=E(m.EGEN_NÆRING),S=G(E(m.INNTEKTSINFORMASJON)),R=G(E(m.OM_BARNET)),U=E(m.TILRETTELEGGINGER),Y=D(m.EGEN_NÆRING),X=D(m.TILRETTELEGGINGER),W=D(m.VALGT_TILRETTELEGGING_ID),z=p=>{if(Y(p),C(R.termindato,i,S.harJobbetSomFrilans,S.harJobbetSomSelvstendigNæringsdrivende)){const ae=[Ae(U||[],p)];X(ae)}const{nextRoute:ne,nextTilretteleggingId:ie}=qe(S,R.termindato,i);return W(ie),l.goToNextStep(ne)},o=ve({shouldUnregister:!0,defaultValues:$}),F=e.formatMessage({id:"egenNæring.navnPåNæring"}),j=o.watch("næringstype"),c=o.watch("navnPåNæringen"),u=o.watch("fomDato"),L=o.watch("tomDato"),Q=o.watch("registrertINorge"),Z=o.watch("pågående"),ee=o.watch("hattVarigEndringAvNæringsinntektSiste4Kalenderår"),re=o.watch("harBlittYrkesaktivILøpetAvDeTreSisteFerdigliknedeÅrene"),O=j===f.FISKER?`${F} ${e.formatMessage({id:"valgfritt"})}`:F;return r.jsx(pe,{bannerTitle:e.formatMessage({id:"søknad.pageheading"}),onCancel:a,steps:d,onContinueLater:l.fortsettSøknadSenere,children:r.jsx(ue,{formMethods:o,onSubmit:z,children:r.jsxs(se,{gap:"10",children:[r.jsx(Ne,{}),r.jsx(_,{children:r.jsx(t,{id:"harValgfrieFelt"})}),r.jsxs(N,{name:"næringstype",label:e.formatMessage({id:"egenNæring.næringstype"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringType.påkrevd"}))],children:[r.jsx(g,{value:f.DAGMAMMA,children:r.jsx(t,{id:"egenNæring.næringstype.dagmamma"})}),r.jsx(g,{value:f.FISKER,children:r.jsx(t,{id:"egenNæring.næringstype.fiske"})}),r.jsx(g,{value:f.JORDBRUK,children:r.jsx(t,{id:"egenNæring.næringstype.jordbrukSkogbruk"})}),r.jsx(g,{value:f.ANNET,children:r.jsx(t,{id:"egenNæring.næringstype.annen"})})]}),r.jsx(x,{name:"navnPåNæringen",label:O,maxLength:100,validate:[Ce(e,j===f.FISKER),Ie(p=>e.formatMessage({id:"valideringsfeil.fritekst.kanIkkeInneholdeTegn"},{feltNavn:O,ugyldigeTegn:p}))],shouldReplaceInvisibleChars:!0}),r.jsxs(N,{name:"registrertINorge",label:e.formatMessage({id:"egenNæring.erNæringenRegistrertINorge"},{navnPåNæringen:c}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringRegistrertINorge.påkrevd"}))],children:[r.jsx(g,{value:!0,children:r.jsx(t,{id:"ja"})}),r.jsx(g,{value:!1,children:r.jsx(t,{id:"nei"})})]}),r.jsx(A,{orgNummerErValgfritt:j===f.FISKER,registrertINorge:Q}),r.jsx(M,{name:"fomDato",label:e.formatMessage({id:"egenNæring.næring.fom"},{navnPåNæringen:c}),validate:[s(e.formatMessage({id:"valideringsfeil.fraOgMedDato.påkrevd"})),k(e.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"})),I(e.formatMessage({id:"valideringsfeil.fraOgMedDato.erIFremtiden"})),T(e.formatMessage({id:"valideringsfeil.fraOgMedDato.førTilDato"}),L)],maxDate:v(),minDate:ge}),r.jsxs(N,{name:"pågående",label:e.formatMessage({id:"egenNæring.næring.pågående"},{navnPåNæringen:c}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringPågående.påkrevd"}))],children:[r.jsx(g,{value:!0,children:r.jsx(t,{id:"ja"})}),r.jsx(g,{value:!1,children:r.jsx(t,{id:"nei"})})]}),Z===!1&&r.jsx(M,{name:"tomDato",label:e.formatMessage({id:"egenNæring.næring.tom"},{navnPåNæringen:c}),description:e.formatMessage({id:"egenNæring.næring.tom.description"}),validate:[s(e.formatMessage({id:"valideringsfeil.tilOgMedDato.påkrevd"})),k(e.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"})),T(e.formatMessage({id:"valideringsfeil.tilOgMedDato.erIFremtiden"}),v().add(9,"month")),b(e.formatMessage({id:"valideringsfeil.tilOgMedDato.egenNæring.merEnn5MånederSiden"}),de()),b(e.formatMessage({id:"valideringsfeil.tilOgMedDato.etterFraDato"}),u)],maxDate:v().add(9,"month"),minDate:_e(u,oe)}),!K(u)&&r.jsx(Pe,{varigEndring:ee,egenNæringFom:u,egenNæringTom:L}),r.jsx(x,{name:"næringsinntekt",label:e.formatMessage({id:"egenNæring.næringsinntekt"}),description:e.formatMessage({id:"egenNæring.næringsinntekt.description"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringInntekt.påkrevd"})),y(e.formatMessage({id:"valideringsfeil.næringsinntekt.forLang"}),9),w(e.formatMessage({id:"valideringsfeil.næringsinntekt.ugyldigFormat"})),J(e.formatMessage({id:"valideringsfeil.næringsinntekt.mindreEnnNull"}),0)]}),r.jsx(H,{header:e.formatMessage({id:"egenNæring.næringsinntekt.info.apneLabel"}),children:r.jsx(_,{children:r.jsx(t,{id:"egenNæring.næringsinntekt.info"})})}),r.jsxs(N,{name:"harBlittYrkesaktivILøpetAvDeTreSisteFerdigliknedeÅrene",label:e.formatMessage({id:"egenNæring.blittYrkesaktivSiste3År"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringBlittYrkesaktivDe3SisteÅrene.påkrevd"}))],children:[r.jsx(g,{value:!0,children:r.jsx(t,{id:"ja"})}),r.jsx(g,{value:!1,children:r.jsx(t,{id:"nei"})})]}),K(u)&&re===!0&&r.jsx(M,{name:"oppstartsdato",label:e.formatMessage({id:"egenNæring.yrkesaktivDato"}),validate:[s(e.formatMessage({id:"valideringsfeil.yrkesaktiv.påkrevd"})),k(e.formatMessage({id:"valideringsfeil.yrkesaktiv.gyldigDato"})),I(e.formatMessage({id:"valideringsfeil.yrkesaktiv.erIFremtiden"}))],maxDate:v()}),r.jsx(Ee,{variant:"info",children:e.formatMessage({id:"egenNæring.veileder"})}),r.jsx(ce,{goToPreviousStep:l.goToPreviousDefaultStep})]})})})};try{EgenNringStep.displayName="EgenNringStep",EgenNringStep.__docgenInfo={description:"",displayName:"EgenNringStep",props:{mellomlagreSøknadOgNaviger:{defaultValue:null,description:"",name:"mellomlagreSøknadOgNaviger",required:!0,type:{name:"() => Promise<void>"}},avbrytSøknad:{defaultValue:null,description:"",name:"avbrytSøknad",required:!0,type:{name:"() => Promise<void>"}},arbeidsforhold:{defaultValue:null,description:"",name:"arbeidsforhold",required:!0,type:{name:"Arbeidsforhold[]"}}}}}catch{}export{rr as E};
