import{j as e}from"./jsx-runtime-Cw0GR0a5.js";import{u as b,C as f,b as R,a as u}from"./routes-B1fb87EI.js";import{u as F,a as B,g as L,s as C}from"./useSvpNavigator-yfJ1o2OX.js";import{d as H,e as J,f as w,g as G,c as I,a as K,b as h,u as P,R as V,E as $,S as z}from"./ErrorSummaryHookForm-C03QHvL8.js";import{u as x,V as T,a as M,J as q,B as A,K as W,M as c,f as v,m as X,N as Y,O as Q,F as Z,P as ee,c as ae}from"./VeiviserPage-DPeYfbGG.js";import{A as _}from"./ArbeidIUtlandet-BK3pFOD4.js";import"./index-CTjT7uj6.js";import{i as l,h as te,f as re,a as D,b as ie,d as U,g as S,n as j}from"./minMax-BeRBV8CB.js";import{g as se}from"./validationUtils-CUnokTVc.js";import{S as de}from"./Plus-C9cnxDk0.js";const y={type:_.JOBB_I_UTLANDET,fom:"",tom:"",pågående:void 0,arbeidsgiverNavn:"",land:""},E=()=>{const d=Z("arbeidIUtlandet"),a=x(),r=H(),{fields:n,append:m,remove:o}=J({name:"arbeidIUtlandet",control:r.control}),s=r.watch("arbeidIUtlandet"),g=a.formatMessage({id:"arbeidIUtlandet.navn"});return e.jsxs(e.Fragment,{children:[n.map((p,t)=>e.jsxs(T,{gap:"10",children:[e.jsxs(M,{justify:"space-between",children:[e.jsx(w,{name:`arbeidIUtlandet.${t}.land`,style:{width:"var(--app-text-input-width)"},label:a.formatMessage({id:"arbeidIUtlandet.land"}),validate:[l(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetLand.påkrevd"}))],children:q().map(i=>e.jsx("option",{value:i[0],children:i[1]},i[0]))}),t!==0&&e.jsx(A,{className:d.element("delete"),icon:e.jsx(W,{"aria-hidden":!0}),type:"button",variant:"tertiary",onClick:()=>o(t),children:e.jsx(c,{id:"perioder.varierende.slett"})})]}),e.jsx(G,{name:`arbeidIUtlandet.${t}.arbeidsgiverNavn`,style:{width:"var(--app-text-input-width)"},label:g,validate:[l(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetNavn.påkrevd"})),te(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetNavn.forLang"}),100),re(i=>a.formatMessage({id:"valideringsfeil.fritekst.kanIkkeInneholdeTegn"},{feltNavn:g,ugyldigeTegn:i}))]}),e.jsx(I,{name:`arbeidIUtlandet.${t}.fom`,label:a.formatMessage({id:"arbeidIUtlandet.fom"}),validate:[l(a.formatMessage({id:"valideringsfeil.fraOgMedDato.påkrevd"})),D(a.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"})),ie(a.formatMessage({id:"valideringsfeil.fraOgMedDato.erIFremtiden"})),i=>s[t].tom?U(a.formatMessage({id:"valideringsfeil.fraOgMedDato.førTilDato"}),s[t].tom)(i):null],maxDate:v().toDate(),minDate:X}),e.jsxs(K,{name:`arbeidIUtlandet.${t}.pågående`,label:e.jsx(c,{id:"ArbeidIUtlandetFieldArray.næring.pågående"}),validate:[l(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetPågående.påkrevd"}))],children:[e.jsx(h,{value:!0,children:"Ja"}),e.jsx(h,{value:!1,children:"Nei"})]}),s[t].pågående===!1&&e.jsx(I,{name:`arbeidIUtlandet.${t}.tom`,label:a.formatMessage({id:"arbeidIUtlandet.tom"}),description:a.formatMessage({id:"ArbeidIUtlandetFieldArray.arbeid.tom.description"}),validate:[l(a.formatMessage({id:"valideringsfeil.tilOgMedDato.påkrevd"})),D(a.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"})),U(a.formatMessage({id:"valideringsfeil.tilOgMedDato.erIFremtiden"}),v().add(9,"month")),S(a.formatMessage({id:"valideringsfeil.tilOgMedDato.arbeidIUtlandet.merEnn5MånederSiden"}),Y()),S(a.formatMessage({id:"valideringsfeil.tilOgMedDato.etterFraDato"}),s[t].fom)],maxDate:v().add(9,"month").toDate(),minDate:se(s[t].fom,ee)}),t<n.length-1&&e.jsx(Q,{})]},p.id)),e.jsx(M,{children:e.jsx(A,{icon:e.jsx(de,{"aria-hidden":!0}),type:"button",variant:"secondary",onClick:()=>m(y),children:e.jsx(c,{id:"arbeidIUtlandet.tittel.ny"})})})]})};E.__docgenInfo={description:"",methods:[],displayName:"ArbeidIUtlandetFieldArray"};const ne=(d,a,r)=>{const n=L(a,d);return C(d,n,r.harJobbetSomFrilans,r.harJobbetSomSelvstendigNæringsdrivende)?u.SKJEMA:u.VELG_ARBEID},oe=({mellomlagreSøknadOgNaviger:d,avbrytSøknad:a,arbeidsforhold:r})=>{const n=x(),m=F(r),o=B(d,r),s=b(f.ARBEID_I_UTLANDET),g=j(b(f.OM_BARNET)),p=j(b(f.ARBEIDSFORHOLD_OG_INNTEKT)),t=R(f.ARBEID_I_UTLANDET),i=N=>(t({arbeidIUtlandet:N.arbeidIUtlandet.map(O=>({...O,type:_.JOBB_I_UTLANDET}))}),o.goToNextStep(ne(g.termindato,r,p))),k=P({shouldUnregister:!0,defaultValues:s||{arbeidIUtlandet:[y]}});return e.jsx(ae,{bannerTitle:n.formatMessage({id:"søknad.pageheading"}),onCancel:a,steps:m,onContinueLater:o.fortsettSøknadSenere,children:e.jsx(V,{formMethods:k,onSubmit:i,children:e.jsxs(T,{gap:"10",children:[e.jsx($,{}),e.jsx(E,{}),e.jsx(z,{goToPreviousStep:o.goToPreviousDefaultStep})]})})})};oe.__docgenInfo={description:"",methods:[],displayName:"ArbeidIUtlandetStep"};export{oe as A};
