import{j as e}from"./jsx-runtime-Cw0GR0a5.js";import{u as b,C as l,b as I,a as c}from"./routes-B9jRY1rx.js";import{u as L,a as C,g as B,s as G}from"./useSvpNavigator-DsLOkilJ.js";import{e as V,f as J,g as H,h as K,c as h,a as w,b as A,u as P,R as $,E as z,S as q}from"./ErrorSummaryHookForm-q2mkZ3ta.js";import{u as E,V as j,a as M,K as Q,B as D,N as W,M as u,f as v,m as X,O as Y,Q as Z,J as ee,R as ae,c as te}from"./VeiviserPage-Bp8J8YE0.js";import"./index-CTjT7uj6.js";import{e as re}from"./EgenNæring-DdBVG6ty.js";import{f as ie}from"./Frilans-B_RcwIAw.js";import{i as g,h as se,g as de,a as x,b as ne,d as S,j as T,n as U}from"./minMax-DHtEFl1B.js";import{A as oe}from"./ArbeidIUtlandet-BK3pFOD4.js";import{g as le}from"./validationUtils-oQjHSCY2.js";import{S as ge}from"./Plus-DG-63UJv.js";const _={type:oe.JOBB_I_UTLANDET,fom:"",tom:"",pågående:void 0,arbeidsgiverNavn:"",land:""},N=()=>{const o=ee("arbeidIUtlandet"),a=E(),r=V(),{fields:s,append:m,remove:d}=J({name:"arbeidIUtlandet",control:r.control}),n=r.watch("arbeidIUtlandet"),f=a.formatMessage({id:"arbeidIUtlandet.navn"});return e.jsxs(e.Fragment,{children:[s.map((p,t)=>e.jsxs(j,{gap:"10",children:[e.jsxs(M,{justify:"space-between",children:[e.jsx(H,{name:`arbeidIUtlandet.${t}.land`,style:{width:"var(--app-text-input-width)"},label:a.formatMessage({id:"arbeidIUtlandet.land"}),validate:[g(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetLand.påkrevd"}))],children:Q().map(i=>e.jsx("option",{value:i[0],children:i[1]},i[0]))}),t!==0&&e.jsx(D,{className:o.element("delete"),icon:e.jsx(W,{"aria-hidden":!0}),type:"button",variant:"tertiary",onClick:()=>d(t),children:e.jsx(u,{id:"perioder.varierende.slett"})})]}),e.jsx(K,{name:`arbeidIUtlandet.${t}.arbeidsgiverNavn`,style:{width:"var(--app-text-input-width)"},label:f,validate:[g(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetNavn.påkrevd"})),se(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetNavn.forLang"}),100),de(i=>a.formatMessage({id:"valideringsfeil.fritekst.kanIkkeInneholdeTegn"},{feltNavn:f,ugyldigeTegn:i}))]}),e.jsx(h,{name:`arbeidIUtlandet.${t}.fom`,label:a.formatMessage({id:"arbeidIUtlandet.fom"}),validate:[g(a.formatMessage({id:"valideringsfeil.fraOgMedDato.påkrevd"})),x(a.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"})),ne(a.formatMessage({id:"valideringsfeil.fraOgMedDato.erIFremtiden"})),i=>n[t].tom?S(a.formatMessage({id:"valideringsfeil.fraOgMedDato.førTilDato"}),n[t].tom)(i):null],maxDate:v().toDate(),minDate:X}),e.jsxs(w,{name:`arbeidIUtlandet.${t}.pågående`,label:e.jsx(u,{id:"ArbeidIUtlandetFieldArray.næring.pågående"}),validate:[g(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetPågående.påkrevd"}))],children:[e.jsx(A,{value:!0,children:"Ja"}),e.jsx(A,{value:!1,children:"Nei"})]}),n[t].pågående===!1&&e.jsx(h,{name:`arbeidIUtlandet.${t}.tom`,label:a.formatMessage({id:"arbeidIUtlandet.tom"}),description:a.formatMessage({id:"ArbeidIUtlandetFieldArray.arbeid.tom.description"}),validate:[g(a.formatMessage({id:"valideringsfeil.tilOgMedDato.påkrevd"})),x(a.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"})),S(a.formatMessage({id:"valideringsfeil.tilOgMedDato.erIFremtiden"}),v().add(9,"month")),T(a.formatMessage({id:"valideringsfeil.tilOgMedDato.arbeidIUtlandet.merEnn5MånederSiden"}),Y()),T(a.formatMessage({id:"valideringsfeil.tilOgMedDato.etterFraDato"}),n[t].fom)],maxDate:v().add(9,"month").toDate(),minDate:le(n[t].fom,ae)}),t<s.length-1&&e.jsx(Z,{})]},p.id)),e.jsx(M,{children:e.jsx(D,{icon:e.jsx(ge,{"aria-hidden":!0}),type:"button",variant:"secondary",onClick:()=>m(_),children:e.jsx(u,{id:"arbeidIUtlandet.tittel.ny"})})})]})};N.__docgenInfo={description:"",methods:[],displayName:"ArbeidIUtlandetFieldArray"};const me=(o,a,r)=>{const s=B(a,o);if(G(o,s,r.harJobbetSomFrilans,r.harJobbetSomSelvstendigNæringsdrivende))if(s.length===0){const d=r.harJobbetSomFrilans?ie:re;return{nextRoute:c.SKJEMA,nextTilretteleggingId:d}}else return{nextRoute:c.SKJEMA,nextTilretteleggingId:s[0].arbeidsgiverId};return{nextRoute:c.VELG_ARBEID}},fe=({mellomlagreSøknadOgNaviger:o,avbrytSøknad:a,arbeidsforhold:r})=>{const s=E(),m=L(r),d=C(o,r),n=b(l.ARBEID_I_UTLANDET),f=U(b(l.OM_BARNET)),p=U(b(l.ARBEIDSFORHOLD_OG_INNTEKT)),t=I(l.ARBEID_I_UTLANDET),i=I(l.VALGT_TILRETTELEGGING_ID),y=k=>{t(k);const{nextRoute:O,nextTilretteleggingId:F}=me(f.termindato,r,p);return i(F),d.goToNextStep(O)},R=P({shouldUnregister:!0,defaultValues:n||{arbeidIUtlandet:[_]}});return e.jsx(te,{bannerTitle:s.formatMessage({id:"søknad.pageheading"}),onCancel:a,steps:m,onContinueLater:d.fortsettSøknadSenere,onStepChange:d.goToNextStep,children:e.jsx($,{formMethods:R,onSubmit:y,children:e.jsxs(j,{gap:"10",children:[e.jsx(z,{}),e.jsx(N,{}),e.jsx(q,{goToPreviousStep:d.goToPreviousDefaultStep})]})})})};fe.__docgenInfo={description:"",methods:[],displayName:"ArbeidIUtlandetStep"};export{fe as A};
