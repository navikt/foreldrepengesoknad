import{u as A,j as t,B as F,F as j,a as Z}from"./Modal-5f6515f6.js";import{E as a,e as x,a as l,g as ee,c as ne,m as ie}from"./egenNæringFormUtils-6726c048.js";import{h as s,R as re,b as w,c as M,u as te,S as v,O as ge,U as ae,f as se,L as de,V as le,W as oe}from"./useFortsettSøknadSenere-e239225e.js";import{Q as Ne}from"./index-47edccfa.js";import{Y as p,I as c,i as n,a as y,m as B,p as f,d as k,q as Y,s as ue,v as P,t as G,u as pe,B as d,l as D,R as C,S as me,o as ve,j as ce,r as fe}from"./fridagerUtils-57eeeb7b.js";import{r as Ee}from"./index-f1f2c4b1.js";import"./_baseToString-375081cd.js";import"./_createSet-53ab95fd.js";import{i as xe}from"./dateFormValidation-78b19ee9.js";import{i as ke,a as be}from"./dateUtils-8d85eca7.js";import{u as S,C as m,a as I}from"./routes-345f7acb.js";import{n as L}from"./validation-631bcf6e.js";import{B as he}from"./BackButton-f80f5ffe.js";import{A as Se}from"./Alert-084535df.js";const V=(e,g)=>s(e)&&!x(c(e))&&s(g)&&g===p.YES,Ie={[a.egenNæringType]:{isIncluded:()=>!0,isAnswered:({egenNæringType:e})=>e!==void 0},[a.egenNæringNavn]:{isIncluded:()=>!0,isAnswered:({egenNæringNavn:e})=>s(e)},[a.egenNæringRegistrertINorge]:{isIncluded:()=>!0,isAnswered:({egenNæringRegistrertINorge:e})=>e!==p.UNANSWERED},[a.egenNæringOrgnr]:{isIncluded:({egenNæringRegistrertINorge:e})=>e===p.YES,isAnswered:()=>!0},[a.egenNæringLand]:{isIncluded:({egenNæringRegistrertINorge:e})=>e===p.NO,isAnswered:({egenNæringLand:e})=>s(e)},[a.egenNæringFom]:{isIncluded:()=>!0,isAnswered:({egenNæringFom:e})=>s(e)},[a.egenNæringPågående]:{isIncluded:()=>!0,isAnswered:({egenNæringPågående:e})=>e!==p.UNANSWERED},[a.egenNæringTom]:{isIncluded:({egenNæringPågående:e})=>e===p.NO,isAnswered:({egenNæringTom:e})=>s(e),visibilityFilter:({egenNæringPågående:e})=>e===p.NO},[a.egenNæringResultat]:{isIncluded:({egenNæringFom:e})=>x(c(e)),isAnswered:({egenNæringResultat:e})=>s(e)},[a.egenNæringBlittYrkesaktivDe3SisteÅrene]:{isIncluded:({egenNæringFom:e})=>x(c(e)),isAnswered:({egenNæringBlittYrkesaktivDe3SisteÅrene:e})=>e!==p.UNANSWERED},[a.egenNæringYrkesAktivDato]:{isIncluded:({egenNæringFom:e,egenNæringBlittYrkesaktivDe3SisteÅrene:g})=>x(c(e))&&g===p.YES,isAnswered:({egenNæringYrkesAktivDato:e})=>s(e)},[a.egenNæringHattVarigEndringDeSiste4Årene]:{isIncluded:({egenNæringFom:e})=>s(e)&&!x(c(e)),isAnswered:({egenNæringHattVarigEndringDeSiste4Årene:e})=>s(e)},[a.egenNæringVarigEndringDato]:{isIncluded:({egenNæringFom:e,egenNæringHattVarigEndringDeSiste4Årene:g})=>V(e,g),isAnswered:({egenNæringVarigEndringDato:e})=>s(e)},[a.egenNæringVarigEndringBeskrivelse]:{isIncluded:({egenNæringFom:e,egenNæringHattVarigEndringDeSiste4Årene:g})=>V(e,g),isAnswered:({egenNæringVarigEndringBeskrivelse:e})=>s(e)},[a.egenNæringVarigEndringInntektEtterEndring]:{isIncluded:({egenNæringFom:e,egenNæringHattVarigEndringDeSiste4Årene:g})=>V(e,g),isAnswered:({egenNæringVarigEndringInntektEtterEndring:e})=>s(e)}},De=Ne(Ie),ye=/^\d*$/,Ve=e=>ye.test(e)&&e.length===9,Fe=e=>e.charAt(0)==="8"||e.charAt(0)==="9",je=e=>!e||Ve(e)===!1||Fe(e)===!1?!1:re(e)===parseInt(e.charAt(8),10),Te=(e,g)=>i=>{if(!s(i))return n(e,"valideringsfeil.fraOgMedDato.påkrevd");if(!y(i))return n(e,"valideringsfeil.fraOgMedDato.gyldigDato");if(B(i))return n(e,"valideringsfeil.fraOgMedDato.erIFremtiden");if(f(g,i))return n(e,"valideringsfeil.fraOgMedDato.førTilDato")},Ae=(e,g)=>i=>{if(!s(i))return n(e,"valideringsfeil.tilOgMedDato.påkrevd");if(!y(i))return n(e,"valideringsfeil.tilOgMedDato.gyldigDato");if(xe(i,k().add(9,"month")))return n(e,"valideringsfeil.tilOgMedDato.erIFremtiden");if(f(i,Y(ke())))return n(e,"valideringsfeil.tilOgMedDato.egenNæring.merEnn5MånederSiden");if(f(i,g))return n(e,"valideringsfeil.tilOgMedDato.etterFraDato")},Be=(e,g)=>i=>{const r=i.trim();if(!g&&!s(r))return n(e,"valideringsfeil.egenNæringOrgnr.påkrevd");if(r.length>0&&ue(r))return n(e,"valideringsfeil.egenNæringOrgnr.inneholderMellomrom");if(r.length>0&&!je(r))return n(e,"valideringsfeil.egenNæringOrgnr.ugyldigFormat")},Oe=e=>g=>{if(!s(g))return n(e,"valideringsfeil.yrkesaktiv.påkrevd");if(!y(g))return n(e,"valideringsfeil.yrkesaktiv.gyldigDato");if(B(g))return n(e,"valideringsfeil.yrkesaktiv.erIFremtiden")},Re=e=>g=>{if(s(g)){if(g.length>9)return n(e,"valideringsfeil.næringsinntekt.forLang");const i=G(g);if(!i||Math.round(i)!==i)return n(e,"valideringsfeil.næringsinntekt.ugyldigFormat");if(i&&i<0)return n(e,"valideringsfeil.næringsinntekt.mindreEnnNull")}else return n(e,"valideringsfeil.egenNæringInntekt.påkrevd")},_e=(e,g,i)=>r=>{if(!s(r))return n(e,"valideringsfeil.varigEndringDato.påkrevd");if(!y(r))return n(e,"valideringsfeil.varigEndringDato.gyldigDato");if(B(r))return n(e,"valideringsfeil.varigEndringDato.erIFremtiden");if(f(r,Y(be)))return n(e,"valideringsfeil.varigEndringDato.mindreEnn4ÅrSiden");if(f(r,g))return n(e,"valideringsfeil.varigEndringDato.førFraDato");if(i&&s(i)&&f(i,r))return n(e,"valideringsfeil.varigEndringDato.etterTilDato")},Le=e=>g=>{if(!s(g))return n(e,"valideringsfeil.varigEndringInntekt.påkrevd");if(g.length>9)return n(e,"valideringsfeil.varigEndringInntekt.forLang");const i=G(g);return i&&i<0?n(e,"valideringsfeil.varigEndringInntekt.mindreEnnNull"):pe(g,n(e,"valideringsfeil.varigEndringInntekt.ugyldigFormat"))},we=(e,g)=>i=>!s(i)||i.trim()===""?n(e,"valideringsfeil.egenNæringVarigEndringBeskrivelse.påkrevd"):i.length>w?n(e,"valideringsfeil.egenNæringVarigEndringBeskrivelse.forLang"):i.length<M?n(e,"valideringsfeil.egenNæringVarigEndringBeskrivelse.forKort"):P(i,g,e),Me=(e,g,i)=>r=>!i&&!s(r)?n(e,"valideringsfeil.egenNæringNavn.påkrevd"):r.length>100?n(e,"valideringsfeil.egenNæringNavn.forLang"):P(r,g,e),Ye=e=>g=>{if(!s(g))return n(e,"valideringsfeil.egenNæringLand.påkrevd");if(s(g)&&g==="NO")return n(e,"valideringsfeil.egenNæringLand.ikkeNorge")},Pe=({visibility:e,formValues:g})=>{const i=A(),r=n(i,"egenNæring.varigEndringBeskrivelse.label");return t.jsxs(t.Fragment,{children:[t.jsxs(d,{padBottom:"xxl",visible:e.isVisible(a.egenNæringHattVarigEndringDeSiste4Årene),children:[t.jsx(l.YesOrNoQuestion,{name:a.egenNæringHattVarigEndringDeSiste4Årene,legend:n(i,"egenNæring.egenNæringHattVarigEndringDeSiste4Årene"),validate:E=>D(E,n(i,"valideringsfeil.egenNæringHattVarigEndringDeSiste4Årene.påkrevd"))}),t.jsx(C,{header:n(i,"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info.åpneLabel"),children:t.jsx(F,{children:t.jsx(j,{id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info"})})})]}),t.jsx(d,{padBottom:"xxl",visible:e.isVisible(a.egenNæringVarigEndringDato),children:t.jsx(l.DatePicker,{name:a.egenNæringVarigEndringDato,label:n(i,"egenNæring.egenNæringVarigEndringDato"),placeholder:"dd.mm.åååå",fullscreenOverlay:!0,showYearSelector:!0,validate:_e(i,g.egenNæringFom,g.egenNæringTom),maxDate:k().toDate(),minDate:c(g.egenNæringFom)})}),t.jsx(d,{padBottom:"xxl",visible:e.isVisible(a.egenNæringVarigEndringInntektEtterEndring),children:t.jsx(l.TextField,{name:a.egenNæringVarigEndringInntektEtterEndring,label:n(i,"egenNæring.egenNæringVarigEndringInntektEtterEndring"),description:n(i,"egenNæring.egenNæringVarigEndringInntektEtterEndring.description"),validate:Le(i),style:{width:"var(--app-text-input-width)"}})}),t.jsx(d,{padBottom:"xxl",visible:e.isVisible(a.egenNæringVarigEndringBeskrivelse),children:t.jsx(l.Textarea,{name:a.egenNæringVarigEndringBeskrivelse,label:r,minLength:M,maxLength:w,validate:we(i,r)})})]})};try{VarigEndringSprsml.displayName="VarigEndringSprsml",VarigEndringSprsml.__docgenInfo={description:"",displayName:"VarigEndringSprsml",props:{visibility:{defaultValue:null,description:"",name:"visibility",required:!0,type:{name:"QuestionVisibility<EgenNæringFormField, undefined>"}},formValues:{defaultValue:null,description:"",name:"formValues",required:!0,type:{name:"Partial<EgenNæringFormData>"}}}}}catch{}const T=({visibility:e,orgNummerErValgfritt:g})=>{const i=A(),r=n(i,"egenNæring.orgnr"),E=g?`${r} ${n(i,"valgfritt")}`:r;return t.jsxs(t.Fragment,{children:[t.jsx(d,{padBottom:"xxl",visible:e.isVisible(a.egenNæringOrgnr),children:t.jsx(l.NumberInput,{style:{width:"var(--app-text-input-width)"},name:a.egenNæringOrgnr,label:E,validate:Be(i,g)})}),t.jsx(d,{padBottom:"xxl",visible:e.isVisible(a.egenNæringLand),children:t.jsx(l.CountrySelect,{style:{width:"var(--app-text-input-width)"},name:a.egenNæringLand,label:n(i,"egenNæring.registrertILand"),useAlpha3Code:!1,validate:Ye(i)})})]})};try{T.displayName="OrgnummerEllerLand",T.__docgenInfo={description:"",displayName:"OrgnummerEllerLand",props:{visibility:{defaultValue:null,description:"",name:"visibility",required:!0,type:{name:"QuestionVisibility<EgenNæringFormField, undefined>"}},orgNummerErValgfritt:{defaultValue:null,description:"",name:"orgNummerErValgfritt",required:!0,type:{name:"boolean"}}}}}catch{}const nn=({mellomlagreSøknadOgNaviger:e,avbrytSøknad:g,søkerInfo:i})=>{const r=A(),E=te(r,i.arbeidsforhold),H=se(),[O,Q]=Ee.useState(!1),U=S(m.EGEN_NÆRING),b=L(S(m.INNTEKTSINFORMASJON)),R=L(S(m.OM_BARNET)),q=S(m.TILRETTELEGGINGER),K=I(m.EGEN_NÆRING),W=I(m.TILRETTELEGGINGER),$=I(m.VALGT_TILRETTELEGGING_ID),J=I(m.APP_ROUTE),X=N=>{Q(!0);const o=ie(N);if(de(R.termindato,i.arbeidsforhold,b.harJobbetSomFrilans,b.harJobbetSomSelvstendigNæringsdrivende)){const z=[le(q||[],o)];W(z)}K(o);const{nextRoute:h,nextTilretteleggingId:u}=oe(b,R.termindato,i.arbeidsforhold);$(u),J(h),e()},_=n(r,"egenNæring.navnPåNæring");return t.jsx(l.FormikWrapper,{initialValues:ee(U),onSubmit:X,renderForm:({values:N})=>{const o=De.getVisbility(N),h=N.egenNæringType===v.FISKER?`${_} ${n(r,"valgfritt")}`:_;return t.jsx(me,{bannerTitle:n(r,"søknad.pageheading"),activeStepId:"næring",pageTitle:n(r,"steps.label.næring"),onCancel:g,steps:E,onContinueLater:H,children:t.jsxs(l.Form,{includeButtons:!1,includeValidationSummary:!0,cleanup:u=>ne(u,o),children:[t.jsx(d,{padBottom:"xl",children:t.jsx(F,{children:t.jsx(j,{id:"harValgfrieFelt"})})}),t.jsx(d,{padBottom:"xxl",visible:o.isVisible(a.egenNæringType),children:t.jsx(l.RadioGroup,{name:a.egenNæringType,legend:n(r,"egenNæring.næringstype"),radios:[{label:n(r,"egenNæring.næringstype.dagmamma"),value:v.DAGMAMMA},{label:n(r,"egenNæring.næringstype.fiske"),value:v.FISKER},{label:n(r,"egenNæring.næringstype.jordbrukSkogbruk"),value:v.JORDBRUK},{label:n(r,"egenNæring.næringstype.annen"),value:v.ANNET}],validate:u=>{if(!s(u))return n(r,"valideringsfeil.egenNæringType.påkrevd")}})}),t.jsx(d,{padBottom:"xxl",visible:o.isVisible(a.egenNæringNavn),children:t.jsx(l.TextField,{name:a.egenNæringNavn,label:h,style:{width:"var(--app-text-input-width)"},maxLength:100,validate:Me(r,h,N.egenNæringType===v.FISKER)})}),t.jsx(d,{padBottom:"xxl",visible:o.isVisible(a.egenNæringRegistrertINorge),children:t.jsx(l.YesOrNoQuestion,{name:a.egenNæringRegistrertINorge,legend:n(r,"egenNæring.erNæringenRegistrertINorge",{navnPåNæringen:N.egenNæringNavn}),validate:u=>D(u,n(r,"valideringsfeil.egenNæringRegistrertINorge.påkrevd"))})}),t.jsx(T,{visibility:o,orgNummerErValgfritt:N.egenNæringType===v.FISKER}),t.jsx(d,{padBottom:"xxl",visible:o.isVisible(a.egenNæringFom),children:t.jsx(l.DatePicker,{name:a.egenNæringFom,label:n(r,"egenNæring.næring.fom",{navnPåNæringen:N.egenNæringNavn}),placeholder:"dd.mm.åååå",fullscreenOverlay:!0,showYearSelector:!0,validate:Te(r,N.egenNæringTom),maxDate:k().toDate(),minDate:ve})}),t.jsx(d,{padBottom:"xxl",visible:o.isVisible(a.egenNæringPågående),children:t.jsx(l.YesOrNoQuestion,{name:a.egenNæringPågående,legend:n(r,"egenNæring.næring.pågående",{navnPåNæringen:N.egenNæringNavn}),validate:u=>D(u,n(r,"valideringsfeil.egenNæringPågående.påkrevd"))})}),t.jsx(d,{padBottom:"xxl",visible:o.isVisible(a.egenNæringTom),children:t.jsx(l.DatePicker,{name:a.egenNæringTom,label:n(r,"egenNæring.næring.tom",{navnPåNæringen:N.egenNæringNavn}),description:n(r,"egenNæring.næring.tom.description"),placeholder:"dd.mm.åååå",fullscreenOverlay:!0,showYearSelector:!0,validate:Ae(r,N.egenNæringFom),maxDate:k().add(9,"month").toDate(),minDate:ge(N.egenNæringFom,fe)})}),t.jsx(Pe,{visibility:o,formValues:N}),t.jsxs(d,{padBottom:"xxl",visible:o.isVisible(a.egenNæringResultat),children:[t.jsx(l.TextField,{style:{width:"var(--app-text-input-width)"},name:a.egenNæringResultat,label:n(r,"egenNæring.næringsinntekt"),description:n(r,"egenNæring.næringsinntekt.description"),validate:Re(r)}),t.jsx(C,{header:n(r,"egenNæring.næringsinntekt.info.apneLabel"),children:t.jsx(F,{children:t.jsx(j,{id:"egenNæring.næringsinntekt.info"})})})]}),t.jsx(d,{padBottom:"xxl",visible:o.isVisible(a.egenNæringBlittYrkesaktivDe3SisteÅrene),children:t.jsx(l.YesOrNoQuestion,{name:a.egenNæringBlittYrkesaktivDe3SisteÅrene,legend:n(r,"egenNæring.blittYrkesaktivSiste3År"),validate:u=>D(u,n(r,"valideringsfeil.egenNæringBlittYrkesaktivDe3SisteÅrene.påkrevd"))})}),t.jsx(d,{padBottom:"xxl",visible:o.isVisible(a.egenNæringYrkesAktivDato),children:t.jsx(l.DatePicker,{name:a.egenNæringYrkesAktivDato,label:n(r,"egenNæring.yrkesaktivDato"),placeholder:"dd.mm.åååå",fullscreenOverlay:!0,showYearSelector:!0,validate:Oe(r),maxDate:k().toDate()})}),t.jsx(d,{padBottom:"xxl",children:t.jsx(Se,{variant:"info",children:n(r,"egenNæring.veileder")})}),t.jsx(d,{padBottom:"l",children:t.jsxs(ce,{children:[t.jsx(he,{mellomlagreSøknadOgNaviger:e,route:ae(b)}),t.jsx(Z,{type:"submit",disabled:O,loading:O,children:n(r,"søknad.gåVidere")})]})})]})})}})};try{EgenNringStep.displayName="EgenNringStep",EgenNringStep.__docgenInfo={description:"",displayName:"EgenNringStep",props:{mellomlagreSøknadOgNaviger:{defaultValue:null,description:"",name:"mellomlagreSøknadOgNaviger",required:!0,type:{name:"() => Promise<void>"}},avbrytSøknad:{defaultValue:null,description:"",name:"avbrytSøknad",required:!0,type:{name:"() => Promise<void>"}},søkerInfo:{defaultValue:null,description:"",name:"søkerInfo",required:!0,type:{name:"Søkerinfo"}}}}}catch{}export{nn as E};
