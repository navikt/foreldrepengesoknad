import{j as e}from"./jsx-runtime-Cw0GR0a5.js";import{u as b,C as l,b as v,a as c}from"./routes-B9jRY1rx.js";import{u as C,a as G,g as J,s as V}from"./useSvpNavigator-B8HWh3bT.js";import{e as H,f as K,g as w,h as P,c as h,a as $,b as A,u as z,R as q,E as W,S as X}from"./ErrorSummaryHookForm-CWMkWGmz.js";import{u as E,V as _,a as M,J as Y,B as D,K as Q,M as I,f as u,m as Z,N as ee,O as ae,F as te,P as re,c as ie}from"./VeiviserPage-CkUXNvkL.js";import{A as j}from"./ArbeidIUtlandet-BK3pFOD4.js";import"./index-CTjT7uj6.js";import{e as se}from"./EgenNæring-DdBVG6ty.js";import{f as de}from"./Frilans-B_RcwIAw.js";import{i as g,h as ne,g as oe,a as U,b as le,d as x,j as T,n as S}from"./minMax-HwDi8MC8.js";import{g as ge}from"./validationUtils-C0zTPXPD.js";import{S as me}from"./Plus-CIZ4-444.js";const N={type:j.JOBB_I_UTLANDET,fom:"",tom:"",pågående:void 0,arbeidsgiverNavn:"",land:""},y=()=>{const o=te("arbeidIUtlandet"),a=E(),r=H(),{fields:s,append:m,remove:d}=K({name:"arbeidIUtlandet",control:r.control}),n=r.watch("arbeidIUtlandet"),f=a.formatMessage({id:"arbeidIUtlandet.navn"});return e.jsxs(e.Fragment,{children:[s.map((p,t)=>e.jsxs(_,{gap:"10",children:[e.jsxs(M,{justify:"space-between",children:[e.jsx(w,{name:`arbeidIUtlandet.${t}.land`,style:{width:"var(--app-text-input-width)"},label:a.formatMessage({id:"arbeidIUtlandet.land"}),validate:[g(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetLand.påkrevd"}))],children:Y().map(i=>e.jsx("option",{value:i[0],children:i[1]},i[0]))}),t!==0&&e.jsx(D,{className:o.element("delete"),icon:e.jsx(Q,{"aria-hidden":!0}),type:"button",variant:"tertiary",onClick:()=>d(t),children:e.jsx(I,{id:"perioder.varierende.slett"})})]}),e.jsx(P,{name:`arbeidIUtlandet.${t}.arbeidsgiverNavn`,style:{width:"var(--app-text-input-width)"},label:f,validate:[g(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetNavn.påkrevd"})),ne(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetNavn.forLang"}),100),oe(i=>a.formatMessage({id:"valideringsfeil.fritekst.kanIkkeInneholdeTegn"},{feltNavn:f,ugyldigeTegn:i}))]}),e.jsx(h,{name:`arbeidIUtlandet.${t}.fom`,label:a.formatMessage({id:"arbeidIUtlandet.fom"}),validate:[g(a.formatMessage({id:"valideringsfeil.fraOgMedDato.påkrevd"})),U(a.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"})),le(a.formatMessage({id:"valideringsfeil.fraOgMedDato.erIFremtiden"})),i=>n[t].tom?x(a.formatMessage({id:"valideringsfeil.fraOgMedDato.førTilDato"}),n[t].tom)(i):null],maxDate:u().toDate(),minDate:Z}),e.jsxs($,{name:`arbeidIUtlandet.${t}.pågående`,label:e.jsx(I,{id:"ArbeidIUtlandetFieldArray.næring.pågående"}),validate:[g(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetPågående.påkrevd"}))],children:[e.jsx(A,{value:!0,children:"Ja"}),e.jsx(A,{value:!1,children:"Nei"})]}),n[t].pågående===!1&&e.jsx(h,{name:`arbeidIUtlandet.${t}.tom`,label:a.formatMessage({id:"arbeidIUtlandet.tom"}),description:a.formatMessage({id:"ArbeidIUtlandetFieldArray.arbeid.tom.description"}),validate:[g(a.formatMessage({id:"valideringsfeil.tilOgMedDato.påkrevd"})),U(a.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"})),x(a.formatMessage({id:"valideringsfeil.tilOgMedDato.erIFremtiden"}),u().add(9,"month")),T(a.formatMessage({id:"valideringsfeil.tilOgMedDato.arbeidIUtlandet.merEnn5MånederSiden"}),ee()),T(a.formatMessage({id:"valideringsfeil.tilOgMedDato.etterFraDato"}),n[t].fom)],maxDate:u().add(9,"month").toDate(),minDate:ge(n[t].fom,re)}),t<s.length-1&&e.jsx(ae,{})]},p.id)),e.jsx(M,{children:e.jsx(D,{icon:e.jsx(me,{"aria-hidden":!0}),type:"button",variant:"secondary",onClick:()=>m(N),children:e.jsx(I,{id:"arbeidIUtlandet.tittel.ny"})})})]})};y.__docgenInfo={description:"",methods:[],displayName:"ArbeidIUtlandetFieldArray"};const fe=(o,a,r)=>{const s=J(a,o);if(V(o,s,r.harJobbetSomFrilans,r.harJobbetSomSelvstendigNæringsdrivende))if(s.length===0){const d=r.harJobbetSomFrilans?de:se;return{nextRoute:c.SKJEMA,nextTilretteleggingId:d}}else return{nextRoute:c.SKJEMA,nextTilretteleggingId:s[0].arbeidsgiverId};return{nextRoute:c.VELG_ARBEID}},pe=({mellomlagreSøknadOgNaviger:o,avbrytSøknad:a,arbeidsforhold:r})=>{const s=E(),m=C(r),d=G(o,r),n=b(l.ARBEID_I_UTLANDET),f=S(b(l.OM_BARNET)),p=S(b(l.ARBEIDSFORHOLD_OG_INNTEKT)),t=v(l.ARBEID_I_UTLANDET),i=v(l.VALGT_TILRETTELEGGING_ID),R=O=>{t({arbeidIUtlandet:O.arbeidIUtlandet.map(B=>({...B,type:j.JOBB_I_UTLANDET}))});const{nextRoute:F,nextTilretteleggingId:L}=fe(f.termindato,r,p);return i(L),d.goToNextStep(F)},k=z({shouldUnregister:!0,defaultValues:n||{arbeidIUtlandet:[N]}});return e.jsx(ie,{bannerTitle:s.formatMessage({id:"søknad.pageheading"}),onCancel:a,steps:m,onContinueLater:d.fortsettSøknadSenere,onStepChange:d.goToNextStep,children:e.jsx(q,{formMethods:k,onSubmit:R,children:e.jsxs(_,{gap:"10",children:[e.jsx(W,{}),e.jsx(y,{}),e.jsx(X,{goToPreviousStep:d.goToPreviousDefaultStep})]})})})};pe.__docgenInfo={description:"",methods:[],displayName:"ArbeidIUtlandetStep"};export{pe as A};
