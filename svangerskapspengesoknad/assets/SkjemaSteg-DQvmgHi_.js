import{p as F,o as _,r as R,az as M,j as e,d as P,aA as q,aB as w,V as S,aC as C,b4 as O,aG as T,M as k,a9 as B,aa as H,aD as z}from"./iframe-Culqi94t.js";import{e as E,C as u,d as U}from"./routes-DyUskLZA.js";import{k as J,A as K}from"./queries-CzYUnvm3.js";import{e as X,f as Q,j as W,g as Y,l as Z,F as y}from"./useSvpNavigator-DHfCxIZE.js";import{S as $,A as ee}from"./attachmentType-DJ1vFT-G.js";import{B as te}from"./Bedriftsbanner-BaazntZg.js";const re=n=>async t=>{const r=new FormData;return r.append("id",t.id),r.append("vedlegg",t.file,t.filename),{data:await(await J.post(n,{body:r})).json()}},se=40,ae=(n,t)=>t===T?n.formatMessage({id:"skjema.vedlegg.label.selvstendig"}):t===y?n.formatMessage({id:"skjema.vedlegg.label.frilanser"}):n.formatMessage({id:"skjema.vedlegg.label.arbeidsgiver"}),ne=({mellomlagreSøknadOgNaviger:n,avbrytSøknad:t,arbeidsforhold:r,maxAntallVedlegg:p=se})=>{const o=F(),b=X(r),l=Q(n,r),j=W(),s=_(j.tilretteleggingId),i=E(u.TILRETTELEGGINGER_VEDLEGG),v=E(u.VALGTE_ARBEIDSFORHOLD),A=U(u.TILRETTELEGGINGER_VEDLEGG),[h,G]=R.useState(!1),I=a=>{if(a.vedlegg.length===0)return g.setError("vedlegg",{message:o.formatMessage({id:"SkjemaSteg.MinstEttDokument"})}),Promise.resolve();const d=i?Object.keys(i).filter(m=>m!==s).reduce((m,D)=>m+i[D].length,0):0,V=a.vedlegg?a.vedlegg.length:0,f=d+V-p;return f>0?(g.setError("vedlegg",{message:o.formatMessage({id:"skjema.maks40Filer"},{antallVedlegg:f})}),Promise.resolve()):(A({...i,[s]:a.vedlegg}),l.goToNextDefaultStep())},c={vedlegg:i?i[s]:void 0},g=M({defaultValues:c}),x=(a,d)=>{G(d),g.setValue("vedlegg",a,{shouldDirty:!0,shouldTouch:!0}),d||g.clearErrors("vedlegg")},L=Y(s,r),N=Z(o,s,r);return e.jsx(P,{pageTitle:o.formatMessage({id:"søknad.pageheading"}),children:e.jsx(q,{steps:b,onStepChange:l.goToStep,noFieldsRequired:!0,children:e.jsx(w,{formMethods:g,onSubmit:I,children:e.jsxs(S,{gap:"space-40",children:[e.jsx(C,{}),v&&v.length>1&&e.jsx(te,{arbeidsforholdType:L,arbeidsforholdNavn:N}),e.jsx(S,{gap:"space-16",children:e.jsx(O,{label:ae(o,s),description:s===y||s===T?e.jsx(k,{id:"skjema.vedlegg.description.frilansSN"}):e.jsx(k,{id:"skjema.vedlegg.description.arbeidsgiver",values:{a:a=>e.jsx(B,{rel:"noopener noreferrer",href:H.arbeidstilsynetSkjema,target:"_blank",children:a})}}),attachmentType:ee.TILRETTELEGGING,skjemanummer:$.SKJEMA_FOR_TILRETTELEGGING_OG_OMPLASSERING,existingAttachments:c?.vedlegg,updateAttachments:x,saveAttachment:re(K.sendVedlegg)})}),e.jsx(z,{onAvsluttOgSlett:t,onFortsettSenere:l.fortsettSøknadSenere,goToPreviousStep:l.goToPreviousDefaultStep,isDisabledAndLoading:h})]})})})})};ne.__docgenInfo={description:"",methods:[],displayName:"SkjemaSteg",props:{mellomlagreSøknadOgNaviger:{required:!0,tsType:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},avbrytSøknad:{required:!0,tsType:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},arbeidsforhold:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    arbeidsgiverId: string;
    arbeidsgiverIdType: string;
    arbeidsgiverNavn: string;
    from: string;
    stillingsprosent: number;
    to?: string;
}`,signature:{properties:[{key:"arbeidsgiverId",value:{name:"string",required:!0}},{key:"arbeidsgiverIdType",value:{name:"string",required:!0}},{key:"arbeidsgiverNavn",value:{name:"string",required:!0}},{key:"from",value:{name:"string",required:!0}},{key:"stillingsprosent",value:{name:"number",required:!0}},{key:"to",value:{name:"string",required:!1}}]}}],raw:"EksternArbeidsforholdDto_fpoversikt[]"},description:""},maxAntallVedlegg:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"40",computed:!1}}}};export{ne as S};
