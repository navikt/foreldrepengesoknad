import{j as n}from"./tslib.es6-C_-gbNBy.js";import{w as se,d as v,O as K,b as ge,V as de,g as oe,x as le,A as me,f as fe,y as ve}from"./CalendarLabel-BOjWYyGG.js";import{T as k,d as Ne,R as c,a as g,D as M,e as ce,u as ue,F as pe,E as Ee,S as Me}from"./ErrorSummaryHookForm-DYQj2NvG.js";import{u as R,a as t,B as D}from"./Modal-jpjfRTmg.js";import"./index-CTjT7uj6.js";import{f as he,u as xe,a as ke,n as V,s as C,g as je}from"./useSvpNavigator-CcE3CUWV.js";import{n as Se,i as s,o as Te,a as h,b as I,g as De,e as b,k as y,h as A,p as Ie,f as be}from"./dateFormValidation-ChXBOKMN.js";import{u as E,C as m,b as T,a as x}from"./routes-BKH065He.js";import{N as f,e as ye}from"./EgenNæring-DdBVG6ty.js";import{f as Ae}from"./Frilans-B_RcwIAw.js";import{a as G,T as B,g as Re}from"./validationUtils-Ct3sPTkW.js";import{b as Le}from"./velgArbeidFormUtils-CwAzLmny.js";import{R as w}from"./ReadMore-DQFjhoyC.js";const _e=/^[0-9]*$/,Oe=i=>{let a=2,r=0;for(let d=i.length-2;d>=0;--d)r+=parseInt(i.charAt(d),10)*a,++a>7&&(a=2);const e=11-r%11;return e===11?0:e},Fe=i=>_e.test(i)&&i.length===9,Ve=i=>i.startsWith("8")||i.startsWith("9"),Ge=i=>!i||Fe(i)===!1||Ve(i)===!1||i==="999999999"?!1:Oe(i)===parseInt(i.charAt(8),10),Be=/^\d+([,.]\d+)?$/,Pe=i=>Be.test(i.toString()),H=i=>a=>Se(a)||Pe(a)?null:i,J=(i,a)=>r=>r>=a?null:i,Ke=(i,a)=>r=>{const e=(r||"").trim();if(!a&&!e)return i.formatMessage({id:"valideringsfeil.egenNæringOrgnr.påkrevd"});if(e.length>0&&he(e))return i.formatMessage({id:"valideringsfeil.egenNæringOrgnr.inneholderMellomrom"});if(e.length>0&&!Ge(e))return i.formatMessage({id:"valideringsfeil.egenNæringOrgnr.ugyldigFormat"})},q=({orgNummerErValgfritt:i,registrertINorge:a})=>{const r=R(),e=r.formatMessage({id:"egenNæring.orgnr"}),d=i?`${e} ${r.formatMessage({id:"valgfritt"})}`:e;return n.jsxs(n.Fragment,{children:[a&&n.jsx(k,{name:"organisasjonsnummer",label:d,validate:[Ke(r,i)]}),a===!1&&n.jsx(Ne,{name:"registrertILand",label:r.formatMessage({id:"egenNæring.registrertILand"}),validate:[s(r.formatMessage({id:"valideringsfeil.egenNæringLand.påkrevd"})),Te(r.formatMessage({id:"valideringsfeil.egenNæringLand.ikkeNorge"}),"NO")],children:se().map(o=>n.jsx("option",{value:o[0],children:o[1]},o[0]))})]})};q.__docgenInfo={description:"",methods:[],displayName:"OrgnummerEllerLand",props:{orgNummerErValgfritt:{required:!0,tsType:{name:"boolean"},description:""},registrertINorge:{required:!0,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:""}}};const $=({egenNæringFom:i,egenNæringTom:a,varigEndring:r})=>{const e=R(),d=e.formatMessage({id:"egenNæring.varigEndringBeskrivelse.label"});return n.jsxs(n.Fragment,{children:[n.jsxs(c,{name:"hattVarigEndringAvNæringsinntektSiste4Kalenderår",label:e.formatMessage({id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringHattVarigEndringDeSiste4Årene.påkrevd"}))],children:[n.jsx(g,{value:!0,children:n.jsx(t,{id:"ja"})}),n.jsx(g,{value:!1,children:n.jsx(t,{id:"nei"})})]}),n.jsx(w,{header:e.formatMessage({id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info.åpneLabel"}),children:n.jsx(D,{children:n.jsx(t,{id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info"})})}),r&&n.jsxs(n.Fragment,{children:[n.jsx(M,{name:"varigEndringDato",label:e.formatMessage({id:"egenNæring.egenNæringVarigEndringDato"}),validate:[s(e.formatMessage({id:"valideringsfeil.varigEndringDato.påkrevd"})),h(e.formatMessage({id:"valideringsfeil.varigEndringDato.gyldigDato"})),I(e.formatMessage({id:"valideringsfeil.varigEndringDato.erIFremtiden"})),De(e.formatMessage({id:"valideringsfeil.varigEndringDato.mindreEnn4ÅrSiden"}),K),b(e.formatMessage({id:"valideringsfeil.varigEndringDato.førFraDato"}),i),y(e.formatMessage({id:"valideringsfeil.varigEndringDato.etterTilDato"}),a)],maxDate:v(),minDate:i}),n.jsx(k,{name:"varigEndringInntektEtterEndring",label:e.formatMessage({id:"egenNæring.egenNæringVarigEndringInntektEtterEndring"}),description:e.formatMessage({id:"egenNæring.egenNæringVarigEndringInntektEtterEndring.description"}),validate:[s(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.påkrevd"})),A(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.forLang"}),9),H(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.ugyldigFormat"})),J(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.mindreEnnNull"}),0)]}),n.jsx(ce,{name:"varigEndringBeskrivelse",label:d,minLength:G,maxLength:B,validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringVarigEndringBeskrivelse.påkrevd"})),A(e.formatMessage({id:"valideringsfeil.egenNæringVarigEndringBeskrivelse.forLang"}),B),Ie(e.formatMessage({id:"valideringsfeil.egenNæringVarigEndringBeskrivelse.forKort"}),G)]})]})]})};$.__docgenInfo={description:"",methods:[],displayName:"VarigEndringSpørsmål",props:{egenNæringFom:{required:!0,tsType:{name:"string"},description:""},egenNæringTom:{required:!0,tsType:{name:"string"},description:""},varigEndring:{required:!0,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:""}}};const Ce=(i,a,r)=>{const e=je(a,i);if(C(i,e,r.harJobbetSomFrilans,r.harJobbetSomSelvstendigNæringsdrivende))if(e.length===0){const o=r.harJobbetSomFrilans?Ae:ye;return{nextRoute:x.SKJEMA,nextTilretteleggingId:o}}else return{nextRoute:x.SKJEMA,nextTilretteleggingId:e[0].arbeidsgiverId};return{nextRoute:x.VELG_ARBEID}},we=(i,a,r)=>{const e=i.harHattArbeidIUtlandet?x.ARBEID_I_UTLANDET:void 0;return e?{nextRoute:e}:Ce(a,r,i)},P=i=>fe(i)?!i||v(i).startOf("day").isAfter(K,"day"):!0,He=(i,a)=>r=>!a&&!r?i.formatMessage({id:"valideringsfeil.egenNæringNavn.påkrevd"}):r&&r.length>100?i.formatMessage({id:"valideringsfeil.egenNæringNavn.forLang"}):null,Je=({mellomlagreSøknadOgNaviger:i,avbrytSøknad:a,arbeidsforhold:r})=>{const e=R(),d=xe(r),o=ke(i,r),U=E(m.EGEN_NÆRING),j=V(E(m.INNTEKTSINFORMASJON)),L=V(E(m.OM_BARNET)),Y=E(m.TILRETTELEGGINGER),W=T(m.EGEN_NÆRING),X=T(m.TILRETTELEGGINGER),z=T(m.VALGT_TILRETTELEGGING_ID),Q=p=>{if(W(p),C(L.termindato,r,j.harJobbetSomFrilans,j.harJobbetSomSelvstendigNæringsdrivende)){const te=[Le(Y||[],p)];X(te)}const{nextRoute:re,nextTilretteleggingId:ae}=we(j,L.termindato,r);return z(ae),o.goToNextStep(re)},l=ue({shouldUnregister:!0,defaultValues:U}),_=e.formatMessage({id:"egenNæring.navnPåNæring"}),S=l.watch("næringstype"),u=l.watch("navnPåNæringen"),N=l.watch("fomDato"),O=l.watch("tomDato"),Z=l.watch("registrertINorge"),ee=l.watch("pågående"),ne=l.watch("hattVarigEndringAvNæringsinntektSiste4Kalenderår"),ie=l.watch("harBlittYrkesaktivILøpetAvDeTreSisteFerdigliknedeÅrene"),F=S===f.FISKER?`${_} ${e.formatMessage({id:"valgfritt"})}`:_;return n.jsx(ge,{bannerTitle:e.formatMessage({id:"søknad.pageheading"}),onCancel:a,steps:d,onContinueLater:o.fortsettSøknadSenere,onStepChange:o.goToNextStep,children:n.jsx(pe,{formMethods:l,onSubmit:Q,children:n.jsxs(de,{gap:"10",children:[n.jsx(Ee,{}),n.jsx(D,{children:n.jsx(t,{id:"harValgfrieFelt"})}),n.jsxs(c,{name:"næringstype",label:e.formatMessage({id:"egenNæring.næringstype"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringType.påkrevd"}))],children:[n.jsx(g,{value:f.DAGMAMMA,children:n.jsx(t,{id:"egenNæring.næringstype.dagmamma"})}),n.jsx(g,{value:f.FISKER,children:n.jsx(t,{id:"egenNæring.næringstype.fiske"})}),n.jsx(g,{value:f.JORDBRUK,children:n.jsx(t,{id:"egenNæring.næringstype.jordbrukSkogbruk"})}),n.jsx(g,{value:f.ANNET,children:n.jsx(t,{id:"egenNæring.næringstype.annen"})})]}),n.jsx(k,{name:"navnPåNæringen",label:F,maxLength:100,validate:[He(e,S===f.FISKER),be(p=>e.formatMessage({id:"valideringsfeil.fritekst.kanIkkeInneholdeTegn"},{feltNavn:F,ugyldigeTegn:p}))],shouldReplaceInvisibleChars:!0}),n.jsxs(c,{name:"registrertINorge",label:e.formatMessage({id:"egenNæring.erNæringenRegistrertINorge"},{navnPåNæringen:u}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringRegistrertINorge.påkrevd"}))],children:[n.jsx(g,{value:!0,children:n.jsx(t,{id:"ja"})}),n.jsx(g,{value:!1,children:n.jsx(t,{id:"nei"})})]}),n.jsx(q,{orgNummerErValgfritt:S===f.FISKER,registrertINorge:Z}),n.jsx(M,{name:"fomDato",label:e.formatMessage({id:"egenNæring.næring.fom"},{navnPåNæringen:u}),validate:[s(e.formatMessage({id:"valideringsfeil.fraOgMedDato.påkrevd"})),h(e.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"})),I(e.formatMessage({id:"valideringsfeil.fraOgMedDato.erIFremtiden"})),y(e.formatMessage({id:"valideringsfeil.fraOgMedDato.førTilDato"}),O)],maxDate:v(),minDate:oe}),n.jsxs(c,{name:"pågående",label:e.formatMessage({id:"egenNæring.næring.pågående"},{navnPåNæringen:u}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringPågående.påkrevd"}))],children:[n.jsx(g,{value:!0,children:n.jsx(t,{id:"ja"})}),n.jsx(g,{value:!1,children:n.jsx(t,{id:"nei"})})]}),ee===!1&&n.jsx(M,{name:"tomDato",label:e.formatMessage({id:"egenNæring.næring.tom"},{navnPåNæringen:u}),description:e.formatMessage({id:"egenNæring.næring.tom.description"}),validate:[s(e.formatMessage({id:"valideringsfeil.tilOgMedDato.påkrevd"})),h(e.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"})),y(e.formatMessage({id:"valideringsfeil.tilOgMedDato.erIFremtiden"}),v().add(9,"month")),b(e.formatMessage({id:"valideringsfeil.tilOgMedDato.egenNæring.merEnn5MånederSiden"}),le()),b(e.formatMessage({id:"valideringsfeil.tilOgMedDato.etterFraDato"}),N)],maxDate:v().add(9,"month"),minDate:Re(N,ve)}),!P(N)&&n.jsx($,{varigEndring:ne,egenNæringFom:N,egenNæringTom:O}),n.jsx(k,{name:"næringsinntekt",label:e.formatMessage({id:"egenNæring.næringsinntekt"}),description:e.formatMessage({id:"egenNæring.næringsinntekt.description"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringInntekt.påkrevd"})),A(e.formatMessage({id:"valideringsfeil.næringsinntekt.forLang"}),9),H(e.formatMessage({id:"valideringsfeil.næringsinntekt.ugyldigFormat"})),J(e.formatMessage({id:"valideringsfeil.næringsinntekt.mindreEnnNull"}),0)]}),n.jsx(w,{header:e.formatMessage({id:"egenNæring.næringsinntekt.info.apneLabel"}),children:n.jsx(D,{children:n.jsx(t,{id:"egenNæring.næringsinntekt.info"})})}),n.jsxs(c,{name:"harBlittYrkesaktivILøpetAvDeTreSisteFerdigliknedeÅrene",label:e.formatMessage({id:"egenNæring.blittYrkesaktivSiste3År"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringBlittYrkesaktivDe3SisteÅrene.påkrevd"}))],children:[n.jsx(g,{value:!0,children:n.jsx(t,{id:"ja"})}),n.jsx(g,{value:!1,children:n.jsx(t,{id:"nei"})})]}),P(N)&&ie===!0&&n.jsx(M,{name:"oppstartsdato",label:e.formatMessage({id:"egenNæring.yrkesaktivDato"}),validate:[s(e.formatMessage({id:"valideringsfeil.yrkesaktiv.påkrevd"})),h(e.formatMessage({id:"valideringsfeil.yrkesaktiv.gyldigDato"})),I(e.formatMessage({id:"valideringsfeil.yrkesaktiv.erIFremtiden"}))],maxDate:v()}),n.jsx(me,{variant:"info",children:e.formatMessage({id:"egenNæring.veileder"})}),n.jsx(Me,{goToPreviousStep:o.goToPreviousDefaultStep})]})})})};Je.__docgenInfo={description:"",methods:[],displayName:"EgenNæringStep"};export{Je as E};
