import{f as R,e as V,r as _,au as M,j as e,Y as q,av as P,aw as w,Z as k,ax as C,b0 as O,aB as y,a0 as S,a1 as B,a2 as H,ay as $}from"./iframe-BFTWslWH.js";import{e as T,C as v,d as z}from"./routes-CGjaG-DJ.js";import{e as J,f as K,k as U,g as X,n as Y,F as E}from"./useSvpNavigator-dS4qP0JC.js";import{k as Z}from"./index-BENdtROM.js";import{S as Q,A as W}from"./attachmentType-DJ1vFT-G.js";import{B as ee}from"./Bedriftsbanner-BHhoAWDM.js";const re=(n,i)=>async r=>{const g=new FormData;g.append("id",r.id),g.append("vedlegg",r.file,r.filename);const t=await Z.post(`${n}/rest/storage/${i}/vedlegg`,{body:g});return{headers:{location:t.headers.get("Location")},data:await t.text()}},te=40,ae=(n,i)=>i===y?n.formatMessage({id:"skjema.vedlegg.label.selvstendig"}):i===E?n.formatMessage({id:"skjema.vedlegg.label.frilanser"}):n.formatMessage({id:"skjema.vedlegg.label.arbeidsgiver"}),se=({mellomlagreSøknadOgNaviger:n,avbrytSøknad:i,arbeidsforhold:r,maxAntallVedlegg:g=te})=>{const t=R(),b=J(r),d=K(n,r),j=U(),a=V(j.tilretteleggingId),o=T(v.TILRETTELEGGINGER_VEDLEGG),c=T(v.VALGTE_ARBEIDSFORHOLD),h=z(v.TILRETTELEGGINGER_VEDLEGG),[x,A]=_.useState(!1),G=s=>{if(s.vedlegg.length===0)return l.setError("vedlegg",{message:t.formatMessage({id:"SkjemaSteg.MinstEttDokument"})}),Promise.resolve();const u=o?Object.keys(o).filter(p=>p!==a).reduce((p,D)=>p+o[D].length,0):0,F=s.vedlegg?s.vedlegg.length:0,f=u+F-g;return f>0?(l.setError("vedlegg",{message:t.formatMessage({id:"skjema.maks40Filer"},{antallVedlegg:f})}),Promise.resolve()):(h({...o,[a]:s.vedlegg}),d.goToNextDefaultStep())},m={vedlegg:o?o[a]:void 0},l=M({defaultValues:m}),L=(s,u)=>{A(u),l.setValue("vedlegg",s,{shouldDirty:!0,shouldTouch:!0}),u||l.clearErrors("vedlegg")},I=X(a,r),N=Y(t,a,r);return e.jsx(q,{pageTitle:t.formatMessage({id:"søknad.pageheading"}),children:e.jsx(P,{onCancel:i,steps:b,onContinueLater:d.fortsettSøknadSenere,onStepChange:d.goToStep,noFieldsRequired:!0,children:e.jsx(w,{formMethods:l,onSubmit:G,children:e.jsxs(k,{gap:"10",children:[e.jsx(C,{}),c&&c.length>1&&e.jsx(ee,{arbeidsforholdType:I,arbeidsforholdNavn:N}),e.jsx(k,{gap:"4",children:e.jsx(O,{label:ae(t,a),description:a===E||a===y?e.jsx(S,{id:"skjema.vedlegg.description.frilansSN"}):e.jsx(S,{id:"skjema.vedlegg.description.arbeidsgiver",values:{a:s=>e.jsx(B,{rel:"noopener noreferrer",href:H.arbeidstilsynetSkjema,target:"_blank",children:s})}}),attachmentType:W.TILRETTELEGGING,skjemanummer:Q.SKJEMA_FOR_TILRETTELEGGING_OG_OMPLASSERING,existingAttachments:m==null?void 0:m.vedlegg,updateAttachments:L,saveAttachment:re("./","svangerskapspenger")})}),e.jsx($,{goToPreviousStep:d.goToPreviousDefaultStep,isDisabledAndLoading:x})]})})})})};se.__docgenInfo={description:"",methods:[],displayName:"SkjemaSteg",props:{mellomlagreSøknadOgNaviger:{required:!0,tsType:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},avbrytSøknad:{required:!0,tsType:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},arbeidsforhold:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    arbeidsgiverId: string;
    arbeidsgiverIdType: string;
    arbeidsgiverNavn: string;
    stillingsprosent: number;
    fom: string;
    tom?: string;
}`,signature:{properties:[{key:"arbeidsgiverId",value:{name:"string",required:!0}},{key:"arbeidsgiverIdType",value:{name:"string",required:!0}},{key:"arbeidsgiverNavn",value:{name:"string",required:!0}},{key:"stillingsprosent",value:{name:"number",required:!0}},{key:"fom",value:{name:"string",required:!0}},{key:"tom",value:{name:"string",required:!1}}]}}],raw:"Arbeidsforhold[]"},description:""},maxAntallVedlegg:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"40",computed:!1}}}};export{se as S};
