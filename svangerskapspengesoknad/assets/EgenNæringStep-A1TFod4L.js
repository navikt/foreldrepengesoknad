import{j as n}from"./tslib.es6-C_-gbNBy.js";import{u as R,O as ge,M as t,d as D,e as v,a2 as C,c as de,V as oe,k as le,R as me,A as fe,j as ve,U as Ne}from"./ByttBrowserModal-DBe_H0Dd.js";import{T as k,d as ce,R as c,a as g,D as M,e as ue,u as pe,F as Ee,E as Me,S as he}from"./ErrorSummaryHookForm-CW2jdrtX.js";import"./index-CTjT7uj6.js";import{f as xe,u as ke,a as je,n as V,s as K,g as Te}from"./useSvpNavigator-B0jGCtvG.js";import{n as Se,i as s,o as De,a as h,b as I,g as Ie,e as b,k as y,h as A,p as be,f as ye}from"./dateFormValidation-DqgzgaF8.js";import{u as E,C as m,b as S,a as x}from"./routes-BKH065He.js";import{N as f,e as Ae}from"./EgenNæring-DdBVG6ty.js";import{f as Re}from"./Frilans-B_RcwIAw.js";import{a as G,T as B,g as _e}from"./validationUtils-UmtESEQC.js";import{R as H,o as w}from"./amplitudeLoggerUtils-DWSIHAqD.js";import{b as Oe}from"./velgArbeidFormUtils-XlIkFml9.js";const Le=/^[0-9]*$/,Fe=i=>{let a=2,r=0;for(let d=i.length-2;d>=0;--d)r+=parseInt(i.charAt(d),10)*a,++a>7&&(a=2);const e=11-r%11;return e===11?0:e},Ve=i=>Le.test(i)&&i.length===9,Ge=i=>i.startsWith("8")||i.startsWith("9"),Be=i=>!i||Ve(i)===!1||Ge(i)===!1||i==="999999999"?!1:Fe(i)===parseInt(i.charAt(8),10),Pe=/^\d+([,.]\d+)?$/,Ce=i=>Pe.test(i.toString()),J=i=>a=>Se(a)||Ce(a)?null:i,q=(i,a)=>r=>r>=a?null:i,Ke=(i,a)=>r=>{const e=(r||"").trim();if(!a&&!e)return i.formatMessage({id:"valideringsfeil.egenNæringOrgnr.påkrevd"});if(e.length>0&&xe(e))return i.formatMessage({id:"valideringsfeil.egenNæringOrgnr.inneholderMellomrom"});if(e.length>0&&!Be(e))return i.formatMessage({id:"valideringsfeil.egenNæringOrgnr.ugyldigFormat"})},U=({orgNummerErValgfritt:i,registrertINorge:a})=>{const r=R(),e=r.formatMessage({id:"egenNæring.orgnr"}),d=i?`${e} ${r.formatMessage({id:"valgfritt"})}`:e;return n.jsxs(n.Fragment,{children:[a&&n.jsx(k,{name:"organisasjonsnummer",label:d,validate:[Ke(r,i)]}),a===!1&&n.jsx(ce,{name:"registrertILand",label:r.formatMessage({id:"egenNæring.registrertILand"}),validate:[s(r.formatMessage({id:"valideringsfeil.egenNæringLand.påkrevd"})),De(r.formatMessage({id:"valideringsfeil.egenNæringLand.ikkeNorge"}),"NO")],children:ge().map(o=>n.jsx("option",{value:o[0],children:o[1]},o[0]))})]})};U.__docgenInfo={description:"",methods:[],displayName:"OrgnummerEllerLand",props:{orgNummerErValgfritt:{required:!0,tsType:{name:"boolean"},description:""},registrertINorge:{required:!0,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:""}}};const $=({egenNæringFom:i,egenNæringTom:a,varigEndring:r})=>{const e=R(),d=e.formatMessage({id:"egenNæring.varigEndringBeskrivelse.label"});return n.jsxs(n.Fragment,{children:[n.jsxs(c,{name:"hattVarigEndringAvNæringsinntektSiste4Kalenderår",label:e.formatMessage({id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringHattVarigEndringDeSiste4Årene.påkrevd"}))],children:[n.jsx(g,{value:!0,children:n.jsx(t,{id:"ja"})}),n.jsx(g,{value:!1,children:n.jsx(t,{id:"nei"})})]}),n.jsx(H,{onOpenChange:w("Varig_endring"),header:e.formatMessage({id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info.åpneLabel"}),children:n.jsx(D,{children:n.jsx(t,{id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info"})})}),r&&n.jsxs(n.Fragment,{children:[n.jsx(M,{name:"varigEndringDato",label:e.formatMessage({id:"egenNæring.egenNæringVarigEndringDato"}),validate:[s(e.formatMessage({id:"valideringsfeil.varigEndringDato.påkrevd"})),h(e.formatMessage({id:"valideringsfeil.varigEndringDato.gyldigDato"})),I(e.formatMessage({id:"valideringsfeil.varigEndringDato.erIFremtiden"})),Ie(e.formatMessage({id:"valideringsfeil.varigEndringDato.mindreEnn4ÅrSiden"}),C),b(e.formatMessage({id:"valideringsfeil.varigEndringDato.førFraDato"}),i),y(e.formatMessage({id:"valideringsfeil.varigEndringDato.etterTilDato"}),a)],maxDate:v(),minDate:i}),n.jsx(k,{name:"varigEndringInntektEtterEndring",label:e.formatMessage({id:"egenNæring.egenNæringVarigEndringInntektEtterEndring"}),description:e.formatMessage({id:"egenNæring.egenNæringVarigEndringInntektEtterEndring.description"}),validate:[s(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.påkrevd"})),A(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.forLang"}),9),J(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.ugyldigFormat"})),q(e.formatMessage({id:"valideringsfeil.varigEndringInntekt.mindreEnnNull"}),0)]}),n.jsx(ue,{name:"varigEndringBeskrivelse",label:d,minLength:G,maxLength:B,validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringVarigEndringBeskrivelse.påkrevd"})),A(e.formatMessage({id:"valideringsfeil.egenNæringVarigEndringBeskrivelse.forLang"}),B),be(e.formatMessage({id:"valideringsfeil.egenNæringVarigEndringBeskrivelse.forKort"}),G)]})]})]})};$.__docgenInfo={description:"",methods:[],displayName:"VarigEndringSpørsmål",props:{egenNæringFom:{required:!0,tsType:{name:"string"},description:""},egenNæringTom:{required:!0,tsType:{name:"string"},description:""},varigEndring:{required:!0,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:""}}};const He=(i,a,r)=>{const e=Te(a,i);if(K(i,e,r.harJobbetSomFrilans,r.harJobbetSomSelvstendigNæringsdrivende))if(e.length===0){const o=r.harJobbetSomFrilans?Re:Ae;return{nextRoute:x.SKJEMA,nextTilretteleggingId:o}}else return{nextRoute:x.SKJEMA,nextTilretteleggingId:e[0].arbeidsgiverId};return{nextRoute:x.VELG_ARBEID}},we=(i,a,r)=>{const e=i.harHattArbeidIUtlandet?x.ARBEID_I_UTLANDET:void 0;return e?{nextRoute:e}:He(a,r,i)},P=i=>ve(i)?!i||v(i).startOf("day").isAfter(C,"day"):!0,Je=(i,a)=>r=>!a&&!r?i.formatMessage({id:"valideringsfeil.egenNæringNavn.påkrevd"}):r&&r.length>100?i.formatMessage({id:"valideringsfeil.egenNæringNavn.forLang"}):null,qe=({mellomlagreSøknadOgNaviger:i,avbrytSøknad:a,arbeidsforhold:r})=>{const e=R(),d=ke(r),o=je(i,r),Y=E(m.EGEN_NÆRING),j=V(E(m.INNTEKTSINFORMASJON)),_=V(E(m.OM_BARNET)),W=E(m.TILRETTELEGGINGER),X=S(m.EGEN_NÆRING),z=S(m.TILRETTELEGGINGER),Q=S(m.VALGT_TILRETTELEGGING_ID),Z=p=>{if(X(p),K(_.termindato,r,j.harJobbetSomFrilans,j.harJobbetSomSelvstendigNæringsdrivende)){const se=[Oe(W||[],p)];z(se)}const{nextRoute:ae,nextTilretteleggingId:te}=we(j,_.termindato,r);return Q(te),o.goToNextStep(ae)},l=pe({shouldUnregister:!0,defaultValues:Y}),O=e.formatMessage({id:"egenNæring.navnPåNæring"}),T=l.watch("næringstype"),u=l.watch("navnPåNæringen"),N=l.watch("fomDato"),L=l.watch("tomDato"),ee=l.watch("registrertINorge"),ne=l.watch("pågående"),ie=l.watch("hattVarigEndringAvNæringsinntektSiste4Kalenderår"),re=l.watch("harBlittYrkesaktivILøpetAvDeTreSisteFerdigliknedeÅrene"),F=T===f.FISKER?`${O} ${e.formatMessage({id:"valgfritt"})}`:O;return n.jsx(de,{bannerTitle:e.formatMessage({id:"søknad.pageheading"}),onCancel:a,steps:d,onContinueLater:o.fortsettSøknadSenere,onStepChange:o.goToNextStep,children:n.jsx(Ee,{formMethods:l,onSubmit:Z,children:n.jsxs(oe,{gap:"10",children:[n.jsx(Me,{}),n.jsx(D,{children:n.jsx(t,{id:"harValgfrieFelt"})}),n.jsxs(c,{name:"næringstype",label:e.formatMessage({id:"egenNæring.næringstype"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringType.påkrevd"}))],children:[n.jsx(g,{value:f.DAGMAMMA,children:n.jsx(t,{id:"egenNæring.næringstype.dagmamma"})}),n.jsx(g,{value:f.FISKER,children:n.jsx(t,{id:"egenNæring.næringstype.fiske"})}),n.jsx(g,{value:f.JORDBRUK,children:n.jsx(t,{id:"egenNæring.næringstype.jordbrukSkogbruk"})}),n.jsx(g,{value:f.ANNET,children:n.jsx(t,{id:"egenNæring.næringstype.annen"})})]}),n.jsx(k,{name:"navnPåNæringen",label:F,maxLength:100,validate:[Je(e,T===f.FISKER),ye(p=>e.formatMessage({id:"valideringsfeil.fritekst.kanIkkeInneholdeTegn"},{feltNavn:F,ugyldigeTegn:p}))],shouldReplaceInvisibleChars:!0}),n.jsxs(c,{name:"registrertINorge",label:e.formatMessage({id:"egenNæring.erNæringenRegistrertINorge"},{navnPåNæringen:u}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringRegistrertINorge.påkrevd"}))],children:[n.jsx(g,{value:!0,children:n.jsx(t,{id:"ja"})}),n.jsx(g,{value:!1,children:n.jsx(t,{id:"nei"})})]}),n.jsx(U,{orgNummerErValgfritt:T===f.FISKER,registrertINorge:ee}),n.jsx(M,{name:"fomDato",label:e.formatMessage({id:"egenNæring.næring.fom"},{navnPåNæringen:u}),validate:[s(e.formatMessage({id:"valideringsfeil.fraOgMedDato.påkrevd"})),h(e.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"})),I(e.formatMessage({id:"valideringsfeil.fraOgMedDato.erIFremtiden"})),y(e.formatMessage({id:"valideringsfeil.fraOgMedDato.førTilDato"}),L)],maxDate:v(),minDate:le}),n.jsxs(c,{name:"pågående",label:e.formatMessage({id:"egenNæring.næring.pågående"},{navnPåNæringen:u}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringPågående.påkrevd"}))],children:[n.jsx(g,{value:!0,children:n.jsx(t,{id:"ja"})}),n.jsx(g,{value:!1,children:n.jsx(t,{id:"nei"})})]}),ne===!1&&n.jsx(M,{name:"tomDato",label:e.formatMessage({id:"egenNæring.næring.tom"},{navnPåNæringen:u}),description:e.formatMessage({id:"egenNæring.næring.tom.description"}),validate:[s(e.formatMessage({id:"valideringsfeil.tilOgMedDato.påkrevd"})),h(e.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"})),y(e.formatMessage({id:"valideringsfeil.tilOgMedDato.erIFremtiden"}),v().add(9,"month")),b(e.formatMessage({id:"valideringsfeil.tilOgMedDato.egenNæring.merEnn5MånederSiden"}),me()),b(e.formatMessage({id:"valideringsfeil.tilOgMedDato.etterFraDato"}),N)],maxDate:v().add(9,"month"),minDate:_e(N,Ne)}),!P(N)&&n.jsx($,{varigEndring:ie,egenNæringFom:N,egenNæringTom:L}),n.jsx(k,{name:"næringsinntekt",label:e.formatMessage({id:"egenNæring.næringsinntekt"}),description:e.formatMessage({id:"egenNæring.næringsinntekt.description"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringInntekt.påkrevd"})),A(e.formatMessage({id:"valideringsfeil.næringsinntekt.forLang"}),9),J(e.formatMessage({id:"valideringsfeil.næringsinntekt.ugyldigFormat"})),q(e.formatMessage({id:"valideringsfeil.næringsinntekt.mindreEnnNull"}),0)]}),n.jsx(H,{onOpenChange:w("Mer_om_næringsresultat"),header:e.formatMessage({id:"egenNæring.næringsinntekt.info.apneLabel"}),children:n.jsx(D,{children:n.jsx(t,{id:"egenNæring.næringsinntekt.info"})})}),n.jsxs(c,{name:"harBlittYrkesaktivILøpetAvDeTreSisteFerdigliknedeÅrene",label:e.formatMessage({id:"egenNæring.blittYrkesaktivSiste3År"}),validate:[s(e.formatMessage({id:"valideringsfeil.egenNæringBlittYrkesaktivDe3SisteÅrene.påkrevd"}))],children:[n.jsx(g,{value:!0,children:n.jsx(t,{id:"ja"})}),n.jsx(g,{value:!1,children:n.jsx(t,{id:"nei"})})]}),P(N)&&re===!0&&n.jsx(M,{name:"oppstartsdato",label:e.formatMessage({id:"egenNæring.yrkesaktivDato"}),validate:[s(e.formatMessage({id:"valideringsfeil.yrkesaktiv.påkrevd"})),h(e.formatMessage({id:"valideringsfeil.yrkesaktiv.gyldigDato"})),I(e.formatMessage({id:"valideringsfeil.yrkesaktiv.erIFremtiden"}))],maxDate:v()}),n.jsx(fe,{variant:"info",children:e.formatMessage({id:"egenNæring.veileder"})}),n.jsx(he,{goToPreviousStep:o.goToPreviousDefaultStep})]})})})};qe.__docgenInfo={description:"",methods:[],displayName:"EgenNæringStep"};export{qe as E};
