import{u as T,j as e}from"./index-f7e8eec7.js";import{b as C,c as V,d as B,T as G,D as h,R as H,a as M,u as P,F as J,E as w,S as K}from"./ErrorSummaryHookForm-b3689071.js";import{u as c,C as l,b as A,c as q,a as u}from"./routes-999d7714.js";import{V as j,H as x,m as $,d as b,c as X,o as z,j as W,p as Y}from"./VStack-1b7d0c8f.js";import"./index-f1f2c4b1.js";import{i as g,o as Q,p as Z,b as D,c as ee,e as S,q as y,u as ae,a as te,n as U,g as re,s as ie}from"./useSvpNavigator-7f6afa8c.js";import{e as se}from"./EgenNæring-1a3aa973.js";import{f as de}from"./Frilans-f45bffb0.js";import{H as ne,P as oe}from"./HorizontalLine-a53a7446.js";import{g as le}from"./validationUtils-9ec7b8ab.js";import{a as _,F as v}from"./Button-07c65ca4.js";import{X as ge}from"./Modal-d372bfb0.js";const E={fom:"",tom:"",pågående:void 0,arbeidsgiverNavn:"",land:""},I=()=>{const i=W("arbeidIUtlandet"),a=T(),r=C(),{fields:s,append:m,remove:d}=V({name:"arbeidIUtlandet",control:r.control}),o=r.watch("arbeidIUtlandet"),p=a.formatMessage({id:"arbeidIUtlandet.navn"});return e.jsxs(e.Fragment,{children:[s.map((f,t)=>e.jsxs(j,{gap:"10",children:[e.jsxs(x,{justify:"space-between",children:[e.jsx(B,{name:`arbeidIUtlandet.${t}.land`,style:{width:"var(--app-text-input-width)"},label:a.formatMessage({id:"arbeidIUtlandet.land"}),validate:[g(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetLand.påkrevd"}))],children:$().map(n=>e.jsx("option",{value:n[0],children:n[1]},n[0]))}),t!==0&&e.jsx(_,{className:i.element("delete"),icon:e.jsx(ge,{"aria-hidden":!0}),type:"button",variant:"tertiary",onClick:()=>d(t),children:e.jsx(v,{id:"perioder.varierende.slett"})})]}),e.jsx(G,{name:`arbeidIUtlandet.${t}.arbeidsgiverNavn`,style:{width:"var(--app-text-input-width)"},label:p,validate:[g(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetNavn.påkrevd"})),Q(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetNavn.forLang"}),100),Z(n=>a.formatMessage({id:"valideringsfeil.fritekst.kanIkkeInneholdeTegn"},{feltNavn:p,ugyldigeTegn:n}))],maxLength:100}),e.jsx(h,{name:`arbeidIUtlandet.${t}.fom`,label:a.formatMessage({id:"arbeidIUtlandet.fom"}),validate:[g(a.formatMessage({id:"valideringsfeil.fraOgMedDato.påkrevd"})),D(a.formatMessage({id:"valideringsfeil.fraOgMedDato.gyldigDato"})),ee(a.formatMessage({id:"valideringsfeil.fraOgMedDato.erIFremtiden"})),S(a.formatMessage({id:"valideringsfeil.fraOgMedDato.førTilDato"}),o[t].tom)],maxDate:b().toDate(),minDate:X}),e.jsxs(H,{name:`arbeidIUtlandet.${t}.pågående`,label:e.jsx(v,{id:"egenNæring.næring.pågående"}),validate:[g(a.formatMessage({id:"valideringsfeil.arbeidIUtlandetPågående.påkrevd"}))],children:[e.jsx(M,{value:!0,children:"Ja"}),e.jsx(M,{value:!1,children:"Nei"})]}),o[t].pågående===!1&&e.jsx(h,{name:`arbeidIUtlandet.${t}.tom`,label:a.formatMessage({id:"arbeidIUtlandet.tom"}),description:a.formatMessage({id:"egenNæring.arbeid.tom.description"}),validate:[g(a.formatMessage({id:"valideringsfeil.tilOgMedDato.påkrevd"})),D(a.formatMessage({id:"valideringsfeil.tilOgMedDato.gyldigDato"})),S(a.formatMessage({id:"valideringsfeil.tilOgMedDato.erIFremtiden"}),b().add(9,"month")),y(a.formatMessage({id:"valideringsfeil.tilOgMedDato.arbeidIUtlandet.merEnn5MånederSiden"}),z()),y(a.formatMessage({id:"valideringsfeil.tilOgMedDato.etterFraDato"}),o[t].fom)],maxDate:b().add(9,"month").toDate(),minDate:le(o[t].fom,Y)}),t<s.length-1&&e.jsx(ne,{})]},f.id)),e.jsx(x,{children:e.jsx(_,{icon:e.jsx(oe,{"aria-hidden":!0}),type:"button",variant:"secondary",onClick:()=>m(E),children:e.jsx(v,{id:"arbeidIUtlandet.tittel.ny"})})})]})};try{I.displayName="ArbeidIUtlandetFieldArray",I.__docgenInfo={description:"",displayName:"ArbeidIUtlandetFieldArray",props:{}}}catch{}const me=(i,a,r)=>{const s=re(a,i);if(ie(i,s,r.harJobbetSomFrilans,r.harJobbetSomSelvstendigNæringsdrivende))if(s.length===0){const d=r.harJobbetSomFrilans?de:se;return{nextRoute:u.SKJEMA,nextTilretteleggingId:d}}else return{nextRoute:u.SKJEMA,nextTilretteleggingId:s[0].arbeidsgiverId};return{nextRoute:u.VELG_ARBEID}},N=({mellomlagreSøknadOgNaviger:i,avbrytSøknad:a,arbeidsforhold:r})=>{const s=T(),m=ae(r),d=te(i,r),o=c(l.ARBEID_I_UTLANDET),p=U(c(l.OM_BARNET)),f=U(c(l.INNTEKTSINFORMASJON)),t=A(l.ARBEID_I_UTLANDET),n=A(l.VALGT_TILRETTELEGGING_ID),k=O=>{t(O);const{nextRoute:R,nextTilretteleggingId:L}=me(p.termindato,r,f);return n(L),d.goToNextStep(R)},F=P({shouldUnregister:!0,defaultValues:o||{arbeidIUtlandet:[E]}});return e.jsx(q,{bannerTitle:s.formatMessage({id:"søknad.pageheading"}),onCancel:a,steps:m,onContinueLater:d.fortsettSøknadSenere,children:e.jsx(J,{formMethods:F,onSubmit:k,children:e.jsxs(j,{gap:"10",children:[e.jsx(w,{}),e.jsx(I,{}),e.jsx(K,{goToPreviousStep:d.goToPreviousDefaultStep})]})})})};try{N.displayName="ArbeidIUtlandetStep",N.__docgenInfo={description:"",displayName:"ArbeidIUtlandetStep",props:{mellomlagreSøknadOgNaviger:{defaultValue:null,description:"",name:"mellomlagreSøknadOgNaviger",required:!0,type:{name:"() => Promise<void>"}},avbrytSøknad:{defaultValue:null,description:"",name:"avbrytSøknad",required:!0,type:{name:"() => Promise<void>"}},arbeidsforhold:{defaultValue:null,description:"",name:"arbeidsforhold",required:!0,type:{name:"Arbeidsforhold[]"}}}}}catch{}export{N as A};
