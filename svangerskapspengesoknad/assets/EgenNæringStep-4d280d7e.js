import{u as _,j as r,F as s,B as V}from"./Modal-5f6515f6.js";import{g as se,e as G,m as de}from"./egenNæringFormUtils-aa1ac1bc.js";import{X as le,g as d,S as oe,l as H,m as q,Y as Ne,u as ue,Z as u,U as ve,_ as me,f as fe,w as ce,$ as pe,a0 as Ee}from"./useFortsettSøknadSenere-bfd4ef8d.js";import{i as n,c as T,l as O,p as m,d as E,q as w,s as ke,v as C,t as K,u as xe,R as l,a as U,I as b,S as he,n as Se,r as De}from"./fridagerUtils-c1457aac.js";import"./index-f1f2c4b1.js";import"./_baseToString-375081cd.js";import"./_createSet-53ab95fd.js";import{f as je,d as Ie}from"./dateUtils-8841aa4b.js";import{R as p,D as j,T as I,a as Te,b as ye,u as Ve,F as be,E as Re,S as _e}from"./ErrorSummaryHookForm-31006c92.js";import{u as S,C as N,a as D}from"./routes-345f7acb.js";import{n as Y}from"./validation-631bcf6e.js";import{h as Oe}from"./index-0df0c4a0.js";import{V as Le}from"./VStack-f6b4d53e.js";import{A as Ae}from"./Alert-4f08e6e5.js";var a=(e=>(e.egenNæringType="egenNæringType",e.egenNæringNavn="egenNæringNavn",e.egenNæringRegistrertINorge="egenNæringRegistrertINorge",e.egenNæringOrgnr="egenNæringOrgnr",e.egenNæringLand="egenNæringLand",e.egenNæringFom="egenNæringFom",e.egenNæringTom="egenNæringTom",e.egenNæringPågående="egenNæringPågående",e.egenNæringYrkesAktivDato="egenNæringYrkesAktivDato",e.egenNæringResultat="egenNæringResultat",e.egenNæringBlittYrkesaktivDe3SisteÅrene="egenNæringBlittYrkesaktivDe3SisteÅrene",e.egenNæringHattVarigEndringDeSiste4Årene="egenNæringHattVarigEndringDeSiste4Årene",e.egenNæringVarigEndringDato="egenNæringVarigEndringDato",e.egenNæringVarigEndringInntektEtterEndring="egenNæringVarigEndringInntektEtterEndring",e.egenNæringVarigEndringBeskrivelse="egenNæringVarigEndringBeskrivelse",e))(a||{});const Me=/^\d*$/,Be=e=>Me.test(e)&&e.length===9,Pe=e=>e.charAt(0)==="8"||e.charAt(0)==="9",Fe=e=>!e||Be(e)===!1||Pe(e)===!1?!1:le(e)===parseInt(e.charAt(8),10),Ge=(e,g)=>t=>{if(!d(t))return n(e,"valideringsfeil.fraOgMedDato.påkrevd");if(!T(t))return n(e,"valideringsfeil.fraOgMedDato.gyldigDato");if(O(t))return n(e,"valideringsfeil.fraOgMedDato.erIFremtiden");if(m(g,t))return n(e,"valideringsfeil.fraOgMedDato.førTilDato")},Ye=(e,g)=>t=>{if(!d(t))return n(e,"valideringsfeil.tilOgMedDato.påkrevd");if(!T(t))return n(e,"valideringsfeil.tilOgMedDato.gyldigDato");if(oe(t,E().add(9,"month")))return n(e,"valideringsfeil.tilOgMedDato.erIFremtiden");if(m(t,w(je())))return n(e,"valideringsfeil.tilOgMedDato.egenNæring.merEnn5MånederSiden");if(m(t,g))return n(e,"valideringsfeil.tilOgMedDato.etterFraDato")},He=(e,g)=>t=>{const i=(t||"").trim();if(!g&&!d(i))return n(e,"valideringsfeil.egenNæringOrgnr.påkrevd");if(i.length>0&&ke(i))return n(e,"valideringsfeil.egenNæringOrgnr.inneholderMellomrom");if(i.length>0&&!Fe(i))return n(e,"valideringsfeil.egenNæringOrgnr.ugyldigFormat")},qe=e=>g=>{if(!d(g))return n(e,"valideringsfeil.yrkesaktiv.påkrevd");if(!T(g))return n(e,"valideringsfeil.yrkesaktiv.gyldigDato");if(O(g))return n(e,"valideringsfeil.yrkesaktiv.erIFremtiden")},we=e=>g=>{if(d(g)){if(g.length>9)return n(e,"valideringsfeil.næringsinntekt.forLang");const t=K(g);if(!t||Math.round(t)!==t)return n(e,"valideringsfeil.næringsinntekt.ugyldigFormat");if(t&&t<0)return n(e,"valideringsfeil.næringsinntekt.mindreEnnNull")}else return n(e,"valideringsfeil.egenNæringInntekt.påkrevd")},Ce=(e,g,t)=>i=>{if(!d(i))return n(e,"valideringsfeil.varigEndringDato.påkrevd");if(!T(i))return n(e,"valideringsfeil.varigEndringDato.gyldigDato");if(O(i))return n(e,"valideringsfeil.varigEndringDato.erIFremtiden");if(m(i,w(Ie)))return n(e,"valideringsfeil.varigEndringDato.mindreEnn4ÅrSiden");if(m(i,g))return n(e,"valideringsfeil.varigEndringDato.førFraDato");if(t&&d(t)&&m(t,i))return n(e,"valideringsfeil.varigEndringDato.etterTilDato")},Ke=e=>g=>{if(!d(g))return n(e,"valideringsfeil.varigEndringInntekt.påkrevd");if(g.length>9)return n(e,"valideringsfeil.varigEndringInntekt.forLang");const t=K(g);return t&&t<0?n(e,"valideringsfeil.varigEndringInntekt.mindreEnnNull"):xe(g,n(e,"valideringsfeil.varigEndringInntekt.ugyldigFormat"))},Ue=(e,g)=>t=>!d(t)||t&&t.trim()===""?n(e,"valideringsfeil.egenNæringVarigEndringBeskrivelse.påkrevd"):t.length>H?n(e,"valideringsfeil.egenNæringVarigEndringBeskrivelse.forLang"):t.length<q?n(e,"valideringsfeil.egenNæringVarigEndringBeskrivelse.forKort"):C(t,g,e),$e=(e,g,t)=>i=>!t&&!d(i)?n(e,"valideringsfeil.egenNæringNavn.påkrevd"):i&&i.length>100?n(e,"valideringsfeil.egenNæringNavn.forLang"):C(i,g,e),Je=e=>g=>{if(!d(g))return n(e,"valideringsfeil.egenNæringLand.påkrevd");if(d(g)&&g==="NO")return n(e,"valideringsfeil.egenNæringLand.ikkeNorge")},Xe=e=>g=>g===void 0?n(e,"valideringsfeil.egenNæringRegistrertINorge.påkrevd"):null,We=e=>g=>g===void 0?n(e,"valideringsfeil.egenNæringPågående.påkrevd"):null,Ze=e=>g=>g===void 0?n(e,"valideringsfeil.egenNæringBlittYrkesaktivDe3SisteÅrene.påkrevd"):null,ze=e=>g=>d(g)?null:n(e,"valideringsfeil.egenNæringType.påkrevd"),Qe=e=>g=>d(g)?null:n(e,"valideringsfeil.egenNæringHattVarigEndringDeSiste4Årene.påkrevd"),en=({egenNæringFom:e,egenNæringTom:g,varigEndring:t})=>{const i=_(),v=n(i,"egenNæring.varigEndringBeskrivelse.label");return r.jsxs(r.Fragment,{children:[r.jsxs(p,{name:a.egenNæringHattVarigEndringDeSiste4Årene,label:n(i,"egenNæring.egenNæringHattVarigEndringDeSiste4Årene"),validate:[Qe(i)],children:[r.jsx(l,{value:!0,children:r.jsx(s,{id:"ja"})}),r.jsx(l,{value:!1,children:r.jsx(s,{id:"nei"})})]}),r.jsx(U,{header:n(i,"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info.åpneLabel"),children:r.jsx(V,{children:r.jsx(s,{id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info"})})}),t&&r.jsxs(r.Fragment,{children:[r.jsx(j,{name:a.egenNæringVarigEndringDato,label:n(i,"egenNæring.egenNæringVarigEndringDato"),validate:[Ce(i,e,g)],maxDate:E().toDate(),minDate:b(e)}),r.jsx(I,{name:a.egenNæringVarigEndringInntektEtterEndring,label:n(i,"egenNæring.egenNæringVarigEndringInntektEtterEndring"),description:n(i,"egenNæring.egenNæringVarigEndringInntektEtterEndring.description"),validate:[Ke(i)]}),r.jsx(Te,{name:a.egenNæringVarigEndringBeskrivelse,label:v,minLength:q,maxLength:H,validate:[Ue(i,v)]})]})]})};try{VarigEndringSprsml.displayName="VarigEndringSprsml",VarigEndringSprsml.__docgenInfo={description:"",displayName:"VarigEndringSprsml",props:{egenNæringFom:{defaultValue:null,description:"",name:"egenNæringFom",required:!0,type:{name:"string"}},egenNæringTom:{defaultValue:null,description:"",name:"egenNæringTom",required:!0,type:{name:"string"}},varigEndring:{defaultValue:null,description:"",name:"varigEndring",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const R=({orgNummerErValgfritt:e,registrertINorge:g})=>{const t=_(),i=n(t,"egenNæring.orgnr"),v=e?`${i} ${n(t,"valgfritt")}`:i;return r.jsxs(r.Fragment,{children:[g?r.jsx(I,{name:a.egenNæringOrgnr,label:v,validate:[He(t,e)]}):null,g===!1?r.jsx(ye,{name:a.egenNæringLand,label:n(t,"egenNæring.registrertILand"),validate:[Je(t)],children:Ne().map(f=>r.jsx("option",{value:f[0],children:f[1]},f[0]))}):null]})};try{R.displayName="OrgnummerEllerLand",R.__docgenInfo={description:"",displayName:"OrgnummerEllerLand",props:{orgNummerErValgfritt:{defaultValue:null,description:"",name:"orgNummerErValgfritt",required:!0,type:{name:"boolean"}},registrertINorge:{defaultValue:null,description:"",name:"registrertINorge",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const cn=({mellomlagreSøknadOgNaviger:e,avbrytSøknad:g,arbeidsforhold:t})=>{const i=_(),v=ue(i,t),f=fe(),$=Oe(),J=S(N.EGEN_NÆRING),k=Y(S(N.INNTEKTSINFORMASJON)),L=Y(S(N.OM_BARNET)),X=S(N.TILRETTELEGGINGER),W=D(N.EGEN_NÆRING),Z=D(N.TILRETTELEGGINGER),z=D(N.VALGT_TILRETTELEGGING_ID),A=D(N.APP_ROUTE),Q=h=>{const F=de(h);if(ce(L.termindato,t,k.harJobbetSomFrilans,k.harJobbetSomSelvstendigNæringsdrivende)){const ae=[pe(X||[],F)];Z(ae)}W(F);const{nextRoute:te,nextTilretteleggingId:ge}=Ee(k,L.termindato,t);z(ge),A(te),e()},o=Ve({defaultValues:se(J)}),M=n(i,"egenNæring.navnPåNæring"),y=o.watch(a.egenNæringType),x=o.watch(a.egenNæringNavn),c=o.watch(a.egenNæringFom),B=o.watch(a.egenNæringTom),ee=o.watch(a.egenNæringRegistrertINorge),ne=o.watch(a.egenNæringPågående),re=o.watch(a.egenNæringHattVarigEndringDeSiste4Årene),ie=o.watch(a.egenNæringBlittYrkesaktivDe3SisteÅrene),P=y===u.FISKER?`${M} ${n(i,"valgfritt")}`:M;return r.jsx(he,{bannerTitle:n(i,"søknad.pageheading"),activeStepId:"næring",pageTitle:n(i,"steps.label.næring"),onCancel:g,steps:v,onContinueLater:f,children:r.jsx(be,{formMethods:o,onSubmit:Q,children:r.jsxs(Le,{gap:"10",children:[r.jsx(Re,{}),r.jsx(V,{children:r.jsx(s,{id:"harValgfrieFelt"})}),r.jsxs(p,{name:a.egenNæringType,label:n(i,"egenNæring.næringstype"),validate:[ze(i)],children:[r.jsx(l,{value:u.DAGMAMMA,children:r.jsx(s,{id:"egenNæring.næringstype.dagmamma"})}),r.jsx(l,{value:u.FISKER,children:r.jsx(s,{id:"egenNæring.næringstype.fiske"})}),r.jsx(l,{value:u.JORDBRUK,children:r.jsx(s,{id:"egenNæring.næringstype.jordbrukSkogbruk"})}),r.jsx(l,{value:u.ANNET,children:r.jsx(s,{id:"egenNæring.næringstype.annen"})})]}),r.jsx(I,{name:a.egenNæringNavn,label:P,maxLength:100,validate:[$e(i,P,y===u.FISKER)]}),r.jsxs(p,{name:a.egenNæringRegistrertINorge,label:n(i,"egenNæring.erNæringenRegistrertINorge",{navnPåNæringen:x}),validate:[Xe(i)],children:[r.jsx(l,{value:!0,children:r.jsx(s,{id:"ja"})}),r.jsx(l,{value:!1,children:r.jsx(s,{id:"nei"})})]}),r.jsx(R,{orgNummerErValgfritt:y===u.FISKER,registrertINorge:ee}),r.jsx(j,{name:a.egenNæringFom,label:n(i,"egenNæring.næring.fom",{navnPåNæringen:x}),validate:[Ge(i,B)],maxDate:E().toDate(),minDate:Se}),r.jsxs(p,{name:a.egenNæringPågående,label:n(i,"egenNæring.næring.pågående",{navnPåNæringen:x}),validate:[We(i)],children:[r.jsx(l,{value:!0,children:r.jsx(s,{id:"ja"})}),r.jsx(l,{value:!1,children:r.jsx(s,{id:"nei"})})]}),ne===!1&&r.jsx(j,{name:a.egenNæringTom,label:n(i,"egenNæring.næring.tom",{navnPåNæringen:x}),description:n(i,"egenNæring.næring.tom.description"),validate:[Ye(i,c)],maxDate:E().add(9,"month").toDate(),minDate:ve(c,De)}),!G(b(c))&&r.jsx(en,{varigEndring:re,egenNæringFom:c,egenNæringTom:B}),r.jsx(I,{name:a.egenNæringResultat,label:n(i,"egenNæring.næringsinntekt"),description:n(i,"egenNæring.næringsinntekt.description"),validate:[we(i)]}),r.jsx(U,{header:n(i,"egenNæring.næringsinntekt.info.apneLabel"),children:r.jsx(V,{children:r.jsx(s,{id:"egenNæring.næringsinntekt.info"})})}),r.jsxs(p,{name:a.egenNæringBlittYrkesaktivDe3SisteÅrene,label:n(i,"egenNæring.blittYrkesaktivSiste3År"),validate:[Ze(i)],children:[r.jsx(l,{value:!0,children:r.jsx(s,{id:"ja"})}),r.jsx(l,{value:!1,children:r.jsx(s,{id:"nei"})})]}),G(b(c))&&ie===!0&&r.jsx(j,{name:a.egenNæringYrkesAktivDato,label:n(i,"egenNæring.yrkesaktivDato"),validate:[qe(i)],maxDate:E().toDate()}),r.jsx(Ae,{variant:"info",children:n(i,"egenNæring.veileder")}),r.jsx(_e,{goToPreviousStep:()=>{const h=me(k);A(h),$(h)}})]})})})};try{EgenNringStep.displayName="EgenNringStep",EgenNringStep.__docgenInfo={description:"",displayName:"EgenNringStep",props:{mellomlagreSøknadOgNaviger:{defaultValue:null,description:"",name:"mellomlagreSøknadOgNaviger",required:!0,type:{name:"() => Promise<void>"}},avbrytSøknad:{defaultValue:null,description:"",name:"avbrytSøknad",required:!0,type:{name:"() => Promise<void>"}},arbeidsforhold:{defaultValue:null,description:"",name:"arbeidsforhold",required:!0,type:{name:"Arbeidsforhold[]"}}}}}catch{}export{cn as E};
