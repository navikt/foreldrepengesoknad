import{u as _,j as r,F as s,B as y}from"./Modal-5f6515f6.js";import{g as se,e as G,m as de}from"./egenNæringFormUtils-49aad5b8.js";import{Q as le,h as d,b as Y,c as q,u as oe,R as u,N as Ne,S as ue,f as ve,B as me,U as fe,V as ce}from"./useFortsettSøknadSenere-40515bb0.js";import{i as n,a as T,j as O,q as m,d as E,r as w,t as pe,v as C,u as K,w as Ee,m as l,R as U,I as b,S as ke,l as he,s as xe}from"./fridagerUtils-bf3b07ca.js";import"./index-f1f2c4b1.js";import"./_baseToString-375081cd.js";import"./_createSet-53ab95fd.js";import{i as Se,c as je}from"./dateFormValidation-c112d50a.js";import{i as De,d as Ie}from"./dateUtils-8598b125.js";import{R as p,D,T as I,a as Te,b as Ve,u as ye,F as be,E as Re,S as _e}from"./ErrorSummaryHookForm-2c6d2e49.js";import{u as S,C as N,a as j}from"./routes-345f7acb.js";import{n as H}from"./validation-631bcf6e.js";import{h as Oe}from"./index-0df0c4a0.js";import{V as Le}from"./VStack-ea079a1e.js";import{A as Ae}from"./Alert-ddc59fb2.js";var g=(e=>(e.egenNæringType="egenNæringType",e.egenNæringNavn="egenNæringNavn",e.egenNæringRegistrertINorge="egenNæringRegistrertINorge",e.egenNæringOrgnr="egenNæringOrgnr",e.egenNæringLand="egenNæringLand",e.egenNæringFom="egenNæringFom",e.egenNæringTom="egenNæringTom",e.egenNæringPågående="egenNæringPågående",e.egenNæringYrkesAktivDato="egenNæringYrkesAktivDato",e.egenNæringResultat="egenNæringResultat",e.egenNæringBlittYrkesaktivDe3SisteÅrene="egenNæringBlittYrkesaktivDe3SisteÅrene",e.egenNæringHattVarigEndringDeSiste4Årene="egenNæringHattVarigEndringDeSiste4Årene",e.egenNæringVarigEndringDato="egenNæringVarigEndringDato",e.egenNæringVarigEndringInntektEtterEndring="egenNæringVarigEndringInntektEtterEndring",e.egenNæringVarigEndringBeskrivelse="egenNæringVarigEndringBeskrivelse",e))(g||{});const Me=/^\d*$/,Be=e=>Me.test(e)&&e.length===9,Fe=e=>e.charAt(0)==="8"||e.charAt(0)==="9",Pe=e=>!e||Be(e)===!1||Fe(e)===!1?!1:le(e)===parseInt(e.charAt(8),10),Ge=(e,a)=>t=>{if(!d(t))return n(e,"valideringsfeil.fraOgMedDato.påkrevd");if(!T(t))return n(e,"valideringsfeil.fraOgMedDato.gyldigDato");if(O(t))return n(e,"valideringsfeil.fraOgMedDato.erIFremtiden");if(m(a,t))return n(e,"valideringsfeil.fraOgMedDato.førTilDato")},He=(e,a)=>t=>{if(!d(t))return n(e,"valideringsfeil.tilOgMedDato.påkrevd");if(!T(t))return n(e,"valideringsfeil.tilOgMedDato.gyldigDato");if(Se(t,E().add(9,"month")))return n(e,"valideringsfeil.tilOgMedDato.erIFremtiden");if(m(t,w(De())))return n(e,"valideringsfeil.tilOgMedDato.egenNæring.merEnn5MånederSiden");if(m(t,a))return n(e,"valideringsfeil.tilOgMedDato.etterFraDato")},Ye=(e,a)=>t=>{const i=(t||"").trim();if(!a&&!d(i))return n(e,"valideringsfeil.egenNæringOrgnr.påkrevd");if(i.length>0&&pe(i))return n(e,"valideringsfeil.egenNæringOrgnr.inneholderMellomrom");if(i.length>0&&!Pe(i))return n(e,"valideringsfeil.egenNæringOrgnr.ugyldigFormat")},qe=e=>a=>{if(!d(a))return n(e,"valideringsfeil.yrkesaktiv.påkrevd");if(!T(a))return n(e,"valideringsfeil.yrkesaktiv.gyldigDato");if(O(a))return n(e,"valideringsfeil.yrkesaktiv.erIFremtiden")},we=e=>a=>{if(d(a)){if(a.length>9)return n(e,"valideringsfeil.næringsinntekt.forLang");const t=K(a);if(!t||Math.round(t)!==t)return n(e,"valideringsfeil.næringsinntekt.ugyldigFormat");if(t&&t<0)return n(e,"valideringsfeil.næringsinntekt.mindreEnnNull")}else return n(e,"valideringsfeil.egenNæringInntekt.påkrevd")},Ce=(e,a,t)=>i=>{if(!d(i))return n(e,"valideringsfeil.varigEndringDato.påkrevd");if(!T(i))return n(e,"valideringsfeil.varigEndringDato.gyldigDato");if(O(i))return n(e,"valideringsfeil.varigEndringDato.erIFremtiden");if(m(i,w(Ie)))return n(e,"valideringsfeil.varigEndringDato.mindreEnn4ÅrSiden");if(m(i,a))return n(e,"valideringsfeil.varigEndringDato.førFraDato");if(t&&d(t)&&m(t,i))return n(e,"valideringsfeil.varigEndringDato.etterTilDato")},Ke=e=>a=>{if(!d(a))return n(e,"valideringsfeil.varigEndringInntekt.påkrevd");if(a.length>9)return n(e,"valideringsfeil.varigEndringInntekt.forLang");const t=K(a);return t&&t<0?n(e,"valideringsfeil.varigEndringInntekt.mindreEnnNull"):Ee(a,n(e,"valideringsfeil.varigEndringInntekt.ugyldigFormat"))},Ue=(e,a)=>t=>!d(t)||t&&t.trim()===""?n(e,"valideringsfeil.egenNæringVarigEndringBeskrivelse.påkrevd"):t.length>Y?n(e,"valideringsfeil.egenNæringVarigEndringBeskrivelse.forLang"):t.length<q?n(e,"valideringsfeil.egenNæringVarigEndringBeskrivelse.forKort"):C(t,a,e),$e=(e,a,t)=>i=>!t&&!d(i)?n(e,"valideringsfeil.egenNæringNavn.påkrevd"):i&&i.length>100?n(e,"valideringsfeil.egenNæringNavn.forLang"):C(i,a,e),Je=e=>a=>{if(!d(a))return n(e,"valideringsfeil.egenNæringLand.påkrevd");if(d(a)&&a==="NO")return n(e,"valideringsfeil.egenNæringLand.ikkeNorge")},Xe=e=>a=>a===void 0?n(e,"valideringsfeil.egenNæringRegistrertINorge.påkrevd"):null,Qe=e=>a=>a===void 0?n(e,"valideringsfeil.egenNæringPågående.påkrevd"):null,We=e=>a=>a===void 0?n(e,"valideringsfeil.egenNæringBlittYrkesaktivDe3SisteÅrene.påkrevd"):null,ze=e=>a=>d(a)?null:n(e,"valideringsfeil.egenNæringType.påkrevd"),Ze=e=>a=>d(a)?null:n(e,"valideringsfeil.egenNæringHattVarigEndringDeSiste4Årene.påkrevd"),en=({egenNæringFom:e,egenNæringTom:a,varigEndring:t})=>{const i=_(),v=n(i,"egenNæring.varigEndringBeskrivelse.label");return r.jsxs(r.Fragment,{children:[r.jsxs(p,{name:g.egenNæringHattVarigEndringDeSiste4Årene,label:n(i,"egenNæring.egenNæringHattVarigEndringDeSiste4Årene"),validate:[Ze(i)],children:[r.jsx(l,{value:!0,children:r.jsx(s,{id:"ja"})}),r.jsx(l,{value:!1,children:r.jsx(s,{id:"nei"})})]}),r.jsx(U,{header:n(i,"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info.åpneLabel"),children:r.jsx(y,{children:r.jsx(s,{id:"egenNæring.egenNæringHattVarigEndringDeSiste4Årene.info"})})}),t&&r.jsxs(r.Fragment,{children:[r.jsx(D,{name:g.egenNæringVarigEndringDato,label:n(i,"egenNæring.egenNæringVarigEndringDato"),validate:[Ce(i,e,a)],maxDate:E().toDate(),minDate:b(e)}),r.jsx(I,{name:g.egenNæringVarigEndringInntektEtterEndring,label:n(i,"egenNæring.egenNæringVarigEndringInntektEtterEndring"),description:n(i,"egenNæring.egenNæringVarigEndringInntektEtterEndring.description"),validate:[Ke(i)]}),r.jsx(Te,{name:g.egenNæringVarigEndringBeskrivelse,label:v,minLength:q,maxLength:Y,validate:[Ue(i,v)]})]})]})};try{VarigEndringSprsml.displayName="VarigEndringSprsml",VarigEndringSprsml.__docgenInfo={description:"",displayName:"VarigEndringSprsml",props:{egenNæringFom:{defaultValue:null,description:"",name:"egenNæringFom",required:!0,type:{name:"string"}},egenNæringTom:{defaultValue:null,description:"",name:"egenNæringTom",required:!0,type:{name:"string"}},varigEndring:{defaultValue:null,description:"",name:"varigEndring",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const R=({orgNummerErValgfritt:e,registrertINorge:a})=>{const t=_(),i=n(t,"egenNæring.orgnr"),v=e?`${i} ${n(t,"valgfritt")}`:i;return r.jsxs(r.Fragment,{children:[a?r.jsx(I,{name:g.egenNæringOrgnr,label:v,validate:[Ye(t,e)]}):null,a===!1?r.jsx(Ve,{name:g.egenNæringLand,label:n(t,"egenNæring.registrertILand"),validate:[Je(t)],children:je().map(f=>r.jsx("option",{value:f[0],children:f[1]},f[0]))}):null]})};try{R.displayName="OrgnummerEllerLand",R.__docgenInfo={description:"",displayName:"OrgnummerEllerLand",props:{orgNummerErValgfritt:{defaultValue:null,description:"",name:"orgNummerErValgfritt",required:!0,type:{name:"boolean"}},registrertINorge:{defaultValue:null,description:"",name:"registrertINorge",required:!0,type:{name:"boolean | undefined"}}}}}catch{}const pn=({mellomlagreSøknadOgNaviger:e,avbrytSøknad:a,søkerInfo:t})=>{const i=_(),v=oe(i,t.arbeidsforhold),f=ve(),$=Oe(),J=S(N.EGEN_NÆRING),k=H(S(N.INNTEKTSINFORMASJON)),L=H(S(N.OM_BARNET)),X=S(N.TILRETTELEGGINGER),Q=j(N.EGEN_NÆRING),W=j(N.TILRETTELEGGINGER),z=j(N.VALGT_TILRETTELEGGING_ID),A=j(N.APP_ROUTE),Z=x=>{const P=de(x);if(me(L.termindato,t.arbeidsforhold,k.harJobbetSomFrilans,k.harJobbetSomSelvstendigNæringsdrivende)){const ge=[fe(X||[],P)];W(ge)}Q(P);const{nextRoute:te,nextTilretteleggingId:ae}=ce(k,L.termindato,t.arbeidsforhold);z(ae),A(te),e()},o=ye({defaultValues:se(J)}),M=n(i,"egenNæring.navnPåNæring"),V=o.watch(g.egenNæringType),h=o.watch(g.egenNæringNavn),c=o.watch(g.egenNæringFom),B=o.watch(g.egenNæringTom),ee=o.watch(g.egenNæringRegistrertINorge),ne=o.watch(g.egenNæringPågående),re=o.watch(g.egenNæringHattVarigEndringDeSiste4Årene),ie=o.watch(g.egenNæringBlittYrkesaktivDe3SisteÅrene),F=V===u.FISKER?`${M} ${n(i,"valgfritt")}`:M;return r.jsx(ke,{bannerTitle:n(i,"søknad.pageheading"),activeStepId:"næring",pageTitle:n(i,"steps.label.næring"),onCancel:a,steps:v,onContinueLater:f,children:r.jsx(be,{formMethods:o,onSubmit:Z,children:r.jsxs(Le,{gap:"10",children:[r.jsx(Re,{}),r.jsx(y,{children:r.jsx(s,{id:"harValgfrieFelt"})}),r.jsxs(p,{name:g.egenNæringType,label:n(i,"egenNæring.næringstype"),validate:[ze(i)],children:[r.jsx(l,{value:u.DAGMAMMA,children:r.jsx(s,{id:"egenNæring.næringstype.dagmamma"})}),r.jsx(l,{value:u.FISKER,children:r.jsx(s,{id:"egenNæring.næringstype.fiske"})}),r.jsx(l,{value:u.JORDBRUK,children:r.jsx(s,{id:"egenNæring.næringstype.jordbrukSkogbruk"})}),r.jsx(l,{value:u.ANNET,children:r.jsx(s,{id:"egenNæring.næringstype.annen"})})]}),r.jsx(I,{name:g.egenNæringNavn,label:F,maxLength:100,validate:[$e(i,F,V===u.FISKER)]}),r.jsxs(p,{name:g.egenNæringRegistrertINorge,label:n(i,"egenNæring.erNæringenRegistrertINorge",{navnPåNæringen:h}),validate:[Xe(i)],children:[r.jsx(l,{value:!0,children:r.jsx(s,{id:"ja"})}),r.jsx(l,{value:!1,children:r.jsx(s,{id:"nei"})})]}),r.jsx(R,{orgNummerErValgfritt:V===u.FISKER,registrertINorge:ee}),r.jsx(D,{name:g.egenNæringFom,label:n(i,"egenNæring.næring.fom",{navnPåNæringen:h}),validate:[Ge(i,B)],maxDate:E().toDate(),minDate:he}),r.jsxs(p,{name:g.egenNæringPågående,label:n(i,"egenNæring.næring.pågående",{navnPåNæringen:h}),validate:[Qe(i)],children:[r.jsx(l,{value:!0,children:r.jsx(s,{id:"ja"})}),r.jsx(l,{value:!1,children:r.jsx(s,{id:"nei"})})]}),ne===!1&&r.jsx(D,{name:g.egenNæringTom,label:n(i,"egenNæring.næring.tom",{navnPåNæringen:h}),description:n(i,"egenNæring.næring.tom.description"),validate:[He(i,c)],maxDate:E().add(9,"month").toDate(),minDate:Ne(c,xe)}),!G(b(c))&&r.jsx(en,{varigEndring:re,egenNæringFom:c,egenNæringTom:B}),r.jsx(I,{name:g.egenNæringResultat,label:n(i,"egenNæring.næringsinntekt"),description:n(i,"egenNæring.næringsinntekt.description"),validate:[we(i)]}),r.jsx(U,{header:n(i,"egenNæring.næringsinntekt.info.apneLabel"),children:r.jsx(y,{children:r.jsx(s,{id:"egenNæring.næringsinntekt.info"})})}),r.jsxs(p,{name:g.egenNæringBlittYrkesaktivDe3SisteÅrene,label:n(i,"egenNæring.blittYrkesaktivSiste3År"),validate:[We(i)],children:[r.jsx(l,{value:!0,children:r.jsx(s,{id:"ja"})}),r.jsx(l,{value:!1,children:r.jsx(s,{id:"nei"})})]}),G(b(c))&&ie===!0&&r.jsx(D,{name:g.egenNæringYrkesAktivDato,label:n(i,"egenNæring.yrkesaktivDato"),validate:[qe(i)],maxDate:E().toDate()}),r.jsx(Ae,{variant:"info",children:n(i,"egenNæring.veileder")}),r.jsx(_e,{goToPreviousStep:()=>{const x=ue(k);A(x),$(x)}})]})})})};try{EgenNringStep.displayName="EgenNringStep",EgenNringStep.__docgenInfo={description:"",displayName:"EgenNringStep",props:{mellomlagreSøknadOgNaviger:{defaultValue:null,description:"",name:"mellomlagreSøknadOgNaviger",required:!0,type:{name:"() => Promise<void>"}},avbrytSøknad:{defaultValue:null,description:"",name:"avbrytSøknad",required:!0,type:{name:"() => Promise<void>"}},søkerInfo:{defaultValue:null,description:"",name:"søkerInfo",required:!0,type:{name:"Søkerinfo"}}}}}catch{}export{pn as E};
