import{u as pe,j as i,B as M,F as x,a as be}from"./Modal-046e2c19.js";import{Y as ue,o as xe,i as s,d as v,S as he,B as a,a as O,j as Ie,b as fe}from"./dates-c2c0c09e.js";import{r as ve}from"./index-f1f2c4b1.js";import"./_baseToString-375081cd.js";import"./_createSet-53ab95fd.js";import{n as D}from"./validation-631bcf6e.js";import{z as n,g as p,T as m,D as F,p as Ee,A as b,u as Fe,B as Se,C as ke,E as c,F as je,G as Pe,H as Ae,I as Me,J as De,K as Re,L as ye,M as Le,m as Z,l as q,N as _e,f as Ne,O as Be,P as Ge}from"./useFortsettSøknadSenere-f7e44c56.js";import{B as Ve}from"./Bedriftsbanner-3c637309.js";import{u as w,C as E,a as Q,b as Oe}from"./routes-33249ab0.js";import{g as we,t as Qe,b as Ce,c as C}from"./dateUtils-2e21b5fc.js";import{B as Je}from"./BackButton-d9cee460.js";import{v as He,a as Ue,b as ze,c as Ke,d as We,e as Xe,f as Ye,g as $e,h as Ze}from"./tilretteleggingValidation-f66edb5b.js";import{E as R}from"./ExpansionCard-fb9a2a23.js";var J={};Object.defineProperty(J,"__esModule",{value:!0});J.questionValueIsOk=e=>e!==void 0&&e!=="";const y=(e,r,l)=>{const t=e[r];if(!t||t.isIncluded&&t.isIncluded(l)===!1||t.visibilityFilter&&t.visibilityFilter(l)===!1)return!1;if(t.parentQuestion!==void 0){const g=e[t.parentQuestion];return y(e,t.parentQuestion,l)&&g.isAnswered(l)}return!0},ee=(e,r,l)=>{const t=e[r];return!t||!t.isAnswered?!1:t.isAnswered(l)},re=(e,r,l)=>{const t=e[r];return t?t.isIncluded?t.isIncluded(l):!0:!1},qe=(e,r)=>{let l=!0;return Object.keys(e).forEach(t=>{const g=e[t];if(y(e,t,r)){const L=g.isOptional!==void 0?g.isOptional(r)===!0:!1;l=l===!0&&(g.isAnswered(r)||L)}}),l},et=(e,r)=>Object.keys(e).filter(t=>re(e,t,r)),te=(e,r,l,t)=>{const g=r[l];if(!(!g||!g.validate))return g.validate(t)};var tt=J.Questions=e=>({getVisbility:r=>({validate:l=>t=>te(t,e,l,r),isVisible:l=>y(e,l,r),isAnswered:l=>ee(e,l,r),isIncluded:l=>re(e,l,r),areAllQuestionsAnswered:()=>qe(e,r),getIncludedQuestions:()=>et(e,r)}),getQuestionVisbilityInfo:(r,l)=>({validate:g=>te(g,e,r,l),isVisible:()=>y(e,r,l),isAnswered:()=>ee(e,r,l)})});const it={[n.behovForTilretteleggingFom]:{isIncluded:()=>!0,isAnswered:({behovForTilretteleggingFom:e})=>e!==ue.UNANSWERED},[n.tilretteleggingType]:{isIncluded:()=>!0,isAnswered:({tilretteleggingType:e})=>p(e)},[n.delvisTilretteleggingPeriodeType]:{isIncluded:({tilretteleggingType:e})=>p(e)&&e===m.DELVIS,isAnswered:({delvisTilretteleggingPeriodeType:e})=>p(e)},[n.enPeriodeMedTilretteleggingFom]:{isIncluded:({tilretteleggingType:e,delvisTilretteleggingPeriodeType:r})=>e===m.DELVIS&&r===F.SAMMME_PERIODE_FREM_TIL_TERMIN||e===m.INGEN,isAnswered:({enPeriodeMedTilretteleggingFom:e})=>p(e)},[n.enPeriodeMedTilretteleggingStillingsprosent]:{isIncluded:({tilretteleggingType:e,delvisTilretteleggingPeriodeType:r})=>e===m.DELVIS&&r===F.SAMMME_PERIODE_FREM_TIL_TERMIN,isAnswered:({enPeriodeMedTilretteleggingStillingsprosent:e})=>p(e)},[n.enPeriodeMedTilretteleggingTomType]:{isIncluded:({tilretteleggingType:e,delvisTilretteleggingPeriodeType:r})=>e===m.INGEN||e===m.DELVIS&&r===F.SAMMME_PERIODE_FREM_TIL_TERMIN,isAnswered:({enPeriodeMedTilretteleggingTomType:e})=>p(e)},[n.enPeriodeMedTilretteleggingTilbakeIJobbDato]:{isIncluded:({tilretteleggingType:e,delvisTilretteleggingPeriodeType:r,enPeriodeMedTilretteleggingTomType:l})=>(e===m.INGEN||e===m.DELVIS&&r===F.SAMMME_PERIODE_FREM_TIL_TERMIN)&&l===Ee.VALGFRI_DATO,isAnswered:({enPeriodeMedTilretteleggingTilbakeIJobbDato:e})=>p(e)},[n.tilretteleggingstiltak]:{isIncluded:({arbeidsType:e})=>e===b.FRILANSER||e===b.SELVSTENDIG,isAnswered:({tilretteleggingstiltak:e})=>p(e)},[n.risikofaktorer]:{isIncluded:({arbeidsType:e})=>e===b.FRILANSER||e===b.SELVSTENDIG,isAnswered:({risikofaktorer:e})=>p(e)}},rt=tt(it),lt=(e,r)=>r===b.FRILANSER?s(e,"skjema.risikofaktorer.frilanser"):s(e,"skjema.risikofaktorer.selvstendig"),ie=({mellomlagreSøknadOgNaviger:e,avbrytSøknad:r,arbeidsforhold:l})=>{const t=pe(),g=Fe(t,l),L=Ne(),[H,le]=ve.useState(!1),j=D(w(E.TILRETTELEGGINGER)),_=D(w(E.OM_BARNET)),N=D(w(E.VALGT_TILRETTELEGGING_ID)),ne=Q(E.TILRETTELEGGINGER),se=Q(E.VALGT_TILRETTELEGGING_ID),oe=Q(E.APP_ROUTE),d=D(j.find(o=>o.id===N)),h=we(_),U=xe(_.termindato),z=d.arbeidsforhold.type===b.SELVSTENDIG&&d.arbeidsforhold.navn.trim().length===0?s(t,"egenNæring").toLowerCase():d.arbeidsforhold.navn,P=j.length>1,u=d.arbeidsforhold.type,K=lt(t,u),ae=Se(P,u,z,t),de=ke(P,u,z,t),W=s(t,"tilrettelegging.tilretteleggingstiltak.label"),S=u===b.VIRKSOMHET||u===b.PRIVAT,I=d.arbeidsforhold.sluttdato,X=d.arbeidsforhold.startdato,B=v.max(v(Qe(U)),v(X)).toDate(),f=I?v.min(v(h),v(I)).toDate():h,k=Ce(_),ge=o=>{le(!0);const T=Be(N,o,j,d);ne(T);const{nextRoute:G,nextTilretteleggingId:A}=Ge(o,j,d.id);A&&se(A),oe(G),e()};return i.jsx(c.FormikWrapper,{enableReinitialize:!0,initialValues:je(d),onSubmit:ge,renderForm:({values:o})=>{const T=rt.getVisbility({...o,arbeidsType:u}),G=Pe(o.tilretteleggingType,t),A=Ae(o.tilretteleggingType,t),ce=Me(o.tilretteleggingType,t),Y=De(o,B),Te=C(Y,f),$=Re(o),me=C($,f);return i.jsx(he,{bannerTitle:s(t,"søknad.pageheading"),activeStepId:`tilrettelegging-${N}`,pageTitle:ye(P,t,d.arbeidsforhold.navn),onCancel:r,steps:g,onContinueLater:L,children:i.jsxs(c.Form,{includeButtons:!1,includeValidationSummary:!0,cleanup:V=>Le(V,T),children:[P&&i.jsx(a,{padBottom:"xxl",children:i.jsx(Ve,{arbeid:d.arbeidsforhold})}),i.jsx(a,{padBottom:"xxl",children:i.jsx(c.DatePicker,{name:n.behovForTilretteleggingFom,label:de,placeholder:"dd.mm.åååå",description:S?s(t,"tilrettelegging.tilrettelagtArbeidFom.description"):"",minDate:B,maxDate:f,validate:He(t,h,U,d.arbeidsforhold.navn,X,I,k,u===b.FRILANSER),dayPickerProps:{defaultMonth:C(B,f)}})}),i.jsx(a,{padBottom:"xxl",visible:T.isVisible(n.risikofaktorer),children:i.jsx(c.Textarea,{name:n.risikofaktorer,label:K,minLength:Z,maxLength:q,validate:Ue(t,K,u),description:s(t,"skjema.risikofaktorer.description")})}),i.jsxs(a,{padBottom:"xxl",visible:T.isVisible(n.tilretteleggingstiltak),children:[i.jsx(a,{padBottom:"m",children:i.jsx(c.Textarea,{name:n.tilretteleggingstiltak,label:W,minLength:Z,maxLength:q,validate:ze(t,W)})}),i.jsx(O,{size:"small",header:s(t,"tilrettelegging.tiltak.info.title"),children:i.jsx(M,{children:i.jsx(x,{id:"tilrettelegging.tiltak.info.description"})})})]}),i.jsxs(a,{padBottom:"xxl",children:[i.jsx(a,{padBottom:"m",children:i.jsx(c.RadioGroup,{name:n.tilretteleggingType,legend:ae,description:S?s(t,"tilrettelegging.tilrettelagtArbeidType.description"):"",radios:[{label:s(t,"tilrettelegging.tilrettelagtArbeidType.delvis"),value:m.DELVIS},{label:s(t,"tilrettelegging.tilrettelagtArbeidType.ingen"),value:m.INGEN}],validate:Ke(t)})}),i.jsx(O,{header:s(t,"tilrettelegging.tilrettelagtArbeidType.info.tittel"),children:i.jsx(M,{children:i.jsx(x,{id:"tilrettelegging.tilrettelagtArbeidType.info.tekst"})})})]}),i.jsx(a,{padBottom:"xxl",visible:T.isVisible(n.delvisTilretteleggingPeriodeType),children:i.jsx(c.RadioGroup,{name:n.delvisTilretteleggingPeriodeType,legend:s(t,"tilrettelegging.tilretteleggingPeriodetype.label"),description:S?s(t,"tilrettelegging.tilrettelagtArbeidType.description"):"",radios:[{label:s(t,"tilrettelegging.tilretteleggingPeriodetype.en"),value:F.SAMMME_PERIODE_FREM_TIL_TERMIN},{label:s(t,"tilrettelegging.tilretteleggingPeriodetype.variert"),value:F.VARIERTE_PERIODER}],validate:We(t)})}),i.jsxs(a,{padBottom:"xxl",visible:T.isVisible(n.enPeriodeMedTilretteleggingStillingsprosent),children:[i.jsx(a,{padBottom:"m",children:i.jsx(c.NumberInput,{name:n.enPeriodeMedTilretteleggingStillingsprosent,label:s(t,"tilrettelegging.stillingsprosent.label"),description:S?s(t,"tilrettelegging.tilrettelagtArbeidType.description"):"",validate:Xe(t,o.enPeriodeMedTilretteleggingFom,d.arbeidsforhold.stillinger)})}),i.jsxs(O,{header:s(t,"tilrettelegging.varierendePerioderStillingsprosent.info.tittel"),children:[i.jsx(a,{padBottom:"l",children:i.jsx(M,{children:i.jsx(x,{id:"tilrettelegging.varierendePerioderStillingsprosent.info.tekst.del1"})})}),i.jsx(a,{children:i.jsx(M,{children:i.jsx(x,{id:"tilrettelegging.varierendePerioderStillingsprosent.info.tekst.del2"})})})]})]}),i.jsx(a,{padBottom:"xxl",visible:T.isVisible(n.enPeriodeMedTilretteleggingFom),children:i.jsx(c.DatePicker,{name:n.enPeriodeMedTilretteleggingFom,label:G,description:S?s(t,"tilrettelegging.tilrettelagtArbeidType.description"):"",minDate:new Date(Y),maxDate:f,validate:Ye(t,o.behovForTilretteleggingFom,h,o.tilretteleggingType,d.arbeidsforhold.navn,I,k),dayPickerProps:{defaultMonth:Te},placeholder:"dd.mm.åååå"})}),i.jsx(a,{padBottom:"xxl",visible:T.isVisible(n.enPeriodeMedTilretteleggingTomType),children:i.jsx(c.RadioGroup,{name:n.enPeriodeMedTilretteleggingTomType,legend:A,radios:_e(t,k),validate:$e(t,o.tilretteleggingType,o.behovForTilretteleggingFom,h,d.arbeidsforhold.navn,I,k)})}),i.jsx(a,{padBottom:"xxl",visible:T.isVisible(n.enPeriodeMedTilretteleggingTilbakeIJobbDato),children:i.jsx(c.DatePicker,{name:n.enPeriodeMedTilretteleggingTilbakeIJobbDato,label:ce,minDate:$,maxDate:f,validate:Ze(t,o.behovForTilretteleggingFom,h,o.enPeriodeMedTilretteleggingFom,o.tilretteleggingType,d.arbeidsforhold.navn,I,k),dayPickerProps:{defaultMonth:me},placeholder:"dd.mm.åååå"})}),i.jsx(a,{padBottom:"xxl",children:i.jsxs(R,{size:"small","aria-label":"",children:[i.jsx(R.Header,{children:i.jsx(R.Title,{size:"small",as:"h3",children:i.jsx(x,{id:"tilrettelegging.expansion.tittel"})})}),i.jsx(R.Content,{children:i.jsx(a,{padBottom:"l",children:i.jsx(Ie,{children:i.jsx(x,{id:"tilrettelegging.expansion.tekst",values:{em:V=>i.jsx("em",{children:V})}})})})})]})}),i.jsx(a,{padBottom:"l",children:i.jsxs(fe,{children:[i.jsx(Je,{mellomlagreSøknadOgNaviger:e,route:Oe.SKJEMA}),i.jsx(be,{type:"submit",disabled:H,loading:H,children:i.jsx(x,{id:"søknad.gåVidere"})})]})})]})})}})};try{ie.displayName="TilretteleggingStep",ie.__docgenInfo={description:"",displayName:"TilretteleggingStep",props:{mellomlagreSøknadOgNaviger:{defaultValue:null,description:"",name:"mellomlagreSøknadOgNaviger",required:!0,type:{name:"() => Promise<void>"}},avbrytSøknad:{defaultValue:null,description:"",name:"avbrytSøknad",required:!0,type:{name:"() => Promise<void>"}},arbeidsforhold:{defaultValue:null,description:"",name:"arbeidsforhold",required:!0,type:{name:"Arbeidsforhold[]"}}}}}catch{}export{ie as T};
