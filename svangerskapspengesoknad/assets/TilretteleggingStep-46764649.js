import{u as ge,j as e,B as f,F as b,a as de}from"./Modal-5f6515f6.js";import{r as Te}from"./index-f1f2c4b1.js";import{Y as pe,I as me,i as r,d as I,S as ce,B as a,R as B,h as be,j as xe}from"./fridagerUtils-9d650fd8.js";import"./_baseToString-375081cd.js";import"./_createSet-53ab95fd.js";import{n as y}from"./validation-631bcf6e.js";import"./dateFormValidation-8cbaac98.js";import{l,h as p,T,D as v,e as he,A as m,u as ue,m as Ie,n as Ee,o as g,p as ve,q as Fe,s as Se,t as ke,v as je,w as Pe,x as fe,y as ye,c as Q,b as W,z as De,f as Me,B as Re,C as Ae}from"./useFortsettSøknadSenere-ae1126db.js";import{B as Le}from"./Bedriftsbanner-0c44b2f1.js";import{u as G,C as E,a as V,b as _e}from"./routes-345f7acb.js";import{g as Ne,t as Be,b as Ge,c as O}from"./dateUtils-445f5d04.js";import{Q as Ve}from"./index-47edccfa.js";import{v as Oe,a as Ce,b as we,c as Je,d as Ue,e as He,f as ze,g as qe,h as Ke}from"./tilretteleggingValidation-91e87c6f.js";import{B as Qe}from"./BackButton-f80f5ffe.js";import{E as D}from"./ExpansionCard-de6da795.js";const We={[l.behovForTilretteleggingFom]:{isIncluded:()=>!0,isAnswered:({behovForTilretteleggingFom:t})=>t!==pe.UNANSWERED},[l.tilretteleggingType]:{isIncluded:()=>!0,isAnswered:({tilretteleggingType:t})=>p(t)},[l.delvisTilretteleggingPeriodeType]:{isIncluded:({tilretteleggingType:t})=>p(t)&&t===T.DELVIS,isAnswered:({delvisTilretteleggingPeriodeType:t})=>p(t)},[l.enPeriodeMedTilretteleggingFom]:{isIncluded:({tilretteleggingType:t,delvisTilretteleggingPeriodeType:s})=>t===T.DELVIS&&s===v.SAMMME_PERIODE_FREM_TIL_TERMIN||t===T.INGEN,isAnswered:({enPeriodeMedTilretteleggingFom:t})=>p(t)},[l.enPeriodeMedTilretteleggingStillingsprosent]:{isIncluded:({tilretteleggingType:t,delvisTilretteleggingPeriodeType:s})=>t===T.DELVIS&&s===v.SAMMME_PERIODE_FREM_TIL_TERMIN,isAnswered:({enPeriodeMedTilretteleggingStillingsprosent:t})=>p(t)},[l.enPeriodeMedTilretteleggingTomType]:{isIncluded:({tilretteleggingType:t,delvisTilretteleggingPeriodeType:s})=>t===T.INGEN||t===T.DELVIS&&s===v.SAMMME_PERIODE_FREM_TIL_TERMIN,isAnswered:({enPeriodeMedTilretteleggingTomType:t})=>p(t)},[l.enPeriodeMedTilretteleggingTilbakeIJobbDato]:{isIncluded:({tilretteleggingType:t,delvisTilretteleggingPeriodeType:s,enPeriodeMedTilretteleggingTomType:M})=>(t===T.INGEN||t===T.DELVIS&&s===v.SAMMME_PERIODE_FREM_TIL_TERMIN)&&M===he.VALGFRI_DATO,isAnswered:({enPeriodeMedTilretteleggingTilbakeIJobbDato:t})=>p(t)},[l.tilretteleggingstiltak]:{isIncluded:({arbeidsType:t})=>t===m.FRILANSER||t===m.SELVSTENDIG,isAnswered:({tilretteleggingstiltak:t})=>p(t)},[l.risikofaktorer]:{isIncluded:({arbeidsType:t})=>t===m.FRILANSER||t===m.SELVSTENDIG,isAnswered:({risikofaktorer:t})=>p(t)}},Xe=Ve(We),Ye=(t,s)=>s===m.FRILANSER?r(t,"skjema.risikofaktorer.frilanser"):r(t,"skjema.risikofaktorer.selvstendig"),X=({mellomlagreSøknadOgNaviger:t,avbrytSøknad:s,søkerInfo:M})=>{const i=ge(),Y=ue(i,M.arbeidsforhold),$=Me(),[C,Z]=Te.useState(!1),k=y(G(E.TILRETTELEGGINGER)),R=y(G(E.OM_BARNET)),A=y(G(E.VALGT_TILRETTELEGGING_ID)),ee=V(E.TILRETTELEGGINGER),te=V(E.VALGT_TILRETTELEGGING_ID),ie=V(E.APP_ROUTE),o=y(k.find(n=>n.id===A)),x=Ne(R),w=me(R.termindato),J=o.arbeidsforhold.type===m.SELVSTENDIG&&o.arbeidsforhold.navn.trim().length===0?r(i,"egenNæring").toLowerCase():o.arbeidsforhold.navn,j=k.length>1,c=o.arbeidsforhold.type,U=Ye(i,c),le=Ie(j,c,J,i),re=Ee(j,c,J,i),H=r(i,"tilrettelegging.tilretteleggingstiltak.label"),F=c===m.VIRKSOMHET||c===m.PRIVAT,h=o.arbeidsforhold.sluttdato,z=o.arbeidsforhold.startdato,L=I.max(I(Be(w)),I(z)).toDate(),u=h?I.min(I(x),I(h)).toDate():x,S=Ge(R),ne=n=>{Z(!0);const d=Re(A,n,k,o);ee(d);const{nextRoute:_,nextTilretteleggingId:P}=Ae(n,k,o.id);P&&te(P),ie(_),t()};return e.jsx(g.FormikWrapper,{enableReinitialize:!0,initialValues:ve(o),onSubmit:ne,renderForm:({values:n})=>{const d=Xe.getVisbility({...n,arbeidsType:c}),_=Fe(n.tilretteleggingType,i),P=Se(n.tilretteleggingType,i),ae=ke(n.tilretteleggingType,i),q=je(n,L),oe=O(q,u),K=Pe(n),se=O(K,u);return e.jsx(ce,{bannerTitle:r(i,"søknad.pageheading"),activeStepId:`tilrettelegging-${A}`,pageTitle:fe(j,i,o.arbeidsforhold.navn),onCancel:s,steps:Y,onContinueLater:$,children:e.jsxs(g.Form,{includeButtons:!1,includeValidationSummary:!0,cleanup:N=>ye(N,d),children:[j&&e.jsx(a,{padBottom:"xxl",children:e.jsx(Le,{arbeid:o.arbeidsforhold})}),e.jsx(a,{padBottom:"xxl",children:e.jsx(g.DatePicker,{name:l.behovForTilretteleggingFom,label:re,placeholder:"dd.mm.åååå",description:F?r(i,"tilrettelegging.tilrettelagtArbeidFom.description"):"",minDate:L,maxDate:u,validate:Oe(i,x,w,o.arbeidsforhold.navn,z,h,S,c===m.FRILANSER),dayPickerProps:{defaultMonth:O(L,u)}})}),e.jsx(a,{padBottom:"xxl",visible:d.isVisible(l.risikofaktorer),children:e.jsx(g.Textarea,{name:l.risikofaktorer,label:U,minLength:Q,maxLength:W,validate:Ce(i,U,c),description:r(i,"skjema.risikofaktorer.description")})}),e.jsxs(a,{padBottom:"xxl",visible:d.isVisible(l.tilretteleggingstiltak),children:[e.jsx(a,{padBottom:"m",children:e.jsx(g.Textarea,{name:l.tilretteleggingstiltak,label:H,minLength:Q,maxLength:W,validate:we(i,H)})}),e.jsx(B,{size:"small",header:r(i,"tilrettelegging.tiltak.info.title"),children:e.jsx(f,{children:e.jsx(b,{id:"tilrettelegging.tiltak.info.description"})})})]}),e.jsxs(a,{padBottom:"xxl",children:[e.jsx(a,{padBottom:"m",children:e.jsx(g.RadioGroup,{name:l.tilretteleggingType,legend:le,description:F?r(i,"tilrettelegging.tilrettelagtArbeidType.description"):"",radios:[{label:r(i,"tilrettelegging.tilrettelagtArbeidType.delvis"),value:T.DELVIS},{label:r(i,"tilrettelegging.tilrettelagtArbeidType.ingen"),value:T.INGEN}],validate:Je(i)})}),e.jsx(B,{header:r(i,"tilrettelegging.tilrettelagtArbeidType.info.tittel"),children:e.jsx(f,{children:e.jsx(b,{id:"tilrettelegging.tilrettelagtArbeidType.info.tekst"})})})]}),e.jsx(a,{padBottom:"xxl",visible:d.isVisible(l.delvisTilretteleggingPeriodeType),children:e.jsx(g.RadioGroup,{name:l.delvisTilretteleggingPeriodeType,legend:r(i,"tilrettelegging.tilretteleggingPeriodetype.label"),description:F?r(i,"tilrettelegging.tilrettelagtArbeidType.description"):"",radios:[{label:r(i,"tilrettelegging.tilretteleggingPeriodetype.en"),value:v.SAMMME_PERIODE_FREM_TIL_TERMIN},{label:r(i,"tilrettelegging.tilretteleggingPeriodetype.variert"),value:v.VARIERTE_PERIODER}],validate:Ue(i)})}),e.jsxs(a,{padBottom:"xxl",visible:d.isVisible(l.enPeriodeMedTilretteleggingStillingsprosent),children:[e.jsx(a,{padBottom:"m",children:e.jsx(g.NumberInput,{name:l.enPeriodeMedTilretteleggingStillingsprosent,label:r(i,"tilrettelegging.stillingsprosent.label"),description:F?r(i,"tilrettelegging.tilrettelagtArbeidType.description"):"",validate:He(i,n.enPeriodeMedTilretteleggingFom,o.arbeidsforhold.stillinger)})}),e.jsxs(B,{header:r(i,"tilrettelegging.varierendePerioderStillingsprosent.info.tittel"),children:[e.jsx(a,{padBottom:"l",children:e.jsx(f,{children:e.jsx(b,{id:"tilrettelegging.varierendePerioderStillingsprosent.info.tekst.del1"})})}),e.jsx(a,{children:e.jsx(f,{children:e.jsx(b,{id:"tilrettelegging.varierendePerioderStillingsprosent.info.tekst.del2"})})})]})]}),e.jsx(a,{padBottom:"xxl",visible:d.isVisible(l.enPeriodeMedTilretteleggingFom),children:e.jsx(g.DatePicker,{name:l.enPeriodeMedTilretteleggingFom,label:_,description:F?r(i,"tilrettelegging.tilrettelagtArbeidType.description"):"",minDate:new Date(q),maxDate:u,validate:ze(i,n.behovForTilretteleggingFom,x,n.tilretteleggingType,o.arbeidsforhold.navn,h,S),dayPickerProps:{defaultMonth:oe},placeholder:"dd.mm.åååå"})}),e.jsx(a,{padBottom:"xxl",visible:d.isVisible(l.enPeriodeMedTilretteleggingTomType),children:e.jsx(g.RadioGroup,{name:l.enPeriodeMedTilretteleggingTomType,legend:P,radios:De(i,S),validate:qe(i,n.tilretteleggingType,n.behovForTilretteleggingFom,x,o.arbeidsforhold.navn,h,S)})}),e.jsx(a,{padBottom:"xxl",visible:d.isVisible(l.enPeriodeMedTilretteleggingTilbakeIJobbDato),children:e.jsx(g.DatePicker,{name:l.enPeriodeMedTilretteleggingTilbakeIJobbDato,label:ae,minDate:K,maxDate:u,validate:Ke(i,n.behovForTilretteleggingFom,x,n.enPeriodeMedTilretteleggingFom,n.tilretteleggingType,o.arbeidsforhold.navn,h,S),dayPickerProps:{defaultMonth:se},placeholder:"dd.mm.åååå"})}),e.jsx(a,{padBottom:"xxl",children:e.jsxs(D,{size:"small","aria-label":"",children:[e.jsx(D.Header,{children:e.jsx(D.Title,{size:"small",as:"h3",children:e.jsx(b,{id:"tilrettelegging.expansion.tittel"})})}),e.jsx(D.Content,{children:e.jsx(a,{padBottom:"l",children:e.jsx(be,{children:e.jsx(b,{id:"tilrettelegging.expansion.tekst",values:{em:N=>e.jsx("em",{children:N})}})})})})]})}),e.jsx(a,{padBottom:"l",children:e.jsxs(xe,{children:[e.jsx(Qe,{mellomlagreSøknadOgNaviger:t,route:_e.SKJEMA}),e.jsx(de,{type:"submit",disabled:C,loading:C,children:e.jsx(b,{id:"søknad.gåVidere"})})]})})]})})}})};try{X.displayName="TilretteleggingStep",X.__docgenInfo={description:"",displayName:"TilretteleggingStep",props:{mellomlagreSøknadOgNaviger:{defaultValue:null,description:"",name:"mellomlagreSøknadOgNaviger",required:!0,type:{name:"() => Promise<void>"}},avbrytSøknad:{defaultValue:null,description:"",name:"avbrytSøknad",required:!0,type:{name:"() => Promise<void>"}},søkerInfo:{defaultValue:null,description:"",name:"søkerInfo",required:!0,type:{name:"Søkerinfo"}}}}}catch{}export{X as T};
