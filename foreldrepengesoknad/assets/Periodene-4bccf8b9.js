import{f,d as o,T as U,h as k,U as a}from"./dates-37291467.js";import{i as g,a as d,b as p,c as h,d as A,e as c,f as m,g as S,P as u,h as O,S as M,j as y,k as F}from"./Perioden-e5e2ab84.js";import{f as B}from"./uttaksPlanStatus-b4a351f3.js";const fe=t=>({getPeriode:e=>D(t,e),getOpphold:()=>V(t),getUttak:()=>H(t),getOverføringer:()=>b(t),getHull:()=>N(t),getHullOgInfoOgPerioderUtenUttak:()=>w(t),getInfoperioder:()=>C(t),getUtsettelser:()=>j(t),getPerioderEtterFamiliehendelsesdato:e=>T(t,e),getPerioderFørFamiliehendelsesdato:e=>R(t,e),getPerioderMedUgyldigTidsperiode:()=>X(t),getPerioderMedFerieForForelder:e=>ee(t,e),getFørstePerioderEtterFamiliehendelsesdato:e=>W(t,e),getForeldrepengerFørTermin:()=>te(t),getFørsteUttaksdag:()=>Y(t),getFørsteUttaksdagEtterSistePeriode:()=>re(t),getFørsteUttaksdagEksluderInfoperioderOgFrittUttak:()=>Z(t),getAntallUttaksdager:()=>_(t),getAntallFeriedager:e=>$(t,e),finnOverlappendePerioder:e=>q(t,e),finnPeriodeMedDato:e=>z(t,e),finnFørstePeriodeEtterDato:e=>G(t,e),finnAlleForegåendePerioder:e=>v(t,e),finnAllePåfølgendePerioder:e=>I(t,e),finnDenForegåendePerioden:e=>J(t,e),finnPåfølgendePeriode:e=>K(t,e),forskyvPerioder:e=>L(t,e),sort:()=>[...t].sort(l),finnSisteInfoperiode:()=>ne(t)});function l(t,e){return f(t.tidsperiode)===!1||f(e.tidsperiode)===!1?g(t)&&t.skalIkkeHaUttakFørTermin?-1:f(t.tidsperiode)?1:-1:o(t.tidsperiode.fom).isSame(e.tidsperiode.fom,"day")?d(t)?-1:1:U(e.tidsperiode).erOmsluttetAv(t.tidsperiode)?1:o(t.tidsperiode.fom).isBefore(e.tidsperiode.fom,"day")?-1:1}function D(t,e){return t.find(r=>r.id===e)}function H(t){return t.filter(e=>p(e))}function j(t){return t.filter(e=>h(e))}function x(t){return t.filter(e=>y(e))}function b(t){return t.filter(e=>A(e))}function N(t){return t.filter(e=>c(e))}function w(t){return t.filter(e=>c(e)||d(e)||m(e))}function C(t){return t.filter(e=>d(e))}function V(t){return t.filter(e=>S(e))}function q(t,e){return t.filter(r=>{if(r.id===e.id||!f(e.tidsperiode))return!1;const{fom:n,tom:i}=r.tidsperiode;if(!n||!i)return!1;const s=k(n,e.tidsperiode)||k(i,e.tidsperiode),P=o(e.tidsperiode.fom).isSameOrAfter(n,"day")&&o(e.tidsperiode.tom).isSameOrBefore(i,"day");return s||P})}function z(t,e){return t.find(r=>o(e).isBetween(r.tidsperiode.fom,r.tidsperiode.tom,"day","[]"))}function G(t,e){return t.find(r=>o(r.tidsperiode.fom).isAfter(e,"day"))}function v(t,e){return t.filter(r=>o(r.tidsperiode.tom).isBefore(e.tidsperiode.fom,"day"))}function I(t,e){return t.filter(r=>o(r.tidsperiode.fom).isAfter(e.tidsperiode.tom,"day"))}function J(t,e){const r=v(t,e);if(r.length>0)return r.pop()}function K(t,e){const r=I(t,e);if(r.length>0)return r[0]}function L(t,e){let r=e;return t.reduce((n,i)=>{if(h(i)){n.push(i);const s=u(i).getAntallUttaksdager();return s>=r?r=0:r-=s,n}if(d(i)||c(i)||m(i)||O(i)){const s=u(i).getAntallUttaksdager();if(s>r){const P=a(a(i.tidsperiode.fom).denneEllerNeste()).leggTil(r),E={...i,tidsperiode:{fom:P,tom:i.tidsperiode.tom}};return r=0,n.push(E),n}else return s===r?(r=0,n):(r-=s,n)}return n.push(Q(i,r)),n},[])}function Q(t,e){if(e===0)return t;const r=a(a(t.tidsperiode.fom).denneEllerNeste()).leggTil(e);return u(t).setStartdato(r)}function R(t,e){return t.filter(r=>g(r)||f(r.tidsperiode)&&o(r.tidsperiode.fom).isBefore(e,"day"))}function T(t,e){return t.filter(r=>f(r.tidsperiode)&&o(r.tidsperiode.fom).isSameOrAfter(e,"day")&&g(r)===!1)}function W(t,e){const r=T(t,e).sort(l);return r.length>0?r[0]:void 0}function X(t){return t.filter(e=>f(e.tidsperiode)===!1&&g(e)===!1)}function Y(t){const e=t.filter(r=>r.tidsperiode.fom!==void 0).sort(l).shift();if(e)return e.tidsperiode.fom}function Z(t){const e=t.filter(r=>r.tidsperiode.fom!==void 0&&!d(r)&&!m(r)&&!O(r)).sort(l).shift();if(e)return e.tidsperiode.fom}function _(t){return t.reduce((e,r)=>e+u(r).getAntallUttaksdager(),0)}function $(t,e){return x(t).filter(r=>f(r.tidsperiode)&&e?r.forelder===e:!0).map(r=>U(r.tidsperiode).getAntallUttaksdager()).reduce((r,n)=>r+n,0)}function ee(t,e){return t.filter(r=>ie(r,e))}function te(t){const e=t.find(r=>p(r)&&r.konto===M.ForeldrepengerFørFødsel);return e||void 0}function re(t){if(t.length!==0)return a(t[t.length-1].tidsperiode.tom).neste()}const ie=(t,e)=>y(t)&&t.forelder===e;function ne(t){return t.filter(e=>d(e)).sort(l).reverse()[0]}const ae=t=>{const e=t.filter(r=>!d(r));return e.length===0?!1:e.every(r=>r.type===F.Opphold)},le=t=>t.filter(e=>!d(e)).slice().reverse().findIndex(e=>e.type===F.Opphold)===0,ue=t=>t.filter(e=>!d(e)).findIndex(e=>e.type===F.Opphold)===0,ge=t=>Math.floor(t.map(e=>B(e)).reduce((e,r)=>e+r,0));export{fe as P,le as a,ue as b,ge as g,l as s,ae as u};
