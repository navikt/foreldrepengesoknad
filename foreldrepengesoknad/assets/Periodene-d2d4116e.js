import{l as f,d as o,T as U,m as k,U as a}from"./Tidsperioden-0ce27701.js";import{i as g,a as d,b as p,c as h,d as S,e as c,f as m,g as A,h as u,j as O,S as M,k as v,P as F}from"./Perioden-6bc73957.js";import{f as D}from"./uttaksPlanStatus-e16baf6d.js";var H=(t=>(t.ÅTTI_PROSENT="80",t.HUNDRE_PROSENT="100",t))(H||{});const ae=t=>({getPeriode:e=>B(t,e),getOpphold:()=>C(t),getUttak:()=>N(t),getOverføringer:()=>R(t),getHull:()=>b(t),getHullOgInfoOgPerioderUtenUttak:()=>_(t),getInfoperioder:()=>w(t),getUtsettelser:()=>j(t),getPerioderEtterFamiliehendelsesdato:e=>E(t,e),getPerioderFørFamiliehendelsesdato:e=>Q(t,e),getPerioderMedUgyldigTidsperiode:()=>X(t),getPerioderMedFerieForForelder:e=>te(t,e),getFørstePerioderEtterFamiliehendelsesdato:e=>W(t,e),getForeldrepengerFørTermin:()=>re(t),getFørsteUttaksdag:()=>Y(t),getFørsteUttaksdagEtterSistePeriode:()=>ie(t),getFørsteUttaksdagEksluderInfoperioderOgFrittUttak:()=>Z(t),getAntallUttaksdager:()=>$(t),getAntallFeriedager:e=>ee(t,e),finnOverlappendePerioder:e=>V(t,e),finnPeriodeMedDato:e=>q(t,e),finnFørstePeriodeEtterDato:e=>z(t,e),finnAlleForegåendePerioder:e=>y(t,e),finnAllePåfølgendePerioder:e=>T(t,e),finnDenForegåendePerioden:e=>G(t,e),finnPåfølgendePeriode:e=>J(t,e),forskyvPerioder:e=>K(t,e),sort:()=>[...t].sort(l),finnSisteInfoperiode:()=>oe(t)});function l(t,e){return f(t.tidsperiode)===!1||f(e.tidsperiode)===!1?g(t)&&t.skalIkkeHaUttakFørTermin?-1:f(t.tidsperiode)?1:-1:o(t.tidsperiode.fom).isSame(e.tidsperiode.fom,"day")?d(t)?-1:1:U(e.tidsperiode).erOmsluttetAv(t.tidsperiode)?1:o(t.tidsperiode.fom).isBefore(e.tidsperiode.fom,"day")?-1:1}function B(t,e){return t.find(r=>r.id===e)}function N(t){return t.filter(e=>p(e))}function j(t){return t.filter(e=>h(e))}function x(t){return t.filter(e=>v(e))}function R(t){return t.filter(e=>S(e))}function b(t){return t.filter(e=>c(e))}function _(t){return t.filter(e=>c(e)||d(e)||m(e))}function w(t){return t.filter(e=>d(e))}function C(t){return t.filter(e=>A(e))}function V(t,e){return t.filter(r=>{if(r.id===e.id||!f(e.tidsperiode))return!1;const{fom:n,tom:i}=r.tidsperiode;if(!n||!i)return!1;const s=k(n,e.tidsperiode)||k(i,e.tidsperiode),P=o(e.tidsperiode.fom).isSameOrAfter(n,"day")&&o(e.tidsperiode.tom).isSameOrBefore(i,"day");return s||P})}function q(t,e){return t.find(r=>o(e).isBetween(r.tidsperiode.fom,r.tidsperiode.tom,"day","[]"))}function z(t,e){return t.find(r=>o(r.tidsperiode.fom).isAfter(e,"day"))}function y(t,e){return t.filter(r=>o(r.tidsperiode.tom).isBefore(e.tidsperiode.fom,"day"))}function T(t,e){return t.filter(r=>o(r.tidsperiode.fom).isAfter(e.tidsperiode.tom,"day"))}function G(t,e){const r=y(t,e);if(r.length>0)return r.pop()}function J(t,e){const r=T(t,e);if(r.length>0)return r[0]}function K(t,e){let r=e;return t.reduce((n,i)=>{if(h(i)){n.push(i);const s=u(i).getAntallUttaksdager();return s>=r?r=0:r-=s,n}if(d(i)||c(i)||m(i)||O(i)){const s=u(i).getAntallUttaksdager();if(s>r){const P=a(a(i.tidsperiode.fom).denneEllerNeste()).leggTil(r),I={...i,tidsperiode:{fom:P,tom:i.tidsperiode.tom}};return r=0,n.push(I),n}else return s===r?(r=0,n):(r-=s,n)}return n.push(L(i,r)),n},[])}function L(t,e){if(e===0)return t;const r=a(a(t.tidsperiode.fom).denneEllerNeste()).leggTil(e);return u(t).setStartdato(r)}function Q(t,e){return t.filter(r=>g(r)||f(r.tidsperiode)&&o(r.tidsperiode.fom).isBefore(e,"day"))}function E(t,e){return t.filter(r=>f(r.tidsperiode)&&o(r.tidsperiode.fom).isSameOrAfter(e,"day")&&g(r)===!1)}function W(t,e){const r=E(t,e).sort(l);return r.length>0?r[0]:void 0}function X(t){return t.filter(e=>f(e.tidsperiode)===!1&&g(e)===!1)}function Y(t){const e=t.filter(r=>r.tidsperiode.fom!==void 0).sort(l).shift();if(e)return e.tidsperiode.fom}function Z(t){const e=t.filter(r=>r.tidsperiode.fom!==void 0&&!d(r)&&!m(r)&&!O(r)).sort(l).shift();if(e)return e.tidsperiode.fom}function $(t){return t.reduce((e,r)=>e+u(r).getAntallUttaksdager(),0)}function ee(t,e){return x(t).filter(r=>f(r.tidsperiode)&&e?r.forelder===e:!0).map(r=>U(r.tidsperiode).getAntallUttaksdager()).reduce((r,n)=>r+n,0)}function te(t,e){return t.filter(r=>ne(r,e))}function re(t){const e=t.find(r=>p(r)&&r.konto===M.ForeldrepengerFørFødsel);return e||void 0}function ie(t){if(t.length!==0)return a(t[t.length-1].tidsperiode.tom).neste()}const ne=(t,e)=>v(t)&&t.forelder===e;function oe(t){return t.filter(e=>d(e)).sort(l).reverse()[0]}const le=t=>{const e=t.filter(r=>!d(r));return e.length===0?!1:e.every(r=>r.type===F.Opphold)},ue=t=>t.filter(e=>!d(e)).slice().reverse().findIndex(e=>e.type===F.Opphold)===0,ge=t=>t.filter(e=>!d(e)).findIndex(e=>e.type===F.Opphold)===0,Pe=t=>Math.floor(t.map(e=>D(e)).reduce((e,r)=>e+r,0));export{H as D,ae as P,ue as a,ge as b,Pe as g,l as s,le as u};
