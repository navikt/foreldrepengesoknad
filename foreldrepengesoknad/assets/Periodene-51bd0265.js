import{t as f,d as s,T as v,v as S,U as g}from"./Tidsperioden-5c018ee5.js";import{i as c,a as d,b as I,c as p,d as D,e as k,f as U,g as K,h as P,j as h,S as N,k as A,P as F}from"./Perioden-5c608f1b.js";import{e as b,a as O,b as T,c as y,d as H,f as _,h as R,i as j}from"./uttaksPlanStatus-4bdd2373.js";var G=(e=>(e.ÅTTI_PROSENT="80",e.HUNDRE_PROSENT="100",e))(G||{}),a=(e=>(e.Sykdom="SYKDOM",e.Uttak="UTTAK",e.SykdomOgUttak="SYKDOM_OG_UTTAK",e.InstitusjonSøker="INSTITUSJONSOPPHOLD_SØKER",e.InstitusjonBarnet="INSTITUSJONSOPPHOLD_BARNET",e.Arbeid="ARBEID",e.ArbeidOgUttak="ARBEID_OG_UTTAK",e.Ingen="INGEN",e))(a||{});const Ue=e=>({getPeriode:t=>x(e,t),getOpphold:()=>z(e),getUttak:()=>J(e),getOverføringer:()=>w(e),getHull:()=>C(e),getHullOgInfoOgPerioderUtenUttak:()=>V(e),getInfoperioder:()=>q(e),getUtsettelser:()=>L(e),getPerioderEtterFamiliehendelsesdato:t=>M(e,t),getPerioderFørFamiliehendelsesdato:t=>re(e,t),getPerioderMedUgyldigTidsperiode:()=>ie(e),getPerioderMedFerieForForelder:t=>ae(e,t),getFørstePerioderEtterFamiliehendelsesdato:t=>ne(e,t),getForeldrepengerFørTermin:()=>le(e),getFørsteUttaksdag:()=>oe(e),getFørsteUttaksdagEtterSistePeriode:()=>ue(e),getFørsteUttaksdagEksluderInfoperioderOgFrittUttak:()=>se(e),getAntallUttaksdager:()=>de(e),getAntallFeriedager:t=>fe(e,t),finnOverlappendePerioder:t=>Q(e,t),finnPeriodeMedDato:t=>W(e,t),finnFørstePeriodeEtterDato:t=>X(e,t),finnAlleForegåendePerioder:t=>E(e,t),finnAllePåfølgendePerioder:t=>B(e,t),finnDenForegåendePerioden:t=>Z(e,t),finnPåfølgendePeriode:t=>$(e,t),forskyvPerioder:t=>ee(e,t),sort:()=>[...e].sort(m),finnSisteInfoperiode:()=>me(e)});function m(e,t){return f(e.tidsperiode)===!1||f(t.tidsperiode)===!1?c(e)&&e.skalIkkeHaUttakFørTermin?-1:f(e.tidsperiode)?1:-1:s(e.tidsperiode.fom).isSame(t.tidsperiode.fom,"day")?d(e)?-1:1:v(t.tidsperiode).erOmsluttetAv(e.tidsperiode)?1:s(e.tidsperiode.fom).isBefore(t.tidsperiode.fom,"day")?-1:1}function x(e,t){return e.find(r=>r.id===t)}function J(e){return e.filter(t=>I(t))}function L(e){return e.filter(t=>p(t))}function Y(e){return e.filter(t=>A(t))}function w(e){return e.filter(t=>D(t))}function C(e){return e.filter(t=>k(t))}function V(e){return e.filter(t=>k(t)||d(t)||U(t))}function q(e){return e.filter(t=>d(t))}function z(e){return e.filter(t=>K(t))}function Q(e,t){return e.filter(r=>{if(r.id===t.id||!f(t.tidsperiode))return!1;const{fom:i,tom:n}=r.tidsperiode;if(!i||!n)return!1;const o=S(i,t.tidsperiode)||S(n,t.tidsperiode),l=s(t.tidsperiode.fom).isSameOrAfter(i,"day")&&s(t.tidsperiode.tom).isSameOrBefore(n,"day");return o||l})}function W(e,t){return e.find(r=>s(t).isBetween(r.tidsperiode.fom,r.tidsperiode.tom,"day","[]"))}function X(e,t){return e.find(r=>s(r.tidsperiode.fom).isAfter(t,"day"))}function E(e,t){return e.filter(r=>s(r.tidsperiode.tom).isBefore(t.tidsperiode.fom,"day"))}function B(e,t){return e.filter(r=>s(r.tidsperiode.fom).isAfter(t.tidsperiode.tom,"day"))}function Z(e,t){const r=E(e,t);if(r.length>0)return r.pop()}function $(e,t){const r=B(e,t);if(r.length>0)return r[0]}function ee(e,t){let r=t;return e.reduce((i,n)=>{if(p(n)){i.push(n);const o=P(n).getAntallUttaksdager();return o>=r?r=0:r-=o,i}if(d(n)||k(n)||U(n)||h(n)){const o=P(n).getAntallUttaksdager();if(o>r){const l=g(g(n.tidsperiode.fom).denneEllerNeste()).leggTil(r),u={...n,tidsperiode:{fom:l,tom:n.tidsperiode.tom}};return r=0,i.push(u),i}else return o===r?(r=0,i):(r-=o,i)}return i.push(te(n,r)),i},[])}function te(e,t){if(t===0)return e;const r=g(g(e.tidsperiode.fom).denneEllerNeste()).leggTil(t);return P(e).setStartdato(r)}function re(e,t){return e.filter(r=>c(r)||f(r.tidsperiode)&&s(r.tidsperiode.fom).isBefore(t,"day"))}function M(e,t){return e.filter(r=>f(r.tidsperiode)&&s(r.tidsperiode.fom).isSameOrAfter(t,"day")&&c(r)===!1)}function ne(e,t){const r=M(e,t).sort(m);return r.length>0?r[0]:void 0}function ie(e){return e.filter(t=>f(t.tidsperiode)===!1&&c(t)===!1)}function oe(e){const t=e.filter(r=>r.tidsperiode.fom!==void 0).sort(m).shift();if(t)return t.tidsperiode.fom}function se(e){const t=e.filter(r=>r.tidsperiode.fom!==void 0&&!d(r)&&!U(r)&&!h(r)).sort(m).shift();if(t)return t.tidsperiode.fom}function de(e){return e.reduce((t,r)=>t+P(r).getAntallUttaksdager(),0)}function fe(e,t){return Y(e).filter(r=>f(r.tidsperiode)&&t?r.forelder===t:!0).map(r=>v(r.tidsperiode).getAntallUttaksdager()).reduce((r,i)=>r+i,0)}function ae(e,t){return e.filter(r=>ge(r,t))}function le(e){const t=e.find(r=>I(r)&&r.konto===N.ForeldrepengerFørFødsel);return t||void 0}function ue(e){if(e.length!==0)return g(e[e.length-1].tidsperiode.tom).neste()}const ge=(e,t)=>A(e)&&e.forelder===t;function me(e){return e.filter(t=>d(t)).sort(m).reverse()[0]}const Fe=e=>{const t=e.filter(b),r=t.some(O),i=e.some(T),n=t.filter(y).some(O),o=e.filter(H).some(T),l=t.filter(y).some(_),u=e.some(R);return l?u?a.ArbeidOgUttak:a.Arbeid:r||n||o||i?u?a.SykdomOgUttak:a.Sykdom:u?a.Uttak:a.Ingen},Se=e=>{const t=e.filter(r=>!d(r));return t.length===0?!1:t.every(r=>r.type===F.Opphold)},Oe=e=>e.filter(t=>!d(t)).slice().reverse().findIndex(t=>t.type===F.Opphold)===0,Te=e=>e.filter(t=>!d(t)).findIndex(t=>t.type===F.Opphold)===0,ye=e=>Math.floor(e.map(t=>j(t)).reduce((t,r)=>t+r,0));export{G as D,Ue as P,a as S,Oe as a,Te as b,Fe as c,ye as g,m as s,Se as u};
