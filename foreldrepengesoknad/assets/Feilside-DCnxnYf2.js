import{j as r}from"./jsx-runtime-DoxjgJx5.js";import{C,E as x,y as U,o as M,n as B,H as R,b as h,B as v,j as I}from"./Tidsperioden-C8HcA-rk.js";import"./index-C-6Uy6j4.js";import"./index-Cu9bd8lq.js";import"./_baseToString-yTMKM5a7.js";import"./_createSet-BNfKGSGn.js";import{n as H}from"./amplitude.esm-CWYNo8IU.js";import{E as T}from"./axios-Dg6gsKS0.js";import{u as p}from"./useRequest-D3GjlcxZ.js";import{g as m}from"./apiInterceptor-BlveB6PB.js";import{c as F}from"./FpDataContext-CjNulmBK.js";import{L as N,H as Y,B as _}from"./Link-BqZ6CohM.js";const L=(t,e)=>C(e)?e:!Array.isArray(e)&&x(e,[x.HTML5_FMT.DATE,"YYYY-MM-DDTHH:mm:ss.SSSZ"],!0).isValid()?new Date(e):e,P=t=>{if(t)return JSON.parse(t,L)},c=(t,e)=>U(t)?M(t,e):void 0,G=T.REST_API_URL,O="/soknad",V="/soknad/endre",q=()=>{const{data:t,error:e}=p("/sokerinfo",{config:{withCredentials:!0}});return{søkerinfoData:t,søkerinfoError:e}},K=()=>{const{data:t,error:e}=p("/innsyn/v2/saker",{config:{withCredentials:!0}});return{sakerData:t,sakerError:e}},z=()=>{const{data:t,error:e,requestStatus:a}=p("/storage/foreldrepenger",{config:{transformResponse:P,withCredentials:!0}});return{storageData:t,storageError:e,storageStatus:a}},J=(t,e)=>m(e).post("/storage/foreldrepenger",t,{withCredentials:!0}),Z=t=>m(t).get("/storage/kvittering/foreldrepenger",{withCredentials:!0,timeout:15*1e3}),$=(t,e=!1)=>{const{antallBarn:a,farHarRettINorge:n,morHarRettINorge:o,harAnnenForelderTilsvarendeRettEØS:s,dekningsgrad:g,fødselsdato:i,termindato:d,omsorgsovertakelsesdato:f,morHarAleneomsorg:u,farHarAleneomsorg:k,startdatoUttak:S,minsterett:j,erMor:y,morHarUføretrygd:D,familieHendelseDatoNesteSak:w}=t,l="YYYYMMDD",A={farHarRett:n,morHarRett:o,harAnnenForelderTilsvarendeRettEØS:s,morHarAleneomsorg:u||!1,farHarAleneomsorg:k||!1,dekningsgrad:g,antallBarn:a,fødselsdato:c(i,l),termindato:c(d,l),omsorgsovertakelseDato:c(f,l),startdatoUttak:c(S,l),minsterett:j,erMor:y,morHarUføretrygd:D,familieHendelseDatoNesteSak:c(w,l)},{data:E,error:b}=p(`${G}/konto`,{config:{timeout:15*1e3,params:A,withCredentials:!1},isSuspended:e});return{tilgjengeligeStønadskontoerData:E,tilgjengeligeStønadskontoerError:b}},Q=(t,e,a)=>{const n=t.erEndringssøknad?V:O;return m(e).post(n,t,{withCredentials:!0,timeout:120*1e3,headers:{"content-type":"application/json;"},signal:a})},W=(t,e)=>m(t).delete("/storage/foreldrepenger",{withCredentials:!0,signal:e}),X=(t,e,a)=>{const n=e.reduce((o,s)=>(s.uuid&&o.push(s.uuid),o),[]);return m(t).delete("/storage/foreldrepenger/vedlegg",{withCredentials:!0,data:n,signal:a})},ee={useGetUttakskontoer:$,storeAppState:J,getStorageKvittering:Z,useStoredAppState:z,useSøkerinfo:q,sendSøknad:Q,useGetSaker:K,deleteMellomlagretSøknad:W,deleteMellomlagredeVedlegg:X},te=(t,e,a=!0)=>{if(a){console.log({eventName:t,eventData:e});return}setTimeout(()=>{try{H&&H.getInstance().logEvent(t,e)}catch(n){console.error(n)}})},re=({containerId:t,illustrasjon:e,tittel:a,ingress:n,skalKunneGåTilbakeTilSøknad:o,språkkode:s,setLanguage:g,søker:i})=>{const d=I("feilside"),f=F(),u=async()=>{if(i){te("applikasjon-hendelse",{app:"foreldrepengesoknad",team:"foreldrepenger",hendelse:"avbrutt"}),f();try{await ee.deleteMellomlagretSøknad(i.fnr)}catch{}window.location.href="https://nav.no"}},k=()=>{window.location.reload()};return r.jsxs(r.Fragment,{children:[g&&s&&r.jsx(B,{locale:s,availableLocales:["en","nb","nn"],toggle:g}),e&&r.jsx(R,{dialog:{title:e.tittel,text:r.jsxs(r.Fragment,{children:[r.jsx(h,{padBottom:"m",children:e.tekst}),e.lenke&&r.jsx(N,{href:e.lenke.url,children:e.lenke.tekst})]})}}),r.jsxs("div",{id:t,className:d.block,children:[r.jsx(h,{padBottom:"l",children:r.jsx(Y,{size:"large",level:"2",children:a})}),r.jsx(h,{padBottom:"l",children:r.jsx(_,{children:n})}),i!==void 0&&!o&&r.jsx("div",{className:d.element("avbrytKnapp"),children:r.jsx(v,{variant:"primary",onClick:u,children:"Start søknaden på nytt"})}),i!==void 0&&o&&r.jsx("div",{className:d.element("avbrytKnapp"),children:r.jsx(v,{variant:"primary",onClick:k,children:"Gå tilbake til søknaden"})})]})]})};re.__docgenInfo={description:"",methods:[],displayName:"Feilside"};export{ee as A,re as F,te as l};
