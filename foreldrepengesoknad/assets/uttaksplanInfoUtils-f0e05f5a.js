import{r as l}from"./index-1cdf6ce0.js";import{j as R}from"./jsx-runtime-1caa8f64.js";import{u as G,R as T,a as L}from"./useRequest-603f2ddc.js";import{E as P}from"./apiInterceptor-d1094a41.js";import{m as J,l as $,o as E,q as k,r as Q,s as z,i as D,t as W}from"./barnUtils-a1c59311.js";import{I as X,E as S,Q as Z,A as b,r as tt,d as p,T as et}from"./Tidsperioden-1f4512e5.js";import{D as A}from"./Periodene-56b794dc.js";import"./index-753920cd.js";import{i as N}from"./isFarEllerMedmor-120238ea.js";import{g as rt}from"./uttaksplanHarForMangeFlerbarnsuker-8089ba73.js";import"./_baseToString-2517c4f7.js";import"./_createSet-019d3bf6.js";import{c as st}from"./eksisterendeSakUtils-0503f9b8.js";import{S as H}from"./Perioden-ca2a3b5d.js";var f=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER_100="STØNADSKONTOER_100",t.STØNADSKONTOER_80="STØNADSKONTOER_80",t))(f||{});const K={},x=l.createContext(K),y=l.createContext(void 0),v=({children:t})=>{const[e,r]=l.useReducer((s,a)=>{switch(a.type){case"update":return{...s,[a.key]:[a.hash,a.data]};case"reset":return{};default:throw new Error}},K);return R.jsx(x.Provider,{value:e,children:R.jsx(y.Provider,{value:r,children:t})})},C=(t,e)=>{const s=l.useContext(x)[t];return s&&s[0]===e?s[1]:void 0},F=(t,e)=>{const r=l.useContext(y);return s=>{r&&r({type:"update",key:t,hash:e,data:s})}};try{v.displayName="FpApiDataContext",v.__docgenInfo={description:"",displayName:"FpApiDataContext",props:{initialState:{defaultValue:null,description:"",name:"initialState",required:!1,type:{name:"FpApiDataHashMap"}},onDispatch:{defaultValue:null,description:"",name:"onDispatch",required:!1,type:{name:"((action: Action) => void)"}}}}}catch{}const M=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),B=t=>{let e=0;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);e=(e<<5)-e+s,e=e&e}return e},U={[f.ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[f.NESTE_SAK_ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[f.STØNADSKONTOER_80]:`${P.REST_API_URL}/konto`,[f.STØNADSKONTOER_100]:`${P.REST_API_URL}/konto`},Rt=(t,e,r)=>{const s=B(JSON.stringify(M(e))),a=C(t,s),n=!!a,i=F(t,s),{data:o,requestStatus:c,error:d}=G(U[t],{config:{timeout:15*1e3,params:e,withCredentials:!1},isSuspended:n||r});return l.useEffect(()=>{o&&i(o)},[o]),{data:n?a:o,requestStatus:n?T.FINISHED:c,error:d}},Pt=(t,e,r)=>{const s=B(JSON.stringify(M(e))),a=C(t,s),n=!!a,i=F(t,s),{data:o,requestStatus:c,error:d}=L(U[t],e,{config:{withCredentials:!0},isSuspended:n||r});return l.useEffect(()=>{o&&i(o)},[o]),d&&d.message.includes("Ugyldig ident")?{data:void 0,requestStatus:T.FINISHED,error:null}:{data:n?a:o,requestStatus:n?T.FINISHED:c,error:d}},at=(t,e)=>t?!0:D(e)?!!e.harRettPåForeldrepengerINorge:!1,ot=(t,e)=>t?D(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,nt=t=>D(t)?!!t.harRettPåForeldrepengerIEØS:!1,it=(t,e)=>{if(k(t)||W(t))return e||S(t.termindato)},dt=(t,e)=>e||t||void 0,lt=(t,e,r)=>t&&r?r:e,g=(t,e)=>b(t)?tt(t,e):void 0,vt=(t,e,r,s,a,n,i)=>{const o=N(r.rolle),c=J(o,s.erAleneOmOmsorg,e),d=$(!o,s.erAleneOmOmsorg,e),q=a==null?void 0:a.familiehendelsesdato,j=a!==void 0?a.startdatoFørsteStønadsperiode:void 0,u=st(n,t,o,E(t),j),V=lt(o,t.antallBarn,u==null?void 0:u.grunnlag.antallBarn),w=dt(i==null?void 0:i.grunnlag.termindato,u==null?void 0:u.grunnlag.termindato),_=N(r.rolle),Y=X(E(t)),h=N(r.rolle),m="YYYYMMDD",O={farHarRett:at(_,e),morHarRett:ot(_,e),harAnnenForelderTilsvarendeRettEØS:nt(e),morHarAleneomsorg:d||!1,farHarAleneomsorg:c||!1,antallBarn:V,fødselsdato:g(k(t)?S(t.fødselsdatoer[0]):void 0,m),termindato:g(it(t,w),m),omsorgsovertakelseDato:g(Q(t)||z(t)?S(t.adopsjonsdato):void 0,m),startdatoUttak:g(E(t),m),minsterett:Z(Y),erMor:!h,morHarUføretrygd:rt(e,h),familieHendelseDatoNesteSak:g(S(q),m)};return{stønadskontoParams100:{...O,dekningsgrad:A.HUNDRE_PROSENT},stønadskontoParams80:{...O,dekningsgrad:A.ÅTTI_PROSENT}}},ut=(t,e)=>{const r=[];return r.push({...t[0],dager:t[0].dager-e}),r.push({konto:H.AktivitetsfriKvote,dager:e}),r},I=t=>{let e=[];Object.keys(t.kontoer).filter(s=>s!==H.Flerbarnsdager).forEach(s=>{e.push({konto:s,dager:t.kontoer[s]})});const r=t.minsteretter.generellMinsterett;return r>0&&(e=ut(e,r)),e},It=(t,e)=>{const r=I(t),s=I(e);return{[A.ÅTTI_PROSENT]:r,[A.HUNDRE_PROSENT]:s}},kt=(t,e,r)=>{if(t===void 0||e===void 0||r!=="fødsel")return!1;const s=p(t).isSameOrAfter(p(new Date("2019-07-01")),"day");return p(t).add(7,"weeks").add(3,"days").isBefore(p(e),"days")&&s},Ht=(t,e)=>t&&e?(100-parseInt(e,10)).toString():"100",Kt=(t,e)=>et({fom:t,tom:e}).getAntallUttaksdager()-1;export{v as F,f as a,vt as b,Rt as c,It as d,lt as e,Ht as f,Kt as g,kt as s,Pt as u};
