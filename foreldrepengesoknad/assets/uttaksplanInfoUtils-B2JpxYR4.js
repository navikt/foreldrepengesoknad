import{r as d}from"./index-Cu9bd8lq.js";import{j as h}from"./jsx-runtime-DoxjgJx5.js";import{u as V,R as N,a as Y}from"./useRequest-D3GjlcxZ.js";import{E as y}from"./axios-Dg6gsKS0.js";import{c as L,N as G,O as J,y as $,o as X,d as m,T as z}from"./Tidsperioden-C8HcA-rk.js";import"./index-C-6Uy6j4.js";import{K as T,J as S,O as Q,L as W,f as v,X as Z,Y as b,D as A,h as tt,S as P}from"./dateFormValidation-A9ng-RC0.js";import{g as et}from"./useFpNavigator-CnrN-bhH.js";import"./_baseToString-yTMKM5a7.js";import"./_createSet-BNfKGSGn.js";import{e as E}from"./barnUtils-DSjWg_x2.js";import{c as rt}from"./eksisterendeSakUtils-B4-KNNY8.js";var f=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER_100="STØNADSKONTOER_100",t.STØNADSKONTOER_80="STØNADSKONTOER_80",t))(f||{});const k={},K=d.createContext(k),I=d.createContext(void 0),at=({children:t})=>{const[e,r]=d.useReducer((a,o)=>{switch(o.type){case"update":return{...a,[o.key]:[o.hash,o.data]};case"reset":return{};default:throw new Error}},k);return h.jsx(K.Provider,{value:e,children:h.jsx(I.Provider,{value:r,children:t})})},H=(t,e)=>{const a=d.useContext(K)[t];return a&&a[0]===e?a[1]:void 0},q=(t,e)=>{const r=d.useContext(I);return a=>{r&&r({type:"update",key:t,hash:e,data:a})}};at.__docgenInfo={description:"",methods:[],displayName:"FpApiDataContext",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},initialState:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    [FpApiDataType.ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.NESTE_SAK_ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.STØNADSKONTOER_100]?: [number, TilgjengeligeStønadskontoerDTO];
    [FpApiDataType.STØNADSKONTOER_80]?: [number, TilgjengeligeStønadskontoerDTO];
}`,signature:{properties:[]}},description:""},onDispatch:{required:!1,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"{ type: 'update'; key: FpApiDataType; hash: number; data: any } | { type: 'reset' }",elements:[{name:"signature",type:"object",raw:"{ type: 'update'; key: FpApiDataType; hash: number; data: any }",signature:{properties:[{key:"type",value:{name:"literal",value:"'update'",required:!0}},{key:"key",value:{name:"FpApiDataType",required:!0}},{key:"hash",value:{name:"number",required:!0}},{key:"data",value:{name:"any",required:!0}}]}},{name:"signature",type:"object",raw:"{ type: 'reset' }",signature:{properties:[{key:"type",value:{name:"literal",value:"'reset'",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""}}};const x=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),F=t=>{let e=0;for(let r=0;r<t.length;r++){const a=t.charCodeAt(r);e=(e<<5)-e+a,e=e&e}return e},j={[f.ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[f.NESTE_SAK_ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[f.STØNADSKONTOER_80]:`${y.REST_API_URL}/konto`,[f.STØNADSKONTOER_100]:`${y.REST_API_URL}/konto`},_t=(t,e,r)=>{const a=F(JSON.stringify(x(e))),o=H(t,a),n=!!o,i=q(t,a),{data:s,requestStatus:c,error:u}=V(j[t],{config:{timeout:15*1e3,params:e,withCredentials:!1},isSuspended:n||r});return d.useEffect(()=>{s&&i(s)},[s]),{data:n?o:s,requestStatus:n?N.FINISHED:c,error:u}},ht=(t,e,r)=>{const a=F(JSON.stringify(x(e))),o=H(t,a),n=!!o,i=q(t,a),{data:s,requestStatus:c,error:u}=Y(j[t],e,{config:{withCredentials:!0},isSuspended:n||r});return d.useEffect(()=>{s&&i(s)},[s]),u&&u.message.includes("Ugyldig ident")?{data:void 0,requestStatus:N.FINISHED,error:null}:{data:n?o:s,requestStatus:n?N.FINISHED:c,error:u}},st=(t,e)=>t?!0:T(e)?!!e.harRettPåForeldrepengerINorge:!1,ot=(t,e)=>t?T(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,nt=t=>T(t)?!!t.harRettPåForeldrepengerIEØS:!1,it=(t,e)=>{if(v(t)||tt(t))return e||t.termindato},ut=(t,e)=>e||t||void 0,dt=(t,e,r)=>t&&r?r:e,p=(t,e)=>$(t)?X(t,e):void 0,yt=(t,e,r,a,o,n)=>{const i=T(e)?e:void 0,s=S(r.rolle),c=Q(s,(i==null?void 0:i.erAleneOmOmsorg)||!1,e),u=W(!s,(i==null?void 0:i.erAleneOmOmsorg)||!1,e),C=a==null?void 0:a.familiehendelsesdato,B=a!==void 0?a.startdatoFørsteStønadsperiode:void 0,l=rt(o,t,s,E(t),B),M=dt(s,t.antallBarn,l==null?void 0:l.grunnlag.antallBarn),U=ut(n==null?void 0:n.grunnlag.termindato,l==null?void 0:l.grunnlag.termindato),D=S(r.rolle),w=L(E(t)),O=S(r.rolle),g="YYYYMMDD",_={farHarRett:st(D,e),morHarRett:ot(D,e),harAnnenForelderTilsvarendeRettEØS:nt(e),morHarAleneomsorg:u||!1,farHarAleneomsorg:c||!1,antallBarn:M,fødselsdato:p(v(t)?t.fødselsdatoer[0]:void 0,g),termindato:p(it(t,U),g),omsorgsovertakelseDato:p(Z(t)||b(t)?t.adopsjonsdato:void 0,g),startdatoUttak:p(E(t),g),minsterett:G(w),erMor:!O,morHarUføretrygd:et(e,O),familieHendelseDatoNesteSak:p(J(C),g)};return{stønadskontoParams100:{..._,dekningsgrad:A.HUNDRE_PROSENT},stønadskontoParams80:{..._,dekningsgrad:A.ÅTTI_PROSENT}}},lt=(t,e)=>{const r=[];return r.push({...t[0],dager:t[0].dager-e}),r.push({konto:P.AktivitetsfriKvote,dager:e}),r},R=t=>{let e=[];Object.keys(t.kontoer).filter(a=>a!==P.Flerbarnsdager).forEach(a=>{e.push({konto:a,dager:t.kontoer[a]})});const r=t.minsteretter.generellMinsterett;return r>0&&(e=lt(e,r)),e},Rt=(t,e)=>{const r=R(t),a=R(e);return{[A.ÅTTI_PROSENT]:r,[A.HUNDRE_PROSENT]:a}},vt=(t,e,r)=>{if(t===void 0||e===void 0||r!=="fødsel")return!1;const a=m(t).isSameOrAfter(m(new Date("2019-07-01")),"day");return m(t).add(7,"weeks").add(3,"days").isBefore(m(e),"days")&&a},Pt=(t,e)=>t&&e?(100-parseInt(e,10)).toString():"100",kt=(t,e)=>z({fom:m(t).toDate(),tom:m(e).toDate()}).getAntallUttaksdager()-1;export{at as F,f as a,_t as b,Rt as c,dt as d,Pt as e,kt as f,yt as g,vt as s,ht as u};
