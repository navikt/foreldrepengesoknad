import{v as d,i as c}from"./Tidsperioden-Dtf7_zpz.js";import"./jsx-runtime-Cw0GR0a5.js";import"./index-CCQ3W5xA.js";import"./index-CTjT7uj6.js";import{d as i}from"./Uttaksdagen-CXktmUXL.js";import"./_baseToString-Cq6MbKF_.js";import"./_createSet-D2BJ0WVx.js";var u={};function m(e){return p(e)||y(e)||b(e)||v()}function v(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(e,r){if(e){if(typeof e=="string")return l(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,r)}}function y(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function p(e){if(Array.isArray(e))return l(e)}function l(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var h=new RegExp("^\\d{11}$"),g=function(r){return o(r)},A=function(r){return o(r)},F=function(r){return o(r)},M=function(r){return o(r)},I=function(r){return r.substring(0,1)>=4?"dnr":r.substring(2,3)>=8?"tnr":r.substring(2,3)>=4?"hnr":"fnr"},o=function(r){var n=I(r);return S(r,n)},S=function(r,n){if(!h.test(r))return{status:"invalid",reasons:["fnr, dnr or hnr must consist of 11 digits"]};var t=[].concat(m(T(r)),m($(r,n)));return t.length==0?{status:"valid",type:n}:{status:"invalid",reasons:t}},T=function(r){var n=11-(3*r[0]+7*r[1]+6*r[2]+1*r[3]+8*r[4]+9*r[5]+4*r[6]+5*r[7]+2*r[8])%11,t=11-(5*r[0]+4*r[1]+3*r[2]+2*r[3]+7*r[4]+6*r[5]+5*r[6]+4*r[7]+3*r[8]+2*n)%11;return n===11&&(n=0),t===11&&(t=0),n<10&&t<10&&n==r[9]&&t==r[10]?[]:["checksums don't match"]},$=function(r,n){n==="dnr"?r=r.substring(0,1)-4+r.substring(1):n==="hnr"?r=r.substring(0,2)+(r.substring(2,3)-4)+r.substring(3):n==="tnr"&&(r=r.substring(0,2)+(r.substring(2,3)-8)+r.substring(3));var t=r.substring(0,2),s=r.substring(2,4),a=r.substring(4,6),f=new Date(a==="00"?"2000":a,s-1,t);return f&&f.getMonth()+1==s&&f.getDate()==t?[]:["invalid date"]};u.fnr=g;u.dnr=A;u.hnr=F;u.tnr=M;u.idnr=o;const k=e=>{const r=u.idnr(e);return r.status!=="valid"?!1:r.type},_=(e,r)=>{const n=r==="dnr"?`${Number(e.substr(0,1))-4}${e.substr(1,1)}`:e.substr(0,2),t=e.substr(2,2),s=e.substr(4,2);let a=i(`${n}-${t}-${s}`,"DD-MM-YY");return a.get("year")>i().get("year")&&(a=a.subtract(100,"year")),a.isValid()?a.isBefore(i().subtract(16,"year"),"day"):!1},V=(e,r,n,t)=>s=>{if(t)return s===void 0||s.trim()===""?e.formatMessage({id:"valideringsfeil.fødselsnummer.required"}):s.length>50?e.formatMessage({id:"valideringsfeil.fødselsnummer.fødselsnummerForLangt"}):d(s,n,e);if(s===r)return e.formatMessage({id:"valideringsfeil.fødselsnummer.ugyldigEgetFødselsnummer"});const a=k(s);return!t&&!_(s,a)&&a==="fnr"?e.formatMessage({id:"valideringsfeil.fødselsnummer.underSeksten"}):a==="fnr"||a==="dnr"||a==="hnr"?void 0:e.formatMessage({id:"valideringsfeil.fødselsnummer.ugyldigFødselsnummer"})},q=(e,r,n)=>{if(!c(e)||typeof e=="string"&&e.trim()==="")return n.formatMessage({id:"valideringsfeil.inputfelt.required"},{inputFeltLabel:r})},C=(e,r)=>n=>{const t=q(n,e,r);return t||d(n,e,r)};export{C as a,V as v};
