import{n as g,S as p,T as v,b as Le,i as ye,C as Ee,s as G,y as X,$ as _e,z as ke,j as je,w as H,f as b,A as Z,P as R,d as x,G as W,o as V,B as ie,Z as P,a7 as ge,v as ee,U as O,I as L,a8 as re,V as q}from"./dateUtils-becbdc23.js";import{D as B}from"./Dekningsgrad-fced8842.js";import{g as A,d as k,i as Y}from"./validationUtils-00d66cf2.js";import{P as T,s as z}from"./Periodene-dd720f95.js";import{F as w,a0 as h,M as Ge}from"./periodeUtils-1a4dc73e.js";import{a as se,c as He,i as Ve,B as y}from"./useSøknad-54892a90.js";import"./jsx-runtime-670450c2.js";import"./index-7e4e529b.js";import"./index-f1f749bf.js";import{f as Ke}from"./velkommenUtils-40bb4bde.js";import{d as Q}from"./getTypedFormComponents-a42e978b.js";var te=(e=>(e.ORDINÆRT_ARBEID="ORDINÆRT_ARBEID",e.SELVSTENDIG_NÆRINGSDRIVENDE="SELVSTENDIG_NÆRINGSDRIVENDE",e.FRILANS="FRILANS",e.ANNET="ANNET",e))(te||{}),D=(e=>(e.UttakFellesperiodeAnnenForelder="FELLESPERIODE_ANNEN_FORELDER",e.UttakFedrekvoteAnnenForelder="FEDREKVOTE_ANNEN_FORELDER",e.UttakMødrekvoteAnnenForelder="MØDREKVOTE_ANNEN_FORELDER",e.UttakForeldrepengerAnnenForelder="FORELDREPENGER_ANNEN_FORELDER",e.Ingen="INGEN",e))(D||{}),I=(e=>(e.ADOPSJON="ADPSJN",e.OMSORGSOVERTAKELSE="OMSRGO",e.FØDSEL="FODSL",e.TERM="TERM",e))(I||{});const Fe=(e,r,t)=>{if(t!==void 0)return I.ADOPSJON;if(e!==void 0)return I.FØDSEL;if(r!==void 0)return I.TERM;throw new Error("Fødselsdato/ termindato/ omsorgsovertakelsedato mangler")};var U=(e=>(e.Ferie="LOVBESTEMT_FERIE",e.Arbeid="ARBEID",e.Sykdom="SØKER_SYKDOM",e.InstitusjonSøker="SØKER_INNLAGT",e.InstitusjonBarnet="BARN_INNLAGT",e.HvØvelse="HV_ØVELSE",e.NavTiltak="NAV_TILTAK",e.Fri="FRI",e))(U||{}),ve=(e=>(e.AVSLAG_HULL_MELLOM_FORELDRENES_PERIODER="AVSLAG_HULL_MELLOM_FORELDRENES_PERIODER",e.ANNET="ANNET",e))(ve||{}),pe=(e=>(e.fridag="fridag",e.avslåttPeriode="avslåttPeriode",e))(pe||{});const be=(e,r)=>{const t=v(e.tidsperiode).getAntallUttaksdager(),o={...e,tidsperiode:{fom:e.tidsperiode.fom,tom:g(r.tidsperiode.fom).forrige()}},n=v(o.tidsperiode).getAntallUttaksdager(),i=t-n,d=g(r.tidsperiode.tom).neste();if(Ee(e)){const a={...e,id:A(),tidsperiode:{fom:r.tidsperiode.fom,tom:e.tidsperiode.tom}};return[o,r,a]}else{const a={...e,id:A(),tidsperiode:{fom:d,tom:g(d).leggTil(i-1)}};return[o,r,a]}},Ae=(e,r)=>{const t={...e,tidsperiode:{fom:e.tidsperiode.fom,tom:g(r).forrige()}},o={...e,id:A(),tidsperiode:{fom:g(t.tidsperiode.tom).neste(),tom:e.tidsperiode.tom}};return[t,o]},we=(e,r)=>{const t={...e,konto:e.konto==p.Foreldrepenger?p.AktivitetsfriKvote:e.konto,morsAktivitetIPerioden:e.konto==p.Foreldrepenger?void 0:e.morsAktivitetIPerioden,erMorForSyk:e.konto==p.Foreldrepenger?void 0:e.erMorForSyk,tidsperiode:{fom:e.tidsperiode.fom,tom:g(r).forrige()}},o={...e,id:A(),tidsperiode:{fom:g(t.tidsperiode.tom).neste(),tom:e.tidsperiode.tom}};return[t,o]},Je=(e,r)=>{if(T([e]).finnOverlappendePerioder(r).length>0){const t=[k(e.tidsperiode.fom),k(e.tidsperiode.tom),k(r.tidsperiode.fom),k(r.tidsperiode.tom)],o=k.min(t),n=k.max(t),i=t.filter(d=>d!==o&&d!==n);return v({fom:k.min(i).toDate(),tom:k.max(i).toDate()}).getAntallUttaksdager()}return 0},Ur=({perioder:e,nyPeriode:r,familiehendelsesdato:t,harAktivitetskravIPeriodeUtenUttak:o,erAdopsjon:n,bareFarHarRett:i,erFarEllerMedmor:d,førsteUttaksdagNesteBarnsSak:a})=>{if(e.length===0)return[r];const s=r.tidsperiode.fom,l=r.tidsperiode.tom;if(k(s).isBefore(t,"day")&&k(l).isSameOrAfter(t,"day"))return[...e];const m=e.find(f=>v(f.tidsperiode).inneholderDato(s));if(m){if(Le(m)||ye(m))return[...e];const f=T(e).finnAlleForegåendePerioder(m),u=T(e).finnAllePåfølgendePerioder(m),c=v(r.tidsperiode).getAntallUttaksdager();if(k(m.tidsperiode.fom).isSame(s))return[...f,r,...T([m,...u]).forskyvPerioder(c)];const E=be(m,r);return Ee(m)?[...f,E[0],E[1],...T([E[2],...u]).forskyvPerioder(c)]:[...f,...E,...T(u).forskyvPerioder(c)]}else{const f=e[0],u=e[e.length-1],c=k(r.tidsperiode.fom),E=k(r.tidsperiode.tom);if(c.isBefore(f.tidsperiode.fom,"day")){const F=de(r.tidsperiode,f.tidsperiode);if(E.isSameOrAfter(f.tidsperiode.fom,"day")){if(c.isBefore(t,"day"))return[...e];const S=Je(f,r);return[r,...T(e).forskyvPerioder(S)]}return F?[r,...$(F,o,t,n,i,d,a),...e]:[r,...e]}else{const F=de(u.tidsperiode,r.tidsperiode);return F?[...e,...$(F,o,t,n,i,d,a),r]:[...e,r].sort(z)}}},Be=(e,r,t,o)=>{if(e.length<=1)return e;const n=[];let i={...e[0]};return e.forEach((d,a)=>{if(a!==0){if(i===void 0){i=d;return}if(H(i).erLik(d,!1,!0)&&H(i).erSammenhengende(d)){if(o&&G(d)&&d.ønskerSamtidigUttak&&G(i)&&i.ønskerSamtidigUttak){const l=T(o).finnOverlappendePerioder(i),m=T(o).finnOverlappendePerioder(d);if(m.length===0&&l.length>0||m.length>0&&l.length===0){n.push(i),i=d;return}}if(k(i.tidsperiode.tom).isBefore(r,"day")&&k(d.tidsperiode.tom).isSameOrAfter(g(r).denneEllerNeste())||t!==void 0&&k(i.tidsperiode.tom).isBefore(t,"day")&&k(d.tidsperiode.fom).isSameOrAfter(g(t).denneEllerNeste(),"day")){n.push(i),i=d;return}const s={fom:i.tidsperiode.fom,tom:d.tidsperiode.tom};i.tidsperiode={...s};return}else n.push(i);i=d}}),n.push(i),n},J=(e,r)=>r!==void 0&&W(e.tidsperiode,r)?Ae(e,r):[e],$=(e,r,t,o,n,i,d,a=pe.fridag)=>{if(b(t)){const m=g(t).denneEllerNeste(),f=g(m).leggTil(30),u=v(e).erInnenforFørsteSeksUker(t),c=k(e.fom).isBefore(f,"day")&&!o&&(n&&b(t)||i&&Z(t));if(r&&!c)return J(j(e,a),d);if(k(e.fom).isBefore(t,"day"))return J(N(e),d);if(u&&!o){if(k(e.tom).isBefore(f,"day"))return n&&b(t)||i&&Z(t)?[N(e)]:[j(e,a)];const E=v({fom:e.fom,tom:f}).getAntallUttaksdager()-2,F=v(e).getAntallUttaksdager()-E,S={fom:e.fom,tom:g(f).leggTil(-1)},K={fom:f,tom:g(f).leggTil(F-2)};if(n&&b(t)||i&&Z(t)){if(i&&!n)return[N(e)];const Ne=N(S),Me=j(K,a);return[Ne,Me]}const C=j(S,a),Ie=N(K);return[C,Ie]}return J(N(e),d)}return J(j(e,a),d)},j=(e,r)=>({id:A(),type:R.Hull,tidsperiode:e,årsak:r}),N=e=>({id:A(),type:R.PeriodeUtenUttak,tidsperiode:e}),de=(e,r)=>{const t={fom:g(e.tom).neste(),tom:g(r.fom).forrige()},o=v(t).getAntallUttaksdager();if(x(t)&&o>0)return t},Or=e=>e.reduce((r,t,o)=>o===0&&X(t)?r:o===e.length-1?(ke(t)||X(t)||r.push(t),r):(r.push(t),r),[]),ae=(e,r,t,o,n,i,d)=>e.length===0?e:e.reduce((s,l,m)=>{if(m===0&&i){const E=g(t).denneEllerNeste();if(k(E).isBefore(l.tidsperiode.fom)){const F={fom:E,tom:g(l.tidsperiode.fom).forrige()};v(F).getAntallUttaksdager()>0&&s.push(...$(F,r,t,o,n,i,d))}}if(s.push(l),m===e.length-1)return s;const f=e[m+1],u={fom:g(l.tidsperiode.tom).neste(),tom:g(f.tidsperiode.fom).forrige()};return k(u.tom).isBefore(u.fom,"day")||!i&&k(u.tom).isBefore(t,"day")||v(u).getAntallUttaksdager()>0&&s.push(...$(u,r,t,o,n,i,d)),s},[]),le=(e,r)=>{const t=r.filter(n=>v(e.tidsperiode).inneholderDato(n.dato)),o=[];return t.length===2?[e]:(t.forEach((n,i)=>{if(i===0){o.push({...e,tidsperiode:{fom:n.dato,tom:void 0}});return}o[i-1].tidsperiode.tom=n.erFom?g(n.dato).forrige():n.dato,i<t.length-1&&o.push({...e,id:A(),tidsperiode:{fom:n.erFom?n.dato:g(n.dato).neste(),tom:void 0}})}),o.filter(n=>x(n.tidsperiode)))},Ye=(e,r)=>{const t=e.filter(s=>x(s.tidsperiode)).reduce((s,l)=>(s.push({dato:l.tidsperiode.fom,erFom:!0}),s.push({dato:l.tidsperiode.tom,erFom:!1}),s),[]),o=r.reduce((s,l)=>(s.push({dato:l.tidsperiode.fom,erFom:!0}),s.push({dato:l.tidsperiode.tom,erFom:!1}),s),[]),i=t.concat(o).sort((s,l)=>{if(s.dato.getTime()-l.dato.getTime()===0){if(!s.erFom)return 1;if(!l.erFom)return-1}return s.dato.getTime()-l.dato.getTime()}).filter((s,l,m)=>m.findIndex(f=>f.dato.getTime()===s.dato.getTime()&&f.erFom===s.erFom)===l),d=[],a=[];return e.forEach(s=>{const l=le(s,i);d.push(...l)}),r.forEach(s=>{const l=le(s,i);a.push(...l)}),{normaliserteEgnePerioder:d,normaliserteAnnenPartsPerioder:a}},$e=(e,r,t,o,n=!1)=>{if(r.length===0)return e;if(e.length===0)return r;const{normaliserteEgnePerioder:i,normaliserteAnnenPartsPerioder:d}=Ye(e,r),a=i.reduce((u,c)=>{const E=T(d).finnOverlappendePerioder(c);if(E.length===0)return G(c)&&c.ønskerSamtidigUttak&&n?(u.push({...c,ønskerSamtidigUttak:!1}),u):(u.push(c),u);if(X(c)||_e(c)||ke(c)){const F=E[0];return u.push({...F,visPeriodeIPlan:!0}),u}if(G(c)&&c.ønskerSamtidigUttak){const F=E[0];return u.push(c),je(F)||u.push({...F,visPeriodeIPlan:!1,ønskerSamtidigUttak:!0}),u}else return u.push(c),u},[]);a.sort(z);const s=e[0].tidsperiode.fom,l=d.filter(u=>k(u.tidsperiode.tom).isBefore(s,"day")),m=e[e.length-1].tidsperiode.tom,f=d.filter(u=>k(u.tidsperiode.fom).isAfter(m,"day"));return Be([...l,...a,...f],t,o,r)},fe=e=>H(e).getAntallUttaksdager()>0,xe=e=>x(e.tidsperiode),ze=(e,r,t)=>{if(e.length<=1)return e;const o=[],n=e.filter(s=>V(s)),d=[...e.filter(s=>!V(s)),...n];let a={...d[0]};return d.forEach((s,l)=>{if(l!==0){if(a===void 0){a=s;return}if(H(a).erLik(s,!1,!0)&&H(a).erSammenhengende(s)&&!k(s.tidsperiode.fom).isSame(r,"day")&&!(t!==void 0&&k(s.tidsperiode.fom).isSame(t,"day"))){a.tidsperiode.tom=s.tidsperiode.tom;return}else o.push(a);a=s}}),o.push(a),o.sort(z)},Ce=e=>{const{fom:r,tom:t}=e.tidsperiode,o=ie(r),n=ie(t);return o&&n?e:!o&&!n?{...e,tidsperiode:{fom:g(r).neste(),tom:g(t).forrige()}}:!o&&n?{...e,tidsperiode:{fom:g(r).neste(),tom:t}}:{...e,tidsperiode:{fom:r,tom:g(t).forrige()}}},_=(e,r)=>e.gjelderAnnenPart?r?w.mor:w.farMedmor:r?w.farMedmor:w.mor,Se=e=>{switch(e){case U.Arbeid:return O.Arbeid;case U.Ferie:return O.Ferie;case U.InstitusjonBarnet:return O.InstitusjonBarnet;case U.InstitusjonSøker:return O.InstitusjonSøker;case U.Sykdom:return O.Sykdom;case U.HvØvelse:return O.HvØvelse;case U.NavTiltak:return O.NavTiltak;case U.Fri:return O.Fri;default:return}},Ze=e=>{switch(e.kontoType){case p.Fedrekvote:return h.UttakFedrekvoteAnnenForelder;case p.Fellesperiode:return h.UttakFellesperiodeAnnenForelder;case p.Mødrekvote:return h.UttakMødrekvoteAnnenForelder;case p.Foreldrepenger:return h.UttakForeldrepengerAnnenForelder;case p.ForeldrepengerFørFødsel:return h.ForeldrepengerFørFødsel;default:return}},Pe=(e,r,t)=>{if(e)return e.toString();if(r)return t?(100-t).toString():"100"},qe=e=>e?p.AktivitetsfriKvote:p.Foreldrepenger,Qe=(e,r,t,o)=>{if(e&&!r.flerbarnsdager&&!r.samtidigUttak&&k(r.periode.fom).isBefore(k(t).add(6,"weeks"),"day")&&o!==p.AktivitetsfriKvote&&r.morsAktivitet!==Ge.Uføre)return!0},Xe=(e,r,t)=>{var F;const o=e.gradering!==void 0&&e.resultat.innvilget,n=P(e.periode),i=r.søkerErFarEllerMedmor&&!r.morHarRett&&!r.farMedmorErAleneOmOmsorg&&!r.harAnnenForelderTilsvarendeRettEØS;if(e.gjelderAnnenPart)return oe(e,r.søkerErFarEllerMedmor,t);const d=t!==void 0?t.find(S=>(v(P(S.periode)).erLik(n)||v(P(S.periode)).overlapper(n))&&S.guid!==e.guid):void 0;let a;d&&(a=d.samtidigUttak);const s=Pe(e.samtidigUttak,a,(F=e.gradering)==null?void 0:F.arbeidstidprosent),{termindato:l,fødselsdato:m,omsorgsovertakelsesdato:f}=r,u=ge(l,m,f),c=i?qe(e.resultat.trekkerMinsterett):e.kontoType;return{id:A(),type:R.Uttak,konto:c,tidsperiode:n,forelder:_(e,r.søkerErFarEllerMedmor),ønskerSamtidigUttak:e.samtidigUttak!==void 0,gradert:o,samtidigUttakProsent:s,ønskerFlerbarnsdager:r.antallBarn>1?e.flerbarnsdager:void 0,stillingsprosent:o?e.gradering.arbeidstidprosent.toString():void 0,arbeidsformer:o?[ir(e.gradering.aktivitet.type)]:void 0,orgnumre:o&&e.gradering.aktivitet.arbeidsgiver!==void 0?[e.gradering.aktivitet.arbeidsgiver.id]:void 0,morsAktivitetIPerioden:e.morsAktivitet,erMorForSyk:Qe(r.søkerErFarEllerMedmor,e,u,c),angittAvAnnenPart:e.angittAvAnnenPart}},We=(e,r)=>e.gjelderAnnenPart?oe(e,r):{id:A(),type:R.Utsettelse,årsak:Se(e.utsettelseÅrsak),tidsperiode:P(e.periode),forelder:_(e,r),erArbeidstaker:!1,morsAktivitetIPerioden:e.morsAktivitet},er=(e,r)=>({id:A(),type:R.Info,infotype:ee.avslåttPeriode,tidsperiode:P(e.periode),avslåttPeriodeType:e.utsettelseÅrsak!==void 0?R.Utsettelse:R.Uttak,kontoType:e.kontoType,forelder:_(e,r),overskrives:!0,visPeriodeIPlan:!0}),oe=(e,r,t)=>{var l;const o=P(e.periode);if(e.utsettelseÅrsak!==void 0&&e.resultat.innvilget===!0)return{type:R.Info,infotype:ee.utsettelseAnnenPart,id:A(),årsak:Se(e.utsettelseÅrsak),tidsperiode:o,forelder:_(e,r),overskrives:!0,visPeriodeIPlan:!0};const n=t!==void 0&&!t.some(m=>(v(P(m.periode)).erLik(o)||v(P(m.periode)).overlapper(o))&&m.guid!==e.guid),i=Ze(e),d=t!==void 0?t.find(m=>(v(P(m.periode)).erLik(o)||v(P(m.periode)).overlapper(o))&&m.guid!==e.guid):void 0;let a;d&&(a=d.samtidigUttak);const s=Pe(e.samtidigUttak,a,(l=e.gradering)==null?void 0:l.arbeidstidprosent);return{type:R.Info,infotype:ee.uttakAnnenPart,id:A(),årsak:i,tidsperiode:o,forelder:_(e,r),overskrives:!0,gradert:e.gradering!==void 0,ønskerSamtidigUttak:s!==void 0,samtidigUttakProsent:s,stillingsprosent:e.gradering!==void 0?e.gradering.arbeidstidprosent.toString():void 0,visPeriodeIPlan:n}},rr=(e,r)=>({id:A(),forelder:_(e,r),konto:e.kontoType,tidsperiode:P(e.periode),type:R.Overføring,årsak:e.overføringÅrsak}),tr=(e,r,t)=>e.gjelderAnnenPart?oe(e,r.søkerErFarEllerMedmor,t):e.resultat.innvilget?e.utsettelseÅrsak!==void 0?We(e,r.søkerErFarEllerMedmor):e.overføringÅrsak!==void 0?rr(e,r.søkerErFarEllerMedmor):Xe(e,r,t):er(e,r.søkerErFarEllerMedmor),or=e=>e.resultat.innvilget?!0:e.gjelderAnnenPart?!1:e.resultat.årsak!==ve.AVSLAG_HULL_MELLOM_FORELDRENES_PERIODER&&e.resultat.trekkerDager===!0,nr=(e,r,t)=>{const o=[];return e.forEach(n=>{W(n.tidsperiode,r)&&G(n)?we(n,r).forEach(d=>o.push(d)):t!==void 0&&W(n.tidsperiode,t)?Ae(n,t).forEach(d=>o.push(d)):o.push(n)}),o},Te=(e,r,t)=>{const o=e.filter(or),n=o.map(E=>tr(E,r,o)),i=new Date(r.familiehendelseDato),d=nr(n,i,t),a=ze([...d].sort(z).filter(fe).map(Ce).filter(xe).filter(fe),i,t),s=!r.morHarRett&&r.farMedmorHarRett&&!r.harAnnenForelderTilsvarendeRettEØS,l=r.familiehendelseType===I.ADOPSJON,m=a.filter(E=>!V(E)),f=a.filter(E=>V(E)),u=!r.erDeltUttak&&s&&!r.farMedmorErAleneOmOmsorg,c=ae(m,u,i,l,s,r.søkerErFarEllerMedmor,t);return ae($e(c,f,i,t),u,i,l,s,r.søkerErFarEllerMedmor,t)};var ne=(e=>(e.ÅTTI_PROSENT="ÅTTI",e.HUNDRE_PROSENT="HUNDRE",e))(ne||{}),M=(e=>(e.BARE_SØKER_RETT="BARE_SØKER_RETT",e.ALENEOMSORG="ALENEOMSORG",e.BEGGE_RETT="BEGGE_RETT",e))(M||{});const ir=e=>{switch(e){case te.SELVSTENDIG_NÆRINGSDRIVENDE:return q.selvstendignæringsdrivende;case te.FRILANS:return q.frilans;default:return q.arbeidstaker}},me=e=>{switch(e){case D.UttakFedrekvoteAnnenForelder:return p.Fedrekvote;case D.UttakFellesperiodeAnnenForelder:return p.Fellesperiode;case D.UttakMødrekvoteAnnenForelder:return p.Mødrekvote;default:return}},sr=e=>{switch(e){case D.UttakFedrekvoteAnnenForelder:return h.UttakFedrekvoteAnnenForelder;case D.UttakFellesperiodeAnnenForelder:return h.UttakFellesperiodeAnnenForelder;case D.UttakMødrekvoteAnnenForelder:return h.UttakMødrekvoteAnnenForelder;default:return}},Re=(e,r)=>{const{oppholdÅrsak:t}=e,o={guid:A(),periode:{fom:e.fom,tom:e.tom},gjelderAnnenPart:r,resultat:e.resultat,kontoType:e.kontoType,flerbarnsdager:e.flerbarnsdager,gradering:e.gradering,utsettelseÅrsak:e.utsettelseÅrsak,overføringÅrsak:e.overføringÅrsak,samtidigUttak:e.samtidigUttak,morsAktivitet:e.morsAktivitet,oppholdÅrsak:sr(e.oppholdÅrsak)};return t!==void 0&&r===!1&&(o.gjelderAnnenPart=!0,o.kontoType=me(t)),t!==void 0&&r&&(o.gjelderAnnenPart=!1,o.angittAvAnnenPart=!0,o.kontoType=me(t)),o},ue=e=>e.resultat.innvilget,Ue=(e,r,t)=>{const o=t.filter(i=>e.guid!==i.guid&&v(P(e.periode)).erLik(P(i.periode)));if(o.length===0)return!0;const n=o.filter(ue);return!(ue(e)===!1&&n.length>0)},hr=e=>{if(!(e===void 0||e===""||Object.keys(e).length===0||e.perioder.length===0))return L(e.perioder[0].fom)},Dr=(e,r,t,o,n)=>{if(e===void 0||e===""||Object.keys(e).length===0)return;const i=!0,d=e.perioder.map(u=>Re(u,i)).filter(Ue);let a;e.termindato!==void 0?a=e.termindato:(se(r)||He(r))&&r.termindato!==void 0&&(a=Q(r.termindato));const s=se(r)?Q(r.fødselsdatoer[0]):void 0,l=Ve(r)?Q(r.adopsjonsdato):void 0,m={dekningsgrad:e.dekningsgrad===ne.HUNDRE_PROSENT?B.HUNDRE_PROSENT:B.ÅTTI_PROSENT,antallBarn:e.antallBarn?e.antallBarn:r.antallBarn,morErAleneOmOmsorg:!1,morErUfør:!1,morHarRett:!0,farMedmorErAleneOmOmsorg:!1,farMedmorHarRett:!0,søkerErFarEllerMedmor:t,termindato:a,fødselsdato:s,omsorgsovertakelsesdato:l,erDeltUttak:!0,erBarnetFødt:s!==void 0,familiehendelseDato:o,familiehendelseType:Fe(s,a,l),harAnnenForelderTilsvarendeRettEØS:!1,ønskerJustertUttakVedFødsel:void 0,barn:[]},f=Te(d,m,n);return{saksnummer:"",erAnnenPartsSak:i,grunnlag:m,saksperioder:d,uttaksplan:f.filter(u=>V(u))}},dr=(e,r)=>{if(e===void 0||e===""||Object.keys(e).length===0)return;const t=!1,{dekningsgrad:o,familiehendelse:{fødselsdato:n,termindato:i,omsorgsovertakelse:d,antallBarn:a},harAnnenForelderTilsvarendeRettEØS:s,morUføretrygd:l,rettighetType:m,sakTilhørerMor:f,ønskerJustertUttakVedFødsel:u}=e,c=e.gjeldendeVedtak?e.gjeldendeVedtak.perioder:[],E=!f,F={dekningsgrad:o===ne.HUNDRE_PROSENT?B.HUNDRE_PROSENT:B.ÅTTI_PROSENT,antallBarn:a,morErAleneOmOmsorg:f&&m===M.ALENEOMSORG,morErUfør:l,morHarRett:f||m===M.BEGGE_RETT,farMedmorErAleneOmOmsorg:!f&&m===M.ALENEOMSORG,farMedmorHarRett:!f||m===M.BEGGE_RETT,søkerErFarEllerMedmor:E,termindato:i,fødselsdato:n,omsorgsovertakelsesdato:d,erDeltUttak:m===M.BEGGE_RETT,erBarnetFødt:n!==void 0,familiehendelseDato:ge(i,n,d),familiehendelseType:Fe(n,i,d),ønskerJustertUttakVedFødsel:n===void 0?u:void 0,harAnnenForelderTilsvarendeRettEØS:s},S=c.map(C=>Re(C,t)).filter(Ue),K=Te(S,F,r);return{saksnummer:e.saksnummer,erAnnenPartsSak:t,grunnlag:F,saksperioder:S,uttaksplan:K}},Oe=e=>e===I.TERM||e===I.FØDSEL?"fødsel":"adopsjon",ar=(e,r)=>({erAleneOmOmsorg:r?e.farMedmorErAleneOmOmsorg:e.morErAleneOmOmsorg}),lr=(e,r,t)=>{const{søkerErFarEllerMedmor:o}=t,n=e.kjønn==="K";switch(r){case"fødsel":case"adopsjon":return n?o?"medmor":"mor":"far";default:return}},ce=(e,r)=>e&&e.fødselsdatoer?re(e.fødselsdatoer):r.fødselsdato?Array(r.antallBarn).fill(L(r.fødselsdato)):[],fr=(e,r,t)=>{switch(e){case"fødsel":return r.fødselsdato?{type:y.FØDT,antallBarn:r.antallBarn,fødselsdatoer:ce(t,r),termindato:r.termindato?L(r.termindato):void 0,fnr:t==null?void 0:t.fnr}:{type:y.UFØDT,antallBarn:r.antallBarn,termindato:L(r.termindato),terminbekreftelse:[]};case"adopsjon":return{type:y.ADOPTERT_STEBARN,adopsjonsdato:L(r.omsorgsovertakelsesdato),antallBarn:r.antallBarn,fødselsdatoer:ce(t,r),omsorgsovertakelse:[],fnr:t==null?void 0:t.fnr};default:return}},mr=(e,r,t,o,n)=>{switch(e){case"fødsel":case"adopsjon":return o?{fornavn:t.fornavn!==void 0&&t.fornavn!==""?t.fornavn:Y(n,"annen.forelder"),etternavn:t.etternavn,erUfør:r.morErUfør,harRettPåForeldrepengerINorge:!!r.morHarRett&&!r.harAnnenForelderTilsvarendeRettEØS,fnr:t.fnr,kanIkkeOppgis:!1,harRettPåForeldrepengerIEØS:r.harAnnenForelderTilsvarendeRettEØS}:{fornavn:t.fornavn!==void 0&&t.fornavn!==""?t.fornavn:Y(n,"annen.forelder"),etternavn:t.etternavn,harRettPåForeldrepengerINorge:!!r.farMedmorHarRett&&!r.harAnnenForelderTilsvarendeRettEØS,fnr:t.fnr,kanIkkeOppgis:!1,harRettPåForeldrepengerIEØS:r.harAnnenForelderTilsvarendeRettEØS};default:return}},ur=(e,r,t,o,n,i,d)=>{var m;if(i===void 0&&r===void 0||!d)return;const a=i!==void 0?e.find(f=>i.includes(f.fnr)&&f.annenForelder!==void 0):void 0,s=r!==void 0?e.find(f=>Ke(f.fødselsdato,r)&&f.annenForelder!==void 0):void 0,l=a||s;if(l!==void 0&&((m=l.annenForelder)==null?void 0:m.fnr)===d){const f=l.annenForelder,{fornavn:u}=f,c=u!==void 0&&u.trim()!==""?u:Y(n,"annen.forelder"),E={...f,fornavn:c};return mr(o,t,E,t.søkerErFarEllerMedmor,n)}},he=e=>e.fødselsdatoer!==void 0&&e.fødselsdatoer.length>0?{type:y.FØDT,antallBarn:e.antallBarn,fødselsdatoer:re(e.fødselsdatoer),fnr:e.fnr!==void 0&&e.fnr.length>0?e.fnr.filter(r=>!!r):void 0}:e.termindato!==void 0?{type:y.UFØDT,antallBarn:e.antallBarn,termindato:e.termindato}:{type:y.IKKE_UTFYLT,antallBarn:e.antallBarn,fødselsdatoer:e.fødselsdatoer?re(e.fødselsdatoer):[],fnr:e.fnr!==void 0&&e.fnr.length>0?e.fnr.filter(r=>!!r):void 0},cr=e=>e.annenForelder!==void 0?{fornavn:e.annenForelder.fornavn,etternavn:e.annenForelder.etternavn,fnr:e.annenForelder.fnr,kanIkkeOppgis:!1}:{kanIkkeOppgis:!1},Ir=e=>{const r=he(e),t=cr(e);return{barn:r,annenForelder:t,erEndringssøknad:!1}},De=(e,r,t,o,n,i)=>{const d=r!==void 0?r.fnr:void 0,a={fornavn:Y(e,"annen.forelder"),etternavn:"",fnr:d||"",harRettPåForeldrepengerINorge:t.søkerErFarEllerMedmor?!!t.morHarRett&&!t.harAnnenForelderTilsvarendeRettEØS:!!t.farMedmorHarRett&&!t.harAnnenForelderTilsvarendeRettEØS,harRettPåForeldrepengerIEØS:t.harAnnenForelderTilsvarendeRettEØS,kanIkkeOppgis:!1,erUfør:t.søkerErFarEllerMedmor?t.morErUfør:void 0};return ur(o.registrerteBarn,L(t.fødselsdato),t,n,e,i,d)||a},Nr=(e,r,t)=>{var l;const o=dr(e.sak,void 0),{grunnlag:n}=o,i=Oe(n.familiehendelseType),d=he(e),a=De(r,(l=e.sak)==null?void 0:l.annenPart,n,t,i,e.fnr),s={barn:d,annenForelder:a,erEndringssøknad:!1};if(e.sak!==void 0){const m={situasjon:e.sak.gjelderAdopsjon?"adopsjon":"fødsel",rolle:e.sak.sakTilhørerMor?void 0:"far"};s.søkersituasjon=m}return s},Mr=(e,r,t,o,n)=>{const{grunnlag:i,uttaksplan:d}=r,{dekningsgrad:a,familiehendelseType:s,søkerErFarEllerMedmor:l,ønskerJustertUttakVedFødsel:m}=i,f=Oe(s);if(!f)return;const u=ar(i,l),c=fr(f,i,n),E=lr(e.person,f,i);if(!c||!E)return;const F=De(t,o,i,e,f,n==null?void 0:n.fnr);return{søker:u,søkersituasjon:{situasjon:f,rolle:E},barn:c,annenForelder:F,erEndringssøknad:!0,dekningsgrad:a,uttaksplan:d,saksnummer:r.saksnummer,ønskerJustertUttakVedFødsel:m}};export{ne as D,M as R,$e as a,Or as b,we as c,Ae as d,hr as e,ae as f,$ as g,dr as h,Nr as i,Ir as j,Ur as l,Dr as m,Ye as n,Mr as o,Be as s};
//# sourceMappingURL=eksisterendeSakUtils-18463ac8.js.map
