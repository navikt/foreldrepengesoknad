import{r as S}from"./index-OjgoNOWw.js";import{E as D,g as l}from"./apiInterceptor-aGCWLuNT.js";import{N as C,Q as E,y as T,W as v}from"./Tidsperioden-2d_zadTE.js";import"./jsx-runtime-DtaoT6pD.js";import"./index-rOAPTY5O.js";import"./_baseToString-c7_W74Ua.js";import"./_createSet-hSZRoo1M.js";const p=()=>{window.location.href=D.LOGIN_URL+"?redirect="+window.location.origin};var a=(e=>(e.UNFETCHED="Unfetched",e.IN_PROGRESS="InProgress",e.FINISHED="Finished",e))(a||{});const I={config:{},isSuspended:!1},k=(e,t=I)=>{const[r,s]=S.useState(),[o,u]=S.useState(null),[i,d]=S.useState(a.UNFETCHED),g=t.fnr?l(t.fnr):l();return S.useEffect(()=>{!t.isSuspended&&i===a.UNFETCHED&&(d(a.IN_PROGRESS),g.get(e,t.config).then(n=>{n.data===""?s(void 0):s(n.data),d(a.FINISHED)}).catch(n=>{n.response&&(n.response.status===401||n.response.status===403)?p():u(n),d(a.FINISHED)}))},[t,e,g,i]),{data:r,error:o,requestStatus:i}},M=(e,t,r=I)=>{const[s,o]=S.useState(),[u,i]=S.useState(null),[d,g]=S.useState(a.UNFETCHED),n=r.fnr?l(r.fnr):l();return S.useEffect(()=>{!r.isSuspended&&d===a.UNFETCHED&&(g(a.IN_PROGRESS),n.post(e,t,r.config).then(c=>{c.data===""?o(void 0):o(c.data),g(a.FINISHED)}).catch(c=>{c.response&&(c.response.status===401||c.response.status===403)?p():i(c),g(a.FINISHED)}))},[r,e,n,d,t]),{data:s,error:u,requestStatus:d}},y=(e,t)=>C(t)?t:!Array.isArray(t)&&E(t,[E.HTML5_FMT.DATE,"YYYY-MM-DDTHH:mm:ss.SSSZ"],!0).isValid()?new Date(t):t,O=e=>{if(e)return JSON.parse(e,y)},m=(e,t)=>T(e)?v(e,t):void 0,_=D.REST_API_URL,q="/soknad",G="/soknad/endre",Y=()=>{const{data:e,error:t}=k("/sokerinfo",{config:{withCredentials:!0}});return{søkerinfoData:e,søkerinfoError:t}},L=()=>{const{data:e,error:t}=k("/innsyn/v2/saker",{config:{withCredentials:!0}});return{sakerData:e,sakerError:t}},x=(e,t,r,s)=>{const o={annenPartFødselsnummer:e,barnFødselsnummer:t,familiehendelse:r},{data:u,error:i,requestStatus:d}=M("/innsyn/v2/annenPartVedtak",o,{config:{withCredentials:!0},isSuspended:s});return i&&i.message.includes("Ugyldig ident")?{eksisterendeSakAnnenPartData:void 0,eksisterendeSakAnnenPartError:void 0,eksisterendeSakAnnenPartRequestStatus:a.FINISHED}:{eksisterendeSakAnnenPartData:u,eksisterendeSakAnnenPartError:i,eksisterendeSakAnnenPartRequestStatus:d}},V=()=>{const{data:e,error:t,requestStatus:r}=k("/storage/foreldrepenger",{config:{transformResponse:O,withCredentials:!0}});return{storageData:e,storageError:t,storageStatus:r}},j=(e,t)=>l(t).post("/storage/foreldrepenger",e,{withCredentials:!0}),b=e=>l(e).get("/storage/kvittering/foreldrepenger",{withCredentials:!0,timeout:15*1e3}),B=(e,t=!1)=>{const{antallBarn:r,farHarRettINorge:s,morHarRettINorge:o,harAnnenForelderTilsvarendeRettEØS:u,dekningsgrad:i,fødselsdato:d,termindato:g,omsorgsovertakelsesdato:n,morHarAleneomsorg:c,farHarAleneomsorg:H,startdatoUttak:h,minsterett:A,erMor:N,morHarUføretrygd:U,familieHendelseDatoNesteSak:P}=e,f="YYYYMMDD",R={farHarRett:s,morHarRett:o,harAnnenForelderTilsvarendeRettEØS:u,morHarAleneomsorg:c||!1,farHarAleneomsorg:H||!1,dekningsgrad:i,antallBarn:r,fødselsdato:m(d,f),termindato:m(g,f),omsorgsovertakelseDato:m(n,f),startdatoUttak:m(h,f),minsterett:A,erMor:N,morHarUføretrygd:U,familieHendelseDatoNesteSak:m(P,f)},{data:F,error:w}=k(`${_}/konto`,{config:{timeout:15*1e3,params:R,withCredentials:!1},isSuspended:t});return{tilgjengeligeStønadskontoerData:F,tilgjengeligeStønadskontoerError:w}},J=(e,t,r)=>{const s=e.erEndringssøknad?G:q;return l(t).post(s,e,{withCredentials:!0,timeout:120*1e3,headers:{"content-type":"application/json;"},signal:r})},K=(e,t)=>l(e).delete("/storage/foreldrepenger",{withCredentials:!0,signal:t}),Q=(e,t,r)=>{const s=t.reduce((o,u)=>(u.uuid&&o.push(u.uuid),o),[]);return l(e).delete("/storage/foreldrepenger/vedlegg",{withCredentials:!0,data:s,signal:r})},re={useGetUttakskontoer:B,storeAppState:j,getStorageKvittering:b,useGetAnnenPartsVedtak:x,useStoredAppState:V,useSøkerinfo:Y,sendSøknad:J,useGetSaker:L,deleteMellomlagretSøknad:K,deleteMellomlagredeVedlegg:Q};export{re as A,a as R,p as r};
