import{j as e}from"./jsx-runtime-1caa8f64.js";import{r as D}from"./index-1cdf6ce0.js";import{u as Y,i as k,s as $,c as s,H as z,G as Q,b as B,B as W,k as w}from"./Tidsperioden-3740d843.js";import"./_baseToString-43959ddd.js";import"./_createSet-fe2162c5.js";import{l as X}from"./links-4d39192e.js";import{g as Z,s as ee,V as O,a as te,v as ne,S as P,b as f,B as re,c as ae,d as oe}from"./velkommenUtils-228b2bf6.js";import{b as _,C as a}from"./FpDataContext-c0784ba8.js";import{D as se}from"./DinePlikter-63580f7e.js";import{D as le}from"./DinePersonopplysningerModal-5ae0fd4d.js";import{a as ie,S as T}from"./useFpNavigator-f31fd526.js";import{m as de,o as me,a as pe,b as ue}from"./eksisterendeSakUtils-e9e81b77.js";import{A as ke}from"./amplitude-db41cfb9.js";import{B as ce}from"./Link-d47e444a.js";const ge=()=>{const r=_();return{oppdaterSøknadIState:(t,c)=>{r(a.SØKERSITUASJON,t.søkersituasjon),r(a.OM_BARNET,t.barn),r(a.ANNEN_FORELDER,t.annenForelder),r(a.SØKER,t.søker),r(a.UTENLANDSOPPHOLD,t.informasjonOmUtenlandsopphold?{iNorgeNeste12Mnd:t.informasjonOmUtenlandsopphold.iNorgeNeste12Mnd,iNorgeSiste12Mnd:t.informasjonOmUtenlandsopphold.iNorgeSiste12Mnd}:void 0),r(a.UTENLANDSOPPHOLD_TIDLIGERE,t.informasjonOmUtenlandsopphold?{tidligereOpphold:t.informasjonOmUtenlandsopphold.tidligereOpphold}:void 0),r(a.UTENLANDSOPPHOLD_SENERE,t.informasjonOmUtenlandsopphold?{senereOpphold:t.informasjonOmUtenlandsopphold.senereOpphold}:void 0),r(a.PERIODE_MED_FORELDREPENGER,{dekningsgrad:t.dekningsgrad}),r(a.UTTAKSPLAN,t.uttaksplan),r(a.UTTAKSPLAN_METADATA,{ønskerJustertUttakVedFødsel:t.ønskerJustertUttakVedFødsel}),c&&r(a.EKSISTERENDE_SAK,c)}}};const x=({locale:r,saker:v,onChangeLocale:t,harGodkjentVilkår:c,søkerInfo:h,setHarGodkjentVilkår:L,setErEndringssøknad:U,setSøknadGjelderNyttBarn:I,mellomlagreSøknadOgNaviger:G})=>{const E=w("velkommen"),l=Y(),M=ie(G),[F,q]=D.useState(!1),K=_(),{oppdaterSøknadIState:N}=ge(),[C,b]=D.useState(!1),g=Z(v,h.registrerteBarn),V=[...g].sort(ee),H=i=>{if(i.harForståttRettigheterOgPlikter!==!0)return;q(!0);const n=i.valgteBarn===P.SØKNAD_GJELDER_NYTT_BARN?void 0:g.find(o=>o.id===i.valgteBarn),d=n!==void 0&&!!n.kanSøkeOmEndring;let p;n!==void 0&&(p=oe(n,V),K(a.BARN_FRA_NESTE_SAK,p));const u=d&&n.sak!==void 0?v.find(o=>{var S;return o.saksnummer===((S=n.sak)==null?void 0:S.saksnummer)}):void 0,j=p!==void 0?p.startdatoFørsteStønadsperiode:void 0,m=d&&u,y=n!==void 0&&n.sak!==void 0&&n.kanSøkeOmEndring===!1,J=!m&&!y&&n!==void 0;let R=T.SØKERSITUASJON,A=!1;if(m){const o=de(u,j);R=T.UTTAKSPLAN;const S=me(h,o,l,u.annenPart,n);N(S,o)}else if(y){const o=pe(n,l,h);N(o)}else if(J){const o=ue(n);N(o)}else A=!0;L(i.harForståttRettigheterOgPlikter),U(d),I(A),M.goToNextStep(R)};return e.jsx(O.FormikWrapper,{initialValues:te(c),onSubmit:H,renderForm:({values:i,setFieldValue:n})=>{const d=ne.getVisbility({...i,selectableBarn:g}),p=i.valgteBarn,u=p===P.SØKNAD_GJELDER_NYTT_BARN?void 0:g.find(m=>m.id===p),j=u!==void 0&&u.kanSøkeOmEndring===!0?k(l,"velkommen.endreSøknad"):k(l,"velkommen.begynnMedSøknad");return e.jsxs(O.Form,{includeButtons:!1,children:[e.jsx($,{locale:r,availableLocales:["nb","nn"],toggle:t}),e.jsxs("div",{className:E.block,children:[e.jsx(s,{children:e.jsx(z,{size:"xlarge",className:`${E.element("tittel")}`,children:k(l,"velkommen.tittel")})}),e.jsx(s,{padBottom:"l",children:e.jsxs(Q,{poster:!0,children:[e.jsx(s,{padBottom:"m",children:k(l,"velkommen.guidepanel.del1")})," ",e.jsx(s,{children:e.jsx(B,{id:"velkommen.guidepanel.del2",values:{a:m=>e.jsx("a",{className:"lenke",rel:"noopener noreferrer",href:X.foreldrepenger,children:m})}})})]})}),e.jsx(s,{padBottom:"l",visible:d.isVisible(f.valgteBarn),children:e.jsx(re,{selectableBarn:V,visibility:d,formValues:i,setFieldValue:n})}),e.jsx(s,{padBottom:"l",visible:d.isVisible(f.harForståttRettigheterOgPlikter),children:e.jsx(ke,{variant:"info",children:k(l,"velkommen.lagring.info")})}),e.jsx(s,{padBottom:"l",visible:d.isVisible(f.harForståttRettigheterOgPlikter),children:e.jsx(O.ConfirmationCheckbox,{name:f.harForståttRettigheterOgPlikter,label:k(l,"velkommen.samtykke"),validate:ae(l),children:e.jsxs(e.Fragment,{children:[e.jsx(s,{padBottom:"l",children:e.jsx(B,{id:"velkommen.samtykkeIntro.del1"})}),e.jsx(s,{padBottom:"m",children:e.jsx(se,{})})]})})}),e.jsx(s,{padBottom:"l",children:e.jsx("div",{style:{textAlign:"center"},children:e.jsx(W,{type:"submit",variant:"primary",disabled:F,loading:F,children:j})})}),e.jsx(ce,{className:E.element("personopplysningerLink"),children:e.jsx("a",{className:"lenke",href:"#",onClick:m=>{m.preventDefault(),b(!0)},children:e.jsx(B,{id:"velkommen.lesMerOmPersonopplysninger"})})}),e.jsx(le,{isOpen:C,onRequestClose:()=>b(!1)})]})]})}})},Re=x;try{x.displayName="Velkommen",x.__docgenInfo={description:"",displayName:"Velkommen",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string"}},onChangeLocale:{defaultValue:null,description:"",name:"onChangeLocale",required:!0,type:{name:"(locale: LocaleNo) => void"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'}]}},saker:{defaultValue:null,description:"",name:"saker",required:!0,type:{name:"Sak[]"}},fnr:{defaultValue:null,description:"",name:"fnr",required:!0,type:{name:"string"}},harGodkjentVilkår:{defaultValue:null,description:"",name:"harGodkjentVilkår",required:!0,type:{name:"boolean"}},søkerInfo:{defaultValue:null,description:"",name:"søkerInfo",required:!0,type:{name:"Søkerinfo"}},setHarGodkjentVilkår:{defaultValue:null,description:"",name:"setHarGodkjentVilkår",required:!0,type:{name:"(harGodkjentVilkår: boolean) => void"}},setErEndringssøknad:{defaultValue:null,description:"",name:"setErEndringssøknad",required:!0,type:{name:"(erEndringssøknad: boolean) => void"}},setSøknadGjelderNyttBarn:{defaultValue:null,description:"",name:"setSøknadGjelderNyttBarn",required:!0,type:{name:"(søknadGjelderNyttBarn: boolean) => void"}},mellomlagreSøknadOgNaviger:{defaultValue:null,description:"",name:"mellomlagreSøknadOgNaviger",required:!0,type:{name:"() => Promise<void>"}}}}}catch{}export{Re as V};
