import{a as S,F as j,j as o}from"./jsx-runtime-670450c2.js";import{r as E}from"./index-f1f749bf.js";import{a as b,af as T,B as p,R as B,i as d,aP as L}from"./validationUtils-00d66cf2.js";import{E as x,c as q}from"./getTypedFormComponents-a42e978b.js";import"./index-7e4e529b.js";import{g as C}from"./apiInterceptor-0530a171.js";import{A as N}from"./AttachmentList-a572d934.js";import{d as D}from"./globalUtil-9d9e0ee4.js";import{c as R,d as U}from"./vedleggUtils-c5e558a5.js";import{B as w}from"./Link-40b5f3c6.js";function z(e){const t={withCredentials:!0,timeout:45e3,headers:{"content-type":"multipart/form-data"}},n=new FormData;n.append("id",e.id),n.append("vedlegg",e.file,e.filename);const l=`${x.REST_API_URL}/storage/vedlegg`;return C().post(l,n,t)}const G={saveAttachment:z},y=[".pdf",".jpeg",".jpg",".png"],h=16777,K=.0009765625,O=(e,t,n)=>e.map(l=>{const r=U(l,t,n);return r.pending=!0,r}),P=e=>{const t=e.split(".").pop();return y.includes(`.${t.toLowerCase()}`)},$=e=>e*K<=h,M=(e,t,n)=>e.filter(l=>{const r=P(l.filename);r||t(a=>a.concat(d(n,"vedlegg.feilmelding.ugyldig.type",{filename:l.filename})));const u=$(l.filesize);return u||t(a=>a.concat(d(n,"vedlegg.feilmelding.ugyldig.størrelse",{filename:l.filename,maxStørrelse:h}))),r&&u}),X=(e,t,n,l,r,u)=>{e.forEach(async(a,m)=>{try{const s=await G.saveAttachment(a);a.pending=!1,a.url=s.headers.location,a.uploaded=!0,a.uuid=s.data,t(r+m,a)}catch{n(r+m),l(c=>c.concat(d(u,"vedlegg.feilmelding.opplasting.feilet",{filename:a.filename})))}})},f=({attachments:e,name:t,onFileInputClick:n,attachmentType:l,skjemanummer:r,label:u,legend:a,...m})=>{const s=b(),{setFieldValue:c}=T(),[v,g]=E.useState([]);return S(j,{children:[o(p,{padBottom:"l",children:o(q,{legend:a,buttonLabel:u,name:t,accept:y.join(", "),onFilesSelect:(i,{push:F,replace:k,remove:V})=>{const A=O(i,l,r),I=M(A,g,s);I.forEach(_=>F(_)),X(I,k,V,g,e.length,s)},onClick:n,error:v.length>0?v.map(i=>o(w,{children:i},i)):void 0,...m})}),o(p,{padBottom:"l",visible:e.length>0,children:o(N,{attachments:e.filter(i=>!R(i)),showFileSize:!0,onDelete:i=>{c(t,D(e,i))}})}),o(p,{children:o(B,{header:d(s,"pictureScanninGuide.apneLabel"),children:o(L,{backgroundColor:"blue"})})})]})},le=f;try{f.displayName="FormikFileUploader",f.__docgenInfo={description:"",displayName:"FormikFileUploader",props:{attachments:{defaultValue:null,description:"",name:"attachments",required:!0,type:{name:"Attachment[]"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"any"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},attachmentType:{defaultValue:null,description:"",name:"attachmentType",required:!0,type:{name:"enum",value:[{value:'"omsorgsovertakelse"'},{value:'"adopsjonsvedtak"'},{value:'"terminbekreftelse"'},{value:'"fødselsattest"'},{value:'"anneninntektDokumentasjon"'},{value:'"utsettelseSykdomUttaksplan"'},{value:'"morsaktivitetdokumentasjon"'},{value:'"dokumentasjonOverføringAvKvote"'},{value:'"dokumentasjonAvAleneomsorg"'},{value:'"senEndring"'},{value:'"hvØvelse"'},{value:'"navTiltak"'}]}},skjemanummer:{defaultValue:null,description:"",name:"skjemanummer",required:!0,type:{name:"enum",value:[{value:'"I000060"'},{value:'"I000051"'},{value:'"I000061"'},{value:'"I000041"'},{value:'"I000110"'},{value:'"I000111"'},{value:'"I000112"'},{value:'"I000037"'},{value:'"I000039"'},{value:'"I000038"'},{value:'"I000023"'},{value:'"I000044"'},{value:'"I000007"'},{value:'"I000042"'},{value:'"I000062"'},{value:'"I000116"'},{value:'"I000117"'}]}},legend:{defaultValue:null,description:"",name:"legend",required:!0,type:{name:"string"}},onFileInputClick:{defaultValue:null,description:"",name:"onFileInputClick",required:!1,type:{name:"(() => void)"}}}}}catch{}export{le as F};
//# sourceMappingURL=FormikFileUploader-22e1c282.js.map
