import{r as m}from"./index-DVXBtNgz.js";import{E as v}from"./Environment-O62Hvuhd.js";import{u as P,R as T}from"./useRequest-xvnIIQeg.js";import{j as N}from"./jsx-runtime-_e34SzbC.js";import{d,T as k}from"./Tidsperioden-DXYe3XPH.js";import"./index--IHLcpuH.js";import{x as A,J as g,L as K,K as x,y,U as B,V as F,A as C}from"./index-fVqCcxAQ.js";import{g as q}from"./useFpNavigator-7x8FqVW-.js";import"./_baseToString-CUxX9raG.js";import"./_createSet-BJbToUt4.js";import{g as I}from"./barnUtils-B4myndx0.js";import{c as M}from"./eksisterendeSakUtils-BkU4Tf8D.js";var l=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER="STØNADSKONTOER",t))(l||{});const S={},D=m.createContext(S),_=m.createContext(void 0),w=({children:t})=>{const[e,r]=m.useReducer((a,s)=>{switch(s.type){case"update":return{...a,[s.key]:[s.hash,s.data]};case"reset":return{};default:throw new Error}},S);return N.jsx(D.Provider,{value:e,children:N.jsx(_.Provider,{value:r,children:t})})},V=(t,e)=>{const a=m.useContext(D)[t];return a&&a[0]===e?a[1]:void 0},U=(t,e)=>{const r=m.useContext(_);return a=>{r&&r({type:"update",key:t,hash:e,data:a})}};w.__docgenInfo={description:"",methods:[],displayName:"FpApiDataContext",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},initialState:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    [FpApiDataType.ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.NESTE_SAK_ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.STØNADSKONTOER]?: [number, TilgjengeligeStønadskontoer];
}`,signature:{properties:[]}},description:""},onDispatch:{required:!1,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"{ type: 'update'; key: FpApiDataType; hash: number; data: any } | { type: 'reset' }",elements:[{name:"signature",type:"object",raw:"{ type: 'update'; key: FpApiDataType; hash: number; data: any }",signature:{properties:[{key:"type",value:{name:"literal",value:"'update'",required:!0}},{key:"key",value:{name:"FpApiDataType",required:!0}},{key:"hash",value:{name:"number",required:!0}},{key:"data",value:{name:"any",required:!0}}]}},{name:"signature",type:"object",raw:"{ type: 'reset' }",signature:{properties:[{key:"type",value:{name:"literal",value:"'reset'",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""}}};const j=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),H=t=>{let e=0;for(let r=0;r<t.length;r++){const a=t.charCodeAt(r);e=(e<<5)-e+a,e=e&e}return e},L={[l.ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[l.NESTE_SAK_ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[l.STØNADSKONTOER]:`${v.REST_API_URL}/konto`},ut=(t,e,r)=>{const a=H(JSON.stringify(j(e))),s=V(t,a),i=!!s,n=U(t,a),{data:o,requestStatus:c,error:p}=P(L[t],e,{config:{withCredentials:!0},isSuspended:i||r});return m.useEffect(()=>{o&&n(o)},[o]),p&&p.message.includes("Ugyldig ident")?{data:void 0,requestStatus:T.FINISHED,error:null}:{data:i?s:o,requestStatus:i?T.FINISHED:c,error:p}},G=(t,e)=>t?!0:A(e)?!!e.harRettPåForeldrepengerINorge:!1,J=(t,e)=>t?A(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,b=(t,e)=>{if(y(t)||C(t))return e||t.termindato},Y=(t,e)=>e||t||void 0,$=(t,e,r)=>t&&r?r:e,z=(t,e,r,a)=>r||a?"ALENEOMSORG":t&&e?"BEGGE_RETT":"BARE_SØKER_RETT",dt=(t,e,r,a,s,i)=>{const n=A(e)?e:void 0,o=g(r.rolle),c=K(o,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),p=x(!o,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),h=a!==void 0?a.startdatoFørsteStønadsperiode:void 0,u=M(s,t,o,I(t),h),R=$(o,t.antallBarn,u==null?void 0:u.grunnlag.antallBarn),O=Y(i==null?void 0:i.grunnlag.termindato,u==null?void 0:u.grunnlag.termindato),E=g(r.rolle),f=g(r.rolle);return{rettighetstype:z(G(E,e),J(E,e),p||!1,c||!1),brukerrolle:f?"FAR":"MOR",antallBarn:R.toString(),fødselsdato:y(t)?t.fødselsdatoer[0]:void 0,termindato:b(t,O),omsorgsovertakelseDato:B(t)||F(t)?t.adopsjonsdato:void 0,morHarUføretrygd:q(e,f)}},mt=(t,e,r)=>{if(t===void 0||e===void 0||r!=="fødsel")return!1;const a=d(t).isSameOrAfter(d(new Date("2019-07-01")),"day");return d(t).add(7,"weeks").add(3,"days").isBefore(d(e),"days")&&a},pt=(t,e)=>t&&e?(100-parseInt(e,10)).toString():"100",lt=(t,e)=>k({fom:d(t).toDate(),tom:d(e).toDate()}).getAntallUttaksdager()-1;export{w as F,l as a,$ as b,pt as c,lt as d,Y as e,dt as g,mt as s,ut as u};
