var de=t=>{throw TypeError(t)};var J=(t,e,s)=>e.has(t)||de("Cannot "+s);var r=(t,e,s)=>(J(t,e,"read from private field"),s?s.call(t):e.get(t)),g=(t,e,s)=>e.has(t)?de("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),c=(t,e,s,i)=>(J(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),f=(t,e,s)=>(J(t,e,"access private method"),s);import{S as Ie,p as pe,r as T,s as Y,b as V,n as Qe,i as Z,c as ge,t as _e,f as xe,d as Fe,e as me,g as Se,u as Me,k as he}from"./index-0JiJ8puv.js";import{r as I}from"./index-DI2V0i71.js";import"./jsx-runtime-CLpGMVip.js";import{g as Ae,J as we}from"./barnUtils-Ds0BDrdi.js";import{c as Be}from"./eksisterendeSakUtils-gJUyDuJP.js";import{i as X,d as De,h as Pe}from"./useFpNavigator-B_npRmUQ.js";import{O as $,a8 as ve,aa as Ue,N as Ne,a9 as ke}from"./Uttaksplan-B8suQbPt.js";var O,a,K,b,A,U,x,C,q,N,k,w,B,F,L,h,H,ee,te,se,re,ie,ne,ae,Ce,Oe,Le=(Oe=class extends Ie{constructor(e,s){super();g(this,h);g(this,O);g(this,a);g(this,K);g(this,b);g(this,A);g(this,U);g(this,x);g(this,C);g(this,q);g(this,N);g(this,k);g(this,w);g(this,B);g(this,F);g(this,L,new Set);this.options=s,c(this,O,e),c(this,C,null),c(this,x,pe()),this.options.experimental_prefetchInRender||r(this,x).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,a).addObserver(this),Re(r(this,a),this.options)?f(this,h,H).call(this):this.updateResult(),f(this,h,re).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return oe(r(this,a),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return oe(r(this,a),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,h,ie).call(this),f(this,h,ne).call(this),r(this,a).removeObserver(this)}setOptions(e,s){const i=this.options,l=r(this,a);if(this.options=r(this,O).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof T(this.options.enabled,r(this,a))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");f(this,h,ae).call(this),r(this,a).setOptions(this.options),i._defaulted&&!Y(this.options,i)&&r(this,O).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,a),observer:this});const u=this.hasListeners();u&&ye(r(this,a),l,this.options,i)&&f(this,h,H).call(this),this.updateResult(s),u&&(r(this,a)!==l||T(this.options.enabled,r(this,a))!==T(i.enabled,r(this,a))||V(this.options.staleTime,r(this,a))!==V(i.staleTime,r(this,a)))&&f(this,h,ee).call(this);const n=f(this,h,te).call(this);u&&(r(this,a)!==l||T(this.options.enabled,r(this,a))!==T(i.enabled,r(this,a))||n!==r(this,F))&&f(this,h,se).call(this,n)}getOptimisticResult(e){const s=r(this,O).getQueryCache().build(r(this,O),e),i=this.createResult(s,e);return He(this,i)&&(c(this,b,i),c(this,U,this.options),c(this,A,r(this,a).state)),i}getCurrentResult(){return r(this,b)}trackResult(e,s){const i={};return Object.keys(e).forEach(l=>{Object.defineProperty(i,l,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(l),s==null||s(l),e[l])})}),i}trackProp(e){r(this,L).add(e)}getCurrentQuery(){return r(this,a)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=r(this,O).defaultQueryOptions(e),i=r(this,O).getQueryCache().build(r(this,O),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(e){return f(this,h,H).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,b)))}createResult(e,s){var fe;const i=r(this,a),l=this.options,u=r(this,b),n=r(this,A),m=r(this,U),E=e!==i?e.state:r(this,K),{state:S}=e;let o={...S},M=!1,p;if(s._optimisticResults){const y=this.hasListeners(),D=!y&&Re(e,s),P=y&&ye(e,i,s,l);(D||P)&&(o={...o,...Fe(S.data,e.options)}),s._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:Q,errorUpdatedAt:_,status:R}=o;if(s.select&&o.data!==void 0)if(u&&o.data===(n==null?void 0:n.data)&&s.select===r(this,q))p=r(this,N);else try{c(this,q,s.select),p=s.select(o.data),p=me(u==null?void 0:u.data,p,s),c(this,N,p),c(this,C,null)}catch(y){c(this,C,y)}else p=o.data;if(s.placeholderData!==void 0&&p===void 0&&R==="pending"){let y;if(u!=null&&u.isPlaceholderData&&s.placeholderData===(m==null?void 0:m.placeholderData))y=u.data;else if(y=typeof s.placeholderData=="function"?s.placeholderData((fe=r(this,k))==null?void 0:fe.state.data,r(this,k)):s.placeholderData,s.select&&y!==void 0)try{y=s.select(y),c(this,C,null)}catch(D){c(this,C,D)}y!==void 0&&(R="success",p=me(u==null?void 0:u.data,y,s),M=!0)}r(this,C)&&(Q=r(this,C),p=r(this,N),_=Date.now(),R="error");const j=o.fetchStatus==="fetching",z=R==="pending",W=R==="error",ce=z&&j,le=p!==void 0,v={status:R,fetchStatus:o.fetchStatus,isPending:z,isSuccess:R==="success",isError:W,isInitialLoading:ce,isLoading:ce,data:p,dataUpdatedAt:o.dataUpdatedAt,error:Q,errorUpdatedAt:_,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>E.dataUpdateCount||o.errorUpdateCount>E.errorUpdateCount,isFetching:j,isRefetching:j&&!z,isLoadingError:W&&!le,isPaused:o.fetchStatus==="paused",isPlaceholderData:M,isRefetchError:W&&le,isStale:ue(e,s),refetch:this.refetch,promise:r(this,x)};if(this.options.experimental_prefetchInRender){const y=G=>{v.status==="error"?G.reject(v.error):v.data!==void 0&&G.resolve(v.data)},D=()=>{const G=c(this,x,v.promise=pe());y(G)},P=r(this,x);switch(P.status){case"pending":e.queryHash===i.queryHash&&y(P);break;case"fulfilled":(v.status==="error"||v.data!==P.value)&&D();break;case"rejected":(v.status!=="error"||v.error!==P.reason)&&D();break}}return v}updateResult(e){const s=r(this,b),i=this.createResult(r(this,a),this.options);if(c(this,A,r(this,a).state),c(this,U,this.options),r(this,A).data!==void 0&&c(this,k,r(this,a)),Y(i,s))return;c(this,b,i);const l={},u=()=>{if(!s)return!0;const{notifyOnChangeProps:n}=this.options,m=typeof n=="function"?n():n;if(m==="all"||!m&&!r(this,L).size)return!0;const d=new Set(m??r(this,L));return this.options.throwOnError&&d.add("error"),Object.keys(r(this,b)).some(E=>{const S=E;return r(this,b)[S]!==s[S]&&d.has(S)})};(e==null?void 0:e.listeners)!==!1&&u()&&(l.listeners=!0),f(this,h,Ce).call(this,{...l,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,h,re).call(this)}},O=new WeakMap,a=new WeakMap,K=new WeakMap,b=new WeakMap,A=new WeakMap,U=new WeakMap,x=new WeakMap,C=new WeakMap,q=new WeakMap,N=new WeakMap,k=new WeakMap,w=new WeakMap,B=new WeakMap,F=new WeakMap,L=new WeakMap,h=new WeakSet,H=function(e){f(this,h,ae).call(this);let s=r(this,a).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(Qe)),s},ee=function(){f(this,h,ie).call(this);const e=V(this.options.staleTime,r(this,a));if(Z||r(this,b).isStale||!ge(e))return;const i=_e(r(this,b).dataUpdatedAt,e)+1;c(this,w,setTimeout(()=>{r(this,b).isStale||this.updateResult()},i))},te=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,a)):this.options.refetchInterval)??!1},se=function(e){f(this,h,ne).call(this),c(this,F,e),!(Z||T(this.options.enabled,r(this,a))===!1||!ge(r(this,F))||r(this,F)===0)&&c(this,B,setInterval(()=>{(this.options.refetchIntervalInBackground||xe.isFocused())&&f(this,h,H).call(this)},r(this,F)))},re=function(){f(this,h,ee).call(this),f(this,h,se).call(this,f(this,h,te).call(this))},ie=function(){r(this,w)&&(clearTimeout(r(this,w)),c(this,w,void 0))},ne=function(){r(this,B)&&(clearInterval(r(this,B)),c(this,B,void 0))},ae=function(){const e=r(this,O).getQueryCache().build(r(this,O),this.options);if(e===r(this,a))return;const s=r(this,a);c(this,a,e),c(this,K,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Ce=function(e){Se.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(r(this,b))}),r(this,O).getQueryCache().notify({query:r(this,a),type:"observerResultsUpdated"})})},Oe);function je(t,e){return T(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Re(t,e){return je(t,e)||t.state.data!==void 0&&oe(t,e,e.refetchOnMount)}function oe(t,e,s){if(T(e.enabled,t)!==!1){const i=typeof s=="function"?s(t):s;return i==="always"||i!==!1&&ue(t,e)}return!1}function ye(t,e,s,i){return(t!==e||T(i.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&ue(t,s)}function ue(t,e){return T(e.enabled,t)!==!1&&t.isStaleByTime(V(e.staleTime,t))}function He(t,e){return!Y(t.getCurrentResult(),e)}var Te=I.createContext(!1),Ke=()=>I.useContext(Te);Te.Provider;function qe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Ge=I.createContext(qe()),Ve=()=>I.useContext(Ge);function $e(t,e){return typeof t=="function"?t(...e):!!t}function be(){}var ze=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},We=t=>{I.useEffect(()=>{t.clearReset()},[t])},Je=({result:t,errorResetBoundary:e,throwOnError:s,query:i})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&$e(s,[t.error,i]),Xe=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Ye=(t,e)=>t.isLoading&&t.isFetching&&!e,Ze=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ee=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function et(t,e,s){var o,M,p,Q,_;const i=Me(),l=Ke(),u=Ve(),n=i.defaultQueryOptions(t);(M=(o=i.getDefaultOptions().queries)==null?void 0:o._experimental_beforeQuery)==null||M.call(o,n),n._optimisticResults=l?"isRestoring":"optimistic",Xe(n),ze(n,u),We(u);const m=!i.getQueryCache().get(n.queryHash),[d]=I.useState(()=>new e(i,n)),E=d.getOptimisticResult(n),S=!l&&t.subscribed!==!1;if(I.useSyncExternalStore(I.useCallback(R=>{const j=S?d.subscribe(Se.batchCalls(R)):be;return d.updateResult(),j},[d,S]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),I.useEffect(()=>{d.setOptions(n,{listeners:!1})},[n,d]),Ze(n,E))throw Ee(n,d,u);if(Je({result:E,errorResetBoundary:u,throwOnError:n.throwOnError,query:i.getQueryCache().get(n.queryHash)}))throw E.error;if((Q=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||Q.call(p,n,E),n.experimental_prefetchInRender&&!Z&&Ye(E,l)){const R=m?Ee(n,d,u):(_=i.getQueryCache().get(n.queryHash))==null?void 0:_.promise;R==null||R.catch(be).finally(()=>{d.updateResult()})}return n.notifyOnChangeProps?E:d.trackResult(E)}function mt(t,e){return et(t,Le)}const tt=(t,e)=>t?!0:$(e)?!!e.harRettPåForeldrepengerINorge:!1,st=(t,e)=>t?$(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,rt=(t,e)=>{if(ve(t)||ke(t))return e||t.termindato},it=(t,e,s)=>s&&t?s:e||void 0,nt=(t,e,s)=>t&&s?s:e,at=(t,e,s,i,l)=>s||i?"ALENEOMSORG":t&&e||l?"BEGGE_RETT":"BARE_SØKER_RETT",Rt=(t,e,s,i,l,u)=>{const n=$(e)?e:void 0,m=X(s.rolle),d=De(m,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),E=Pe(!m,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),S=i!==void 0?i.startdatoFørsteStønadsperiode:void 0,o=Be(l,t,m,Ae(t),S),M=nt(m,t.antallBarn,o==null?void 0:o.grunnlag.antallBarn),p=it(m,u==null?void 0:u.grunnlag.termindato,o==null?void 0:o.grunnlag.termindato),Q=X(s.rolle),_=X(s.rolle),R=$(e)&&e.harRettPåForeldrepengerIEØS;return{rettighetstype:at(tt(Q,e),st(Q,e),E||!1,d||!1,R||!1),brukerrolle:_?"FAR":"MOR",antallBarn:M.toString(),fødselsdato:ve(t)?t.fødselsdatoer[0]:void 0,termindato:rt(t,p),omsorgsovertakelseDato:Ue(t)||Ne(t)?t.adopsjonsdato:void 0,morHarUføretrygd:we(e,_),familieHendelseDatoNesteSak:S}},yt=(t,e)=>({queryKey:["ANNEN_PART_VEDTAK",t],queryFn:()=>he.post(".//rest/innsyn/v2/annenPartVedtak",{json:t}).json(),enabled:e}),bt=(t,e)=>({queryKey:["NESTE_SAK_ANNEN_PART_VEDTAK",t],queryFn:()=>he.post(".//rest/innsyn/v2/annenPartVedtak",{json:t}).json(),enabled:e}),Et=(t,e)=>({queryKey:["TILGJENGELIGE_STONADSKONTOER",t],queryFn:()=>he.post(".//rest/konto",{json:t}).json(),enabled:e});export{yt as a,nt as b,it as c,bt as d,Rt as g,be as n,$e as s,Et as t,mt as u};
