{"version":3,"file":"SenereUtenlandsoppholdSteg-3c9d46b7.js","sources":["../../src/app/steps/utenlandsoppholdSenere/SenereUtenlandsoppholdSteg.tsx"],"sourcesContent":["import { FormattedMessage, useIntl } from 'react-intl';\nimport { useNavigate } from 'react-router-dom';\nimport { Heading } from '@navikt/ds-react';\nimport { SenereUtenlandsoppholdPanel } from '@navikt/fp-utenlandsopphold';\nimport { UtenlandsoppholdSenere } from '@navikt/fp-types';\nimport { ContentWrapper } from '@navikt/fp-ui';\nimport actionCreator from 'app/context/action/actionCreator';\nimport useSøknad from 'app/utils/hooks/useSøknad';\nimport useAvbrytSøknad from 'app/utils/hooks/useAvbrytSøknad';\nimport useFortsettSøknadSenere from 'app/utils/hooks/useFortsettSøknadSenere';\nimport useSaveLoadedRoute from 'app/utils/hooks/useSaveLoadedRoute';\nimport SøknadRoutes from 'app/routes/routes';\nimport { ForeldrepengesøknadContextState } from 'app/context/ForeldrepengesøknadContextConfig';\nimport { storeAppState } from 'app/utils/submitUtils';\nimport { useOnValidSubmitNew } from 'app/utils/hooks/useOnValidSubmit';\nimport createConfig from '../stepsConfig';\n\nconst SenereUtenlandsoppholdSteg: React.FunctionComponent = () => {\n    const intl = useIntl();\n    const navigate = useNavigate();\n    const onAvbrytSøknad = useAvbrytSøknad();\n    const onFortsettSøknadSenere = useFortsettSøknadSenere();\n\n    useSaveLoadedRoute(SøknadRoutes.SENERE_UTENLANDSOPPHOLD);\n\n    const { informasjonOmUtenlandsopphold } = useSøknad();\n    const lagredeSenereUtenlandsopphold =\n        informasjonOmUtenlandsopphold.senereOpphold.length > 0\n            ? {\n                  utenlandsoppholdNeste12Mnd: informasjonOmUtenlandsopphold.senereOpphold.map((so) => ({\n                      fom: so.tidsperiode.fom,\n                      tom: so.tidsperiode.tom,\n                      landkode: so.land,\n                  })),\n              }\n            : undefined;\n\n    const onValidSubmitHandler = (values: UtenlandsoppholdSenere) => {\n        const senereUtenlandsopphold = {\n            senereOpphold: values.utenlandsoppholdNeste12Mnd.map((un) => ({\n                land: un.landkode,\n                tidsperiode: {\n                    fom: un.fom,\n                    tom: un.tom,\n                },\n            })),\n        };\n        return [actionCreator.setInformasjonOmUtenlandsoppholdSenere(senereUtenlandsopphold)];\n    };\n\n    const { handleSubmit } = useOnValidSubmitNew(\n        onValidSubmitHandler,\n        () => SøknadRoutes.INNTEKTSINFORMASJON,\n        (state: ForeldrepengesøknadContextState) => storeAppState(state),\n    );\n\n    const goToPreviousStep = () => {\n        navigate(\n            informasjonOmUtenlandsopphold.iNorgeSiste12Mnd\n                ? SøknadRoutes.UTENLANDSOPPHOLD\n                : SøknadRoutes.TIDLIGERE_UTENLANDSOPPHOLD,\n        );\n    };\n    const saveOnPrevious = () => {\n        // TODO Lagre uvalidert data i framtida\n    };\n\n    const stepConfig = createConfig(intl, false).map((config) => ({\n        ...config,\n        isSelected: config.id === 'utenlandsoppholdSenere',\n    }));\n\n    return (\n        <ContentWrapper>\n            <Heading size=\"large\">\n                <FormattedMessage id=\"søknad.pageheading\" />\n            </Heading>\n            <SenereUtenlandsoppholdPanel\n                senereUtenlandsopphold={lagredeSenereUtenlandsopphold}\n                saveOnNext={handleSubmit}\n                saveOnPrevious={saveOnPrevious}\n                cancelApplication={onAvbrytSøknad}\n                onContinueLater={onFortsettSøknadSenere}\n                goToPreviousStep={goToPreviousStep}\n                stepConfig={stepConfig}\n                supportsTempSaving\n            />\n        </ContentWrapper>\n    );\n};\n\nexport default SenereUtenlandsoppholdSteg;\n"],"names":["SenereUtenlandsoppholdSteg","intl","useIntl","navigate","useNavigate","onAvbrytSøknad","useAvbrytSøknad","onFortsettSøknadSenere","useFortsettSøknadSenere","useSaveLoadedRoute","SøknadRoutes","informasjonOmUtenlandsopphold","useSøknad","lagredeSenereUtenlandsopphold","so","onValidSubmitHandler","values","senereUtenlandsopphold","un","actionCreator","handleSubmit","useOnValidSubmitNew","state","storeAppState","goToPreviousStep","saveOnPrevious","stepConfig","createConfig","config","jsxs","ContentWrapper","jsx","Heading","FormattedMessage","SenereUtenlandsoppholdPanel","SenereUtenlandsoppholdSteg$1"],"mappings":"ygBAiBA,MAAAA,EAAA,IAAA,CACI,MAAAC,EAAAC,IACAC,EAAAC,IACAC,EAAAC,IACAC,EAAAC,IAEAC,EAAAC,EAAA,uBAAA,EAEA,KAAA,CAAA,8BAAAC,GAAAC,IACAC,EAAAF,EAAA,cAAA,OAAA,EAAA,CAEU,2BAAAA,EAAA,cAAA,IAAAG,IAAA,CACyF,IAAAA,EAAA,YAAA,IAC7D,IAAAA,EAAA,YAAA,IACA,SAAAA,EAAA,IACP,EAAA,CACf,EAAA,OAIhBC,EAAAC,GAAA,CACI,MAAAC,EAAA,CAA+B,cAAAD,EAAA,2BAAA,IAAAE,IAAA,CACmC,KAAAA,EAAA,SACjD,YAAA,CACI,IAAAA,EAAA,IACD,IAAAA,EAAA,GACA,CACZ,EAAA,CACF,EAEN,MAAA,CAAAC,EAAA,uCAAAF,CAAA,CAAA,CAAoF,EAGxF,CAAA,aAAAG,CAAA,EAAAC,EAAyBN,EACrB,IAAAL,EAAA,oBACmBY,GAAAC,EAAAD,CAAA,CAC4C,EAGnEE,EAAA,IAAA,CACIrB,EAAAQ,EAAA,iBAAAD,EAAA,iBAAAA,EAAA,0BAGuB,CACvB,EAEJe,EAAA,IAAA,CAA6B,EAI7BC,EAAAC,EAAA1B,EAAA,EAAA,EAAA,IAAA2B,IAAA,CAA8D,GAAAA,EACvD,WAAAA,EAAA,KAAA,wBACuB,EAAA,EAG9B,OAAAC,EAAA,KAAAC,EAAA,CAAA,SAAA,CAEQC,EAAAA,IAAAC,EAAA,CAAA,KAAA,QAAA,SAAAD,MAAAE,EAAA,CAAA,GAAA,oBAAA,CAAA,CAAA,CAAA,EAEAF,EAAA,IACAG,EAAC,CAAA,uBAAArB,EAC2B,WAAAO,EACZ,eAAAK,EACZ,kBAAApB,EACmB,gBAAAE,EACF,iBAAAiB,EACjB,WAAAE,EACA,mBAAA,EACkB,CAAA,CACtB,CAAA,CAAA,CAGZ,EAEAS,EAAAnC"}