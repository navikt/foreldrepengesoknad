import{j as s}from"./jsx-runtime-69eee039.js";import{r as A}from"./index-7c191284.js";import{u as m,_ as F,k as c,$ as K,a0 as V,a1 as D,a2 as k,j as d,a3 as G,a4 as y}from"./Tidsperioden-a95d044c.js";import"./index-e13aeee6.js";import"./_baseToString-4b695375.js";import"./_createSet-f4a01039.js";import{g as M,E as h}from"./apiInterceptor-cff81df8.js";import{A as x}from"./AttachmentList-9dfeda58.js";import{B as U}from"./Link-b834ea2b.js";var B=(e=>(e.OMSORGSOVERTAKELSE="omsorgsovertakelse",e.ADOPSJONSVEDTAK="adopsjonsvedtak",e.TERMINBEKREFTELSE="terminbekreftelse",e.FØDSELSATTEST="fødselsattest",e.ANNEN_INNTEKT="anneninntektDokumentasjon",e.UTSETTELSE_SYKDOM="utsettelseSykdomUttaksplan",e.MORS_AKTIVITET_DOKUMENTASJON="morsaktivitetdokumentasjon",e.OVERFØRING_KVOTE="dokumentasjonOverføringAvKvote",e.ALENEOMSORG="dokumentasjonAvAleneomsorg",e.SEN_ENDRING="senEndring",e.HV_ØVELSE="hvØvelse",e.NAV_TILTAK="navTiltak",e))(B||{}),b=(e=>(e.ANNET="I000060",e.BEKREFTELSE_DELTAR_KVALIFISERINGSPROGRAM="I000051",e.BEKREFTELSE_FRA_STUDIESTED="I000061",e.DOKUMENTASJON_AV_TERMIN_ELLER_FØDSEL="I000041",e.DOK_AV_ALENEOMSORG="I000110",e.DOK_BEGRUNNELSE_SØKE_TILBAKE_I_TID="I000111",e.DOK_DELTAKELSE_I_INTRODUKSJONSPROGRAMMET="I000112",e.DOK_INNLEGGELSE="I000037",e.DOK_MILITÆR_SILVIL_TJENESTE="I000039",e.DOK_MORS_UTDANNING_ARBEID_SYKDOM="I000038",e.DOK_OVERFØRING_FOR_SYK="I000023",e.ETTERLØNN_ELLER_SLUTTVEDERLAG="I000044",e.INNTEKTSOPPLYSNINGER_FRILANS_ELLER_SELVSTENDIG="I000007",e.OMSORGSOVERTAKELSESDATO="I000042",e.TERMINBEKREFTELSE="I000062",e.HV_ØVELSE="I000116",e.NAV_TILTAK="I000117",e))(b||{});function j(e){const t={withCredentials:!0,timeout:45e3,headers:{"content-type":"multipart/form-data"}},a=new FormData;a.append("id",e.id),a.append("vedlegg",e.file,e.filename);const n=`${h.REST_API_URL}/storage/vedlegg`;return M().post(n,a,t)}const P={saveAttachment:j},N=[".pdf",".jpeg",".jpg",".png"],S=16777,q=.0009765625,C=(e,t,a)=>e.map(n=>{const i=y(n,t,a);return i.pending=!0,i}),Y=e=>{const t=e.split(".").pop();return N.includes(`.${t.toLowerCase()}`)},w=e=>e*q<=S,z=(e,t,a)=>e.filter(n=>{const i=Y(n.filename);i||t(l=>l.concat(d(a,"vedlegg.feilmelding.ugyldig.type",{filename:n.filename})));const u=w(n.filesize);return u||t(l=>l.concat(d(a,"vedlegg.feilmelding.ugyldig.størrelse",{filename:n.filename,maxStørrelse:S}))),i&&u}),J=(e,t,a,n,i,u)=>{e.forEach(async(l,E)=>{try{const r=await P.saveAttachment(l);l.pending=!1,l.url=r.headers.location,l.uploaded=!0,l.uuid=r.data,t(i+E,l)}catch{a(i+E),n(I=>I.concat(d(u,"vedlegg.feilmelding.opplasting.feilet",{filename:l.filename})))}})},p=({attachments:e,name:t,onFileInputClick:a,attachmentType:n,skjemanummer:i,label:u,legend:l,...E})=>{const r=m(),{setFieldValue:I}=F(),[_,v]=A.useState([]);return s.jsxs(s.Fragment,{children:[s.jsx(c,{padBottom:"l",children:s.jsx(K,{legend:l,buttonLabel:u,name:t,accept:N.join(", "),onFilesSelect:(o,{push:T,replace:L,remove:g})=>{const R=C(o,n,i),f=z(R,v,r);f.forEach(O=>T(O)),J(f,L,g,v,e.length,r)},onClick:a,error:_.length>0?_.map(o=>s.jsx(U,{children:o},o)):void 0,...E})}),s.jsx(c,{padBottom:"l",visible:e.length>0,children:s.jsx(x,{attachments:e.filter(o=>!V(o)),showFileSize:!0,onDelete:o=>{I(t,D(e,o))}})}),s.jsx(c,{children:s.jsx(k,{header:d(r,"pictureScanninGuide.apneLabel"),children:s.jsx(G,{backgroundColor:"blue"})})})]})},ae=p;try{p.displayName="FormikFileUploader",p.__docgenInfo={description:"",displayName:"FormikFileUploader",props:{attachments:{defaultValue:null,description:"",name:"attachments",required:!0,type:{name:"Attachment[]"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"any"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},attachmentType:{defaultValue:null,description:"",name:"attachmentType",required:!0,type:{name:"enum",value:[{value:'"omsorgsovertakelse"'},{value:'"adopsjonsvedtak"'},{value:'"terminbekreftelse"'},{value:'"fødselsattest"'},{value:'"anneninntektDokumentasjon"'},{value:'"utsettelseSykdomUttaksplan"'},{value:'"morsaktivitetdokumentasjon"'},{value:'"dokumentasjonOverføringAvKvote"'},{value:'"dokumentasjonAvAleneomsorg"'},{value:'"senEndring"'},{value:'"hvØvelse"'},{value:'"navTiltak"'}]}},skjemanummer:{defaultValue:null,description:"",name:"skjemanummer",required:!0,type:{name:"enum",value:[{value:'"I000060"'},{value:'"I000051"'},{value:'"I000061"'},{value:'"I000041"'},{value:'"I000110"'},{value:'"I000111"'},{value:'"I000112"'},{value:'"I000037"'},{value:'"I000039"'},{value:'"I000038"'},{value:'"I000023"'},{value:'"I000044"'},{value:'"I000007"'},{value:'"I000042"'},{value:'"I000062"'},{value:'"I000116"'},{value:'"I000117"'}]}},legend:{defaultValue:null,description:"",name:"legend",required:!0,type:{name:"string"}},onFileInputClick:{defaultValue:null,description:"",name:"onFileInputClick",required:!1,type:{name:"(() => void)"}}}}}catch{}export{B as A,ae as F,b as S,P as a};
//# sourceMappingURL=FormikFileUploader-4b48adc4.js.map
