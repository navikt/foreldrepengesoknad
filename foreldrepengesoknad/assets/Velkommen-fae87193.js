import{j as t}from"./jsx-runtime-1caa8f64.js";import{u as q,b as u,R as V,p as C,q as ee,H as te,G as ae,B as re}from"./Tidsperioden-32d6ceea.js";import"./index-753920cd.js";import{r as x}from"./index-1cdf6ce0.js";import"./_baseToString-2517c4f7.js";import"./_createSet-019d3bf6.js";import{l as ne}from"./links-4d39192e.js";import{R as se,u as oe,F as le,C as ie}from"./ErrorSummaryHookForm-b158ee06.js";import{V as S,C as de,H as h,A as me}from"./IntlProvider-b99fa191.js";import"./dates-017fa136.js";import{a as ue,S as G}from"./useFpNavigator-00c14c24.js";import{D as pe}from"./DinePlikter-c884e159.js";import{b as H,C as i}from"./FpDataContext-939a8168.js";import{m as ke,o as ge,a as ce,b as fe}from"./eksisterendeSakUtils-5470c12d.js";import{D as ve}from"./DinePersonopplysningerModal-8f706ac4.js";import{i as Se}from"./dateFormValidation-8d41671b.js";import{c as he,d as je,h as Ee}from"./barnUtils-27f7dae4.js";import{V as k,g as Be,s as Ne,a as ye}from"./velkommenUtils-48c44882.js";import{B as K}from"./Link-d47e444a.js";const xe=()=>{const a=H();return{oppdaterSøknadIState:(e,o)=>{a(i.SØKERSITUASJON,e.søkersituasjon),a(i.OM_BARNET,e.barn),a(i.ANNEN_FORELDER,e.annenForelder),a(i.SØKER_DATA,e.søker),a(i.UTENLANDSOPPHOLD,e.informasjonOmUtenlandsopphold?{iNorgeNeste12Mnd:e.informasjonOmUtenlandsopphold.iNorgeNeste12Mnd,iNorgeSiste12Mnd:e.informasjonOmUtenlandsopphold.iNorgeSiste12Mnd}:void 0),a(i.UTENLANDSOPPHOLD_TIDLIGERE,e.informasjonOmUtenlandsopphold?{tidligereOpphold:e.informasjonOmUtenlandsopphold.tidligereOpphold}:void 0),a(i.UTENLANDSOPPHOLD_SENERE,e.informasjonOmUtenlandsopphold?{senereOpphold:e.informasjonOmUtenlandsopphold.senereOpphold}:void 0),a(i.PERIODE_MED_FORELDREPENGER,{dekningsgrad:e.dekningsgrad}),a(i.UTTAKSPLAN,e.uttaksplan),a(i.UTTAKSPLAN_METADATA,{ønskerJustertUttakVedFødsel:e.ønskerJustertUttakVedFødsel}),o&&a(i.EKSISTERENDE_SAK,o)}}};var _=(a=>(a.SØKNAD_GJELDER_NYTT_BARN="søknad_gjeder_nytt_barn",a))(_||{});const _e=(a,r)=>a.map(e=>{const o=e.sak!==void 0?$(e.sak.åpenBehandling===void 0,r):void 0,n=e.sak!==void 0?r.formatMessage({id:"velkommen.barnVelger.saksnummer"},{saksnummer:e.sak.saksnummer}):"";return t.jsx(V,{value:e.id,description:e.sak!==void 0?`${n}, ${o}`:n,children:t.jsx(u,{id:"velkommen.barnVelger.ufødtBarn",values:{antallBarnTekst:he(e.antallBarn,r),termin:C(e.termindato),b:d=>t.jsx("b",{children:d})}})},e.id)}),$=(a,r)=>a?r.formatMessage({id:"velkommen.sak.status.ferdigBehandlet"}):r.formatMessage({id:"velkommen.sak.status.underBehandling"}),Te=(a,r)=>a.map(e=>{const o=je(e.fornavn,e.fødselsdatoer,e.omsorgsovertagelse,e.alleBarnaLever,e.antallBarn,r),n=Ee(e.fødselsdatoer),d=e.type===k.FØDT||e.type===k.IKKE_UTFYLT?n:C(e.omsorgsovertagelse),j=e.type===k.FØDT||e.type===k.IKKE_UTFYLT?r.formatMessage({id:"velkommen.barnVelger.født"}):r.formatMessage({id:"velkommen.barnVelger.adopsjon"}),g=e.sak!==void 0?r.formatMessage({id:"velkommen.barnVelger.saksnummer"},{saksnummer:e.sak.saksnummer}):"",c=e.sak!==void 0?$(e.sak.åpenBehandling===void 0,r):void 0;return t.jsx(V,{value:e.id,description:c?`${g}, ${c}`:g,children:t.jsx("b",{children:e.alleBarnaLever?`${o} ${j} ${d}`:o})},e.id)}),T=({selectableBarn:a})=>{const r=q();if(a.length===0)return null;const e=a.filter(d=>d.type===k.UFØDT),o=a.filter(d=>d.type!==k.UFØDT);let n=[];return o.length>0&&(n=n.concat(Te(o,r))),e.length>0&&(n=n.concat(_e(e,r))),t.jsx(se,{name:"valgteBarn",label:t.jsx(u,{id:"velkommen.intro.harSaker.barnVelger.label"}),validate:[Se(r.formatMessage({id:"steg.footer.spørsmålMåBesvares"}))],children:n.concat(t.jsx(V,{value:"søknad_gjeder_nytt_barn",description:r.formatMessage({id:"velkommen.intro.harSaker.barnVelger.info"}),children:t.jsx(u,{id:"omBarnet.gjelderAnnetBarn",values:{b:d=>t.jsx("b",{children:d})}})},"søknad_gjeder_nytt_barn"))})};try{T.displayName="BarnVelger",T.__docgenInfo={description:"",displayName:"BarnVelger",props:{selectableBarn:{defaultValue:null,description:"",name:"selectableBarn",required:!0,type:{name:"ValgtBarn[]"}}}}}catch{}const F=({locale:a,saker:r,onChangeLocale:e,harGodkjentVilkår:o,søker:n,setHarGodkjentVilkår:d,setErEndringssøknad:j,setSøknadGjelderNyttBarn:g,mellomlagreSøknadOgNaviger:c})=>{const p=q(),J=ue(c),[O,Y]=x.useState(!1),w=H(),{oppdaterSøknadIState:E}=xe(),[z,D]=x.useState(!1),B=x.useMemo(()=>Be(r,n.barn),[r,n.barn]),R=[...B].sort(Ne),W=l=>{if(l.harForståttRettigheterOgPlikter!==!0)return;Y(!0);const s=l.valgteBarn===_.SØKNAD_GJELDER_NYTT_BARN?void 0:B.find(m=>m.id===l.valgteBarn),N=s!==void 0&&!!s.kanSøkeOmEndring;let f;s!==void 0&&(f=ye(s,R),w(i.BARN_FRA_NESTE_SAK,f));const y=N&&s.sak!==void 0?r.find(m=>{var v;return m.saksnummer===((v=s.sak)==null?void 0:v.saksnummer)}):void 0,X=f!==void 0?f.startdatoFørsteStønadsperiode:void 0,L=N&&y,U=s!==void 0&&s.sak!==void 0&&s.kanSøkeOmEndring===!1,Z=!L&&!U&&s!==void 0;let b=G.SØKERSITUASJON,I=!1;if(L){const m=ke(y,X);b=G.UTTAKSPLAN;const v=ge(n,m,p,y.annenPart,s);E(v,m)}else if(U){const m=ce(s,p,n.barn);E(m)}else if(Z){const m=fe(s);E(m)}else I=!0;return d(l.harForståttRettigheterOgPlikter),j(N),g(I),J.goToNextStep(b)},A=oe({defaultValues:{harForståttRettigheterOgPlikter:o}}),M=A.watch("valgteBarn"),P=M===_.SØKNAD_GJELDER_NYTT_BARN?void 0:B.find(l=>l.id===M),Q=P!==void 0&&P.kanSøkeOmEndring===!0?p.formatMessage({id:"velkommen.endreSøknad"}):p.formatMessage({id:"velkommen.begynnMedSøknad"});return t.jsx(le,{formMethods:A,onSubmit:W,children:t.jsxs(S,{gap:"10",children:[t.jsx(ee,{locale:a,availableLocales:["nb","nn"],toggle:e}),t.jsx(de,{children:t.jsxs(S,{gap:"8",children:[t.jsx(h,{justify:"center",children:t.jsx(te,{size:"xlarge",children:t.jsx(u,{id:"velkommen.tittel"})})}),t.jsx(ae,{poster:!0,children:t.jsxs(S,{gap:"2",children:[t.jsx(u,{id:"velkommen.guidepanel.del1"}),t.jsx(u,{id:"velkommen.guidepanel.del2",values:{a:l=>t.jsx("a",{className:"lenke",rel:"noopener noreferrer",href:ne.foreldrepenger,children:l})}})]})}),t.jsx(T,{selectableBarn:R}),t.jsx(me,{variant:"info",children:t.jsx(u,{id:"velkommen.lagring.info"})}),t.jsx(ie,{name:"harForståttRettigheterOgPlikter",label:p.formatMessage({id:"velkommen.samtykke"}),validate:[l=>l!==!0?p.formatMessage({id:"valideringsfeil.velkommen.harForståttRettigheterOgPlikter.påkrevd"}):null],children:t.jsx(S,{gap:"5",children:t.jsxs(h,{gap:"1",children:[t.jsx(K,{children:t.jsx(u,{id:"velkommen.samtykkeIntro.del1"})}),t.jsx(pe,{})]})})}),t.jsx(h,{justify:"center",children:t.jsx(re,{type:"submit",variant:"primary",disabled:O,loading:O,children:Q})}),t.jsx(h,{justify:"center",children:t.jsx(K,{children:t.jsx("a",{className:"lenke",href:"#",onClick:l=>{l.preventDefault(),D(!0)},children:t.jsx(u,{id:"velkommen.lesMerOmPersonopplysninger"})})})}),t.jsx(ve,{isOpen:z,onRequestClose:()=>D(!1)})]})})]})})},Ye=F;try{F.displayName="Velkommen",F.__docgenInfo={description:"",displayName:"Velkommen",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string"}},onChangeLocale:{defaultValue:null,description:"",name:"onChangeLocale",required:!0,type:{name:"(locale: LocaleNo) => void"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'}]}},saker:{defaultValue:null,description:"",name:"saker",required:!0,type:{name:"Sak[]"}},fnr:{defaultValue:null,description:"",name:"fnr",required:!0,type:{name:"string"}},harGodkjentVilkår:{defaultValue:null,description:"",name:"harGodkjentVilkår",required:!0,type:{name:"boolean"}},søker:{defaultValue:null,description:"",name:"søker",required:!0,type:{name:"Søker"}},setHarGodkjentVilkår:{defaultValue:null,description:"",name:"setHarGodkjentVilkår",required:!0,type:{name:"(harGodkjentVilkår: boolean) => void"}},setErEndringssøknad:{defaultValue:null,description:"",name:"setErEndringssøknad",required:!0,type:{name:"(erEndringssøknad: boolean) => void"}},setSøknadGjelderNyttBarn:{defaultValue:null,description:"",name:"setSøknadGjelderNyttBarn",required:!0,type:{name:"(søknadGjelderNyttBarn: boolean) => void"}},mellomlagreSøknadOgNaviger:{defaultValue:null,description:"",name:"mellomlagreSøknadOgNaviger",required:!0,type:{name:"() => Promise<void>"}}}}}catch{}export{Ye as V};
