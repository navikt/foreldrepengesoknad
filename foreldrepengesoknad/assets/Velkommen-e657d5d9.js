import{j as e}from"./jsx-runtime-69eee039.js";import{u as q,i as p,L as I,B as r,H as J,G as H,b as v,A as U,c as K,e as Y}from"./validationUtils-5cf0875a.js";import{r as P}from"./index-7c191284.js";import{u as $,a as s,S as R}from"./mapSøkerinfoDTO-3498614f.js";import{u as z}from"./useOnValidSubmit-e4075478.js";import{a as Q}from"./useSøknad-4276ca26.js";import{g as W,s as w,V as B,a as X,v as Z,S as _,b as S,B as ee,c as te,d as ne}from"./velkommenUtils-35dd5ee5.js";import{D as se}from"./DinePlikter-17cf3085.js";import{D as ae}from"./DinePersonopplysningerModal-b52f01bd.js";import{a as re}from"./submitUtils-8627933a.js";import{m as oe,o as ie,a as le,b as de}from"./eksisterendeSakUtils-a311ec59.js";import{u as me}from"./useSøkerinfo-68255a72.js";import{l as ke}from"./links-b36d21ab.js";import{B as pe}from"./Link-00530630.js";const x=({locale:c,saker:j,onChangeLocale:A})=>{const o=q(),D=Q(),{dispatch:b,state:f}=$(),[C,V]=P.useState(!1),h=Y("velkommen"),y=me(),{registrerteBarn:L}=y,u=W(j,L),F=[...u].sort(w);P.useEffect(()=>{f.søknad.søker.språkkode!==c&&b(s.setSpråkkode(c))},[b,c,f.søknad.søker.språkkode]);const T=i=>{const t=i.valgteBarn===_.SØKNAD_GJELDER_NYTT_BARN?void 0:u.find(a=>a.id===i.valgteBarn),d=t!==void 0&&!!t.kanSøkeOmEndring,m=d&&t.sak!==void 0?j.find(a=>{var g;return a.saksnummer===((g=t.sak)==null?void 0:g.saksnummer)}):void 0,n=[s.setVelkommen(i.harForståttRettigheterOgPlikter),s.setErEndringssøknad(d)];let k;t!==void 0&&(k=ne(t,F),n.push(s.setBarnFraNesteSak(k)));const l=k!==void 0?k.startdatoFørsteStønadsperiode:void 0,N=d&&m,O=t!==void 0&&t.sak!==void 0&&t.kanSøkeOmEndring===!1,M=!N&&!O&&t!==void 0;if(N){const a=oe(m,l),g=ie(f.søkerinfo,a,o,m.annenPart,t);n.push(s.updateCurrentRoute(R.UTTAKSPLAN)),n.push(s.setSøknad(g)),n.push(s.setEksisterendeSak(a)),n.push(s.setBrukerSvarteJaPåAutoJustering(a==null?void 0:a.grunnlag.ønskerJustertUttakVedFødsel)),n.push(s.setSøknadGjelderEtNyttBarn(!1))}else if(O){const a=le(t,o,y);n.push(s.setSøknad(a)),n.push(s.setSøknadGjelderEtNyttBarn(!1))}else if(M){const a=de(t);n.push(s.setSøknad(a)),n.push(s.setSøknadGjelderEtNyttBarn(!1))}else n.push(s.setSøknadGjelderEtNyttBarn(!0));return n},{handleSubmit:G,isSubmitting:E}=z(T,R.SØKERSITUASJON,i=>re(i));return e.jsx(B.FormikWrapper,{initialValues:X(D.harGodkjentVilkår),onSubmit:G,renderForm:({values:i,setFieldValue:t})=>{const d=Z.getVisbility({...i,selectableBarn:u}),m=i.valgteBarn,n=m===_.SØKNAD_GJELDER_NYTT_BARN?void 0:u.find(l=>l.id===m),k=n!==void 0&&n.kanSøkeOmEndring===!0?p(o,"velkommen.endreSøknad"):p(o,"velkommen.begynnMedSøknad");return e.jsxs(B.Form,{includeButtons:!1,children:[e.jsx(I,{locale:c,availableLocales:["nb","nn"],toggle:l=>A(l)}),e.jsxs("div",{className:h.block,children:[e.jsx(r,{children:e.jsx(J,{size:"xlarge",className:`${h.element("tittel")}`,children:p(o,"velkommen.tittel")})}),e.jsx(r,{padBottom:"l",children:e.jsxs(H,{poster:!0,children:[e.jsx(r,{padBottom:"m",children:p(o,"velkommen.guidepanel.del1")})," ",e.jsx(r,{children:e.jsx(v,{id:"velkommen.guidepanel.del2",values:{a:l=>e.jsx("a",{className:"lenke",rel:"noopener noreferrer",href:ke.foreldrepenger,target:"_blank",children:l})}})})]})}),e.jsx(r,{padBottom:"l",visible:d.isVisible(S.valgteBarn),children:e.jsx(ee,{selectableBarn:F,visibility:d,formValues:i,setFieldValue:t})}),e.jsx(r,{padBottom:"l",visible:d.isVisible(S.harForståttRettigheterOgPlikter),children:e.jsx(U,{variant:"info",children:p(o,"velkommen.lagring.info")})}),e.jsx(r,{padBottom:"l",visible:d.isVisible(S.harForståttRettigheterOgPlikter),children:e.jsx(B.ConfirmationCheckbox,{name:S.harForståttRettigheterOgPlikter,label:p(o,"velkommen.samtykke"),validate:te(o),children:e.jsxs(e.Fragment,{children:[e.jsx(r,{padBottom:"l",children:e.jsx(v,{id:"velkommen.samtykkeIntro.del1"})}),e.jsx(r,{padBottom:"m",children:e.jsx(se,{})})]})})}),e.jsx(r,{padBottom:"l",children:e.jsx("div",{style:{textAlign:"center"},children:e.jsx(K,{type:"submit",variant:"primary",disabled:E,loading:E,children:k})})}),e.jsx(pe,{className:h.element("personopplysningerLink"),children:e.jsx("a",{className:"lenke",href:"#",onClick:l=>{l.preventDefault(),V(!0)},children:e.jsx(v,{id:"velkommen.lesMerOmPersonopplysninger"})})}),e.jsx(ae,{isOpen:C,onRequestClose:()=>V(!1)})]})]})}})},Ee=x;try{x.displayName="Velkommen",x.__docgenInfo={description:"",displayName:"Velkommen",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string"}},onChangeLocale:{defaultValue:null,description:"",name:"onChangeLocale",required:!0,type:{name:"(locale: Locale) => void"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'},{value:'"en"'}]}},saker:{defaultValue:null,description:"",name:"saker",required:!0,type:{name:"Sak[]"}},fnr:{defaultValue:null,description:"",name:"fnr",required:!0,type:{name:"string"}}}}}catch{}export{Ee as V};
//# sourceMappingURL=Velkommen-e657d5d9.js.map
