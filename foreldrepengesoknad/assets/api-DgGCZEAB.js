var pt=e=>{throw TypeError(e)};var J=(e,t,s)=>t.has(e)||pt("Cannot "+s);var r=(e,t,s)=>(J(e,t,"read from private field"),s?s.call(e):t.get(e)),p=(e,t,s)=>t.has(e)?pt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),c=(e,t,s,i)=>(J(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),f=(e,t,s)=>(J(e,t,"access private method"),s);import{S as It,p as gt,r as I,s as Y,b as G,n as Pt,i as Z,c as mt,t as _t,f as Qt,d as At,e as yt,g as Ot,u as Bt,k as ht}from"./index-D0Djxy9a.js";import{r as _}from"./index-CTjT7uj6.js";import"./jsx-runtime-Cw0GR0a5.js";import{g as Ft,J as Ut,K as ut}from"./barnUtils-DA9-D43G.js";import{c as Mt}from"./eksisterendeSakUtils-xWvdx0wK.js";import{i as X,l as wt,m as xt}from"./useFpNavigator-BJ9NrqRc.js";import{Q as V,a1 as St,a2 as Dt,P as Nt,X as Lt}from"./Uttaksplan-B8kO5Ed4.js";var E,n,j,y,F,D,A,T,K,N,L,U,M,B,k,h,H,tt,et,st,rt,it,at,nt,Ct,Et,kt=(Et=class extends It{constructor(t,s){super();p(this,h);p(this,E);p(this,n);p(this,j);p(this,y);p(this,F);p(this,D);p(this,A);p(this,T);p(this,K);p(this,N);p(this,L);p(this,U);p(this,M);p(this,B);p(this,k,new Set);this.options=s,c(this,E,t),c(this,T,null),c(this,A,gt()),this.options.experimental_prefetchInRender||r(this,A).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,n).addObserver(this),Rt(r(this,n),this.options)?f(this,h,H).call(this):this.updateResult(),f(this,h,rt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ot(r(this,n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ot(r(this,n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,h,it).call(this),f(this,h,at).call(this),r(this,n).removeObserver(this)}setOptions(t,s){const i=this.options,l=r(this,n);if(this.options=r(this,E).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof I(this.options.enabled,r(this,n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");f(this,h,nt).call(this),r(this,n).setOptions(this.options),i._defaulted&&!Y(this.options,i)&&r(this,E).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,n),observer:this});const u=this.hasListeners();u&&vt(r(this,n),l,this.options,i)&&f(this,h,H).call(this),this.updateResult(s),u&&(r(this,n)!==l||I(this.options.enabled,r(this,n))!==I(i.enabled,r(this,n))||G(this.options.staleTime,r(this,n))!==G(i.staleTime,r(this,n)))&&f(this,h,tt).call(this);const a=f(this,h,et).call(this);u&&(r(this,n)!==l||I(this.options.enabled,r(this,n))!==I(i.enabled,r(this,n))||a!==r(this,B))&&f(this,h,st).call(this,a)}getOptimisticResult(t){const s=r(this,E).getQueryCache().build(r(this,E),t),i=this.createResult(s,t);return jt(this,i)&&(c(this,y,i),c(this,D,this.options),c(this,F,r(this,n).state)),i}getCurrentResult(){return r(this,y)}trackResult(t,s){const i={};return Object.keys(t).forEach(l=>{Object.defineProperty(i,l,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(l),s==null||s(l),t[l])})}),i}trackProp(t){r(this,k).add(t)}getCurrentQuery(){return r(this,n)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=r(this,E).defaultQueryOptions(t),i=r(this,E).getQueryCache().build(r(this,E),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(t){return f(this,h,H).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,y)))}createResult(t,s){var dt;const i=r(this,n),l=this.options,u=r(this,y),a=r(this,F),R=r(this,D),v=t!==i?t.state:r(this,j),{state:b}=t;let o={...b},P=!1,g;if(s._optimisticResults){const m=this.hasListeners(),w=!m&&Rt(t,s),x=m&&vt(t,i,s,l);(w||x)&&(o={...o,...At(b.data,t.options)}),s._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:Q,errorUpdatedAt:O,status:S}=o;if(s.select&&o.data!==void 0)if(u&&o.data===(a==null?void 0:a.data)&&s.select===r(this,K))g=r(this,N);else try{c(this,K,s.select),g=s.select(o.data),g=yt(u==null?void 0:u.data,g,s),c(this,N,g),c(this,T,null)}catch(m){c(this,T,m)}else g=o.data;if(s.placeholderData!==void 0&&g===void 0&&S==="pending"){let m;if(u!=null&&u.isPlaceholderData&&s.placeholderData===(R==null?void 0:R.placeholderData))m=u.data;else if(m=typeof s.placeholderData=="function"?s.placeholderData((dt=r(this,L))==null?void 0:dt.state.data,r(this,L)):s.placeholderData,s.select&&m!==void 0)try{m=s.select(m),c(this,T,null)}catch(w){c(this,T,w)}m!==void 0&&(S="success",g=yt(u==null?void 0:u.data,m,s),P=!0)}r(this,T)&&(Q=r(this,T),g=r(this,N),O=Date.now(),S="error");const $=o.fetchStatus==="fetching",z=S==="pending",W=S==="error",lt=z&&$,ft=g!==void 0,C={status:S,fetchStatus:o.fetchStatus,isPending:z,isSuccess:S==="success",isError:W,isInitialLoading:lt,isLoading:lt,data:g,dataUpdatedAt:o.dataUpdatedAt,error:Q,errorUpdatedAt:O,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>v.dataUpdateCount||o.errorUpdateCount>v.errorUpdateCount,isFetching:$,isRefetching:$&&!z,isLoadingError:W&&!ft,isPaused:o.fetchStatus==="paused",isPlaceholderData:P,isRefetchError:W&&ft,isStale:ct(t,s),refetch:this.refetch,promise:r(this,A)};if(this.options.experimental_prefetchInRender){const m=q=>{C.status==="error"?q.reject(C.error):C.data!==void 0&&q.resolve(C.data)},w=()=>{const q=c(this,A,C.promise=gt());m(q)},x=r(this,A);switch(x.status){case"pending":t.queryHash===i.queryHash&&m(x);break;case"fulfilled":(C.status==="error"||C.data!==x.value)&&w();break;case"rejected":(C.status!=="error"||C.error!==x.reason)&&w();break}}return C}updateResult(t){const s=r(this,y),i=this.createResult(r(this,n),this.options);if(c(this,F,r(this,n).state),c(this,D,this.options),r(this,F).data!==void 0&&c(this,L,r(this,n)),Y(i,s))return;c(this,y,i);const l={},u=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,R=typeof a=="function"?a():a;if(R==="all"||!R&&!r(this,k).size)return!0;const d=new Set(R??r(this,k));return this.options.throwOnError&&d.add("error"),Object.keys(r(this,y)).some(v=>{const b=v;return r(this,y)[b]!==s[b]&&d.has(b)})};(t==null?void 0:t.listeners)!==!1&&u()&&(l.listeners=!0),f(this,h,Ct).call(this,{...l,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,h,rt).call(this)}},E=new WeakMap,n=new WeakMap,j=new WeakMap,y=new WeakMap,F=new WeakMap,D=new WeakMap,A=new WeakMap,T=new WeakMap,K=new WeakMap,N=new WeakMap,L=new WeakMap,U=new WeakMap,M=new WeakMap,B=new WeakMap,k=new WeakMap,h=new WeakSet,H=function(t){f(this,h,nt).call(this);let s=r(this,n).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(Pt)),s},tt=function(){f(this,h,it).call(this);const t=G(this.options.staleTime,r(this,n));if(Z||r(this,y).isStale||!mt(t))return;const i=_t(r(this,y).dataUpdatedAt,t)+1;c(this,U,setTimeout(()=>{r(this,y).isStale||this.updateResult()},i))},et=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,n)):this.options.refetchInterval)??!1},st=function(t){f(this,h,at).call(this),c(this,B,t),!(Z||I(this.options.enabled,r(this,n))===!1||!mt(r(this,B))||r(this,B)===0)&&c(this,M,setInterval(()=>{(this.options.refetchIntervalInBackground||Qt.isFocused())&&f(this,h,H).call(this)},r(this,B)))},rt=function(){f(this,h,tt).call(this),f(this,h,st).call(this,f(this,h,et).call(this))},it=function(){r(this,U)&&(clearTimeout(r(this,U)),c(this,U,void 0))},at=function(){r(this,M)&&(clearInterval(r(this,M)),c(this,M,void 0))},nt=function(){const t=r(this,E).getQueryCache().build(r(this,E),this.options);if(t===r(this,n))return;const s=r(this,n);c(this,n,t),c(this,j,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},Ct=function(t){Ot.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(r(this,y))}),r(this,E).getQueryCache().notify({query:r(this,n),type:"observerResultsUpdated"})})},Et);function Ht(e,t){return I(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Rt(e,t){return Ht(e,t)||e.state.data!==void 0&&ot(e,t,t.refetchOnMount)}function ot(e,t,s){if(I(t.enabled,e)!==!1){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&ct(e,t)}return!1}function vt(e,t,s,i){return(e!==t||I(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&ct(e,s)}function ct(e,t){return I(t.enabled,e)!==!1&&e.isStaleByTime(G(t.staleTime,e))}function jt(e,t){return!Y(e.getCurrentResult(),t)}var Tt=_.createContext(!1),Kt=()=>_.useContext(Tt);Tt.Provider;function qt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Gt=_.createContext(qt()),Vt=()=>_.useContext(Gt);function $t(e,t){return typeof e=="function"?e(...t):!!e}function zt(){}var Wt=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Jt=e=>{_.useEffect(()=>{e.clearReset()},[e])},Xt=({result:e,errorResetBoundary:t,throwOnError:s,query:i})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&$t(s,[e.error,i]),Yt=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Zt=(e,t)=>e.isLoading&&e.isFetching&&!t,te=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,bt=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function ee(e,t,s){var b,o,P,g,Q;const i=Bt(),l=Kt(),u=Vt(),a=i.defaultQueryOptions(e);(o=(b=i.getDefaultOptions().queries)==null?void 0:b._experimental_beforeQuery)==null||o.call(b,a),a._optimisticResults=l?"isRestoring":"optimistic",Yt(a),Wt(a,u),Jt(u);const R=!i.getQueryCache().get(a.queryHash),[d]=_.useState(()=>new t(i,a)),v=d.getOptimisticResult(a);if(_.useSyncExternalStore(_.useCallback(O=>{const S=l?()=>{}:d.subscribe(Ot.batchCalls(O));return d.updateResult(),S},[d,l]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),_.useEffect(()=>{d.setOptions(a,{listeners:!1})},[a,d]),te(a,v))throw bt(a,d,u);if(Xt({result:v,errorResetBoundary:u,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash)}))throw v.error;if((g=(P=i.getDefaultOptions().queries)==null?void 0:P._experimental_afterQuery)==null||g.call(P,a,v),a.experimental_prefetchInRender&&!Z&&Zt(v,l)){const O=R?bt(a,d,u):(Q=i.getQueryCache().get(a.queryHash))==null?void 0:Q.promise;O==null||O.catch(zt).finally(()=>{d.hasListeners()||d.updateResult()})}return a.notifyOnChangeProps?v:d.trackResult(v)}function ye(e,t){return ee(e,kt)}const se=(e,t)=>e?!0:V(t)?!!t.harRettPåForeldrepengerINorge:!1,re=(e,t)=>e?V(t)?!!t.harRettPåForeldrepengerINorge:!1:!0,ie=(e,t)=>{if(St(e)||Lt(e))return t||e.termindato},ae=(e,t)=>t||e||void 0,ne=(e,t,s)=>e&&s?s:t,oe=(e,t,s,i,l)=>s||i?"ALENEOMSORG":e&&t||l?"BEGGE_RETT":"BARE_SØKER_RETT",Re=(e,t,s,i,l,u)=>{const a=V(t)?t:void 0,R=X(s.rolle),d=wt(R,(a==null?void 0:a.erAleneOmOmsorg)||!1,t),v=xt(!R,(a==null?void 0:a.erAleneOmOmsorg)||!1,t),b=i!==void 0?i.startdatoFørsteStønadsperiode:void 0,o=Mt(l,e,R,Ft(e),b),P=ne(R,e.antallBarn,o==null?void 0:o.grunnlag.antallBarn),g=ae(u==null?void 0:u.grunnlag.termindato,o==null?void 0:o.grunnlag.termindato),Q=X(s.rolle),O=X(s.rolle),S=V(t)&&t.harRettPåForeldrepengerIEØS;return{rettighetstype:oe(se(Q,t),re(Q,t),v||!1,d||!1,S||!1),brukerrolle:O?"FAR":"MOR",antallBarn:P.toString(),fødselsdato:St(e)?e.fødselsdatoer[0]:void 0,termindato:ie(e,g),omsorgsovertakelseDato:Dt(e)||Nt(e)?e.adopsjonsdato:void 0,morHarUføretrygd:Ut(t,O),familieHendelseDatoNesteSak:b}},ve=(e,t)=>({queryKey:["ANNEN_PART_VEDTAK",e],queryFn:()=>ht.post(`${ut.PUBLIC_PATH}/rest/innsyn/v2/annenPartVedtak`,{json:e}).json(),enabled:t}),be=(e,t)=>({queryKey:["NESTE_SAK_ANNEN_PART_VEDTAK",e],queryFn:()=>ht.post(`${ut.PUBLIC_PATH}/rest/innsyn/v2/annenPartVedtak`,{json:e}).json(),enabled:t}),Ee=(e,t)=>({queryKey:["TILGJENGELIGE_STONADSKONTOER",e],queryFn:()=>ht.post(`${ut.PUBLIC_PATH}/rest/konto`,{json:e}).json(),enabled:t});export{ve as a,ne as b,ae as c,be as d,Re as g,zt as n,$t as s,Ee as t,ye as u};
