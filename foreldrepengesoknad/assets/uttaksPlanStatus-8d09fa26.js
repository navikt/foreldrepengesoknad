import{S as d,b as c,P as a,d as b,n as I,o as U,U as v,h as j,g as B,a as $,p as T}from"./Perioden-96b8bac4.js";import{i as l,Z as G,A as g,d as u,U as N,l as H,$ as w,I as h,ac as x,ad as W}from"./Tidsperioden-d3b158ba.js";import"./jsx-runtime-1caa8f64.js";import"./index-1cdf6ce0.js";import{c as E}from"./stringUtils-c070ccf5.js";import{g as V}from"./barnUtils-e770e0b5.js";var f=(t=>(t.UttakFellesperiodeAnnenForelder="UTTAK_FELLESP_ANNEN_FORELDER",t.UttakFedrekvoteAnnenForelder="UTTAK_FEDREKVOTE_ANNEN_FORELDER",t.UttakMødrekvoteAnnenForelder="UTTAK_MØDREKVOTE_ANNEN_FORELDER",t.UttakForeldrepengerAnnenForelder="UTTAK_FORELDREPENGER_ANNEN_FORELDER",t.ForeldrepengerFørFødsel="UTTAK_FORELDREPENGER_FØR_FØDSEL_ANNEN_FORELDER",t.Ingen="INGEN",t))(f||{}),P=(t=>(t.institusjonsoppholdAnnenForelder="INSTITUSJONSOPPHOLD_ANNEN_FORELDER",t.sykdomAnnenForelder="SYKDOM_ANNEN_FORELDER",t.aleneomsorg="ALENEOMSORG",t.ikkeRettAnnenForelder="IKKE_RETT_ANNEN_FORELDER",t))(P||{});const J=/^[0-9]*$/,z=t=>{let e=2,r=0;for(let n=t.length-2;n>=0;--n)r+=parseInt(t.charAt(n),10)*e,++e>7&&(e=2);const s=11-r%11;return s===11?0:s},q=t=>J.test(t)&&t.length===9,C=t=>t.charAt(0)==="8"||t.charAt(0)==="9",Rt=t=>!t||q(t)===!1||C(t)===!1||t==="999999999"?!1:z(t)===parseInt(t.charAt(8),10),Q=RegExp(/^[-]?[0-9,.\s]*$/),Y=t=>t.replace(/,/g,".").replace(/\s/g,"").replace(/%/g,""),F=t=>{if(t!=null&&t.length>0&&Q.test(t)){const e=Y(t);return(e.match(/\./g)||[]).length>1?void 0:parseFloat(e)}},Tt=t=>t.filter(e=>e.konto===d.Fellesperiode||e.konto===d.Fedrekvote||e.konto===d.Mødrekvote||e.konto===d.Foreldrepenger||e.konto===d.AktivitetsfriKvote).map(e=>e.konto),S=(t,e,r,s,n)=>{let o;switch(e){case d.Mødrekvote:o=r.mor;break;case d.Fedrekvote:o=r.farMedmor;break;default:o=void 0}if(o)return t.formatMessage({id:"uttaksplan.stønadskontotype.foreldernavn.kvote"},{navn:V(E(o),t.locale)});if(s===!0&&n===!1){if(e===d.AktivitetsfriKvote)return t.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSFRI_KVOTE_BFHR"});if(e===d.Foreldrepenger)return t.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSKRAV_KVOTE_BFHR"})}return t.formatMessage({id:`uttaksplan.stønadskontotype.${e}`})},Z=(t,e,r,s,n,o,k)=>{const i=m(r,s);if(n!==void 0){const A=V(i,t.locale),p=e===d.Fellesperiode?"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttakFellesperiode":"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttak";return l(t,p,{navn:E(A),prosent:n})}return S(t,e,s,o,k)},X=10,L=2*7,tt=6*7,St=(t,e,r,s)=>G(t)&&e&&r&&s==="fødsel",et=t=>c(t)&&t.forelder===g.farMedmor&&t.konto===d.Fedrekvote&&!t.erMorForSyk&&t.morsAktivitetIPerioden===void 0&&!t.ønskerFlerbarnsdager&&t.ønskerSamtidigUttak===!0,M=(t,e,r)=>et(t)&&O(t.tidsperiode,e,r),rt=(t,e)=>c(t)&&t.forelder===g.farMedmor&&!e,st=(t,e)=>{const r=e!==void 0?u(e).subtract(L,"day"):u(t).subtract(L,"day"),s=u.min(r,u(t));return N(s.toDate()).denneEllerNeste()},y=t=>{const e=N(t).denneEllerNeste();return N(u(e).add(tt,"day").toDate()).forrige()},nt=(t,e,r)=>{const s=st(e,r);return u(t.fom).isSameOrAfter(s,"day")},Mt=(t,e)=>c(t)&&u(t.tidsperiode.fom).isBefore(e,"day"),yt=(t,e)=>{const r=y(e);return u(t.tom).isSameOrBefore(r,"day")},O=(t,e,r)=>nt(t,e,r)&&u(t.fom).isSameOrBefore(y(e),"day"),Ot=(t,e,r)=>t.filter(s=>M(s,e,r)),_t=(t,e,r,s,n,o,k)=>t!==void 0&&H(t)&&n&&k==="fødsel"&&G(e)&&r===a.Uttak&&(s===d.Fedrekvote||s===d.Foreldrepenger||s===d.AktivitetsfriKvote)&&O(t,e,o),It=(t,e)=>{const r=y(t),s=R({tidsperiode:{fom:e,tom:r}});return Math.min(s,X)},at=(t,e,r,s,n,o)=>s==="fødsel"&&M(r,n,o)?e+l(t,"rundtFødsel"):e,ht=(t,e,r,s)=>(M(t,e,s)||rt(t,r))&&w(t.tidsperiode,e),Lt=(t,e,r)=>t.filter(s=>(c(s)||b(s))&&O(s.tidsperiode,e,r)),Dt=(t,e,r)=>!!t&&e!==void 0&&u(r).isSame(e,"d"),Kt=t=>({fom:h(t.fom),tom:h(t.tom)}),bt=t=>{const e=F(t);return e?e>0:!1},jt=t=>{const e=F(t);return e?e<=100:!1},Gt=t=>{const e=F(t);return e?e<100:!1},D=t=>t!==void 0&&isNaN(parseFloat(t))===!1,K=t=>{if(t===void 0)return;const e=parseFloat(t);if(!isNaN(e))return Math.round(e)===e?Math.round(e):e},ot=(t,e)=>{if(e)return e;if(t){let r=(100-t)*100;return r=Math.round(r)/100,r}},dt=(t,e,r,s)=>{const n=E(r);return s?l(t,`uttaksplan.oppholdsårsaktype.foreldernavn.far.${e}`,{foreldernavn:n}):l(t,`uttaksplan.oppholdsårsaktype.foreldernavn.mor.${e}`,{foreldernavn:n})},_=t=>t===f.UttakFedrekvoteAnnenForelder?d.Fedrekvote:t===f.UttakMødrekvoteAnnenForelder?d.Mødrekvote:t===f.UttakFellesperiodeAnnenForelder?d.Fellesperiode:t===f.UttakForeldrepengerAnnenForelder?d.Foreldrepenger:d.ForeldrepengerFørFødsel,Vt=t=>{switch(t){case d.Fedrekvote:return f.UttakFedrekvoteAnnenForelder;case d.Mødrekvote:return f.UttakMødrekvoteAnnenForelder;case d.Fellesperiode:return f.UttakFellesperiodeAnnenForelder;default:return}},m=(t,e)=>{let r="";return e.farMedmor?r=t===g.mor?e.mor:e.farMedmor:r=t===g.mor?e.mor:t,E(r)},it=(t,e,r,s,n,o,k,i)=>{const A=S(t,e.konto,r,k,i),p=at(t,A,e,o,s,n);return e.gradert&&D(e.stillingsprosent)||e.ønskerSamtidigUttak&&D(e.samtidigUttakProsent)?`${p} ${l(t,"gradering.prosent",{stillingsprosent:ot(K(e.stillingsprosent),e.samtidigUttakProsent?K(e.samtidigUttakProsent):void 0)})}`:p},lt=(t,e,r,s)=>{switch(e.infotype){case U.uttakAnnenPart:return Z(t,_(e.årsak),e.forelder,r,e.samtidigUttakProsent);case U.utsettelseAnnenPart:return l(t,`uttaksplan.periodetype.info.utsettelse.${e.årsak}`,{navn:m(e.forelder,r)});case U.avslåttPeriode:return e.forelder===g.mor&&s||e.forelder===g.farMedmor&&!s?l(t,"uttaksplan.periodetype.info.avslåttPeriode.annenPart",{navn:m(e.forelder,r)}):l(t,`uttaksplan.periodetype.info.${e.infotype}`)}},Bt=(t,e,r,s,n,o,k,i)=>{switch(e.type){case a.Uttak:return it(t,e,r,s,n,o,k,i);case a.PeriodeUtenUttak:return l(t,"uttaksplan.periodetype.periodeUtenUttak.tittel");case a.Overføring:return S(t,e.konto,r);case a.Utsettelse:return e.årsak?l(t,"uttaksplan.periodeliste.utsettelsesårsak",{årsak:l(t,`uttaksplan.utsettelsesårsak.${e.årsak}`)}):l(t,"uttaksplan.periodeliste.utsettelsesårsak.ukjent");case a.Opphold:return dt(t,e.årsak,m(e.forelder,r),e.forelder==="mor");case a.Hull:return l(t,"uttaksplan.periodetype.hull.tittel");case a.Info:return lt(t,e,r,k)}},$t=(t,e)=>{if(e===void 0)return!1;const r=ut(t,e);return r?r.resultat.innvilget:!1},ut=(t,e)=>e.saksperioder.find(r=>x(W(r.periode),t.tidsperiode)),Ht=(t,e)=>t.type===a.Utsettelse||t.type===a.Uttak||t.type===a.Overføring||t.type===a.Opphold||t.type===a.Info?m(t.forelder,e):"Ingen forelder registrert",wt=t=>{switch(t){case a.Uttak:return"uttaksplan.slettPeriode.uttak";case a.Overføring:return"uttaksplan.slettPeriode.overføring";case a.Opphold:return"uttaksplan.slettPeriode.opphold";case a.Utsettelse:return"uttaksplan.slettPeriode.utsettelse";case a.Info:return"uttaksplan.slettPeriode.info";default:return""}},kt=(t,e)=>t.tidsperiode.fom!==void 0&&t.tidsperiode.tom!==void 0&&u(t.tidsperiode.fom).isSameOrAfter(e,"day")&&u(t.tidsperiode.tom).isSameOrAfter(e,"day"),xt=(t,e)=>kt(t,e)===!1,Wt=t=>t===v.Sykdom||t===v.InstitusjonBarnet||t===v.InstitusjonSøker||t===P.institusjonsoppholdAnnenForelder||t===P.sykdomAnnenForelder,Jt=(t,e)=>e.some(r=>j(t).erLik(r,!0,!0)),zt=(t,e)=>{if(c(t)){const r=e.filter(s=>I(s)).find(s=>I(s)&&u(t.tidsperiode.fom).isSame(s.tidsperiode.fom)&&s.ønskerSamtidigUttak===!0&&s.id!==t.id);return r!==void 0?r:void 0}},qt=(t,e,r)=>{const s=t.find(n=>n.id===e.id);return s&&s.isValid!==r?t.map(n=>n.id===s.id?{...n,isValid:r}:n):s?t:[...t,{id:e.id,isValid:r}]},R=t=>{const e=j(t).getAntallUttaksdager();if(c(t)){const r=t.stillingsprosent!==void 0,s=t.samtidigUttakProsent!==void 0;if(r&&s||r){const n=(100-F(t.stillingsprosent))/100;return e*n}else return s?e*(F(t.samtidigUttakProsent)/100):e}return e},ft=t=>[...t.filter(c),...gt(t.filter(B)),...Ft(t.filter(b)),...mt(t.filter($)),...pt(t.filter(T))],ct=(t,e,r)=>{const s=ft(e);return t.map(n=>{let o=r?0:n.dager;const k=s.filter(i=>i.konto===n.konto);return k&&(k.forEach(i=>{(i.type===a.Uttak||i.type===a.Overføring||T(i))&&(o=r?o+R(i):o-R(i))}),o=r?Math.floor(o):Math.ceil(o)),{konto:n.konto,dager:o}})},Ct=(t,e)=>ct(t,e,!0),gt=t=>t.length===0?[]:t.map(e=>({id:e.id,tidsperiode:e.tidsperiode,type:a.Uttak,konto:_(e.årsak),forelder:e.forelder})),Ft=t=>t.length===0?[]:t.map(e=>({id:e.id,tidsperiode:e.tidsperiode,type:a.Uttak,konto:e.konto,forelder:e.forelder})),mt=t=>{if(t.length===0)return[];const e=[];return t.filter(r=>T(r)===!1).forEach(r=>{r.infotype===U.uttakAnnenPart&&e.push(r)}),e.map(r=>{const{type:s,årsak:n,...o}=r;return{type:a.Uttak,konto:_(r.årsak),...o}})},pt=t=>t.length===0?[]:t.filter(e=>e.avslåttPeriodeType===a.Uttak||e.avslåttPeriodeType===a.Utsettelse).map(e=>({type:a.Uttak,konto:e.kontoType,tidsperiode:e.tidsperiode,id:e.id,forelder:e.forelder}));export{dt as A,zt as B,ft as C,Ct as D,ct as E,xt as F,$t as G,Wt as H,Ht as I,bt as J,jt as K,Gt as L,St as M,et as N,f as O,nt as P,yt as Q,Ot as R,X as S,Mt as T,Bt as a,Lt as b,Jt as c,S as d,Rt as e,R as f,st as g,at as h,y as i,It as j,ht as k,P as l,F as m,M as n,rt as o,Kt as p,_t as q,_ as r,O as s,Vt as t,Dt as u,Y as v,qt as w,Tt as x,wt as y,m as z};
