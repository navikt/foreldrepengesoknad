{"version":3,"file":"TidligereUtenlandsoppholdSteg-54af00b0.js","sources":["../../src/app/steps/utenlandsoppholdTidligere/TidligereUtenlandsoppholdSteg.tsx"],"sourcesContent":["import { FormattedMessage, useIntl } from 'react-intl';\nimport { Heading } from '@navikt/ds-react';\nimport { TidligereUtenlandsoppholdPanel } from '@navikt/fp-utenlandsopphold';\nimport { UtenlandsoppholdTidligere } from '@navikt/fp-types';\nimport { ContentWrapper } from '@navikt/fp-ui';\nimport useFortsettSøknadSenere from 'app/utils/hooks/useFortsettSøknadSenere';\nimport SøknadRoutes from 'app/routes/routes';\nimport createConfig, { getPreviousStepHref } from '../stepsConfig';\nimport { ContextDataType, useContextGetData, useContextSaveData } from 'app/context/FpDataContext';\nimport { notEmpty } from '@navikt/fp-validation';\n\ntype Props = {\n    mellomlagreSøknadOgNaviger: () => Promise<void>;\n    avbrytSøknad: () => void;\n};\n\nconst TidligereUtenlandsoppholdSteg: React.FunctionComponent<Props> = ({\n    mellomlagreSøknadOgNaviger,\n    avbrytSøknad,\n}) => {\n    const intl = useIntl();\n    const onFortsettSøknadSenere = useFortsettSøknadSenere();\n\n    const utenlandsopphold = notEmpty(useContextGetData(ContextDataType.UTENLANDSOPPHOLD));\n    const tidligereUtenlandsopphold = useContextGetData(ContextDataType.UTENLANDSOPPHOLD_TIDLIGERE);\n    const oppdaterTidligereUtenlandsopphold = useContextSaveData(ContextDataType.UTENLANDSOPPHOLD_TIDLIGERE);\n    const oppdaterAppRoute = useContextSaveData(ContextDataType.APP_ROUTE);\n\n    const lagredeTidligereUtenlandsopphold =\n        tidligereUtenlandsopphold && tidligereUtenlandsopphold.tidligereOpphold.length > 0\n            ? {\n                  utenlandsoppholdSiste12Mnd: tidligereUtenlandsopphold.tidligereOpphold.map((so) => ({\n                      fom: so.tidsperiode.fom,\n                      tom: so.tidsperiode.tom,\n                      landkode: so.land,\n                  })),\n              }\n            : undefined;\n\n    const save = (values: UtenlandsoppholdTidligere) => {\n        oppdaterTidligereUtenlandsopphold({\n            tidligereOpphold: values.utenlandsoppholdSiste12Mnd.map((un) => ({\n                land: un.landkode,\n                tidsperiode: {\n                    fom: un.fom,\n                    tom: un.tom,\n                },\n            })),\n        });\n\n        const nesteSide = utenlandsopphold.iNorgeNeste12Mnd\n            ? SøknadRoutes.INNTEKTSINFORMASJON\n            : SøknadRoutes.SENERE_UTENLANDSOPPHOLD;\n        oppdaterAppRoute(nesteSide);\n        return mellomlagreSøknadOgNaviger();\n    };\n\n    const goToPreviousStep = () => {\n        const appRoute = getPreviousStepHref('utenlandsoppholdTidligere');\n        oppdaterAppRoute(appRoute);\n        mellomlagreSøknadOgNaviger();\n    };\n    const saveOnPrevious = () => {\n        // TODO (TOR) Lagre uvalidert data i framtida\n    };\n\n    const stepConfig = createConfig(intl, false).map((config) => ({\n        ...config,\n        isSelected: config.id === 'utenlandsoppholdTidligere',\n    }));\n\n    return (\n        <ContentWrapper>\n            <Heading size=\"large\">\n                <FormattedMessage id=\"søknad.pageheading\" />\n            </Heading>\n            <TidligereUtenlandsoppholdPanel\n                tidligereUtenlandsopphold={lagredeTidligereUtenlandsopphold}\n                saveOnNext={save}\n                saveOnPrevious={saveOnPrevious}\n                cancelApplication={avbrytSøknad}\n                onContinueLater={onFortsettSøknadSenere}\n                goToPreviousStep={goToPreviousStep}\n                stepConfig={stepConfig}\n                supportsTempSaving\n            />\n        </ContentWrapper>\n    );\n};\n\nexport default TidligereUtenlandsoppholdSteg;\n"],"names":["TidligereUtenlandsoppholdSteg","mellomlagreSøknadOgNaviger","avbrytSøknad","intl","useIntl","onFortsettSøknadSenere","useFortsettSøknadSenere","utenlandsopphold","notEmpty","useContextGetData","ContextDataType","tidligereUtenlandsopphold","oppdaterTidligereUtenlandsopphold","useContextSaveData","oppdaterAppRoute","lagredeTidligereUtenlandsopphold","so","save","values","un","nesteSide","SøknadRoutes","goToPreviousStep","appRoute","getPreviousStepHref","saveOnPrevious","stepConfig","createConfig","config","jsxs","ContentWrapper","jsx","Heading","FormattedMessage","TidligereUtenlandsoppholdPanel","TidligereUtenlandsoppholdSteg$1"],"mappings":"+iBAgBA,MAAAA,EAAA,CAAA,CAAuE,2BAAAC,EACnE,aAAAC,CAEJ,IAAA,CACI,MAAAC,EAAAC,IACAC,EAAAC,IAEAC,EAAAC,EAAAC,EAAAC,EAAA,gBAAA,CAAA,EACAC,EAAAF,EAAAC,EAAA,0BAAA,EACAE,EAAAC,EAAAH,EAAA,0BAAA,EACAI,EAAAD,EAAAH,EAAA,SAAA,EAEAK,EAAAJ,GAAAA,EAAA,iBAAA,OAAA,EAAA,CAEU,2BAAAA,EAAA,iBAAA,IAAAK,IAAA,CACwF,IAAAA,EAAA,YAAA,IAC5D,IAAAA,EAAA,YAAA,IACA,SAAAA,EAAA,IACP,EAAA,CACf,EAAA,OAIhBC,EAAAC,GAAA,CACIN,EAAA,CAAkC,iBAAAM,EAAA,2BAAA,IAAAC,IAAA,CACmC,KAAAA,EAAA,SACpD,YAAA,CACI,IAAAA,EAAA,IACD,IAAAA,EAAA,GACA,CACZ,EAAA,CACF,CAAA,EAGN,MAAAC,EAAAb,EAAA,iBAAAc,EAAA,oBAAAA,EAAA,wBAGA,OAAAP,EAAAM,CAAA,EACAnB,EAAA,CAAkC,EAGtCqB,EAAA,IAAA,CACI,MAAAC,EAAAC,EAAA,2BAAA,EACAV,EAAAS,CAAA,EACAtB,GAA2B,EAE/BwB,EAAA,IAAA,CAA6B,EAI7BC,EAAAC,EAAAxB,EAAA,EAAA,EAAA,IAAAyB,IAAA,CAA8D,GAAAA,EACvD,WAAAA,EAAA,KAAA,2BACuB,EAAA,EAG9B,OAAAC,EAAA,KAAAC,EAAA,CAAA,SAAA,CAEQC,EAAAA,IAAAC,EAAA,CAAA,KAAA,QAAA,SAAAD,MAAAE,EAAA,CAAA,GAAA,oBAAA,CAAA,CAAA,CAAA,EAEAF,EAAA,IACAG,EAAC,CAAA,0BAAAnB,EAC8B,WAAAE,EACf,eAAAQ,EACZ,kBAAAvB,EACmB,gBAAAG,EACF,iBAAAiB,EACjB,WAAAI,EACA,mBAAA,EACkB,CAAA,CACtB,CAAA,CAAA,CAGZ,EAEAS,EAAAnC"}