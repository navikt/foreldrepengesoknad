import{j as i}from"./jsx-runtime-69eee039.js";import{r as A}from"./index-7c191284.js";import{u as _,j as E,B as p,k as S,R as b,i as d,P as T}from"./validationUtils-0c7fa3e5.js";import"./index-e13aeee6.js";import{E as B}from"./Environment-07523402.js";import{g as L}from"./apiInterceptor-dfae0758.js";import{A as q}from"./AttachmentList-563636ad.js";import{d as C}from"./globalUtil-c820f73d.js";import{i as N,m as R}from"./vedleggUtils-3d0150ec.js";import{B as D}from"./Link-00530630.js";function U(e){const t={withCredentials:!0,timeout:45e3,headers:{"content-type":"multipart/form-data"}},n=new FormData;n.append("id",e.id),n.append("vedlegg",e.file,e.filename);const l=`${B.REST_API_URL}/storage/vedlegg`;return L().post(l,n,t)}const w={saveAttachment:U},y=[".pdf",".jpeg",".jpg",".png"],h=16777,z=.0009765625,G=(e,t,n)=>e.map(l=>{const r=R(l,t,n);return r.pending=!0,r}),K=e=>{const t=e.split(".").pop();return y.includes(`.${t.toLowerCase()}`)},O=e=>e*z<=h,P=(e,t,n)=>e.filter(l=>{const r=K(l.filename);r||t(a=>a.concat(d(n,"vedlegg.feilmelding.ugyldig.type",{filename:l.filename})));const u=O(l.filesize);return u||t(a=>a.concat(d(n,"vedlegg.feilmelding.ugyldig.størrelse",{filename:l.filename,maxStørrelse:h}))),r&&u}),$=(e,t,n,l,r,u)=>{e.forEach(async(a,m)=>{try{const s=await w.saveAttachment(a);a.pending=!1,a.url=s.headers.location,a.uploaded=!0,a.uuid=s.data,t(r+m,a)}catch{n(r+m),l(c=>c.concat(d(u,"vedlegg.feilmelding.opplasting.feilet",{filename:a.filename})))}})},f=({attachments:e,name:t,onFileInputClick:n,attachmentType:l,skjemanummer:r,label:u,legend:a,...m})=>{const s=_(),{setFieldValue:c}=E(),[v,g]=A.useState([]);return i.jsxs(i.Fragment,{children:[i.jsx(p,{padBottom:"l",children:i.jsx(S,{legend:a,buttonLabel:u,name:t,accept:y.join(", "),onFilesSelect:(o,{push:k,replace:F,remove:j})=>{const x=G(o,l,r),I=P(x,g,s);I.forEach(V=>k(V)),$(I,F,j,g,e.length,s)},onClick:n,error:v.length>0?v.map(o=>i.jsx(D,{children:o},o)):void 0,...m})}),i.jsx(p,{padBottom:"l",visible:e.length>0,children:i.jsx(q,{attachments:e.filter(o=>!N(o)),showFileSize:!0,onDelete:o=>{c(t,C(e,o))}})}),i.jsx(p,{children:i.jsx(b,{header:d(s,"pictureScanninGuide.apneLabel"),children:i.jsx(T,{backgroundColor:"blue"})})})]})},ae=f;try{f.displayName="FormikFileUploader",f.__docgenInfo={description:"",displayName:"FormikFileUploader",props:{attachments:{defaultValue:null,description:"",name:"attachments",required:!0,type:{name:"Attachment[]"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"any"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},attachmentType:{defaultValue:null,description:"",name:"attachmentType",required:!0,type:{name:"enum",value:[{value:'"omsorgsovertakelse"'},{value:'"adopsjonsvedtak"'},{value:'"terminbekreftelse"'},{value:'"fødselsattest"'},{value:'"anneninntektDokumentasjon"'},{value:'"utsettelseSykdomUttaksplan"'},{value:'"morsaktivitetdokumentasjon"'},{value:'"dokumentasjonOverføringAvKvote"'},{value:'"dokumentasjonAvAleneomsorg"'},{value:'"senEndring"'},{value:'"hvØvelse"'},{value:'"navTiltak"'}]}},skjemanummer:{defaultValue:null,description:"",name:"skjemanummer",required:!0,type:{name:"enum",value:[{value:'"I000060"'},{value:'"I000051"'},{value:'"I000061"'},{value:'"I000041"'},{value:'"I000110"'},{value:'"I000111"'},{value:'"I000112"'},{value:'"I000037"'},{value:'"I000039"'},{value:'"I000038"'},{value:'"I000023"'},{value:'"I000044"'},{value:'"I000007"'},{value:'"I000042"'},{value:'"I000062"'},{value:'"I000116"'},{value:'"I000117"'}]}},legend:{defaultValue:null,description:"",name:"legend",required:!0,type:{name:"string"}},onFileInputClick:{defaultValue:null,description:"",name:"onFileInputClick",required:!1,type:{name:"(() => void)"}}}}}catch{}export{ae as F};
//# sourceMappingURL=FormikFileUploader-101bf53f.js.map
