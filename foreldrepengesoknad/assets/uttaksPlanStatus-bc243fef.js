import{S as i,b as c,k as o,d as V,l as h,m as U,O as I,U as P,n as _,P as B,g as $,a as H,o as T}from"./Perioden-2b8e5e5b.js";import{U as v,d as l,i as k,a6 as j,v as g,f as w,a7 as x,I as L,a8 as W,a9 as z}from"./dates-83aa686a.js";import"./jsx-runtime-1caa8f64.js";import"./index-1cdf6ce0.js";import{c as A}from"./stringUtils-9a57a903.js";import{i as G}from"./barnUtils-d0e8071c.js";var f=(t=>(t.UttakFellesperiodeAnnenForelder="UTTAK_FELLESP_ANNEN_FORELDER",t.UttakFedrekvoteAnnenForelder="UTTAK_FEDREKVOTE_ANNEN_FORELDER",t.UttakMødrekvoteAnnenForelder="UTTAK_MØDREKVOTE_ANNEN_FORELDER",t.UttakForeldrepengerAnnenForelder="UTTAK_FORELDREPENGER_ANNEN_FORELDER",t.ForeldrepengerFørFødsel="UTTAK_FORELDREPENGER_FØR_FØDSEL_ANNEN_FORELDER",t.Ingen="INGEN",t))(f||{});const J=/^[0-9]*$/,q=t=>{let e=2,r=0;for(let n=t.length-2;n>=0;--n)r+=parseInt(t.charAt(n),10)*e,++e>7&&(e=2);const s=11-r%11;return s===11?0:s},C=t=>J.test(t)&&t.length===9,Q=t=>t.charAt(0)==="8"||t.charAt(0)==="9",yt=t=>!t||C(t)===!1||Q(t)===!1||t==="999999999"?!1:q(t)===parseInt(t.charAt(8),10),X=RegExp(/^[-]?[0-9,.\s]*$/),Y=t=>t.replace(/,/g,".").replace(/\s/g,"").replace(/%/g,""),F=t=>{if(t!=null&&t.length>0&&X.test(t)){const e=Y(t);return(e.match(/\./g)||[]).length>1?void 0:parseFloat(e)}},Rt=(t,e,r)=>{if(!e)return t;const s=v(r).denneEllerNeste();return l(e).isBefore(l(s),"d")?t.filter(d=>d===i.Fellesperiode||d===i.Foreldrepenger):t},Nt=t=>t.filter(e=>e.konto===i.Fellesperiode||e.konto===i.Fedrekvote||e.konto===i.Mødrekvote||e.konto===i.Foreldrepenger||e.konto===i.AktivitetsfriKvote).map(e=>e.konto),y=(t,e,r,s,n)=>{if(s&&e===i.Fedrekvote||!s&&e===i.Mødrekvote)return t.formatMessage({id:"uttaksplan.stønadskontotype.dinKvote"});let a;switch(e){case i.Mødrekvote:a=r.mor;break;case i.Fedrekvote:a=r.farMedmor;break;default:a=void 0}if(a)return t.formatMessage({id:"uttaksplan.stønadskontotype.foreldernavn.kvote"},{navn:G(A(a),t.locale)});if(s===!0&&n===!1){if(e===i.AktivitetsfriKvote)return t.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSFRI_KVOTE_BFHR"});if(e===i.Foreldrepenger)return t.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSKRAV_KVOTE_BFHR"})}return t.formatMessage({id:`uttaksplan.stønadskontotype.${e}`})},Z=(t,e,r,s,n,a,d)=>{const u=p(r,s);if(n!==void 0){const E=G(u,t.locale),m=e===i.Fellesperiode?"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttakFellesperiode":"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttak";return k(t,m,{navn:A(E),prosent:n})}return y(t,e,s,a,d)},tt=10,D=2*7,et=6*7,Mt=(t,e,r,s)=>j(t)&&e&&r&&s==="fødsel",rt=t=>c(t)&&t.forelder===g.farMedmor&&t.konto===i.Fedrekvote&&!t.erMorForSyk&&t.morsAktivitetIPerioden===void 0&&!t.ønskerFlerbarnsdager&&t.ønskerSamtidigUttak===!0,R=(t,e,r)=>rt(t)&&M(t.tidsperiode,e,r),st=(t,e)=>c(t)&&t.forelder===g.farMedmor&&!e,nt=(t,e)=>{const r=e!==void 0?l(e).subtract(D,"day"):l(t).subtract(D,"day"),s=l.min(r,l(t));return v(s.toDate()).denneEllerNeste()},N=t=>{const e=v(t).denneEllerNeste();return v(l(e).add(et,"day").toDate()).forrige()},at=(t,e,r)=>{const s=nt(e,r);return l(t.fom).isSameOrAfter(s,"day")},Ot=(t,e)=>c(t)&&l(t.tidsperiode.fom).isBefore(e,"day"),ht=(t,e)=>{const r=N(e);return l(t.tom).isSameOrBefore(r,"day")},M=(t,e,r)=>at(t,e,r)&&l(t.fom).isSameOrBefore(N(e),"day"),It=(t,e,r)=>t.filter(s=>R(s,e,r)),_t=(t,e,r,s,n,a,d)=>t!==void 0&&w(t)&&n&&d==="fødsel"&&j(e)&&r===o.Uttak&&(s===i.Fedrekvote||s===i.Foreldrepenger||s===i.AktivitetsfriKvote)&&M(t,e,a),Lt=(t,e)=>{const r=N(t),s=S({tidsperiode:{fom:e,tom:r}});return Math.min(s,tt)},ot=(t,e,r,s,n,a)=>s==="fødsel"&&R(r,n,a)?e+k(t,"rundtFødsel"):e,Dt=(t,e,r,s)=>(R(t,e,s)||st(t,r))&&x(t.tidsperiode,e),Kt=(t,e,r)=>t.filter(s=>(c(s)||V(s))&&M(s.tidsperiode,e,r)),bt=(t,e,r)=>!!t&&e!==void 0&&l(r).isSame(e,"d"),Vt=t=>({fom:L(t.fom),tom:L(t.tom)}),Bt=t=>{const e=F(t);return e?e>0:!1},jt=t=>{const e=F(t);return e?e<=100:!1},Gt=t=>{const e=F(t);return e?e<100:!1},K=t=>t!==void 0&&isNaN(parseFloat(t))===!1,b=t=>{if(t===void 0)return;const e=parseFloat(t);if(!isNaN(e))return Math.round(e)===e?Math.round(e):e},it=(t,e)=>{if(e)return e;if(t){let r=(100-t)*100;return r=Math.round(r)/100,r}},dt=(t,e,r,s)=>{const n=A(r);return s?k(t,`uttaksplan.oppholdsårsaktype.foreldernavn.far.${e}`,{foreldernavn:n}):k(t,`uttaksplan.oppholdsårsaktype.foreldernavn.mor.${e}`,{foreldernavn:n})},O=t=>t===f.UttakFedrekvoteAnnenForelder?i.Fedrekvote:t===f.UttakMødrekvoteAnnenForelder?i.Mødrekvote:t===f.UttakFellesperiodeAnnenForelder?i.Fellesperiode:t===f.UttakForeldrepengerAnnenForelder?i.Foreldrepenger:i.ForeldrepengerFørFødsel,$t=t=>{switch(t){case i.Fedrekvote:return f.UttakFedrekvoteAnnenForelder;case i.Mødrekvote:return f.UttakMødrekvoteAnnenForelder;case i.Fellesperiode:return f.UttakFellesperiodeAnnenForelder;default:return}},p=(t,e)=>{let r="";return e.farMedmor?r=t===g.mor?e.mor:e.farMedmor:r=t===g.mor?e.mor:t,A(r)},lt=(t,e,r,s,n,a,d,u)=>{const E=y(t,e.konto,r,d,u),m=ot(t,E,e,a,s,n);return e.gradert&&K(e.stillingsprosent)||e.ønskerSamtidigUttak&&K(e.samtidigUttakProsent)?`${m} ${k(t,"gradering.prosent",{stillingsprosent:it(b(e.stillingsprosent),e.samtidigUttakProsent?b(e.samtidigUttakProsent):void 0)})}`:m},ut=(t,e,r,s)=>{switch(e.infotype){case U.uttakAnnenPart:return Z(t,O(e.årsak),e.forelder,r,e.samtidigUttakProsent,s);case U.utsettelseAnnenPart:return k(t,`uttaksplan.periodetype.info.utsettelse.${e.årsak}`,{navn:p(e.forelder,r)});case U.avslåttPeriode:return e.opprinneligSøkt===I.Arbeid||e.opprinneligSøkt===I.Ferie?"Avslått utsettelse":e.forelder===g.mor&&s||e.forelder===g.farMedmor&&!s?k(t,"uttaksplan.periodetype.info.avslåttPeriode.annenPart",{navn:p(e.forelder,r)}):k(t,`uttaksplan.periodetype.info.${e.infotype}`)}},Ht=(t,e,r,s,n,a,d,u)=>{switch(e.type){case o.Uttak:return lt(t,e,r,s,n,a,d,u);case o.PeriodeUtenUttak:return k(t,"uttaksplan.periodetype.periodeUtenUttak.tittel");case o.Overføring:return y(t,e.konto,r,d);case o.Utsettelse:return e.årsak?k(t,"uttaksplan.periodeliste.utsettelsesårsak",{årsak:k(t,`uttaksplan.utsettelsesårsak.${e.årsak}`)}):k(t,"uttaksplan.periodeliste.utsettelsesårsak.ukjent");case o.Opphold:return dt(t,e.årsak,p(e.forelder,r),e.forelder==="mor");case o.Hull:return k(t,"uttaksplan.periodetype.hull.tittel");case o.Info:return ut(t,e,r,d)}},wt=(t,e)=>{if(e===void 0)return!1;const r=kt(t,e);return r?r.resultat.innvilget:!1},kt=(t,e)=>e.saksperioder.find(r=>W(z(r.periode),t.tidsperiode)),xt=(t,e)=>t.type===o.Utsettelse||t.type===o.Uttak||t.type===o.Overføring||t.type===o.Opphold||t.type===o.Info?p(t.forelder,e):"Ingen forelder registrert",Wt=t=>{switch(t){case o.Uttak:return"uttaksplan.slettPeriode.uttak";case o.Overføring:return"uttaksplan.slettPeriode.overføring";case o.Opphold:return"uttaksplan.slettPeriode.opphold";case o.Utsettelse:return"uttaksplan.slettPeriode.utsettelse";case o.Info:return"uttaksplan.slettPeriode.info";default:return""}},ft=(t,e)=>t.tidsperiode.fom!==void 0&&t.tidsperiode.tom!==void 0&&l(t.tidsperiode.fom).isSameOrAfter(e,"day")&&l(t.tidsperiode.tom).isSameOrAfter(e,"day"),zt=(t,e)=>ft(t,e)===!1,Jt=t=>t===P.Sykdom||t===P.InstitusjonBarnet||t===P.InstitusjonSøker||t===_.institusjonsoppholdAnnenForelder||t===_.sykdomAnnenForelder,qt=(t,e)=>e.some(r=>B(t).erLik(r,!0,!0)),Ct=(t,e)=>{if(c(t)){const r=e.filter(s=>h(s)).find(s=>h(s)&&l(t.tidsperiode.fom).isSame(s.tidsperiode.fom)&&s.ønskerSamtidigUttak===!0&&s.id!==t.id);return r!==void 0?r:void 0}},Qt=(t,e,r)=>{const s=t.find(n=>n.id===e.id);return s&&s.isValid!==r?t.map(n=>n.id===s.id?{...n,isValid:r}:n):s?t:[...t,{id:e.id,isValid:r}]},S=t=>{const e=B(t).getAntallUttaksdager();if(c(t)){const r=t.stillingsprosent!==void 0,s=t.samtidigUttakProsent!==void 0;if(r&&s||r){const n=(100-F(t.stillingsprosent))/100;return e*n}else return s?e*(F(t.samtidigUttakProsent)/100):e}return e},ct=t=>[...t.filter(c),...Ft(t.filter($)),...pt(t.filter(V)),...mt(t.filter(H)),...Ut(t.filter(T))],gt=(t,e,r)=>{const s=ct(e);return t.map(n=>{let a=r?0:n.dager;const d=s.filter(u=>u.konto===n.konto);return d&&(d.forEach(u=>{(u.type===o.Uttak||u.type===o.Overføring||T(u))&&(a=r?a+S(u):a-S(u))}),a=r?Math.floor(a):Math.ceil(a)),{konto:n.konto,dager:a}})},Xt=(t,e)=>gt(t,e,!0),Ft=t=>t.length===0?[]:t.map(e=>({id:e.id,tidsperiode:e.tidsperiode,type:o.Uttak,konto:O(e.årsak),forelder:e.forelder})),pt=t=>t.length===0?[]:t.map(e=>({id:e.id,tidsperiode:e.tidsperiode,type:o.Uttak,konto:e.konto,forelder:e.forelder})),mt=t=>{if(t.length===0)return[];const e=[];return t.filter(r=>T(r)===!1).forEach(r=>{r.infotype===U.uttakAnnenPart&&e.push(r)}),e.map(r=>{const{type:s,årsak:n,...a}=r;return{type:o.Uttak,konto:O(r.årsak),...a}})},Ut=t=>t.length===0?[]:t.filter(e=>e.avslåttPeriodeType===o.Uttak||e.avslåttPeriodeType===o.Utsettelse).map(e=>({type:o.Uttak,konto:e.kontoType,tidsperiode:e.tidsperiode,id:e.id,forelder:e.forelder}));export{ct as A,Xt as B,gt as C,Mt as D,It as E,tt as F,ht as G,zt as H,wt as I,xt as J,Bt as K,jt as L,Gt as M,rt as N,f as O,at as P,Ot as Q,Jt as R,Dt as S,Lt as T,nt as a,Kt as b,qt as c,y as d,yt as e,S as f,Ht as g,ot as h,N as i,R as j,st as k,F as l,Vt as m,_t as n,O as o,$t as p,Qt as q,Nt as r,Rt as s,Y as t,bt as u,Wt as v,M as w,p as x,dt as y,Ct as z};
