import{j as t,a as g}from"./jsx-runtime-670450c2.js";import{aj as de,ak as ae,a as V,H as z,F as h,B as m,i as a,d as k,aH as le,aI as re,e as se,c as ie,aJ as pe,aK as J,aL as $,aM as G,aN as X,S as me,aO as x,w as _,E as M,k as S,l as ue,b as q}from"./validationUtils-00d66cf2.js";import"./index-7e4e529b.js";import{R as O}from"./index-f1f749bf.js";import{T as ce,M as he,Y as f,g as Z,b as w}from"./getTypedFormComponents-a42e978b.js";import{S as W,a as ge}from"./mapSøkerinfoDTO-adbe2fb9.js";import{u as fe}from"./useOnValidSubmit-0d8cf87d.js";import{u as ke,L as Ne}from"./useSøknad-54892a90.js";import{u as ve,a as Se,s as be,g as Be}from"./useFortsettSøknadSenere-d27349ce.js";import{Q as Ie}from"./index-47edccfa.js";import{I as N,a2 as j,a3 as P}from"./dateUtils-becbdc23.js";import{a as H,c as Y}from"./formUtils-b1c6ed9d.js";import{u as ye,s as Me}from"./useSaveLoadedRoute-352242ea.js";import{B as Ue,L as Fe}from"./Link-40b5f3c6.js";function De(e){var o=e.name,d=e.labels,l=e.listRenderer,c=e.formRenderer,s=e.sortFunc,r=e.onAfterChange,p=e.dialogWidth,n=e.shouldCloseOnOverlayClick,i=e.error,ee=e.maxItems,te=e.useFastField,C=e.validate,b=O.useContext(ce),ne=te?de:ae;return O.createElement(ne,{name:o,validate:C?function(B){return C(B,o)}:void 0},function(B){var I=B.field,E=B.form;return O.createElement(he,{labels:d,items:I.value,error:i||(b?b.getAndRenderFieldErrorMessage(I,E):void 0),maxItems:ee,dialogWidth:p,shouldCloseOnOverlayClick:n,onChange:function(v){var y=s?v.sort(s):v;E.setFieldValue(I.name,y),r&&r(y),b&&b.onAfterFieldValueSet()},formRenderer:c,listRenderer:function(v){var y=v.onEdit,oe=v.onDelete;return l({items:I.value,onDelete:oe,onEdit:y})}})})}var u=(e=>(e.harBoddINorgeSiste12Mnd="harBoddINorgeSiste12Mnd",e.utenlandsoppholdSiste12Mnd="utenlandsoppholdSiste12Mnd",e.skalBoINorgeNeste12Mnd="skalBoINorgeNeste12Mnd",e.utenlandsoppholdNeste12Mnd="utenlandsoppholdNeste12Mnd",e))(u||{});const Oe={harBoddINorgeSiste12Mnd:f.UNANSWERED,utenlandsoppholdSiste12Mnd:[],skalBoINorgeNeste12Mnd:f.UNANSWERED,utenlandsoppholdNeste12Mnd:[]},U=Z(),Le={[u.harBoddINorgeSiste12Mnd]:{isAnswered:({harBoddINorgeSiste12Mnd:e})=>e!==f.UNANSWERED,isIncluded:()=>!0,visibilityFilter:({skalBoINorgeNeste12Mnd:e})=>e!==f.UNANSWERED},[u.utenlandsoppholdSiste12Mnd]:{isAnswered:({utenlandsoppholdSiste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({harBoddINorgeSiste12Mnd:e})=>e===f.NO},[u.skalBoINorgeNeste12Mnd]:{isAnswered:({skalBoINorgeNeste12Mnd:e})=>e!==f.UNANSWERED,isIncluded:()=>!0},[u.utenlandsoppholdNeste12Mnd]:{isAnswered:({utenlandsoppholdNeste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({skalBoINorgeNeste12Mnd:e})=>e===f.NO}},Ae=Ie(Le),Re=e=>{const{fom:o,landkode:d,tom:l}=e;return o!==void 0&&d!==void 0&&l!==void 0},F=Z(),Te=e=>({fom:e.fom,tom:e.tom,landkode:e.landkode}),A=({maxDate:e,minDate:o,bosted:d,onSubmit:l,onCancel:c,erFremtidigOpphold:s})=>{const r=V(),p=n=>{const i={...d,fom:n.fom,tom:n.tom,landkode:n.landkode};if(Re(i))l(i);else throw new Error("BostedUtlandForm: Formvalues is not a valid BostedUtland on submit.")};return t(F.FormikWrapper,{initialValues:d?Te(d):{},onSubmit:p,renderForm:({values:n})=>g(F.Form,{onCancel:c,showButtonArrows:!1,submitButtonLabel:"Legg til",children:[t(z,{size:"medium",as:"h1",children:t(h,{id:"utenlandsopphold.leggTilUtenlandsopphold.tittel"})}),t(m,{children:t(F.DateIntervalPicker,{legend:a(r,"utenlandsopphold.leggTilUtenlandsopphold.tidsrom"),fromDatepickerProps:{name:"fom",label:a(r,"utenlandsopphold.leggTilUtenlandsopphold.fraogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:o,maxDate:N(n.tom)||e,validate:i=>n.tom&&n.fom&&k(n.tom).isSame(n.fom)?"Fra og med dato kan ikke være samme som til og med dato":j.validateFromDateInRange({intl:r,date:N(i),minDate:o,maxDate:e,errorKey:"valideringsfeil.fraOgMedDato.førTilDato",toDate:N(n.tom),disableWeekend:!1})},toDatepickerProps:{name:"tom",label:a(r,"utenlandsopphold.leggTilUtenlandsopphold.tilogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:N(n.fom)||o,maxDate:e,validate:i=>n.tom&&n.fom&&k(n.tom).isSame(n.fom)?"Til og med dato kan ikke være samme som fra og med dato":j.validateToDateInRange({intl:r,date:N(i),minDate:o,maxDate:e,errorKey:"valideringsfeil.tilOgMedDato.etterFraDato",fromDate:N(n.fom),disableWeekend:!1})}})}),t(m,{margin:"xl",children:t(F.CountrySelect,{name:"landkode",label:s?a(r,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandSkalDuBoI"):a(r,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandHarDuBoddI"),validate:i=>le(i,a(r,s?"valideringsfeil.utenlandsopphold.landDuSkalBoIPåkrevd":"valideringsfeil.utenlandsopphold.landDuHarBoddIPåkrevd")),useAlpha3Code:!1})})]})})};try{A.displayName="BostedUtlandForm",A.__docgenInfo={description:"",displayName:"BostedUtlandForm",props:{minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},bosted:{defaultValue:null,description:"",name:"bosted",required:!1,type:{name:"BostedUtland"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: BostedUtland) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const L=ie("bostedUtlandList"),R=({bosteder:e,onDelete:o,onEdit:d})=>{const l=V();return t(re,{getItemId:s=>s.id,getItemTitle:s=>w(s.landkode,l.locale),onDelete:o,onEdit:d,labelRenderer:s=>{const r=w(s.landkode,l.locale);return g("div",{className:L.element("label"),children:[g("span",{className:L.element("land"),children:[d&&t(se,{onClick:()=>d(s),children:r}),!d&&t("span",{children:r})]}),g("span",{className:L.element("dato"),children:[P(k(s.fom).toDate())," -"," ",P(k(s.tom).toDate())]})]})},items:e})};try{R.displayName="BostedUtlandList",R.__docgenInfo={description:"",displayName:"BostedUtlandList",props:{bosteder:{defaultValue:null,description:"",name:"bosteder",required:!0,type:{name:"BostedUtland[]"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((opphold: BostedUtland) => void)"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((opphold: BostedUtland) => void)"}}}}}catch{}function D({name:e,minDate:o,maxDate:d,validate:l,labels:c,erFremtidigOpphold:s}){return t(De,{name:e,labels:c,validate:l,dialogWidth:"narrow",sortFunc:pe,formRenderer:({onSubmit:r,onCancel:p,item:n})=>t(A,{bosted:n,minDate:o,maxDate:d,onSubmit:r,onCancel:p,erFremtidigOpphold:s}),listRenderer:({items:r,onEdit:p,onDelete:n})=>t(R,{bosteder:r,onEdit:p,onDelete:n})})}try{D.displayName="BostedUtlandListAndDialog",D.__docgenInfo={description:"",displayName:"BostedUtlandListAndDialog",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"FieldNames"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"any"}},minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"ModalFormAndListLabels"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const Q=e=>({fom:e.tidsperiode.fom,tom:e.tidsperiode.tom,landkode:e.land}),Ve=e=>({...Oe,harBoddINorgeSiste12Mnd:H(e.iNorgeSiste12Mnd),skalBoINorgeNeste12Mnd:H(e.iNorgeNeste12Mnd),utenlandsoppholdNeste12Mnd:e.senereOpphold.map(Q),utenlandsoppholdSiste12Mnd:e.tidligereOpphold.map(Q)}),K=e=>e.map(o=>({land:o.landkode,tidsperiode:{fom:o.fom,tom:o.tom}})),Ce=e=>{const{harBoddINorgeSiste12Mnd:o,skalBoINorgeNeste12Mnd:d,utenlandsoppholdNeste12Mnd:l,utenlandsoppholdSiste12Mnd:c}=e;return{iNorgeSiste12Mnd:Y(o),iNorgeNeste12Mnd:Y(d),senereOpphold:d===f.NO?K(l):[],tidligereOpphold:o===f.NO?K(c):[]}},Ee=e=>o=>{if(o.length===0)return a(e,"valideringsfeil.utenlandsopphold.neste12Måneder.ikkeRegistrert");const d=o.map(l=>({from:k(l.fom).toDate(),to:k(l.tom).toDate()}));if(J(d))return a(e,"valideringsfeil.utenlandsopphold.overlapp");if($(d,{from:new Date,to:G}))return a(e,"valideringsfeil.utenlandsoppholdUtenforPeriode")},xe=e=>o=>{if(o.length===0)return a(e,"valideringsfeil.utenlandsopphold.siste12Måneder.ikkeRegistrert");const d=o.map(l=>({from:k(l.fom).toDate(),to:k(l.tom).toDate()}));if(J(d))return a(e,"valideringsfeil.utenlandsopphold.overlapp");if($(d,{from:X,to:new Date}))return a(e,"valideringsfeil.utenlandsoppholdUtenforPeriode")},T=()=>{const e=V(),{informasjonOmUtenlandsopphold:o}=ke(),d=p=>{const n=Ce(p);return[ge.setInformasjonOmUtenlandsopphold(n)]},{handleSubmit:l,isSubmitting:c}=fe(d,W.INNTEKTSINFORMASJON,p=>Me(p)),s=ve(),r=Se();return ye(W.UTENLANDSOPPHOLD),t(U.FormikWrapper,{initialValues:Ve(o),onSubmit:l,renderForm:({values:p})=>{const n=Ae.getVisbility(p);return t(me,{bannerTitle:a(e,"søknad.pageheading"),activeStepId:"utenlandsopphold",pageTitle:a(e,"søknad.utenlandsopphold"),onCancel:s,onContinueLater:r,steps:be(e,!1),children:g(U.Form,{includeButtons:!1,includeValidationSummary:!0,children:[t(m,{visible:n.isVisible(u.skalBoINorgeNeste12Mnd),padBottom:"l",children:t(U.YesOrNoQuestion,{legend:a(e,"utenlandsopphold.neste12Måneder.spørsmål"),name:u.skalBoINorgeNeste12Mnd,description:a(e,"utenlandsopphold.neste12MånederInfotekst"),labels:{yes:a(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddINorge"),no:a(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:i=>x(i,"valideringsfeil.utenlandsopphold.skalBoINorgePåkrevd")})}),t(m,{padBottom:"xl",visible:n.isVisible(u.utenlandsoppholdNeste12Mnd),children:t(D,{name:u.utenlandsoppholdNeste12Mnd,minDate:_,maxDate:G,labels:{addLabel:a(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold neste 12 måneder"},erFremtidigOpphold:!0,validate:Ee(e)})}),t(m,{padBottom:"l",visible:n.isVisible(u.harBoddINorgeSiste12Mnd),children:t(U.YesOrNoQuestion,{legend:a(e,"utenlandsopphold.siste12Måneder.spørsmål"),name:u.harBoddINorgeSiste12Mnd,description:a(e,"utenlandsopphold.siste12MånederInfotekst"),labels:{yes:a(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddINorge"),no:a(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:i=>x(i,"valideringsfeil.utenlandsopphold.harBoddINorgePåkrevd")})}),t(m,{padBottom:"xl",visible:n.isVisible(u.utenlandsoppholdSiste12Mnd),children:t(D,{minDate:X,maxDate:_,name:u.utenlandsoppholdSiste12Mnd,labels:{addLabel:a(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold siste 12 måneder"},erFremtidigOpphold:!1,validate:xe(e)})}),t(m,{padBottom:"xl",children:g(M,{"aria-label":"Informasjon om utenlandsopphold",children:[g(M.Header,{children:[t(M.Title,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.header.tittel"})}),t(S,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.header.ingress"})})]}),g(M.Content,{children:[t(m,{padBottom:"l",children:t(S,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon1"})})}),t(m,{padBottom:"l",children:t(S,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon2"})})}),t(m,{padBottom:"xl",children:t(S,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon3"})})}),t(m,{padBottom:"l",children:t(z,{as:"h4",size:"medium",children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.undertittel"})})}),t(m,{padBottom:"l",children:t(S,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon4"})})}),t(Ue,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon5",values:{a:i=>t(Fe,{href:"https://nav.no/foreldrepenger#utland",rel:"noreferrer",target:"_blank",children:i})}})})]})]})}),t(m,{children:g(ue,{children:[t(q,{variant:"secondary",as:Ne,to:Be("utenlandsopphold"),children:t(h,{id:"backlink.label"})}),n.areAllQuestionsAnswered()&&t(q,{type:"submit",disabled:c,loading:c,children:a(e,"søknad.gåVidere")})]})})]})})}})},Xe=T;try{T.displayName="Utenlandsopphold",T.__docgenInfo={description:"",displayName:"Utenlandsopphold",props:{}}}catch{}export{Xe as U};
//# sourceMappingURL=Utenlandsopphold-cd027470.js.map
