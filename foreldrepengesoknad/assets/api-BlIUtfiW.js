var de=t=>{throw TypeError(t)};var J=(t,e,s)=>e.has(t)||de("Cannot "+s);var r=(t,e,s)=>(J(t,e,"read from private field"),s?s.call(t):e.get(t)),p=(t,e,s)=>e.has(t)?de("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),c=(t,e,s,i)=>(J(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),f=(t,e,s)=>(J(t,e,"access private method"),s);import{S as Ie,p as pe,r as I,s as Y,b as G,n as Qe,i as Z,c as ge,t as _e,f as xe,d as Fe,e as me,g as Se,u as Me,k as he}from"./index-CNWgaQ0m.js";import{r as _}from"./index-f9CH5uyH.js";import"./jsx-runtime-DCY474Ph.js";import{g as Ae,J as we}from"./barnUtils-B9wLExDT.js";import{c as Be}from"./eksisterendeSakUtils-CLvarWoN.js";import{i as X,m as De,n as Pe}from"./useFpNavigator-C1507vru.js";import{O as V,a8 as ve,aa as Ue,N as Ne,a9 as ke}from"./Uttaksplan-D3KRHfzI.js";var O,a,H,y,A,U,F,T,K,N,k,w,B,M,L,h,j,ee,te,se,re,ie,ne,ae,Ce,Oe,Le=(Oe=class extends Ie{constructor(e,s){super();p(this,h);p(this,O);p(this,a);p(this,H);p(this,y);p(this,A);p(this,U);p(this,F);p(this,T);p(this,K);p(this,N);p(this,k);p(this,w);p(this,B);p(this,M);p(this,L,new Set);this.options=s,c(this,O,e),c(this,T,null),c(this,F,pe()),this.options.experimental_prefetchInRender||r(this,F).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,a).addObserver(this),Re(r(this,a),this.options)?f(this,h,j).call(this):this.updateResult(),f(this,h,re).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return oe(r(this,a),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return oe(r(this,a),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,h,ie).call(this),f(this,h,ne).call(this),r(this,a).removeObserver(this)}setOptions(e,s){const i=this.options,l=r(this,a);if(this.options=r(this,O).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof I(this.options.enabled,r(this,a))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");f(this,h,ae).call(this),r(this,a).setOptions(this.options),i._defaulted&&!Y(this.options,i)&&r(this,O).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,a),observer:this});const u=this.hasListeners();u&&ye(r(this,a),l,this.options,i)&&f(this,h,j).call(this),this.updateResult(s),u&&(r(this,a)!==l||I(this.options.enabled,r(this,a))!==I(i.enabled,r(this,a))||G(this.options.staleTime,r(this,a))!==G(i.staleTime,r(this,a)))&&f(this,h,ee).call(this);const n=f(this,h,te).call(this);u&&(r(this,a)!==l||I(this.options.enabled,r(this,a))!==I(i.enabled,r(this,a))||n!==r(this,M))&&f(this,h,se).call(this,n)}getOptimisticResult(e){const s=r(this,O).getQueryCache().build(r(this,O),e),i=this.createResult(s,e);return He(this,i)&&(c(this,y,i),c(this,U,this.options),c(this,A,r(this,a).state)),i}getCurrentResult(){return r(this,y)}trackResult(e,s){const i={};return Object.keys(e).forEach(l=>{Object.defineProperty(i,l,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(l),s==null||s(l),e[l])})}),i}trackProp(e){r(this,L).add(e)}getCurrentQuery(){return r(this,a)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=r(this,O).defaultQueryOptions(e),i=r(this,O).getQueryCache().build(r(this,O),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(e){return f(this,h,j).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,y)))}createResult(e,s){var fe;const i=r(this,a),l=this.options,u=r(this,y),n=r(this,A),m=r(this,U),b=e!==i?e.state:r(this,H),{state:E}=e;let o={...E},Q=!1,g;if(s._optimisticResults){const R=this.hasListeners(),D=!R&&Re(e,s),P=R&&ye(e,i,s,l);(D||P)&&(o={...o,...Fe(E.data,e.options)}),s._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:x,errorUpdatedAt:S,status:v}=o;if(s.select&&o.data!==void 0)if(u&&o.data===(n==null?void 0:n.data)&&s.select===r(this,K))g=r(this,N);else try{c(this,K,s.select),g=s.select(o.data),g=me(u==null?void 0:u.data,g,s),c(this,N,g),c(this,T,null)}catch(R){c(this,T,R)}else g=o.data;if(s.placeholderData!==void 0&&g===void 0&&v==="pending"){let R;if(u!=null&&u.isPlaceholderData&&s.placeholderData===(m==null?void 0:m.placeholderData))R=u.data;else if(R=typeof s.placeholderData=="function"?s.placeholderData((fe=r(this,k))==null?void 0:fe.state.data,r(this,k)):s.placeholderData,s.select&&R!==void 0)try{R=s.select(R),c(this,T,null)}catch(D){c(this,T,D)}R!==void 0&&(v="success",g=me(u==null?void 0:u.data,R,s),Q=!0)}r(this,T)&&(x=r(this,T),g=r(this,N),S=Date.now(),v="error");const $=o.fetchStatus==="fetching",z=v==="pending",W=v==="error",ce=z&&$,le=g!==void 0,C={status:v,fetchStatus:o.fetchStatus,isPending:z,isSuccess:v==="success",isError:W,isInitialLoading:ce,isLoading:ce,data:g,dataUpdatedAt:o.dataUpdatedAt,error:x,errorUpdatedAt:S,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>b.dataUpdateCount||o.errorUpdateCount>b.errorUpdateCount,isFetching:$,isRefetching:$&&!z,isLoadingError:W&&!le,isPaused:o.fetchStatus==="paused",isPlaceholderData:Q,isRefetchError:W&&le,isStale:ue(e,s),refetch:this.refetch,promise:r(this,F)};if(this.options.experimental_prefetchInRender){const R=q=>{C.status==="error"?q.reject(C.error):C.data!==void 0&&q.resolve(C.data)},D=()=>{const q=c(this,F,C.promise=pe());R(q)},P=r(this,F);switch(P.status){case"pending":e.queryHash===i.queryHash&&R(P);break;case"fulfilled":(C.status==="error"||C.data!==P.value)&&D();break;case"rejected":(C.status!=="error"||C.error!==P.reason)&&D();break}}return C}updateResult(e){const s=r(this,y),i=this.createResult(r(this,a),this.options);if(c(this,A,r(this,a).state),c(this,U,this.options),r(this,A).data!==void 0&&c(this,k,r(this,a)),Y(i,s))return;c(this,y,i);const l={},u=()=>{if(!s)return!0;const{notifyOnChangeProps:n}=this.options,m=typeof n=="function"?n():n;if(m==="all"||!m&&!r(this,L).size)return!0;const d=new Set(m??r(this,L));return this.options.throwOnError&&d.add("error"),Object.keys(r(this,y)).some(b=>{const E=b;return r(this,y)[E]!==s[E]&&d.has(E)})};(e==null?void 0:e.listeners)!==!1&&u()&&(l.listeners=!0),f(this,h,Ce).call(this,{...l,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,h,re).call(this)}},O=new WeakMap,a=new WeakMap,H=new WeakMap,y=new WeakMap,A=new WeakMap,U=new WeakMap,F=new WeakMap,T=new WeakMap,K=new WeakMap,N=new WeakMap,k=new WeakMap,w=new WeakMap,B=new WeakMap,M=new WeakMap,L=new WeakMap,h=new WeakSet,j=function(e){f(this,h,ae).call(this);let s=r(this,a).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(Qe)),s},ee=function(){f(this,h,ie).call(this);const e=G(this.options.staleTime,r(this,a));if(Z||r(this,y).isStale||!ge(e))return;const i=_e(r(this,y).dataUpdatedAt,e)+1;c(this,w,setTimeout(()=>{r(this,y).isStale||this.updateResult()},i))},te=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,a)):this.options.refetchInterval)??!1},se=function(e){f(this,h,ne).call(this),c(this,M,e),!(Z||I(this.options.enabled,r(this,a))===!1||!ge(r(this,M))||r(this,M)===0)&&c(this,B,setInterval(()=>{(this.options.refetchIntervalInBackground||xe.isFocused())&&f(this,h,j).call(this)},r(this,M)))},re=function(){f(this,h,ee).call(this),f(this,h,se).call(this,f(this,h,te).call(this))},ie=function(){r(this,w)&&(clearTimeout(r(this,w)),c(this,w,void 0))},ne=function(){r(this,B)&&(clearInterval(r(this,B)),c(this,B,void 0))},ae=function(){const e=r(this,O).getQueryCache().build(r(this,O),this.options);if(e===r(this,a))return;const s=r(this,a);c(this,a,e),c(this,H,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Ce=function(e){Se.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(r(this,y))}),r(this,O).getQueryCache().notify({query:r(this,a),type:"observerResultsUpdated"})})},Oe);function je(t,e){return I(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Re(t,e){return je(t,e)||t.state.data!==void 0&&oe(t,e,e.refetchOnMount)}function oe(t,e,s){if(I(e.enabled,t)!==!1){const i=typeof s=="function"?s(t):s;return i==="always"||i!==!1&&ue(t,e)}return!1}function ye(t,e,s,i){return(t!==e||I(i.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&ue(t,s)}function ue(t,e){return I(e.enabled,t)!==!1&&t.isStaleByTime(G(e.staleTime,t))}function He(t,e){return!Y(t.getCurrentResult(),e)}var Te=_.createContext(!1),Ke=()=>_.useContext(Te);Te.Provider;function qe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Ge=_.createContext(qe()),Ve=()=>_.useContext(Ge);function $e(t,e){return typeof t=="function"?t(...e):!!t}function be(){}var ze=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},We=t=>{_.useEffect(()=>{t.clearReset()},[t])},Je=({result:t,errorResetBoundary:e,throwOnError:s,query:i})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&$e(s,[t.error,i]),Xe=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Ye=(t,e)=>t.isLoading&&t.isFetching&&!e,Ze=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ee=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function et(t,e,s){var E,o,Q,g,x;const i=Me(),l=Ke(),u=Ve(),n=i.defaultQueryOptions(t);(o=(E=i.getDefaultOptions().queries)==null?void 0:E._experimental_beforeQuery)==null||o.call(E,n),n._optimisticResults=l?"isRestoring":"optimistic",Xe(n),ze(n,u),We(u);const m=!i.getQueryCache().get(n.queryHash),[d]=_.useState(()=>new e(i,n)),b=d.getOptimisticResult(n);if(_.useSyncExternalStore(_.useCallback(S=>{const v=l?be:d.subscribe(Se.batchCalls(S));return d.updateResult(),v},[d,l]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),_.useEffect(()=>{d.setOptions(n,{listeners:!1})},[n,d]),Ze(n,b))throw Ee(n,d,u);if(Je({result:b,errorResetBoundary:u,throwOnError:n.throwOnError,query:i.getQueryCache().get(n.queryHash)}))throw b.error;if((g=(Q=i.getDefaultOptions().queries)==null?void 0:Q._experimental_afterQuery)==null||g.call(Q,n,b),n.experimental_prefetchInRender&&!Z&&Ye(b,l)){const S=m?Ee(n,d,u):(x=i.getQueryCache().get(n.queryHash))==null?void 0:x.promise;S==null||S.catch(be).finally(()=>{d.updateResult()})}return n.notifyOnChangeProps?b:d.trackResult(b)}function mt(t,e){return et(t,Le)}const tt=(t,e)=>t?!0:V(e)?!!e.harRettPåForeldrepengerINorge:!1,st=(t,e)=>t?V(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,rt=(t,e)=>{if(ve(t)||ke(t))return e||t.termindato},it=(t,e,s)=>s&&t?s:e||void 0,nt=(t,e,s)=>t&&s?s:e,at=(t,e,s,i,l)=>s||i?"ALENEOMSORG":t&&e||l?"BEGGE_RETT":"BARE_SØKER_RETT",Rt=(t,e,s,i,l,u)=>{const n=V(e)?e:void 0,m=X(s.rolle),d=De(m,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),b=Pe(!m,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),E=i!==void 0?i.startdatoFørsteStønadsperiode:void 0,o=Be(l,t,m,Ae(t),E),Q=nt(m,t.antallBarn,o==null?void 0:o.grunnlag.antallBarn),g=it(m,u==null?void 0:u.grunnlag.termindato,o==null?void 0:o.grunnlag.termindato),x=X(s.rolle),S=X(s.rolle),v=V(e)&&e.harRettPåForeldrepengerIEØS;return{rettighetstype:at(tt(x,e),st(x,e),b||!1,d||!1,v||!1),brukerrolle:S?"FAR":"MOR",antallBarn:Q.toString(),fødselsdato:ve(t)?t.fødselsdatoer[0]:void 0,termindato:rt(t,g),omsorgsovertakelseDato:Ue(t)||Ne(t)?t.adopsjonsdato:void 0,morHarUføretrygd:we(e,S),familieHendelseDatoNesteSak:E}},yt=(t,e)=>({queryKey:["ANNEN_PART_VEDTAK",t],queryFn:()=>he.post(".//rest/innsyn/v2/annenPartVedtak",{json:t}).json(),enabled:e}),bt=(t,e)=>({queryKey:["NESTE_SAK_ANNEN_PART_VEDTAK",t],queryFn:()=>he.post(".//rest/innsyn/v2/annenPartVedtak",{json:t}).json(),enabled:e}),Et=(t,e)=>({queryKey:["TILGJENGELIGE_STONADSKONTOER",t],queryFn:()=>he.post(".//rest/konto",{json:t}).json(),enabled:e});export{yt as a,nt as b,it as c,bt as d,Rt as g,be as n,$e as s,Et as t,mt as u};
