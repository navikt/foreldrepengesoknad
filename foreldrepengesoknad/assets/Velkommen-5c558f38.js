import{j as t}from"./jsx-runtime-1caa8f64.js";import{r as _}from"./index-1cdf6ce0.js";import{R as te,a as V,u as ae,F as re,C as ne}from"./ErrorSummaryHookForm-4cc65dc9.js";import{u as q,b as u,d as C,D as H,n as se,G as oe,B as le}from"./Tidsperioden-cabe27e7.js";import"./index-753920cd.js";import{l as de}from"./links-022380bf.js";import"./_baseToString-2517c4f7.js";import"./_createSet-019d3bf6.js";import{V as S,C as ie,H as h,A as me}from"./Step-09e54fbd.js";import{a as ue,S as I}from"./useFpNavigator-58a97db6.js";import{D as pe}from"./DinePlikter-0d70e1a3.js";import{b as Y,C as d}from"./FpDataContext-91c673b7.js";import{m as ke,o as ge,a as ce,b as fe}from"./eksisterendeSakUtils-6565c702.js";import{D as ve}from"./DinePersonopplysningerModal-fbed4bde.js";import{i as Se}from"./dateFormValidation-3538be13.js";import{V as k,g as he,s as je,a as Ee}from"./velkommenUtils-e304ed7e.js";import{c as Be,f as Ne,d as ye}from"./barnUtils-75796160.js";import{H as _e,B as K}from"./Link-1e7d9fc8.js";const Te=()=>{const a=Y();return{oppdaterSøknadIState:(e,o)=>{a(d.SØKERSITUASJON,e.søkersituasjon),a(d.OM_BARNET,e.barn),a(d.ANNEN_FORELDER,e.annenForelder),a(d.SØKER_DATA,e.søker),a(d.UTENLANDSOPPHOLD,e.informasjonOmUtenlandsopphold?{iNorgeNeste12Mnd:e.informasjonOmUtenlandsopphold.iNorgeNeste12Mnd,iNorgeSiste12Mnd:e.informasjonOmUtenlandsopphold.iNorgeSiste12Mnd}:void 0),a(d.UTENLANDSOPPHOLD_TIDLIGERE,e.informasjonOmUtenlandsopphold?{tidligereOpphold:e.informasjonOmUtenlandsopphold.tidligereOpphold}:void 0),a(d.UTENLANDSOPPHOLD_SENERE,e.informasjonOmUtenlandsopphold?{senereOpphold:e.informasjonOmUtenlandsopphold.senereOpphold}:void 0),a(d.PERIODE_MED_FORELDREPENGER,{dekningsgrad:e.dekningsgrad}),a(d.UTTAKSPLAN,e.uttaksplan),a(d.UTTAKSPLAN_METADATA,{ønskerJustertUttakVedFødsel:e.ønskerJustertUttakVedFødsel}),o&&a(d.EKSISTERENDE_SAK,o)}}};var T=(a=>(a.SØKNAD_GJELDER_NYTT_BARN="søknad_gjeder_nytt_barn",a))(T||{});const xe=(a,r)=>a.map(e=>{const o=e.sak!==void 0?$(e.sak.åpenBehandling===void 0,r):void 0,n=e.sak!==void 0?r.formatMessage({id:"velkommen.barnVelger.saksnummer"},{saksnummer:e.sak.saksnummer}):"";return t.jsx(V,{value:e.id,description:e.sak!==void 0?`${n}, ${o}`:n,children:t.jsx(u,{id:"velkommen.barnVelger.ufødtBarn",values:{antallBarnTekst:Be(e.antallBarn,r),termin:C(e.termindato).format(H),b:i=>t.jsx("b",{children:i})}})},e.id)}),$=(a,r)=>a?r.formatMessage({id:"velkommen.sak.status.ferdigBehandlet"}):r.formatMessage({id:"velkommen.sak.status.underBehandling"}),Fe=(a,r)=>a.map(e=>{const o=Ne(e.fornavn,e.fødselsdatoer,e.omsorgsovertagelse,e.alleBarnaLever,e.antallBarn,r),n=ye(e.fødselsdatoer),i=e.type===k.FØDT||e.type===k.IKKE_UTFYLT?n:C(e.omsorgsovertagelse).format(H),j=e.type===k.FØDT||e.type===k.IKKE_UTFYLT?r.formatMessage({id:"velkommen.barnVelger.født"}):r.formatMessage({id:"velkommen.barnVelger.adopsjon"}),g=e.sak!==void 0?r.formatMessage({id:"velkommen.barnVelger.saksnummer"},{saksnummer:e.sak.saksnummer}):"",c=e.sak!==void 0?$(e.sak.åpenBehandling===void 0,r):void 0;return t.jsx(V,{value:e.id,description:c?`${g}, ${c}`:g,children:t.jsx("b",{children:e.alleBarnaLever?`${o} ${j} ${i}`:o})},e.id)}),x=({selectableBarn:a})=>{const r=q();if(a.length===0)return null;const e=a.filter(i=>i.type===k.UFØDT),o=a.filter(i=>i.type!==k.UFØDT);let n=[];return o.length>0&&(n=n.concat(Fe(o,r))),e.length>0&&(n=n.concat(xe(e,r))),t.jsx(te,{name:"valgteBarn",label:t.jsx(u,{id:"velkommen.intro.harSaker.barnVelger.label"}),validate:[Se(r.formatMessage({id:"steg.footer.spørsmålMåBesvares"}))],children:n.concat(t.jsx(V,{value:"søknad_gjeder_nytt_barn",description:r.formatMessage({id:"velkommen.intro.harSaker.barnVelger.info"}),children:t.jsx(u,{id:"omBarnet.gjelderAnnetBarn",values:{b:i=>t.jsx("b",{children:i})}})},"søknad_gjeder_nytt_barn"))})};try{x.displayName="BarnVelger",x.__docgenInfo={description:"",displayName:"BarnVelger",props:{selectableBarn:{defaultValue:null,description:"",name:"selectableBarn",required:!0,type:{name:"ValgtBarn[]"}}}}}catch{}const F=({locale:a,saker:r,onChangeLocale:e,harGodkjentVilkår:o,søkerInfo:n,setHarGodkjentVilkår:i,setErEndringssøknad:j,setSøknadGjelderNyttBarn:g,mellomlagreSøknadOgNaviger:c})=>{const p=q(),J=ue(n.arbeidsforhold,c),[O,w]=_.useState(!1),z=Y(),{oppdaterSøknadIState:E}=Te(),[W,D]=_.useState(!1),B=_.useMemo(()=>he(r,n.søker.barn),[r,n.søker.barn]),A=[...B].sort(je),Q=l=>{if(l.harForståttRettigheterOgPlikter!==!0)return;w(!0);const s=l.valgteBarn===T.SØKNAD_GJELDER_NYTT_BARN?void 0:B.find(m=>m.id===l.valgteBarn),N=s!==void 0&&!!s.kanSøkeOmEndring;let f;s!==void 0&&(f=Ee(s,A),z(d.BARN_FRA_NESTE_SAK,f));const y=N&&s.sak!==void 0?r.find(m=>{var v;return m.saksnummer===((v=s.sak)==null?void 0:v.saksnummer)}):void 0,Z=f!==void 0?f.startdatoFørsteStønadsperiode:void 0,L=N&&y,U=s!==void 0&&s.sak!==void 0&&s.kanSøkeOmEndring===!1,ee=!L&&!U&&s!==void 0;let b=I.SØKERSITUASJON,G=!1;if(L){const m=ke(y,Z);b=I.UTTAKSPLAN;const v=ge(n.søker,m,p,y.annenPart,s);E(v,m)}else if(U){const m=ce(s,p,n.søker.barn);E(m)}else if(ee){const m=fe(s);E(m)}else G=!0;return i(l.harForståttRettigheterOgPlikter),j(N),g(G),J.goToNextStep(b)},R=ae({defaultValues:{harForståttRettigheterOgPlikter:o}}),M=R.watch("valgteBarn"),P=M===T.SØKNAD_GJELDER_NYTT_BARN?void 0:B.find(l=>l.id===M),X=P!==void 0&&P.kanSøkeOmEndring===!0?p.formatMessage({id:"velkommen.endreSøknad"}):p.formatMessage({id:"velkommen.begynnMedSøknad"});return t.jsx(re,{formMethods:R,onSubmit:Q,children:t.jsxs(S,{gap:"10",children:[t.jsx(se,{locale:a,availableLocales:["nb","nn"],toggle:e}),t.jsx(ie,{children:t.jsxs(S,{gap:"8",children:[t.jsx(h,{justify:"center",children:t.jsx(_e,{size:"xlarge",children:t.jsx(u,{id:"velkommen.tittel"})})}),t.jsx(oe,{poster:!0,children:t.jsxs(S,{gap:"2",children:[t.jsx(u,{id:"velkommen.guidepanel.del1"}),t.jsx(u,{id:"velkommen.guidepanel.del2",values:{a:l=>t.jsx("a",{className:"lenke",rel:"noopener noreferrer",href:de.foreldrepenger,children:l})}})]})}),t.jsx(x,{selectableBarn:A}),t.jsx(me,{variant:"info",children:t.jsx(u,{id:"velkommen.lagring.info"})}),t.jsx(ne,{name:"harForståttRettigheterOgPlikter",label:p.formatMessage({id:"velkommen.samtykke"}),validate:[l=>l!==!0?p.formatMessage({id:"valideringsfeil.velkommen.harForståttRettigheterOgPlikter.påkrevd"}):null],children:t.jsx(S,{gap:"5",children:t.jsxs(h,{gap:"1",children:[t.jsx(K,{children:t.jsx(u,{id:"velkommen.samtykkeIntro.del1"})}),t.jsx(pe,{})]})})}),t.jsx(h,{justify:"center",children:t.jsx(le,{type:"submit",variant:"primary",disabled:O,loading:O,children:X})}),t.jsx(h,{justify:"center",children:t.jsx(K,{children:t.jsx("a",{className:"lenke",href:"#",onClick:l=>{l.preventDefault(),D(!0)},children:t.jsx(u,{id:"velkommen.lesMerOmPersonopplysninger"})})})}),t.jsx(ve,{isOpen:W,onRequestClose:()=>D(!1)})]})})]})})},Je=F;try{F.displayName="Velkommen",F.__docgenInfo={description:"",displayName:"Velkommen",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string"}},onChangeLocale:{defaultValue:null,description:"",name:"onChangeLocale",required:!0,type:{name:"(locale: LocaleNo) => void"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'}]}},saker:{defaultValue:null,description:"",name:"saker",required:!0,type:{name:"Sak[]"}},fnr:{defaultValue:null,description:"",name:"fnr",required:!0,type:{name:"string"}},harGodkjentVilkår:{defaultValue:null,description:"",name:"harGodkjentVilkår",required:!0,type:{name:"boolean"}},søkerInfo:{defaultValue:null,description:"",name:"søkerInfo",required:!0,type:{name:"Søkerinfo"}},setHarGodkjentVilkår:{defaultValue:null,description:"",name:"setHarGodkjentVilkår",required:!0,type:{name:"(harGodkjentVilkår: boolean) => void"}},setErEndringssøknad:{defaultValue:null,description:"",name:"setErEndringssøknad",required:!0,type:{name:"(erEndringssøknad: boolean) => void"}},setSøknadGjelderNyttBarn:{defaultValue:null,description:"",name:"setSøknadGjelderNyttBarn",required:!0,type:{name:"(søknadGjelderNyttBarn: boolean) => void"}},mellomlagreSøknadOgNaviger:{defaultValue:null,description:"",name:"mellomlagreSøknadOgNaviger",required:!0,type:{name:"() => Promise<void>"}}}}}catch{}export{Je as V};
