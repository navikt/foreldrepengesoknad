{"version":3,"file":"TidligereUtenlandsoppholdSteg-869a0eab.js","sources":["../../src/app/steps/utenlandsoppholdTidligere/TidligereUtenlandsoppholdSteg.tsx"],"sourcesContent":["import { FormattedMessage, useIntl } from 'react-intl';\nimport { useNavigate } from 'react-router-dom';\nimport { Heading } from '@navikt/ds-react';\nimport { TidligereUtenlandsoppholdPanel } from '@navikt/fp-utenlandsopphold';\nimport { UtenlandsoppholdTidligere } from '@navikt/fp-types';\nimport { ContentWrapper } from '@navikt/fp-ui';\nimport actionCreator from 'app/context/action/actionCreator';\nimport useSøknad from 'app/utils/hooks/useSøknad';\nimport useAvbrytSøknad from 'app/utils/hooks/useAvbrytSøknad';\nimport useFortsettSøknadSenere from 'app/utils/hooks/useFortsettSøknadSenere';\nimport useSaveLoadedRoute from 'app/utils/hooks/useSaveLoadedRoute';\nimport SøknadRoutes from 'app/routes/routes';\nimport { ForeldrepengesøknadContextState } from 'app/context/ForeldrepengesøknadContextConfig';\nimport { storeAppState } from 'app/utils/submitUtils';\nimport { useOnValidSubmitNew } from 'app/utils/hooks/useOnValidSubmit';\nimport createConfig, { getPreviousStepHref } from '../stepsConfig';\n\nconst TidligereUtenlandsoppholdSteg: React.FunctionComponent = () => {\n    const intl = useIntl();\n    const navigate = useNavigate();\n    const onAvbrytSøknad = useAvbrytSøknad();\n    const onFortsettSøknadSenere = useFortsettSøknadSenere();\n\n    useSaveLoadedRoute(SøknadRoutes.TIDLIGERE_UTENLANDSOPPHOLD);\n\n    const { informasjonOmUtenlandsopphold } = useSøknad();\n    const lagredeTidligereUtenlandsopphold =\n        informasjonOmUtenlandsopphold.tidligereOpphold.length > 0\n            ? {\n                  utenlandsoppholdSiste12Mnd: informasjonOmUtenlandsopphold.tidligereOpphold.map((so) => ({\n                      fom: so.tidsperiode.fom,\n                      tom: so.tidsperiode.tom,\n                      landkode: so.land,\n                  })),\n              }\n            : undefined;\n\n    const onValidSubmitHandler = (values: UtenlandsoppholdTidligere) => {\n        const tidligereUtenlandsopphold = {\n            tidligereOpphold: values.utenlandsoppholdSiste12Mnd.map((un) => ({\n                land: un.landkode,\n                tidsperiode: {\n                    fom: un.fom,\n                    tom: un.tom,\n                },\n            })),\n        };\n        return [actionCreator.setInformasjonOmUtenlandsoppholdTidligere(tidligereUtenlandsopphold)];\n    };\n\n    const { handleSubmit } = useOnValidSubmitNew(\n        onValidSubmitHandler,\n        () => {\n            if (informasjonOmUtenlandsopphold.iNorgeNeste12Mnd) {\n                return SøknadRoutes.INNTEKTSINFORMASJON;\n            }\n            return SøknadRoutes.SENERE_UTENLANDSOPPHOLD;\n        },\n        (state: ForeldrepengesøknadContextState) => storeAppState(state),\n    );\n\n    const goToPreviousStep = () => {\n        navigate(getPreviousStepHref('utenlandsoppholdTidligere'));\n    };\n    const saveOnPrevious = () => {\n        // TODO Lagre uvalidert data i framtida\n    };\n\n    const stepConfig = createConfig(intl, false).map((config) => ({\n        ...config,\n        isSelected: config.id === 'utenlandsoppholdTidligere',\n    }));\n\n    return (\n        <ContentWrapper>\n            <Heading size=\"large\">\n                <FormattedMessage id=\"søknad.pageheading\" />\n            </Heading>\n            <TidligereUtenlandsoppholdPanel\n                tidligereUtenlandsopphold={lagredeTidligereUtenlandsopphold}\n                saveOnNext={handleSubmit}\n                saveOnPrevious={saveOnPrevious}\n                cancelApplication={onAvbrytSøknad}\n                onContinueLater={onFortsettSøknadSenere}\n                goToPreviousStep={goToPreviousStep}\n                stepConfig={stepConfig}\n                supportsTempSaving\n            />\n        </ContentWrapper>\n    );\n};\n\nexport default TidligereUtenlandsoppholdSteg;\n"],"names":["TidligereUtenlandsoppholdSteg","intl","useIntl","navigate","useNavigate","onAvbrytSøknad","useAvbrytSøknad","onFortsettSøknadSenere","useFortsettSøknadSenere","useSaveLoadedRoute","SøknadRoutes","informasjonOmUtenlandsopphold","useSøknad","lagredeTidligereUtenlandsopphold","so","onValidSubmitHandler","values","tidligereUtenlandsopphold","un","actionCreator","handleSubmit","useOnValidSubmitNew","state","storeAppState","goToPreviousStep","getPreviousStepHref","saveOnPrevious","stepConfig","createConfig","config","jsxs","ContentWrapper","jsx","Heading","FormattedMessage","TidligereUtenlandsoppholdPanel","TidligereUtenlandsoppholdSteg$1"],"mappings":"ghBAiBA,MAAAA,EAAA,IAAA,CACI,MAAAC,EAAAC,IACAC,EAAAC,IACAC,EAAAC,IACAC,EAAAC,IAEAC,EAAAC,EAAA,0BAAA,EAEA,KAAA,CAAA,8BAAAC,GAAAC,IACAC,EAAAF,EAAA,iBAAA,OAAA,EAAA,CAEU,2BAAAA,EAAA,iBAAA,IAAAG,IAAA,CAC4F,IAAAA,EAAA,YAAA,IAChE,IAAAA,EAAA,YAAA,IACA,SAAAA,EAAA,IACP,EAAA,CACf,EAAA,OAIhBC,EAAAC,GAAA,CACI,MAAAC,EAAA,CAAkC,iBAAAD,EAAA,2BAAA,IAAAE,IAAA,CACmC,KAAAA,EAAA,SACpD,YAAA,CACI,IAAAA,EAAA,IACD,IAAAA,EAAA,GACA,CACZ,EAAA,CACF,EAEN,MAAA,CAAAC,EAAA,0CAAAF,CAAA,CAAA,CAA0F,EAG9F,CAAA,aAAAG,CAAA,EAAAC,EAAyBN,EACrB,IAEIJ,EAAA,iBACID,EAAA,oBAEJA,EAAA,wBACJY,GAAAC,EAAAD,CAAA,CAC+D,EAGnEE,EAAA,IAAA,CACIrB,EAAAsB,EAAA,2BAAA,CAAA,CAAyD,EAE7DC,EAAA,IAAA,CAA6B,EAI7BC,EAAAC,EAAA3B,EAAA,EAAA,EAAA,IAAA4B,IAAA,CAA8D,GAAAA,EACvD,WAAAA,EAAA,KAAA,2BACuB,EAAA,EAG9B,OAAAC,EAAA,KAAAC,EAAA,CAAA,SAAA,CAEQC,EAAAA,IAAAC,EAAA,CAAA,KAAA,QAAA,SAAAD,MAAAE,EAAA,CAAA,GAAA,oBAAA,CAAA,CAAA,CAAA,EAEAF,EAAA,IACAG,EAAC,CAAA,0BAAAtB,EAC8B,WAAAO,EACf,eAAAM,EACZ,kBAAArB,EACmB,gBAAAE,EACF,iBAAAiB,EACjB,WAAAG,EACA,mBAAA,EACkB,CAAA,CACtB,CAAA,CAAA,CAGZ,EAEAS,EAAApC"}