import{i as h,U as g,d as k,T as F,aH as B,a6 as X,g as p,f as $,a7 as te,aU as de,I as _,a9 as T,v as J,Q as Z}from"./dates-c7d75be6.js";import"./jsx-runtime-1caa8f64.js";import"./index-1cdf6ce0.js";import{A as W}from"./Arbeidsform-a1ff9760.js";import{s as ae,v as ye,q as Ge,B as V}from"./barnUtils-397fbc9c.js";import{D as x}from"./Dekningsgrad-fced8842.js";import{O}from"./uttaksPlanStatus-4d798447.js";import{b as j,f as re,h as Ve,e as ge,p as Ke,P as H,k as P,S as A,c as je,i as He,q as ve,a as b,O as ee,m as Y,U as D,M as be}from"./Perioden-b1f81fc9.js";import"./index-753920cd.js";import"./_baseToString-2517c4f7.js";import"./_createSet-019d3bf6.js";import{c as we}from"./velkommenUtils-5f6f1de8.js";import{g as Fe,s as oe}from"./dateUtils-3df5aed4.js";import{P as U,s as z}from"./Periodene-3a8fbd9d.js";var ie=(e=>(e.ÅTTI_PROSENT="ÅTTI",e.HUNDRE_PROSENT="HUNDRE",e))(ie||{}),N=(e=>(e.ADOPSJON="ADPSJN",e.OMSORGSOVERTAKELSE="OMSRGO",e.FØDSEL="FODSL",e.TERM="TERM",e))(N||{}),L=(e=>(e.UttakFellesperiodeAnnenForelder="FELLESPERIODE_ANNEN_FORELDER",e.UttakFedrekvoteAnnenForelder="FEDREKVOTE_ANNEN_FORELDER",e.UttakMødrekvoteAnnenForelder="MØDREKVOTE_ANNEN_FORELDER",e.UttakForeldrepengerAnnenForelder="FORELDREPENGER_ANNEN_FORELDER",e.Ingen="INGEN",e))(L||{}),Ae=(e=>(e.fridag="fridag",e.avslåttPeriode="avslåttPeriode",e))(Ae||{}),w=(e=>(e.AVSLAG_FRATREKK_PLEIEPENGER="AVSLAG_FRATREKK_PLEIEPENGER",e.AVSLAG_UTSETTELSE_TILBAKE_I_TID="AVSLAG_UTSETTELSE_TILBAKE_I_TID",e.INNVILGET_UTTAK_AVSLÅTT_GRADERING_TILBAKE_I_TID="INNVILGET_UTTAK_AVSLÅTT_GRADERING_TILBAKE_I_TID",e.AVSLAG_HULL_MELLOM_FORELDRENES_PERIODER="AVSLAG_HULL_MELLOM_FORELDRENES_PERIODER",e.ANNET="ANNET",e))(w||{}),R=(e=>(e.Ferie="LOVBESTEMT_FERIE",e.Arbeid="ARBEID",e.Sykdom="SØKER_SYKDOM",e.InstitusjonSøker="SØKER_INNLAGT",e.InstitusjonBarnet="BARN_INNLAGT",e.HvØvelse="HV_ØVELSE",e.NavTiltak="NAV_TILTAK",e.Fri="FRI",e))(R||{}),ne=(e=>(e.ORDINÆRT_ARBEID="ORDINÆRT_ARBEID",e.SELVSTENDIG_NÆRINGSDRIVENDE="SELVSTENDIG_NÆRINGSDRIVENDE",e.FRILANS="FRILANS",e.ANNET="ANNET",e))(ne||{}),G=(e=>(e.BARE_SØKER_RETT="BARE_SØKER_RETT",e.ALENEOMSORG="ALENEOMSORG",e.BEGGE_RETT="BEGGE_RETT",e))(G||{});const pe=(e,t,r)=>{if(r!==void 0)return N.ADOPSJON;if(e!==void 0)return N.FØDSEL;if(t!==void 0)return N.TERM;throw new Error("Fødselsdato/ termindato/ omsorgsovertakelsedato mangler")},Nt=(e,t,r)=>e?h(r,"adopsjon"):t?h(r,"fødsel"):h(r,"termin"),Be=(e,t,r,o)=>{if(e.length<=1)return e;const n=[];let i={...e[0]};return e.forEach((d,l)=>{if(l!==0){if(i===void 0){i=d;return}if(H(i).erLik(d,!1,!0)&&H(i).erSammenhengende(d)){if(o&&j(d)&&d.ønskerSamtidigUttak&&j(i)&&i.ønskerSamtidigUttak){const f=U(o).finnOverlappendePerioder(i),u=U(o).finnOverlappendePerioder(d);if(u.length===0&&f.length>0||u.length>0&&f.length===0){n.push(i),i=d;return}}if(k(i.tidsperiode.tom).isBefore(t,"day")&&k(d.tidsperiode.tom).isSameOrAfter(g(t).denneEllerNeste())||r!==void 0&&k(i.tidsperiode.tom).isBefore(r,"day")&&k(d.tidsperiode.fom).isSameOrAfter(g(r).denneEllerNeste(),"day")){n.push(i),i=d;return}const s={fom:i.tidsperiode.fom,tom:d.tidsperiode.tom};i.tidsperiode={...s};return}else n.push(i);i=d}}),n.push(i),n},q=(e,t)=>t!==void 0&&te(e.tidsperiode,t)?Te(e,t):[e],Q=(e,t,r,o,n,i,d,l=Ae.fridag)=>{if(B(r)){const u=g(r).denneEllerNeste(),a=g(u).leggTil(30),m=F(e).erInnenforFørsteSeksUker(r),c=k(e.fom).isBefore(a,"day")&&!o&&(n&&B(r)||i&&X(r));if(t&&!c)return q(K(e,l),d);if(k(e.fom).isBefore(r,"day"))return q(y(e),d);if(m&&!o){if(k(e.tom).isBefore(a,"day"))return n&&B(r)||i&&X(r)?[y(e)]:[K(e,l)];const E=F({fom:e.fom,tom:a}).getAntallUttaksdager()-2,v=F(e).getAntallUttaksdager()-E,S={fom:e.fom,tom:g(a).leggTil(-1)},I={fom:a,tom:g(a).leggTil(v-2)};if(n&&B(r)||i&&X(r)){if(i&&!n)return[y(e)];const Le=y(S),Me=K(I,l);return[Le,Me]}const C=K(S,l),Ne=y(I);return[C,Ne]}return q(y(e),d)}return q(K(e,l),d)},K=(e,t)=>({id:p(),type:P.Hull,tidsperiode:e,årsak:t}),y=e=>({id:p(),type:P.PeriodeUtenUttak,tidsperiode:e}),le=(e,t)=>{const r={fom:g(e.tom).neste(),tom:g(t.fom).forrige()},o=F(r).getAntallUttaksdager();if($(r)&&o>0)return r},Lt=e=>e.reduce((t,r,o)=>o===0&&re(r)?t:o===e.length-1?(ge(r)||re(r)||t.push(r),t):(t.push(r),t),[]),fe=(e,t,r,o,n,i,d)=>e.length===0?e:e.reduce((s,f,u)=>{if(u===0&&i){const E=g(r).denneEllerNeste();if(k(E).isBefore(f.tidsperiode.fom)){const v={fom:E,tom:g(f.tidsperiode.fom).forrige()};F(v).getAntallUttaksdager()>0&&s.push(...Q(v,t,r,o,n,i,d))}}if(s.push(f),u===e.length-1)return s;const a=e[u+1],m={fom:g(f.tidsperiode.tom).neste(),tom:g(a.tidsperiode.fom).forrige()};return k(m.tom).isBefore(m.fom,"day")||!i&&k(m.tom).isBefore(r,"day")||F(m).getAntallUttaksdager()>0&&s.push(...Q(m,t,r,o,n,i,d)),s},[]),me=(e,t)=>{const r=t.filter(n=>F(e.tidsperiode).inneholderDato(n.dato)),o=[];return r.length===2?[e]:(r.forEach((n,i)=>{if(i===0){o.push({...e,tidsperiode:{fom:n.dato,tom:void 0}});return}o[i-1].tidsperiode.tom=n.erFom?g(n.dato).forrige():n.dato,i<r.length-1&&o.push({...e,id:p(),tidsperiode:{fom:n.erFom?n.dato:g(n.dato).neste(),tom:void 0}})}),o.filter(n=>$(n.tidsperiode)))},Je=(e,t)=>{const r=e.filter(s=>$(s.tidsperiode)).reduce((s,f)=>(s.push({dato:f.tidsperiode.fom,erFom:!0}),s.push({dato:f.tidsperiode.tom,erFom:!1}),s),[]),o=t.reduce((s,f)=>(s.push({dato:f.tidsperiode.fom,erFom:!0}),s.push({dato:f.tidsperiode.tom,erFom:!1}),s),[]),i=r.concat(o).sort((s,f)=>{if(s.dato.getTime()-f.dato.getTime()===0){if(!s.erFom)return 1;if(!f.erFom)return-1}return s.dato.getTime()-f.dato.getTime()}).filter((s,f,u)=>u.findIndex(a=>a.dato.getTime()===s.dato.getTime()&&a.erFom===s.erFom)===f),d=[],l=[];return e.forEach(s=>{const f=me(s,i);d.push(...f)}),t.forEach(s=>{const f=me(s,i);l.push(...f)}),{normaliserteEgnePerioder:d,normaliserteAnnenPartsPerioder:l}},qe=(e,t,r,o,n=!1)=>{if(t.length===0)return e;if(e.length===0)return t;const{normaliserteEgnePerioder:i,normaliserteAnnenPartsPerioder:d}=Je(e,t),l=i.reduce((m,c)=>{const E=U(d).finnOverlappendePerioder(c);if(E.length===0)return j(c)&&c.ønskerSamtidigUttak&&n?(m.push({...c,ønskerSamtidigUttak:!1}),m):(m.push(c),m);if(re(c)||Ve(c)||ge(c)){const v=E[0];return m.push({...v,visPeriodeIPlan:!0}),m}if(j(c)&&c.ønskerSamtidigUttak){const v=E[0];return m.push(c),Ke(v)||m.push({...v,visPeriodeIPlan:!1,ønskerSamtidigUttak:!0}),m}else return m.push(c),m},[]);l.sort(z);const s=e[0].tidsperiode.fom,f=d.filter(m=>k(m.tidsperiode.tom).isBefore(s,"day")),u=e[e.length-1].tidsperiode.tom,a=d.filter(m=>k(m.tidsperiode.fom).isAfter(u,"day"));return Be([...f,...l,...a],r,o,t)},Ye=(e,t)=>{const r=F(e.tidsperiode).getAntallUttaksdager(),o={...e,tidsperiode:{fom:e.tidsperiode.fom,tom:g(t.tidsperiode.fom).forrige()}},n=F(o.tidsperiode).getAntallUttaksdager(),i=r-n,d=g(t.tidsperiode.tom).neste();if(ve(e)){const l={...e,id:p(),tidsperiode:{fom:t.tidsperiode.fom,tom:e.tidsperiode.tom}};return[o,t,l]}else{const l={...e,id:p(),tidsperiode:{fom:d,tom:g(d).leggTil(i-1)}};return[o,t,l]}},Te=(e,t)=>{const r={...e,tidsperiode:{fom:e.tidsperiode.fom,tom:g(t).forrige()}},o={...e,id:p(),tidsperiode:{fom:g(r.tidsperiode.tom).neste(),tom:e.tidsperiode.tom}};return[r,o]},xe=(e,t)=>{const r={...e,konto:e.konto==A.Foreldrepenger?A.AktivitetsfriKvote:e.konto,morsAktivitetIPerioden:e.konto==A.Foreldrepenger?void 0:e.morsAktivitetIPerioden,erMorForSyk:e.konto==A.Foreldrepenger?void 0:e.erMorForSyk,tidsperiode:{fom:e.tidsperiode.fom,tom:g(t).forrige()}},o={...e,id:p(),tidsperiode:{fom:g(r.tidsperiode.tom).neste(),tom:e.tidsperiode.tom}};return[r,o]},Qe=(e,t)=>{if(U([e]).finnOverlappendePerioder(t).length>0){const r=[k(e.tidsperiode.fom),k(e.tidsperiode.tom),k(t.tidsperiode.fom),k(t.tidsperiode.tom)],o=k.min(r),n=k.max(r),i=r.filter(d=>d!==o&&d!==n);return F({fom:k.min(i).toDate(),tom:k.max(i).toDate()}).getAntallUttaksdager()}return 0},Mt=({perioder:e,nyPeriode:t,familiehendelsesdato:r,harAktivitetskravIPeriodeUtenUttak:o,erAdopsjon:n,bareFarHarRett:i,erFarEllerMedmor:d,førsteUttaksdagNesteBarnsSak:l})=>{if(e.length===0)return[t];const s=t.tidsperiode.fom,f=t.tidsperiode.tom;if(k(s).isBefore(r,"day")&&k(f).isSameOrAfter(r,"day"))return[...e];const u=e.find(a=>F(a.tidsperiode).inneholderDato(s));if(u){if(je(u)||He(u))return[...e];const a=U(e).finnAlleForegåendePerioder(u),m=U(e).finnAllePåfølgendePerioder(u),c=F(t.tidsperiode).getAntallUttaksdager();if(k(u.tidsperiode.fom).isSame(s))return[...a,t,...U([u,...m]).forskyvPerioder(c)];const E=Ye(u,t);return ve(u)?[...a,E[0],E[1],...U([E[2],...m]).forskyvPerioder(c)]:[...a,...E,...U(m).forskyvPerioder(c)]}else{const a=e[0],m=e[e.length-1],c=k(t.tidsperiode.fom),E=k(t.tidsperiode.tom);if(c.isBefore(a.tidsperiode.fom,"day")){const v=le(t.tidsperiode,a.tidsperiode);if(E.isSameOrAfter(a.tidsperiode.fom,"day")){if(c.isBefore(r,"day"))return[...e];const S=Qe(a,t);return[t,...U(e).forskyvPerioder(S)]}return v?[t,...Q(v,o,r,n,i,d,l),...e]:[t,...e]}else{const v=le(m.tidsperiode,t.tidsperiode);return v?[...e,...Q(v,o,r,n,i,d,l),t]:[...e,t].sort(z)}}},ue=e=>H(e).getAntallUttaksdager()>0,$e=e=>$(e.tidsperiode),ze=(e,t,r)=>{if(e.length<=1)return e;const o=[],n=e.filter(s=>b(s)),d=[...e.filter(s=>!b(s)),...n];let l={...d[0]};return d.forEach((s,f)=>{if(f!==0){if(l===void 0){l=s;return}if(H(l).erLik(s,!1,!0)&&H(l).erSammenhengende(s)&&!k(s.tidsperiode.fom).isSame(t,"day")&&!(r!==void 0&&k(s.tidsperiode.fom).isSame(r,"day"))){l.tidsperiode.tom=s.tidsperiode.tom;return}else o.push(l);l=s}}),o.push(l),o.sort(z)},Ce=e=>{const{fom:t,tom:r}=e.tidsperiode,o=de(t),n=de(r);return o&&n?e:!o&&!n?{...e,tidsperiode:{fom:g(t).neste(),tom:g(r).forrige()}}:!o&&n?{...e,tidsperiode:{fom:g(t).neste(),tom:r}}:{...e,tidsperiode:{fom:t,tom:g(r).forrige()}}},M=(e,t)=>e.gjelderAnnenPart?t?J.mor:J.farMedmor:t?J.farMedmor:J.mor,Se=e=>{switch(e){case R.Arbeid:return D.Arbeid;case R.Ferie:return D.Ferie;case R.InstitusjonBarnet:return D.InstitusjonBarnet;case R.InstitusjonSøker:return D.InstitusjonSøker;case R.Sykdom:return D.Sykdom;case R.HvØvelse:return D.HvØvelse;case R.NavTiltak:return D.NavTiltak;case R.Fri:return D.Fri;default:return}},Xe=e=>{switch(e.kontoType){case A.Fedrekvote:return O.UttakFedrekvoteAnnenForelder;case A.Fellesperiode:return O.UttakFellesperiodeAnnenForelder;case A.Mødrekvote:return O.UttakMødrekvoteAnnenForelder;case A.Foreldrepenger:return O.UttakForeldrepengerAnnenForelder;case A.ForeldrepengerFørFødsel:return O.ForeldrepengerFørFødsel;default:return}},Pe=(e,t,r)=>{if(e)return e.toString();if(t)return r?(100-r).toString():"100"},Ze=e=>e?A.AktivitetsfriKvote:A.Foreldrepenger,We=(e,t,r,o)=>{if(e&&!t.flerbarnsdager&&!t.samtidigUttak&&k(t.periode.fom).isBefore(k(r).add(6,"weeks"),"day")&&o!==A.AktivitetsfriKvote&&t.morsAktivitet!==be.Uføre)return!0},et=(e,t,r)=>{var S;const o=e.gradering!==void 0&&e.resultat.innvilget,n=T(e.periode),i=t.søkerErFarEllerMedmor&&!t.morHarRett&&!t.farMedmorErAleneOmOmsorg&&!t.harAnnenForelderTilsvarendeRettEØS,d=r!==void 0?r.find(I=>(F(T(I.periode)).erLik(n)||F(T(I.periode)).overlapper(n))&&I.guid!==e.guid):void 0;let l;d&&(l=d.samtidigUttak);const s=Pe(e.samtidigUttak,l,(S=e.gradering)==null?void 0:S.arbeidstidprosent),f=Re(e),{termindato:u,fødselsdato:a,omsorgsovertakelsesdato:m}=t,c=Fe(u,a,m),E=i?Ze(e.resultat.trekkerMinsterett):e.kontoType;return{id:p(),type:P.Uttak,konto:E,tidsperiode:n,forelder:M(e,t.søkerErFarEllerMedmor),ønskerSamtidigUttak:e.samtidigUttak!==void 0,gradert:o,samtidigUttakProsent:s,ønskerFlerbarnsdager:t.antallBarn>1?e.flerbarnsdager:void 0,stillingsprosent:o?e.gradering.arbeidstidprosent.toString():void 0,arbeidsformer:o?[at(e.gradering.aktivitet.type)]:void 0,orgnumre:o&&e.gradering.aktivitet.arbeidsgiver!==void 0?[e.gradering.aktivitet.arbeidsgiver.id]:void 0,morsAktivitetIPerioden:e.morsAktivitet,erMorForSyk:We(t.søkerErFarEllerMedmor,e,c,E),angittAvAnnenPart:e.angittAvAnnenPart,opprinneligSøkt:f}},tt=(e,t)=>({id:p(),type:P.Utsettelse,årsak:Se(e.utsettelseÅrsak),tidsperiode:T(e.periode),forelder:M(e,t),erArbeidstaker:!1,morsAktivitetIPerioden:e.morsAktivitet}),Re=e=>{if(e.resultat.årsak===w.AVSLAG_UTSETTELSE_TILBAKE_I_TID){if(e.utsettelseÅrsak===R.Ferie)return ee.Ferie;if(e.utsettelseÅrsak===R.Arbeid)return ee.Arbeid}if(e.resultat.årsak===w.INNVILGET_UTTAK_AVSLÅTT_GRADERING_TILBAKE_I_TID)return ee.Gradering},rt=(e,t)=>{const r=Re(e);return{id:p(),type:P.Info,infotype:Y.avslåttPeriode,tidsperiode:T(e.periode),avslåttPeriodeType:e.utsettelseÅrsak!==void 0?P.Utsettelse:P.Uttak,kontoType:e.kontoType,forelder:M(e,t),overskrives:!0,visPeriodeIPlan:!0,kanSlettes:e.resultat.årsak!==w.AVSLAG_FRATREKK_PLEIEPENGER,opprinneligSøkt:r}},ot=(e,t,r,o)=>{var u;const n=T(e.periode);if(e.utsettelseÅrsak!==void 0&&e.resultat.innvilget===!0)return{type:P.Info,infotype:Y.utsettelseAnnenPart,id:p(),årsak:Se(e.utsettelseÅrsak),tidsperiode:n,forelder:M(e,t),overskrives:!0,visPeriodeIPlan:!0};const i=o!==void 0&&!o.some(a=>(F(T(a.periode)).erLik(n)||F(T(a.periode)).overlapper(n))&&a.guid!==e.guid),d=Xe(e),l=o!==void 0?o.find(a=>(F(T(a.periode)).erLik(n)||F(T(a.periode)).overlapper(n))&&a.guid!==e.guid):void 0;let s;l&&(s=l.samtidigUttak);const f=Pe(e.samtidigUttak,s,(u=e.gradering)==null?void 0:u.arbeidstidprosent);return se(e,r)?{type:P.Info,infotype:Y.avslåttPeriode,id:p(),tidsperiode:n,forelder:M(e,t),overskrives:!0,visPeriodeIPlan:i,kontoType:e.kontoType,avslåttPeriodeType:P.Uttak,kanSlettes:!1}:{type:P.Info,infotype:Y.uttakAnnenPart,id:p(),årsak:d,tidsperiode:n,forelder:M(e,t),overskrives:!0,gradert:e.gradering!==void 0,ønskerSamtidigUttak:f!==void 0,samtidigUttakProsent:f,stillingsprosent:e.gradering!==void 0?e.gradering.arbeidstidprosent.toString():void 0,visPeriodeIPlan:i}},nt=(e,t)=>({id:p(),forelder:M(e,t),konto:e.kontoType,tidsperiode:T(e.periode),type:P.Overføring,årsak:e.overføringÅrsak}),it=(e,t,r)=>{const o=r.filter(n=>!se(n,t.termindato));return e.gjelderAnnenPart?ot(e,t.søkerErFarEllerMedmor,t.termindato,o):e.resultat.innvilget?e.utsettelseÅrsak!==void 0?tt(e,t.søkerErFarEllerMedmor):e.overføringÅrsak!==void 0?nt(e,t.søkerErFarEllerMedmor):et(e,t,o):rt(e,t.søkerErFarEllerMedmor)},se=(e,t)=>t&&e.gjelderAnnenPart&&!e.resultat.innvilget&&e.resultat.trekkerDager&&k(e.periode.tom).isBefore(k(_(t)),"d")&&e.kontoType!==A.Fedrekvote,st=(e,t)=>e.resultat.innvilget?!0:e.gjelderAnnenPart?!!se(e,t):e.resultat.årsak!==w.AVSLAG_HULL_MELLOM_FORELDRENES_PERIODER&&e.resultat.trekkerDager===!0,dt=(e,t,r)=>{const o=[];return e.forEach(n=>{te(n.tidsperiode,t)&&j(n)?xe(n,t).forEach(d=>o.push(d)):r!==void 0&&te(n.tidsperiode,r)?Te(n,r).forEach(d=>o.push(d)):o.push(n)}),o},Ue=(e,t,r)=>{const o=e.filter(E=>st(E,t.termindato)),n=o.map(E=>it(E,t,o)),i=new Date(t.familiehendelseDato),d=dt(n,i,r),l=ze([...d].sort(z).filter(ue).map(Ce).filter($e).filter(ue),i,r),s=!t.morHarRett&&t.farMedmorHarRett&&!t.harAnnenForelderTilsvarendeRettEØS,f=t.familiehendelseType===N.ADOPSJON,u=l.filter(E=>!b(E)),a=l.filter(E=>b(E)),m=!t.erDeltUttak&&s&&!t.farMedmorErAleneOmOmsorg,c=fe(u,m,i,f,s,t.søkerErFarEllerMedmor,r);return fe(qe(c,a,i,r),m,i,f,s,t.søkerErFarEllerMedmor,r)},at=e=>{switch(e){case ne.SELVSTENDIG_NÆRINGSDRIVENDE:return W.selvstendignæringsdrivende;case ne.FRILANS:return W.frilans;default:return W.arbeidstaker}},ce=e=>{switch(e){case L.UttakFedrekvoteAnnenForelder:return A.Fedrekvote;case L.UttakFellesperiodeAnnenForelder:return A.Fellesperiode;case L.UttakMødrekvoteAnnenForelder:return A.Mødrekvote;default:return}},lt=e=>{switch(e){case L.UttakFedrekvoteAnnenForelder:return O.UttakFedrekvoteAnnenForelder;case L.UttakFellesperiodeAnnenForelder:return O.UttakFellesperiodeAnnenForelder;case L.UttakMødrekvoteAnnenForelder:return O.UttakMødrekvoteAnnenForelder;default:return}},Ie=(e,t)=>{const{oppholdÅrsak:r}=e,o={guid:p(),periode:{fom:e.fom,tom:e.tom},gjelderAnnenPart:t,resultat:e.resultat,kontoType:e.kontoType,flerbarnsdager:e.flerbarnsdager,gradering:e.gradering,utsettelseÅrsak:e.utsettelseÅrsak,overføringÅrsak:e.overføringÅrsak,samtidigUttak:e.samtidigUttak,morsAktivitet:e.morsAktivitet,oppholdÅrsak:lt(e.oppholdÅrsak)};return r!==void 0&&t===!1&&(o.gjelderAnnenPart=!0,o.kontoType=ce(r)),r!==void 0&&t&&(o.gjelderAnnenPart=!1,o.angittAvAnnenPart=!0,o.kontoType=ce(r)),o},Ee=e=>e.resultat.innvilget,De=(e,t,r)=>{const o=r.filter(i=>e.guid!==i.guid&&F(T(e.periode)).erLik(T(i.periode)));if(o.length===0)return!0;const n=o.filter(Ee);return!(Ee(e)===!1&&n.length>0)},yt=e=>{if(!(e===void 0||e===""||Object.keys(e).length===0||e.perioder.length===0))return _(e.perioder[0].fom)},Gt=(e,t,r,o,n)=>{if(e==null)return;const i=!0,d=e.perioder.map(m=>Ie(m,i)).filter(De);let l;e.termindato!==void 0?l=e.termindato:(ae(t)||ye(t))&&t.termindato!==void 0&&(l=Z(t.termindato));const s=ae(t)?Z(t.fødselsdatoer[0]):void 0,f=Ge(t)?Z(t.adopsjonsdato):void 0,u={dekningsgrad:e.dekningsgrad===ie.HUNDRE_PROSENT?x.HUNDRE_PROSENT:x.ÅTTI_PROSENT,antallBarn:e.antallBarn?e.antallBarn:t.antallBarn,morErAleneOmOmsorg:!1,morErUfør:!1,morHarRett:!0,farMedmorErAleneOmOmsorg:!1,farMedmorHarRett:!0,søkerErFarEllerMedmor:r,termindato:l,fødselsdato:s,omsorgsovertakelsesdato:f,erDeltUttak:!0,erBarnetFødt:s!==void 0,familiehendelseDato:o,familiehendelseType:pe(s,l,f),harAnnenForelderTilsvarendeRettEØS:!1,ønskerJustertUttakVedFødsel:void 0,barn:[]},a=Ue(d,u,n);return{saksnummer:"",erAnnenPartsSak:i,grunnlag:u,saksperioder:d,uttaksplan:a.filter(m=>b(m))}},ft=(e,t)=>{if(e==null)return;const r=!1,{dekningsgrad:o,familiehendelse:{fødselsdato:n,termindato:i,omsorgsovertakelse:d,antallBarn:l},harAnnenForelderTilsvarendeRettEØS:s,morUføretrygd:f,rettighetType:u,sakTilhørerMor:a,ønskerJustertUttakVedFødsel:m}=e,c=e.gjeldendeVedtak?e.gjeldendeVedtak.perioder:[],E=!a,v={dekningsgrad:o===ie.HUNDRE_PROSENT?x.HUNDRE_PROSENT:x.ÅTTI_PROSENT,antallBarn:l,morErAleneOmOmsorg:a&&u===G.ALENEOMSORG,morErUfør:f,morHarRett:a||u===G.BEGGE_RETT,farMedmorErAleneOmOmsorg:!a&&u===G.ALENEOMSORG,farMedmorHarRett:!a||u===G.BEGGE_RETT,søkerErFarEllerMedmor:E,termindato:i,fødselsdato:n,omsorgsovertakelsesdato:d,erDeltUttak:u===G.BEGGE_RETT,erBarnetFødt:n!==void 0,familiehendelseDato:Fe(i,n,d),familiehendelseType:pe(n,i,d),ønskerJustertUttakVedFødsel:n===void 0?m:void 0,harAnnenForelderTilsvarendeRettEØS:s},S=c.map(C=>Ie(C,r)).filter(De),I=Ue(S,v,t);return{saksnummer:e.saksnummer,erAnnenPartsSak:r,grunnlag:v,saksperioder:S,uttaksplan:I}},Oe=e=>e===N.TERM||e===N.FØDSEL?"fødsel":"adopsjon",mt=(e,t)=>({erAleneOmOmsorg:t?e.farMedmorErAleneOmOmsorg:e.morErAleneOmOmsorg}),ut=(e,t,r)=>{const{søkerErFarEllerMedmor:o}=r,n=e.kjønn==="K";switch(t){case"fødsel":case"adopsjon":return n?o?"medmor":"mor":"far";default:return}},ke=(e,t)=>e&&e.fødselsdatoer?oe(e.fødselsdatoer):t.fødselsdato?Array(t.antallBarn).fill(_(t.fødselsdato)):[],ct=(e,t,r)=>{switch(e){case"fødsel":return t.fødselsdato?{type:V.FØDT,antallBarn:t.antallBarn,fødselsdatoer:ke(r,t),termindato:t.termindato?_(t.termindato):void 0,fnr:r==null?void 0:r.fnr}:{type:V.UFØDT,antallBarn:t.antallBarn,termindato:_(t.termindato)};case"adopsjon":return{type:V.ADOPTERT_STEBARN,adopsjonsdato:_(t.omsorgsovertakelsesdato),antallBarn:t.antallBarn,fødselsdatoer:ke(r,t),fnr:r==null?void 0:r.fnr};default:return}},Et=(e,t,r,o,n)=>{switch(e){case"fødsel":case"adopsjon":return o?{fornavn:r.fornavn!==void 0&&r.fornavn!==""?r.fornavn:h(n,"annen.forelder"),etternavn:r.etternavn,erUfør:t.morErUfør,harRettPåForeldrepengerINorge:!!t.morHarRett&&!t.harAnnenForelderTilsvarendeRettEØS,fnr:r.fnr,kanIkkeOppgis:!1,harRettPåForeldrepengerIEØS:t.harAnnenForelderTilsvarendeRettEØS}:{fornavn:r.fornavn!==void 0&&r.fornavn!==""?r.fornavn:h(n,"annen.forelder"),etternavn:r.etternavn,harRettPåForeldrepengerINorge:!!t.farMedmorHarRett&&!t.harAnnenForelderTilsvarendeRettEØS,fnr:r.fnr,kanIkkeOppgis:!1,harRettPåForeldrepengerIEØS:t.harAnnenForelderTilsvarendeRettEØS};default:return}},kt=(e,t,r,o,n,i,d)=>{var u;if(i===void 0&&t===void 0||!d)return;const l=i!==void 0?e.find(a=>i.includes(a.fnr)&&a.annenForelder!==void 0):void 0,s=t!==void 0?e.find(a=>we(a.fødselsdato,t)&&a.annenForelder!==void 0):void 0,f=l||s;if(f!==void 0&&((u=f.annenForelder)==null?void 0:u.fnr)===d){const a=f.annenForelder,{fornavn:m}=a,c=m!==void 0&&m.trim()!==""?m:h(n,"annen.forelder"),E={...a,fornavn:c};return Et(o,r,E,r.søkerErFarEllerMedmor,n)}},he=e=>e.fødselsdatoer!==void 0&&e.fødselsdatoer.length>0?{type:V.FØDT,antallBarn:e.antallBarn,fødselsdatoer:oe(e.fødselsdatoer),fnr:e.fnr!==void 0&&e.fnr.length>0?e.fnr.filter(t=>!!t):void 0}:e.termindato!==void 0?{type:V.UFØDT,antallBarn:e.antallBarn,termindato:e.termindato}:{type:V.IKKE_UTFYLT,antallBarn:e.antallBarn,fødselsdatoer:e.fødselsdatoer?oe(e.fødselsdatoer):[],fnr:e.fnr!==void 0&&e.fnr.length>0?e.fnr.filter(t=>!!t):void 0},gt=e=>e.annenForelder!==void 0?{fornavn:e.annenForelder.fornavn,etternavn:e.annenForelder.etternavn,fnr:e.annenForelder.fnr,kanIkkeOppgis:!1}:{kanIkkeOppgis:!1},Vt=e=>{const t=he(e),r=gt(e);return{barn:t,annenForelder:r,erEndringssøknad:!1}},_e=(e,t,r,o,n,i)=>{const d=t!==void 0?t.fnr:void 0,l={fornavn:h(e,"annen.forelder"),etternavn:"",fnr:d||"",harRettPåForeldrepengerINorge:r.søkerErFarEllerMedmor?!!r.morHarRett&&!r.harAnnenForelderTilsvarendeRettEØS:!!r.farMedmorHarRett&&!r.harAnnenForelderTilsvarendeRettEØS,harRettPåForeldrepengerIEØS:r.harAnnenForelderTilsvarendeRettEØS,kanIkkeOppgis:!1,erUfør:r.søkerErFarEllerMedmor?r.morErUfør:void 0};return kt(o,_(r.fødselsdato),r,n,e,i,d)||l},Kt=(e,t,r)=>{var f;const o=ft(e.sak,void 0),{grunnlag:n}=o,i=Oe(n.familiehendelseType),d=he(e),l=_e(t,(f=e.sak)==null?void 0:f.annenPart,n,r,i,e.fnr),s={barn:d,annenForelder:l,erEndringssøknad:!1};if(e.sak!==void 0){const u={situasjon:e.sak.gjelderAdopsjon?"adopsjon":"fødsel",rolle:e.sak.sakTilhørerMor?void 0:"far"};s.søkersituasjon=u}return s},jt=(e,t,r,o,n)=>{const{grunnlag:i,uttaksplan:d}=t,{dekningsgrad:l,familiehendelseType:s,søkerErFarEllerMedmor:f,ønskerJustertUttakVedFødsel:u}=i,a=Oe(s);if(!a)return;const m=mt(i,f),c=ct(a,i,n),E=ut(e,a,i);if(!c||!E)return;const v=_e(r,o,i,e.barn,a,n==null?void 0:n.fnr);return{søker:m,søkersituasjon:{situasjon:a,rolle:E},barn:c,annenForelder:v,erEndringssøknad:!0,dekningsgrad:l,uttaksplan:d,saksnummer:t.saksnummer,ønskerJustertUttakVedFødsel:u}};export{ie as D,G as R,Kt as a,Vt as b,Gt as c,Q as d,Be as e,fe as f,yt as g,Lt as h,xe as i,Te as j,Nt as k,Mt as l,ft as m,Je as n,jt as o,qe as s};
