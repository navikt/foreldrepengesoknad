import{j as e,a as S,F as I}from"./jsx-runtime-2c139190.js";import{u as J,i as p,_ as H,B as s,H as K,G as U,F as B,A as Y,a as $,b as z}from"./validationUtils-749fcdf4.js";import{r as D}from"./index-b14cf94f.js";import{u as Q,S as b,a}from"./mapSøkerinfoDTO-ee5c98c4.js";import{u as W}from"./useOnValidSubmit-c90b0d0a.js";import{u as w}from"./useSøknad-958c5a2a.js";import{a as X,b as Z,V,c as ee,v as te,S as L,d as f,B as ne,e as ae,f as re}from"./velkommenUtils-95e3f8b5.js";import{D as se}from"./DinePlikter-17df8d3e.js";import{D as oe}from"./DinePersonopplysningerModal-134afb41.js";import{u as ie,s as le}from"./useSaveLoadedRoute-fbce50ec.js";import{h as de,o as me,i as ke,j as pe}from"./eksisterendeSakUtils-d06d0e1f.js";import{u as ce}from"./useSøkerinfo-9e58976c.js";import{l as ue}from"./links-b36d21ab.js";import{B as ge}from"./Link-bafd8a7d.js";const y=({locale:c,saker:F,onChangeLocale:C})=>{const o=J(),T=w(),{dispatch:E,state:h}=Q(),[j,N]=D.useState(!1),v=z("velkommen"),O=ce(),{registrerteBarn:G}=O,u=X(F,G),P=[...u].sort(Z);ie(b.VELKOMMEN),D.useEffect(()=>{h.søknad.søker.språkkode!==c&&E(a.setSpråkkode(c))},[E,c,h.søknad.søker.språkkode]);const M=i=>{const t=i.valgteBarn===L.SØKNAD_GJELDER_NYTT_BARN?void 0:u.find(r=>r.id===i.valgteBarn),d=t!==void 0&&!!t.kanSøkeOmEndring,m=d&&t.sak!==void 0?F.find(r=>{var g;return r.saksnummer===((g=t.sak)==null?void 0:g.saksnummer)}):void 0,n=[a.setVelkommen(i.harForståttRettigheterOgPlikter),a.setErEndringssøknad(d)];let k;t!==void 0&&(k=re(t,P),n.push(a.setBarnFraNesteSak(k)));const l=k!==void 0?k.startdatoFørsteStønadsperiode:void 0,R=d&&m,A=t!==void 0&&t.sak!==void 0&&t.kanSøkeOmEndring===!1,q=!R&&!A&&t!==void 0;if(R){const r=de(m,l),g=me(h.søkerinfo,r,o,m.annenPart,t);n.push(a.updateCurrentRoute(b.UTTAKSPLAN)),n.push(a.setSøknad(g)),n.push(a.setEksisterendeSak(r)),n.push(a.setBrukerSvarteJaPåAutoJustering(r==null?void 0:r.grunnlag.ønskerJustertUttakVedFødsel)),n.push(a.setSøknadGjelderEtNyttBarn(!1))}else if(A){const r=ke(t,o,O);n.push(a.setSøknad(r)),n.push(a.setSøknadGjelderEtNyttBarn(!1))}else if(q){const r=pe(t);n.push(a.setSøknad(r)),n.push(a.setSøknadGjelderEtNyttBarn(!1))}else n.push(a.setSøknadGjelderEtNyttBarn(!0));return n},{handleSubmit:x,isSubmitting:_}=W(M,b.SØKERSITUASJON,i=>le(i));return e(V.FormikWrapper,{initialValues:ee(T.harGodkjentVilkår),onSubmit:x,renderForm:({values:i,setFieldValue:t})=>{const d=te.getVisbility({...i,selectableBarn:u}),m=i.valgteBarn,n=m===L.SØKNAD_GJELDER_NYTT_BARN?void 0:u.find(l=>l.id===m),k=n!==void 0&&n.kanSøkeOmEndring===!0?p(o,"velkommen.endreSøknad"):p(o,"velkommen.begynnMedSøknad");return S(V.Form,{includeButtons:!1,children:[e(H,{locale:c,availableLocales:["nb","nn"],toggle:l=>C(l)}),S("div",{className:v.block,children:[e(s,{children:e(K,{size:"xlarge",className:`${v.element("tittel")}`,children:p(o,"velkommen.tittel")})}),e(s,{padBottom:"l",children:S(U,{poster:!0,children:[e(s,{padBottom:"m",children:p(o,"velkommen.guidepanel.del1")})," ",e(s,{children:e(B,{id:"velkommen.guidepanel.del2",values:{a:l=>e("a",{className:"lenke",rel:"noopener noreferrer",href:ue.foreldrepenger,target:"_blank",children:l})}})})]})}),e(s,{padBottom:"l",visible:d.isVisible(f.valgteBarn),children:e(ne,{selectableBarn:P,visibility:d,formValues:i,setFieldValue:t})}),e(s,{padBottom:"l",visible:d.isVisible(f.harForståttRettigheterOgPlikter),children:e(Y,{variant:"info",children:p(o,"velkommen.lagring.info")})}),e(s,{padBottom:"l",visible:d.isVisible(f.harForståttRettigheterOgPlikter),children:e(V.ConfirmationCheckbox,{name:f.harForståttRettigheterOgPlikter,label:p(o,"velkommen.samtykke"),validate:ae(o),children:S(I,{children:[e(s,{padBottom:"l",children:e(B,{id:"velkommen.samtykkeIntro.del1"})}),e(s,{padBottom:"m",children:e(se,{})})]})})}),e(s,{padBottom:"l",children:e("div",{style:{textAlign:"center"},children:e($,{type:"submit",variant:"primary",disabled:_,loading:_,children:k})})}),e(ge,{className:v.element("personopplysningerLink"),children:e("a",{className:"lenke",href:"#",onClick:l=>{l.preventDefault(),N(!0)},children:e(B,{id:"velkommen.lesMerOmPersonopplysninger"})})}),e(oe,{isOpen:j,onRequestClose:()=>N(!1)})]})]})}})},Re=y;try{y.displayName="Velkommen",y.__docgenInfo={description:"",displayName:"Velkommen",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string"}},onChangeLocale:{defaultValue:null,description:"",name:"onChangeLocale",required:!0,type:{name:"(locale: Locale) => void"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'},{value:'"en"'}]}},saker:{defaultValue:null,description:"",name:"saker",required:!0,type:{name:"Sak[]"}},fnr:{defaultValue:null,description:"",name:"fnr",required:!0,type:{name:"string"}}}}}catch{}export{Re as V};
//# sourceMappingURL=Velkommen-ebd63319.js.map
