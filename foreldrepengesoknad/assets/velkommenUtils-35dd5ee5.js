import{j as o}from"./jsx-runtime-69eee039.js";import{p as P,i as f,u as V,T as O,B,d as m,g as T}from"./validationUtils-5cf0875a.js";import"./index-e13aeee6.js";import"./index-7c191284.js";import{q as E,I as u,u as R,U}from"./dateUtils-b148e0a6.js";import{Q as L}from"./index-47edccfa.js";import{B as v}from"./Link-00530630.js";import{f as M,c as I,g as b,d as z,e as _,h as S}from"./useSøknad-4276ca26.js";import{e as K}from"./personUtils-23fa0e5a.js";var y=(e=>(e.harForståttRettigheterOgPlikter="harForståttRettigheterOgPlikter",e.valgteBarn="valgteBarn",e))(y||{});const ge=e=>({harForståttRettigheterOgPlikter:e,valgteBarn:void 0}),q={valgteBarn:{isIncluded:({selectableBarn:e})=>e.length>0,isAnswered:({valgteBarn:e})=>e!==void 0,visibilityFilter:({selectableBarn:e})=>e.length>0},harForståttRettigheterOgPlikter:{isAnswered:({harForståttRettigheterOgPlikter:e})=>e===!0,isIncluded:({valgteBarn:e,selectableBarn:t})=>e!==void 0||t.length===0}},w=P(),pe=L(q),he=e=>t=>{if(t!==!0)return f(e,"valideringsfeil.velkommen.harForståttRettigheterOgPlikter.påkrevd")},G=e=>t=>{if(t===void 0)return f(e,"steg.footer.spørsmålMåBesvares")};const Y=({sakErFerdigbehandlet:e})=>{const t=V(),a=e?"success":"warning",r=e?"velkommen.sak.status.ferdigBehandlet":"velkommen.sak.status.underBehandling";return o.jsx(O,{className:"blokk-xxxs",variant:a,children:o.jsxs(v,{size:"small",children:[f(t,r)," "]})})};try{SknadStatus.displayName="SknadStatus",SknadStatus.__docgenInfo={description:"",displayName:"SknadStatus",props:{sakErFerdigbehandlet:{defaultValue:null,description:"",name:"sakErFerdigbehandlet",required:!0,type:{name:"boolean"}}}}}catch{}var p=(e=>(e.FØDT="født",e.UFØDT="ufødt",e.ADOPTERT="adoptert",e.IKKE_UTFYLT="ikkeUtfylt",e))(p||{}),C=(e=>(e.SØKNAD_GJELDER_NYTT_BARN="søknad_gjeder_nytt_barn",e))(C||{});const Q=e=>({label:o.jsxs(o.Fragment,{children:[o.jsx(v,{className:"radioTittle",size:"medium",children:f(e,"omBarnet.gjelderAnnetBarn")}),o.jsx(B,{margin:"l",children:o.jsxs(v,{size:"small",children:[" ",f(e,"velkommen.intro.harSaker.barnVelger.info")]})})]}),value:"søknad_gjeder_nytt_barn",className:"radioGroupButton"}),x=e=>o.jsx(B,{className:"radioDescription",margin:"l",children:o.jsx(Y,{sakErFerdigbehandlet:e})}),H=(e,t,a)=>{const r=b(e,a);return f(a,"velkommen.barnVelger.ufødtBarn",{antallBarnTekst:r,termin:E(t)})},J=(e,t)=>{const a=H(e.antallBarn,e.termindato,t),r=e.sak!==void 0?x(e.sak.åpenBehandling===void 0):void 0,i=e.sak!==void 0?f(t,"velkommen.barnVelger.saksnummer",{saksnummer:e.sak.saksnummer}):"",l=e.sak!==void 0;return{label:o.jsxs(o.Fragment,{children:[o.jsx(v,{className:"radioTittle",size:"medium",children:a}),l&&o.jsxs(o.Fragment,{children:[o.jsx(v,{size:"small",className:"radioDescription",children:i}),r]})]}),value:e.id,className:"radioGroupButton"}},W=(e,t)=>{const a=M(e.fornavn,e.fødselsdatoer,e.omsorgsovertagelse,e.alleBarnaLever,e.antallBarn,t),r=I(e.fødselsdatoer),i=e.type==="født"||e.type==="ikkeUtfylt"?r:E(e.omsorgsovertagelse),l=e.type==="født"||e.type==="ikkeUtfylt"?f(t,"velkommen.barnVelger.født"):f(t,"velkommen.barnVelger.adopsjon"),s=e.sak!==void 0?f(t,"velkommen.barnVelger.saksnummer",{saksnummer:e.sak.saksnummer}):"",g=e.sak!==void 0?x(e.sak.åpenBehandling===void 0):void 0;return{label:o.jsxs(o.Fragment,{children:[o.jsx(v,{size:"medium",className:"radioTittle",children:a}),e.alleBarnaLever&&o.jsxs(v,{size:"small",className:"radioDescription",children:[l," ",i]}),o.jsx(v,{size:"small",children:s}),g!==void 0&&g]}),value:e.id,name:y.valgteBarn,className:"radioGroupButton"}},X=(e,t)=>{switch(e.type){case"født":case"adoptert":case"ikkeUtfylt":return W(e,t);case"ufødt":return J(e,t);default:return}},j=e=>{const t=V();return o.jsx(B,{visible:e.visibility.isVisible(y.valgteBarn),children:o.jsx(B,{margin:"xl",children:o.jsx(w.RadioGroup,{legend:f(t,"velkommen.intro.harSaker.barnVelger.label"),name:y.valgteBarn,validate:G(t),radios:e.selectableBarn.map(a=>X(a,t)).concat([Q(t)])})})})};try{j.displayName="BarnVelger",j.__docgenInfo={description:"",displayName:"BarnVelger",props:{selectableBarn:{defaultValue:null,description:"",name:"selectableBarn",required:!0,type:{name:"SelectableBarn[]"}},visibility:{defaultValue:null,description:"",name:"visibility",required:!0,type:{name:"QuestionVisibility<VelkommenFormField, any>"}},formValues:{defaultValue:null,description:"",name:"formValues",required:!0,type:{name:"VelkommenFormData"}},setFieldValue:{defaultValue:null,description:"",name:"setFieldValue",required:!0,type:{name:"(field: string, value: any, shouldValidate?: boolean | undefined) => void"}}}}}catch{}const Z=(e,t)=>e?p.ADOPTERT:t.fødselsdato!==void 0?p.FØDT:p.UFØDT,N=(e,t)=>e===void 0||t===void 0?!1:m(e).isSameOrAfter(m(t).subtract(1,"day"),"day")&&m(e).isSameOrBefore(m(t).add(1,"day"),"day"),$=(e,t)=>{const a=e.barn!==void 0?e.barn.map(d=>d.fnr).flat():[],r=u(e.familiehendelse.fødselsdato),i=t.filter(d=>a.includes(d.fnr)),l=r!==void 0?t.filter(d=>N(d.fødselsdato,r)&&!i.find(n=>n.fnr===d.fnr)):[],s=i.concat(l),g=u(R(e.familiehendelse.termindato,e.familiehendelse.fødselsdato,e.familiehendelse.omsorgsovertakelse)),h=Z(e.gjelderAdopsjon,e.familiehendelse);let k;return s&&s.length>0?k=s.map(d=>d.fødselsdato):r!==void 0&&(k=Array(e.familiehendelse.antallBarn).fill(r)),{id:T(),type:h,antallBarn:e.familiehendelse.antallBarn,termindato:u(e.familiehendelse.termindato),omsorgsovertagelse:u(e.familiehendelse.omsorgsovertakelse),kanSøkeOmEndring:e.kanSøkeOmEndring,sak:e,fødselsdatoer:k,familiehendelsesdato:g,sortableDato:u(e.familiehendelse.termindato),startdatoFørsteStønadsperiode:e.gjeldendeVedtak!==void 0&&e.gjeldendeVedtak.perioder.length>0?U(u(e.gjeldendeVedtak.perioder[0].fom)).denneEllerNeste():void 0,fornavn:s!==void 0&&s.length>0?s.filter(d=>d.fornavn!==void 0&&d.fornavn.trim()!=="").map(d=>[d.fornavn,d.mellomnavn!==void 0?d.mellomnavn:""].join(" ")):void 0,fnr:s!==void 0&&s.length>0?s.filter(d=>d.fnr!==void 0).map(d=>d.fnr):void 0,alleBarnaLever:s!==void 0&&s.length>0?s.every(d=>S(d)):!1}},ee=(e,t)=>{const a=e.mellomnavn!==void 0?[e.fornavn,e.mellomnavn].join(" "):e.fornavn;return{id:T(),type:p.IKKE_UTFYLT,antallBarn:1,fødselsdatoer:[e.fødselsdato],fornavn:a!==void 0?[a]:void 0,fnr:[e.fnr],sortableDato:e.fødselsdato,alleBarnaLever:S(e),annenForelder:t}},te=(e,t,a)=>{const r=[e].concat(t).sort(re);if(!(r.find(l=>!S(l)&&_(l))||r.length==0))return{id:T(),type:p.IKKE_UTFYLT,antallBarn:r.length,fødselsdatoer:r.map(l=>l.fødselsdato),fornavn:r.map(l=>[l.fornavn,l.mellomnavn!==void 0?l.mellomnavn:""].join(" ")),fnr:r.map(l=>l.fnr),sortableDato:r[0].fødselsdato,alleBarnaLever:r.every(l=>S(l)),annenForelder:a}},ne=(e,t)=>e.filter(a=>a.barn!==void 0&&a.barn.length>0||a.familiehendelse.termindato!==void 0||a.familiehendelse.fødselsdato!==void 0||a.familiehendelse.omsorgsovertakelse!==void 0).map(a=>$(a,t)),ae=(e,t,a)=>{const r=e.filter(n=>!a.find(c=>N(n.fødselsdato,u(c.familiehendelse.fødselsdato)))),i="tempFnr",l=r.map(n=>n.fnr===void 0?{...n,fnr:i+T().toString()}:n),s=t.map(n=>n.fnr).flat(),g=t.filter(n=>n.fødselsdatoer!==void 0&&n.fødselsdatoer.length>0).map(n=>n.fødselsdatoer).flat(),h=[];return l.filter(n=>!(n.dødsdato!==void 0&&g.find(c=>m(c).isSame(m(n.fødselsdato),"day")))).forEach(n=>{if(!s.includes(n.fnr)&&!K(n.fødselsdato)){const c=z(n.fnr,n.fødselsdato,l),D=n.annenForelder!==void 0?{fnr:n.annenForelder.fnr,fornavn:n.annenForelder.fornavn,mellomnavn:n.annenForelder.mellomnavn,etternavn:n.annenForelder.etternavn}:void 0;if(s.push(n.fnr),c.length===0){if(!_(n)){const F=ee(n,D);h.push(F)}}else{const F=te(n,c,D);c.forEach(A=>{s.push(A.fnr)}),F!==void 0&&h.push(F)}}}),h.map(n=>n.fnr&&n.fnr.length>0?{...n,fnr:n.fnr.filter(c=>c&&!c.startsWith(i))}:n)},ke=(e,t)=>{const a=e.filter(s=>!s.sakAvsluttet),r=e.filter(s=>s.sakAvsluttet),i=ne(a,t),l=ae(t,i,r);return i.concat(l)},Fe=(e,t)=>{var i,l;const a=t.filter(s=>s.sak!==void 0&&s.id!==e.id&&s.familiehendelsesdato!==void 0&&m(s.familiehendelsesdato).isAfter(e.familiehendelsesdato,"day"));a.sort(se);const r=a[a.length-1];if(r!==void 0)return{familiehendelsesdato:r.familiehendelsesdato,startdatoFørsteStønadsperiode:r.startdatoFørsteStønadsperiode,fnr:r.fnr,annenForelderFnr:(l=(i=r.sak)==null?void 0:i.annenPart)==null?void 0:l.fnr}};function re(e,t){return m(e.fødselsdato).isAfter(t.fødselsdato,"d")?1:m(e.fødselsdato).isBefore(t.fødselsdato,"d")||e.fornavn<t.fornavn?-1:1}function se(e,t){return m(e.sortableDato).isBefore(t.sortableDato,"d")?1:m(e.sortableDato).isAfter(t.sortableDato,"d")?-1:0}export{j as B,C as S,w as V,ge as a,y as b,he as c,Fe as d,re as e,N as f,ke as g,se as s,pe as v};
//# sourceMappingURL=velkommenUtils-35dd5ee5.js.map
