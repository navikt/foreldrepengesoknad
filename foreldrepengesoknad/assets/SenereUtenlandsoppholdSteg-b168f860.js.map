{"version":3,"file":"SenereUtenlandsoppholdSteg-b168f860.js","sources":["../../src/app/steps/utenlandsoppholdSenere/SenereUtenlandsoppholdSteg.tsx"],"sourcesContent":["import { FormattedMessage, useIntl } from 'react-intl';\nimport { Heading } from '@navikt/ds-react';\nimport { SenereUtenlandsoppholdPanel } from '@navikt/fp-utenlandsopphold';\nimport { UtenlandsoppholdSenere } from '@navikt/fp-types';\nimport { ContentWrapper } from '@navikt/fp-ui';\nimport useFortsettSøknadSenere from 'app/utils/hooks/useFortsettSøknadSenere';\nimport SøknadRoutes from 'app/routes/routes';\nimport createConfig from '../stepsConfig';\nimport { ContextDataType, useContextGetData, useContextSaveData } from 'app/context/FpDataContext';\nimport { notEmpty } from '@navikt/fp-validation';\n\ntype Props = {\n    mellomlagreSøknadOgNaviger: () => Promise<void>;\n    avbrytSøknad: () => void;\n};\n\nconst SenereUtenlandsoppholdSteg: React.FunctionComponent<Props> = ({ mellomlagreSøknadOgNaviger, avbrytSøknad }) => {\n    const intl = useIntl();\n    const onFortsettSøknadSenere = useFortsettSøknadSenere();\n\n    const utenlandsopphold = notEmpty(useContextGetData(ContextDataType.UTENLANDSOPPHOLD));\n    const senereUtenlandsopphold = useContextGetData(ContextDataType.UTENLANDSOPPHOLD_SENERE);\n\n    const oppdaterSenereUtenlandsopphold = useContextSaveData(ContextDataType.UTENLANDSOPPHOLD_SENERE);\n    const oppdaterAppRoute = useContextSaveData(ContextDataType.APP_ROUTE);\n\n    const lagredeSenereUtenlandsopphold =\n        senereUtenlandsopphold && senereUtenlandsopphold.senereOpphold.length > 0\n            ? {\n                  utenlandsoppholdNeste12Mnd: senereUtenlandsopphold.senereOpphold.map((so) => ({\n                      fom: so.tidsperiode.fom,\n                      tom: so.tidsperiode.tom,\n                      landkode: so.land,\n                  })),\n              }\n            : undefined;\n\n    const save = (values: UtenlandsoppholdSenere) => {\n        oppdaterSenereUtenlandsopphold({\n            senereOpphold: values.utenlandsoppholdNeste12Mnd.map((un) => ({\n                land: un.landkode,\n                tidsperiode: {\n                    fom: un.fom,\n                    tom: un.tom,\n                },\n            })),\n        });\n\n        oppdaterAppRoute(SøknadRoutes.INNTEKTSINFORMASJON);\n        return mellomlagreSøknadOgNaviger();\n    };\n\n    const goToPreviousStep = () => {\n        const appRoute = utenlandsopphold.iNorgeSiste12Mnd\n            ? SøknadRoutes.UTENLANDSOPPHOLD\n            : SøknadRoutes.TIDLIGERE_UTENLANDSOPPHOLD;\n\n        oppdaterAppRoute(appRoute);\n        mellomlagreSøknadOgNaviger();\n    };\n    const saveOnPrevious = () => {\n        // TODO (TOR) Lagre uvalidert data i framtida\n    };\n\n    const stepConfig = createConfig(intl, false).map((config) => ({\n        ...config,\n        isSelected: config.id === 'utenlandsoppholdSenere',\n    }));\n\n    return (\n        <ContentWrapper>\n            <Heading size=\"large\">\n                <FormattedMessage id=\"søknad.pageheading\" />\n            </Heading>\n            <SenereUtenlandsoppholdPanel\n                senereUtenlandsopphold={lagredeSenereUtenlandsopphold}\n                saveOnNext={save}\n                saveOnPrevious={saveOnPrevious}\n                cancelApplication={avbrytSøknad}\n                onContinueLater={onFortsettSøknadSenere}\n                goToPreviousStep={goToPreviousStep}\n                stepConfig={stepConfig}\n                supportsTempSaving\n            />\n        </ContentWrapper>\n    );\n};\n\nexport default SenereUtenlandsoppholdSteg;\n"],"names":["SenereUtenlandsoppholdSteg","mellomlagreSøknadOgNaviger","avbrytSøknad","intl","useIntl","onFortsettSøknadSenere","useFortsettSøknadSenere","utenlandsopphold","notEmpty","useContextGetData","ContextDataType","senereUtenlandsopphold","oppdaterSenereUtenlandsopphold","useContextSaveData","oppdaterAppRoute","lagredeSenereUtenlandsopphold","so","save","values","un","SøknadRoutes","goToPreviousStep","appRoute","saveOnPrevious","stepConfig","createConfig","config","jsxs","ContentWrapper","jsx","Heading","FormattedMessage","SenereUtenlandsoppholdPanel","SenereUtenlandsoppholdSteg$1"],"mappings":"ohBAgBA,MAAAA,EAAA,CAAA,CAAA,2BAAAC,EAAA,aAAAC,KAAA,CACI,MAAAC,EAAAC,IACAC,EAAAC,IAEAC,EAAAC,EAAAC,EAAAC,EAAA,gBAAA,CAAA,EACAC,EAAAF,EAAAC,EAAA,uBAAA,EAEAE,EAAAC,EAAAH,EAAA,uBAAA,EACAI,EAAAD,EAAAH,EAAA,SAAA,EAEAK,EAAAJ,GAAAA,EAAA,cAAA,OAAA,EAAA,CAEU,2BAAAA,EAAA,cAAA,IAAAK,IAAA,CACkF,IAAAA,EAAA,YAAA,IACtD,IAAAA,EAAA,YAAA,IACA,SAAAA,EAAA,IACP,EAAA,CACf,EAAA,OAIhBC,EAAAC,IACIN,EAAA,CAA+B,cAAAM,EAAA,2BAAA,IAAAC,IAAA,CACmC,KAAAA,EAAA,SACjD,YAAA,CACI,IAAAA,EAAA,IACD,IAAAA,EAAA,GACA,CACZ,EAAA,CACF,CAAA,EAGNL,EAAAM,EAAA,mBAAA,EACAnB,EAAA,GAGJoB,EAAA,IAAA,CACI,MAAAC,EAAAf,EAAA,iBAAAa,EAAA,iBAAAA,EAAA,2BAIAN,EAAAQ,CAAA,EACArB,GAA2B,EAE/BsB,EAAA,IAAA,CAA6B,EAI7BC,EAAAC,EAAAtB,EAAA,EAAA,EAAA,IAAAuB,IAAA,CAA8D,GAAAA,EACvD,WAAAA,EAAA,KAAA,wBACuB,EAAA,EAG9B,OAAAC,EAAA,KAAAC,EAAA,CAAA,SAAA,CAEQC,EAAAA,IAAAC,EAAA,CAAA,KAAA,QAAA,SAAAD,MAAAE,EAAA,CAAA,GAAA,oBAAA,CAAA,CAAA,CAAA,EAEAF,EAAA,IACAG,EAAC,CAAA,uBAAAjB,EAC2B,WAAAE,EACZ,eAAAM,EACZ,kBAAArB,EACmB,gBAAAG,EACF,iBAAAgB,EACjB,WAAAG,EACA,mBAAA,EACkB,CAAA,CACtB,CAAA,CAAA,CAGZ,EAEAS,EAAAjC"}