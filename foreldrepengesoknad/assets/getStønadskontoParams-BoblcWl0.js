import{r as i}from"./index-CTjT7uj6.js";import{A as p}from"./index-CaYFfnhz.js";import{j as T}from"./jsx-runtime-Cw0GR0a5.js";import{g as F,l as x}from"./barnUtils-CCOdjbmW.js";import{c as C}from"./eksisterendeSakUtils-BKwGF-hp.js";import{i as A,g as K,b as H}from"./useFpNavigator-pwQyd6hz.js";import{J as f,K as D,M as B,N as M,O as U}from"./Uttaksplan-e942aNcG.js";var u=(t=>(t.UNFETCHED="Unfetched",t.IN_PROGRESS="InProgress",t.FINISHED="Finished",t))(u||{});const R={config:{},isSuspended:!1},st=(t,e=R)=>{const[r,s]=i.useState(),[d,o]=i.useState(null),[n,a]=i.useState(u.UNFETCHED),N=e.fnr??void 0,E=p(N);return i.useEffect(()=>{!e.isSuspended&&n===u.UNFETCHED&&(a(u.IN_PROGRESS),E.get(t,e.config).then(c=>{s(c.data===""?void 0:c.data),a(u.FINISHED)}).catch(c=>{o(c),a(u.FINISHED)}))},[e,t,E,n]),{data:r,error:d,requestStatus:n}},y=(t,e,r=R)=>{const[s,d]=i.useState(),[o,n]=i.useState(null),[a,N]=i.useState(u.UNFETCHED),E=r.fnr??void 0,c=p(E);return i.useEffect(()=>{!r.isSuspended&&a===u.UNFETCHED&&(N(u.IN_PROGRESS),c.post(t,e,r.config).then(l=>{d(l.data===""?void 0:l.data),N(u.FINISHED)}).catch(l=>{n(l),N(u.FINISHED)}))},[r,t,c,a,e]),{data:s,error:o,requestStatus:a}};var S=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER="STØNADSKONTOER",t))(S||{});const O={},_=i.createContext(O),h=i.createContext(void 0),q=({children:t,initialState:e})=>{const[r,s]=i.useReducer((d,o)=>{switch(o.type){case"update":return{...d,[o.key]:[o.hash,o.data]};case"reset":return{};default:throw new Error}},e||O);return T.jsx(_.Provider,{value:r,children:T.jsx(h.Provider,{value:s,children:t})})},V=(t,e)=>{const s=i.useContext(_)[t];return s&&s[0]===e?s[1]:void 0},G=(t,e)=>{const r=i.useContext(h);return s=>{r&&r({type:"update",key:t,hash:e,data:s})}};q.__docgenInfo={description:"",methods:[],displayName:"FpApiDataContext",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},initialState:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    [FpApiDataType.ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.NESTE_SAK_ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.STØNADSKONTOER]?: [number, TilgjengeligeStønadskontoer];
}`,signature:{properties:[]}},description:""}}};const j=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),k=t=>{let e=0;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);e=(e<<5)-e+s,e=e&e}return e},w={[S.ANNEN_PART_VEDTAK]:"/rest/innsyn/v2/annenPartVedtak",[S.NESTE_SAK_ANNEN_PART_VEDTAK]:"/rest/innsyn/v2/annenPartVedtak",[S.STØNADSKONTOER]:"/rest/konto"},at=(t,e,r)=>{var c;const s=k(JSON.stringify(j(e))),d=V(t,s),o=!!d,n=G(t,s),{data:a,requestStatus:N,error:E}=y(w[t],e,{config:{withCredentials:t!==S.STØNADSKONTOER},isSuspended:o||r});return i.useEffect(()=>{a&&n(a)},[a]),(c=E==null?void 0:E.message)!=null&&c.includes("Ugyldig ident")?{data:void 0,requestStatus:u.FINISHED,error:null}:{data:o?d:a,requestStatus:o?u.FINISHED:N,error:E}},L=(t,e)=>t?!0:f(e)?!!e.harRettPåForeldrepengerINorge:!1,J=(t,e)=>t?f(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,Y=(t,e)=>{if(D(t)||U(t))return e||t.termindato},z=(t,e)=>e||t||void 0,Q=(t,e,r)=>t&&r?r:e,W=(t,e,r,s,d)=>r||s?"ALENEOMSORG":t&&e||d?"BEGGE_RETT":"BARE_SØKER_RETT",ot=(t,e,r,s,d,o)=>{const n=f(e)?e:void 0,a=A(r.rolle),N=K(a,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),E=H(!a,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),c=s!==void 0?s.startdatoFørsteStønadsperiode:void 0,l=C(d,t,a,F(t),c),I=Q(a,t.antallBarn,l==null?void 0:l.grunnlag.antallBarn),P=z(o==null?void 0:o.grunnlag.termindato,l==null?void 0:l.grunnlag.termindato),m=A(r.rolle),g=A(r.rolle),v=f(e)&&e.harRettPåForeldrepengerIEØS;return{rettighetstype:W(L(m,e),J(m,e),E||!1,N||!1,v||!1),brukerrolle:g?"FAR":"MOR",antallBarn:I.toString(),fødselsdato:D(t)?t.fødselsdatoer[0]:void 0,termindato:Y(t,P),omsorgsovertakelseDato:B(t)||M(t)?t.adopsjonsdato:void 0,morHarUføretrygd:x(e,g),familieHendelseDatoNesteSak:c}};export{q as F,u as R,S as a,Q as b,z as c,st as d,ot as g,at as u};
