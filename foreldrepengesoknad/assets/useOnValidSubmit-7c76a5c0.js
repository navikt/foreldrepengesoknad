import{r as u}from"./index-7c191284.js";import{u as f,S as h,a as l}from"./mapSøkerinfoDTO-a41d39b4.js";import{r as b}from"./api-ddd1803f.js";import{a as E}from"./submitUtils-c2450d86.js";import{u as g}from"./useSøknad-21fd1dca.js";const _=(d,s,c)=>{const{dispatch:n,state:o}=f(),i=g(),[S,m]=u.useState(!1),[r,p]=u.useState(!1),[e,t]=u.useState(void 0);return u.useEffect(()=>{S&&c(o).then(()=>{s===h.SØKNAD_SENDT?i(s):i(o.currentRoute)}).catch(a=>{a.response&&(a.response.status===401||a.response.status===403)?b():t(a)})},[S,i,s,o,c]),u.useEffect(()=>{if(e)throw E(e),new Error(e)},[e]),{handleSubmit:a=>{p(!0);const N=d(a),w=s===h.SØKNAD_SENDT?void 0:n(l.updateCurrentRoute(s));Promise.all([w,...N.map(C=>n(C))]).then(()=>m(!0))},isSubmitting:r}},k=(d,s,c)=>{const{dispatch:n,state:o}=f(),i=g();return{handleSubmit:m=>{const r=s(m),p=d(m),e=r===h.SØKNAD_SENDT?void 0:n(l.updateCurrentRoute(r));return Promise.all([e,...p.map(t=>n(t))]).then(()=>c(o).then(()=>{i(r)}).catch(t=>{if(t.response&&(t.response.status===401||t.response.status===403))b();else throw E(t),new Error(t)}))}}};export{_ as a,k as u};
//# sourceMappingURL=useOnValidSubmit-7c76a5c0.js.map
