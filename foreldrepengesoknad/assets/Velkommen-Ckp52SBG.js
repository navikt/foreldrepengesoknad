import{j as a}from"./jsx-runtime-Cw0GR0a5.js";import{r as y}from"./index-CTjT7uj6.js";import{R as ae,u as te,F as re,C as ne}from"./ErrorSummaryHookForm-D14xGqJh.js";import{u as q}from"./index-DSgjoNiG.js";import{R as _,i as se,j as oe}from"./Tidsperioden-BBrWkrto.js";import"./index-CCQ3W5xA.js";import{d as K,b as G}from"./Uttaksdagen-C7qvZjyy.js";import{l as ie}from"./links-BegG-28I.js";import"./_baseToString-Cq6MbKF_.js";import"./_createSet-D2BJ0WVx.js";import{C as le,G as de,A as me}from"./ByttBrowserModal-B_8YCR86.js";import{a as ge,S as b}from"./useFpNavigator-BgoTWwZ3.js";import{D as ke}from"./DinePlikter-CMl1LJ0P.js";import{k as C,C as s}from"./FpDataContext-7C49oNtd.js";import{m as pe,o as ue,a as fe,b as ce}from"./eksisterendeSakUtils-BIgdxTYc.js";import{D as ve}from"./DinePersonopplysningerModal-PNfezkHZ.js";import{i as Se}from"./dateFormValidation-DamLOwkK.js";import{V as p,g as he,s as je,a as Be}from"./velkommenUtils-HOPFbMDI.js";import{d as De,f as Ee,e as Ne}from"./barnUtils-B98nIsJr.js";import{M as g}from"./message-CjkJih2D.js";import{V as S,H as h}from"./VStack-DmKyg8-d.js";import{H as ye,B as I}from"./Label-C_UMiHsP.js";const Te=()=>{const t=C();return{oppdaterSøknadIState:(e,i)=>{t(s.SØKERSITUASJON,e.søkersituasjon),t(s.OM_BARNET,e.barn),t(s.ANNEN_FORELDER,e.annenForelder),t(s.ARBEIDSFORHOLD_OG_INNTEKT,e.arbeidsforholdOgInntekt),t(s.FRILANS,e.frilans),t(s.EGEN_NÆRING,e.egenNæring),t(s.ANDRE_INNTEKTSKILDER,e.andreInntektskilder),t(s.UTENLANDSOPPHOLD,e.informasjonOmUtenlandsopphold?{iNorgeNeste12Mnd:e.informasjonOmUtenlandsopphold.iNorgeNeste12Mnd,iNorgeSiste12Mnd:e.informasjonOmUtenlandsopphold.iNorgeSiste12Mnd}:void 0),t(s.UTENLANDSOPPHOLD_TIDLIGERE,e.informasjonOmUtenlandsopphold?{tidligereOpphold:e.informasjonOmUtenlandsopphold.tidligereOpphold}:void 0),t(s.UTENLANDSOPPHOLD_SENERE,e.informasjonOmUtenlandsopphold?{senereOpphold:e.informasjonOmUtenlandsopphold.senereOpphold}:void 0),t(s.PERIODE_MED_FORELDREPENGER,{dekningsgrad:e.dekningsgrad}),t(s.UTTAKSPLAN,e.uttaksplan),t(s.UTTAKSPLAN_METADATA,{ønskerJustertUttakVedFødsel:e.ønskerJustertUttakVedFødsel}),i&&t(s.EKSISTERENDE_SAK,i)}}};var T=(t=>(t.SØKNAD_GJELDER_NYTT_BARN="søknad_gjeder_nytt_barn",t))(T||{});const _e=(t,r)=>t.map(e=>{const i=e.sak!==void 0?Y(e.sak.åpenBehandling===void 0,r):void 0,n=e.sak!==void 0?r.formatMessage({id:"velkommen.barnVelger.saksnummer"},{saksnummer:e.sak.saksnummer}):"";return a.jsx(_,{value:e.id,description:e.sak!==void 0?`${n}, ${i}`:n,children:a.jsx(g,{id:"velkommen.barnVelger.ufødtBarn",values:{antallBarnTekst:De(e.antallBarn,r),termin:K(e.termindato).format(G),b:d=>a.jsx("b",{children:d})}})},e.id)}),Y=(t,r)=>t?r.formatMessage({id:"velkommen.sak.status.ferdigBehandlet"}):r.formatMessage({id:"velkommen.sak.status.underBehandling"}),xe=(t,r)=>t.map(e=>{const i=Ee(e.fornavn,e.fødselsdatoer,e.omsorgsovertagelse,e.alleBarnaLever,e.antallBarn,r),n=Ne(e.fødselsdatoer),d=e.type===p.FØDT||e.type===p.IKKE_UTFYLT?n:K(e.omsorgsovertagelse).format(G),j=e.type===p.FØDT||e.type===p.IKKE_UTFYLT?r.formatMessage({id:"velkommen.barnVelger.født"}):r.formatMessage({id:"velkommen.barnVelger.adopsjon"}),u=e.sak!==void 0?r.formatMessage({id:"velkommen.barnVelger.saksnummer"},{saksnummer:e.sak.saksnummer}):"",f=e.sak!==void 0?Y(e.sak.åpenBehandling===void 0,r):void 0;return a.jsx(_,{value:e.id,description:f?`${u}, ${f}`:u,children:a.jsx("b",{children:e.alleBarnaLever?`${i} ${j} ${d}`:i})},e.id)}),w=({selectableBarn:t})=>{const r=q();if(t.length===0)return null;const e=t.filter(d=>d.type===p.UFØDT),i=t.filter(d=>d.type!==p.UFØDT);let n=[];return i.length>0&&(n=n.concat(xe(i,r))),e.length>0&&(n=n.concat(_e(e,r))),a.jsx(ae,{name:"valgteBarn",label:a.jsx(g,{id:"velkommen.intro.harSaker.barnVelger.label"}),validate:[Se(r.formatMessage({id:"steg.footer.spørsmålMåBesvares"}))],children:n.concat(a.jsx(_,{value:"søknad_gjeder_nytt_barn",description:r.formatMessage({id:"velkommen.intro.harSaker.barnVelger.info"}),children:a.jsx(g,{id:"omBarnet.gjelderAnnetBarn",values:{b:d=>a.jsx("b",{children:d})}})},"søknad_gjeder_nytt_barn"))})};w.__docgenInfo={description:"",methods:[],displayName:"BarnVelger",props:{selectableBarn:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    id: string;
    type: ValgtBarnType;
    antallBarn: number;
    sortableDato: Date;
    fnr?: string[];
    termindato?: Date;
    fødselsdatoer?: Date[];
    omsorgsovertagelse?: Date;
    fornavn?: string[];
    kanSøkeOmEndring?: boolean;
    sak?: Sak;
    annenForelder?: RegistrertAnnenForelder;
    familiehendelsesdato?: Date;
    startdatoFørsteStønadsperiode?: Date;
    alleBarnaLever: boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"ValgtBarnType",required:!0}},{key:"antallBarn",value:{name:"number",required:!0}},{key:"sortableDato",value:{name:"Date",required:!0}},{key:"fnr",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"termindato",value:{name:"Date",required:!1}},{key:"fødselsdatoer",value:{name:"Array",elements:[{name:"Date"}],raw:"Date[]",required:!1}},{key:"omsorgsovertagelse",value:{name:"Date",required:!1}},{key:"fornavn",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"kanSøkeOmEndring",value:{name:"boolean",required:!1}},{key:"sak",value:{name:"Sak",required:!1}},{key:"annenForelder",value:{name:"Omit",elements:[{name:"PersonBase"},{name:"union",raw:"'kjønn' | 'fødselsdato'",elements:[{name:"literal",value:"'kjønn'"},{name:"literal",value:"'fødselsdato'"}]}],raw:"Omit<PersonBase, 'kjønn' | 'fødselsdato'>",required:!1}},{key:"familiehendelsesdato",value:{name:"Date",required:!1}},{key:"startdatoFørsteStønadsperiode",value:{name:"Date",required:!1}},{key:"alleBarnaLever",value:{name:"boolean",required:!0}}]}}],raw:"ValgtBarn[]"},description:""}}};const H=({locale:t,saker:r,onChangeLocale:e,harGodkjentVilkår:i,søkerInfo:n,setHarGodkjentVilkår:d,setErEndringssøknad:j,setSøknadGjelderNyttBarn:u,mellomlagreSøknadOgNaviger:f})=>{const k=q(),$=ge(n.arbeidsforhold,f),[x,J]=y.useState(!1),z=C(),{oppdaterSøknadIState:B}=Te(),[W,O]=y.useState(!1),D=y.useMemo(()=>he(r,n.søker.barn),[r,n.søker.barn]),A=[...D].sort(je),Q=l=>{if(l.harForståttRettigheterOgPlikter!==!0)return;J(!0);const o=l.valgteBarn===T.SØKNAD_GJELDER_NYTT_BARN?void 0:D.find(m=>m.id===l.valgteBarn),E=o!==void 0&&!!o.kanSøkeOmEndring;let c;o!==void 0&&(c=Be(o,A),z(s.BARN_FRA_NESTE_SAK,c));const N=E&&o.sak!==void 0?r.find(m=>{var v;return m.saksnummer===((v=o.sak)==null?void 0:v.saksnummer)}):void 0,Z=c!==void 0?c.startdatoFørsteStønadsperiode:void 0,P=E&&N,L=o!==void 0&&o.sak!==void 0&&o.kanSøkeOmEndring===!1,ee=!P&&!L&&o!==void 0;let V=b.SØKERSITUASJON,U=!1;if(P){const m=pe(N,Z,o.fødselsdatoer);V=b.UTTAKSPLAN;const v=ue(n.søker,m,k,N.annenPart,o);B(v,m)}else if(L){const m=fe(o,k,n.søker.barn,n.søker.fnr);B(m)}else if(ee){const m=ce(o);B(m)}else U=!0;return d(l.harForståttRettigheterOgPlikter),j(E),u(U),$.goToNextStep(V)},R=te({defaultValues:{harForståttRettigheterOgPlikter:i}}),F=R.watch("valgteBarn"),M=F===T.SØKNAD_GJELDER_NYTT_BARN?void 0:D.find(l=>l.id===F),X=M!==void 0&&M.kanSøkeOmEndring===!0?k.formatMessage({id:"velkommen.endreSøknad"}):k.formatMessage({id:"velkommen.begynnMedSøknad"});return a.jsx(re,{formMethods:R,onSubmit:Q,children:a.jsxs(S,{gap:"10",children:[a.jsx(se,{locale:t,availableLocales:["nb","nn"],toggle:e}),a.jsx(le,{children:a.jsxs(S,{gap:"8",children:[a.jsx(h,{justify:"center",children:a.jsx(ye,{size:"xlarge",children:a.jsx(g,{id:"velkommen.tittel"})})}),a.jsx(de,{poster:!0,children:a.jsxs(S,{gap:"2",children:[a.jsx(g,{id:"velkommen.guidepanel.del1"}),a.jsx(g,{id:"velkommen.guidepanel.del2",values:{a:l=>a.jsx("a",{className:"lenke",rel:"noopener noreferrer",href:ie.foreldrepenger,children:l})}})]})}),a.jsx(w,{selectableBarn:A}),a.jsx(me,{variant:"info",children:a.jsx(g,{id:"velkommen.lagring.info"})}),a.jsx(ne,{name:"harForståttRettigheterOgPlikter",label:k.formatMessage({id:"velkommen.samtykke"}),validate:[l=>l!==!0?k.formatMessage({id:"valideringsfeil.velkommen.harForståttRettigheterOgPlikter.påkrevd"}):null],children:a.jsx(S,{gap:"5",children:a.jsxs(h,{gap:"1",children:[a.jsx(I,{children:a.jsx(g,{id:"velkommen.samtykkeIntro.del1"})}),a.jsx(ke,{})]})})}),a.jsx(h,{justify:"center",children:a.jsx(oe,{type:"submit",variant:"primary",disabled:x,loading:x,children:X})}),a.jsx(h,{justify:"center",children:a.jsx(I,{children:a.jsx("a",{className:"lenke",href:"#",onClick:l=>{l.preventDefault(),O(!0)},children:a.jsx(g,{id:"velkommen.lesMerOmPersonopplysninger"})})})}),a.jsx(ve,{isOpen:W,onRequestClose:()=>O(!1)})]})})]})})},Qe=H;H.__docgenInfo={description:"",methods:[],displayName:"Velkommen"};export{Qe as V};
