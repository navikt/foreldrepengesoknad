import{r as c}from"./index-CTjT7uj6.js";import{g as S}from"./apiInterceptor-D-WKbiXB.js";import{j as p}from"./jsx-runtime-Cw0GR0a5.js";import"./Tidsperioden-BBrWkrto.js";import"./index-CCQ3W5xA.js";import{y as f,v as g,z as v,C,E as x}from"./useFpNavigator-BpJPmo6p.js";import{i as D,l as H,m as K,j as B}from"./FpDataContext-7C49oNtd.js";import"./Uttaksdagen-C7qvZjyy.js";import"./_baseToString-Cq6MbKF_.js";import"./_createSet-D2BJ0WVx.js";import{c as y}from"./barnUtils-B98nIsJr.js";import{c as U}from"./eksisterendeSakUtils-ZfLyImQg.js";var E=(t=>(t.UNFETCHED="Unfetched",t.IN_PROGRESS="InProgress",t.FINISHED="Finished",t))(E||{});const R={config:{},isSuspended:!1},ct=(t,e=R)=>{const[r,s]=c.useState(),[u,o]=c.useState(null),[n,a]=c.useState(E.UNFETCHED),d=e.fnr?S(e.fnr):S();return c.useEffect(()=>{!e.isSuspended&&n===E.UNFETCHED&&(a(E.IN_PROGRESS),d.get(t,e.config).then(i=>{i.data===""?s(void 0):s(i.data),a(E.FINISHED)}).catch(i=>{o(i),a(E.FINISHED)}))},[e,t,d,n]),{data:r,error:u,requestStatus:n}},M=(t,e,r=R)=>{const[s,u]=c.useState(),[o,n]=c.useState(null),[a,d]=c.useState(E.UNFETCHED),i=r.fnr?S(r.fnr):S();return c.useEffect(()=>{!r.isSuspended&&a===E.UNFETCHED&&(d(E.IN_PROGRESS),i.post(t,e,r.config).then(l=>{l.data===""?u(void 0):u(l.data),d(E.FINISHED)}).catch(l=>{n(l),d(E.FINISHED)}))},[r,t,i,a,e]),{data:s,error:o,requestStatus:a}};var N=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER="STØNADSKONTOER",t))(N||{});const _={},O=c.createContext(_),h=c.createContext(void 0),q=({children:t,initialState:e})=>{const[r,s]=c.useReducer((u,o)=>{switch(o.type){case"update":return{...u,[o.key]:[o.hash,o.data]};case"reset":return{};default:throw new Error}},e||_);return p.jsx(O.Provider,{value:r,children:p.jsx(h.Provider,{value:s,children:t})})},V=(t,e)=>{const s=c.useContext(O)[t];return s&&s[0]===e?s[1]:void 0},G=(t,e)=>{const r=c.useContext(h);return s=>{r&&r({type:"update",key:t,hash:e,data:s})}};q.__docgenInfo={description:"",methods:[],displayName:"FpApiDataContext",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},initialState:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    [FpApiDataType.ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.NESTE_SAK_ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.STØNADSKONTOER]?: [number, TilgjengeligeStønadskontoer];
}`,signature:{properties:[]}},description:""}}};const j=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),k=t=>{let e=0;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);e=(e<<5)-e+s,e=e&e}return e},w={[N.ANNEN_PART_VEDTAK]:"/rest/innsyn/v2/annenPartVedtak",[N.NESTE_SAK_ANNEN_PART_VEDTAK]:"/rest/innsyn/v2/annenPartVedtak",[N.STØNADSKONTOER]:"/rest/konto"},ut=(t,e,r)=>{var l;const s=k(JSON.stringify(j(e))),u=V(t,s),o=!!u,n=G(t,s),{data:a,requestStatus:d,error:i}=M(w[t],e,{config:{withCredentials:t!==N.STØNADSKONTOER},isSuspended:o||r});return c.useEffect(()=>{a&&n(a)},[a]),(l=i==null?void 0:i.message)!=null&&l.includes("Ugyldig ident")?{data:void 0,requestStatus:E.FINISHED,error:null}:{data:o?u:a,requestStatus:o?E.FINISHED:d,error:i}},L=(t,e)=>t?!0:f(e)?!!e.harRettPåForeldrepengerINorge:!1,z=(t,e)=>t?f(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,J=(t,e)=>{if(D(t)||B(t))return e||t.termindato},Y=(t,e)=>e||t||void 0,Q=(t,e,r)=>t&&r?r:e,W=(t,e,r,s,u)=>r||s?"ALENEOMSORG":t&&e||u?"BEGGE_RETT":"BARE_SØKER_RETT",Et=(t,e,r,s,u,o)=>{const n=f(e)?e:void 0,a=g(r.rolle),d=v(a,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),i=C(!a,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),l=s!==void 0?s.startdatoFørsteStønadsperiode:void 0,m=U(u,t,a,y(t),l),I=Q(a,t.antallBarn,m==null?void 0:m.grunnlag.antallBarn),P=Y(o==null?void 0:o.grunnlag.termindato,m==null?void 0:m.grunnlag.termindato),A=g(r.rolle),T=g(r.rolle),F=f(e)&&e.harRettPåForeldrepengerIEØS;return{rettighetstype:W(L(A,e),z(A,e),i||!1,d||!1,F||!1),brukerrolle:T?"FAR":"MOR",antallBarn:I.toString(),fødselsdato:D(t)?t.fødselsdatoer[0]:void 0,termindato:J(t,P),omsorgsovertakelseDato:H(t)||K(t)?t.adopsjonsdato:void 0,morHarUføretrygd:x(e,T),familieHendelseDatoNesteSak:l}};export{q as F,E as R,N as a,Q as b,Y as c,ct as d,Et as g,ut as u};
