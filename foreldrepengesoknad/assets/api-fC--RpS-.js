import{S as it,d3 as B,d4 as d,s as I,d5 as _,a as q,d6 as P,d7 as $,d8 as ot,d9 as nt,da as at,db as V,n as X,r as y,b as ht,u as ut}from"./iframe-BWtMwE3k.js";var ct=class extends it{constructor(e,t){super(),this.options=t,this.#s=e,this.#i=null,this.#r=B(),this.options.experimental_prefetchInRender||this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#s;#t=void 0;#p=void 0;#e=void 0;#n;#c;#r;#i;#y;#l;#f;#a;#h;#o;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),J(this.#t,this.options)?this.#u():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return A(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return A(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,s=this.#t;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof d(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#T(),this.#t.setOptions(this.options),t._defaulted&&!I(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&K(this.#t,s,this.options,t)&&this.#u(),this.updateResult(),r&&(this.#t!==s||d(this.options.enabled,this.#t)!==d(t.enabled,this.#t)||_(this.options.staleTime,this.#t)!==_(t.staleTime,this.#t))&&this.#b();const i=this.#m();r&&(this.#t!==s||d(this.options.enabled,this.#t)!==d(t.enabled,this.#t)||i!==this.#o)&&this.#R(i)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),s=this.createResult(t,e);return ft(this,s)&&(this.#e=s,this.#c=this.options,this.#n=this.#t.state),s}getCurrentResult(){return this.#e}trackResult(e,t){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),t?.(r),Reflect.get(s,r))})}trackProp(e){this.#d.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),s=this.#s.getQueryCache().build(this.#s,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#e))}#u(e){this.#T();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(q)),t}#b(){this.#_();const e=_(this.options.staleTime,this.#t);if(P||this.#e.isStale||!$(e))return;const s=ot(this.#e.dataUpdatedAt,e)+1;this.#a=setTimeout(()=>{this.#e.isStale||this.updateResult()},s)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#R(e){this.#w(),this.#o=e,!(P||d(this.options.enabled,this.#t)===!1||!$(this.#o)||this.#o===0)&&(this.#h=setInterval(()=>{(this.options.refetchIntervalInBackground||nt.isFocused())&&this.#u()},this.#o))}#g(){this.#b(),this.#R(this.#m())}#_(){this.#a&&(clearTimeout(this.#a),this.#a=void 0)}#w(){this.#h&&(clearInterval(this.#h),this.#h=void 0)}createResult(e,t){const s=this.#t,r=this.options,i=this.#e,n=this.#n,o=this.#c,a=e!==s?e.state:this.#p,{state:h}=e;let c={...h},m=!1,l;if(t._optimisticResults){const f=this.hasListeners(),w=!f&&J(e,t),R=f&&K(e,s,t,r);(w||R)&&(c={...c,...at(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:F,errorUpdatedAt:j,status:b}=c;l=c.data;let M=!1;if(t.placeholderData!==void 0&&l===void 0&&b==="pending"){let f;i?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(f=i.data,M=!0):f=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,f!==void 0&&(b="success",l=V(i?.data,f,t),m=!0)}if(t.select&&l!==void 0&&!M)if(i&&l===n?.data&&t.select===this.#y)l=this.#l;else try{this.#y=t.select,l=t.select(l),l=V(i?.data,l,t),this.#l=l,this.#i=null}catch(f){this.#i=f}this.#i&&(F=this.#i,l=this.#l,j=Date.now(),b="error");const S=c.fetchStatus==="fetching",O=b==="pending",x=b==="error",N=O&&S,H=l!==void 0,p={status:b,fetchStatus:c.fetchStatus,isPending:O,isSuccess:b==="success",isError:x,isInitialLoading:N,isLoading:N,data:l,dataUpdatedAt:c.dataUpdatedAt,error:F,errorUpdatedAt:j,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>a.dataUpdateCount||c.errorUpdateCount>a.errorUpdateCount,isFetching:S,isRefetching:S&&!O,isLoadingError:x&&!H,isPaused:c.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:x&&H,isStale:D(e,t),refetch:this.refetch,promise:this.#r,isEnabled:d(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const f=T=>{p.status==="error"?T.reject(p.error):p.data!==void 0&&T.resolve(p.data)},w=()=>{const T=this.#r=p.promise=B();f(T)},R=this.#r;switch(R.status){case"pending":e.queryHash===s.queryHash&&f(R);break;case"fulfilled":(p.status==="error"||p.data!==R.value)&&w();break;case"rejected":(p.status!=="error"||p.error!==R.reason)&&w();break}}return p}updateResult(){const e=this.#e,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#c=this.options,this.#n.data!==void 0&&(this.#f=this.#t),I(t,e))return;this.#e=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#d.size)return!0;const n=new Set(i??this.#d);return this.options.throwOnError&&n.add("error"),Object.keys(this.#e).some(o=>{const u=o;return this.#e[u]!==e[u]&&n.has(u)})};this.#v({listeners:s()})}#T(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#p=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#v(e){X.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#e)}),this.#s.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function lt(e,t){return d(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function J(e,t){return lt(e,t)||e.state.data!==void 0&&A(e,t,t.refetchOnMount)}function A(e,t,s){if(d(t.enabled,e)!==!1&&_(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&D(e,t)}return!1}function K(e,t,s,r){return(e!==t||d(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&D(e,s)}function D(e,t){return d(t.enabled,e)!==!1&&e.isStaleByTime(_(t.staleTime,e))}function ft(e,t){return!I(e.getCurrentResult(),t)}var Y=y.createContext(!1),dt=()=>y.useContext(Y);Y.Provider;function pt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var yt=y.createContext(pt()),bt=()=>y.useContext(yt),mt=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Rt=e=>{y.useEffect(()=>{e.clearReset()},[e])},gt=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&e.data===void 0||ht(s,[e.error,r])),_t=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...r)=>t(s(...r)):t(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},wt=(e,t)=>e.isLoading&&e.isFetching&&!t,Tt=(e,t)=>e?.suspense&&t.isPending,z=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function vt(e,t,s){const r=dt(),i=bt(),n=ut(),o=n.defaultQueryOptions(e);n.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",_t(o),mt(o,i),Rt(i);const u=!n.getQueryCache().get(o.queryHash),[a]=y.useState(()=>new t(n,o)),h=a.getOptimisticResult(o),c=!r&&e.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(m=>{const l=c?a.subscribe(X.batchCalls(m)):q;return a.updateResult(),l},[a,c]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),y.useEffect(()=>{a.setOptions(o)},[o,a]),Tt(o,h))throw z(o,a,i);if(gt({result:h,errorResetBoundary:i,throwOnError:o.throwOnError,query:n.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;return n.getDefaultOptions().queries?._experimental_afterQuery?.(o,h),o.experimental_prefetchInRender&&!P&&wt(h,r)&&(u?z(o,a,i):n.getQueryCache().get(o.queryHash)?.promise)?.catch(q).finally(()=>{a.updateResult()}),o.notifyOnChangeProps?h:a.trackResult(h)}function Nt(e,t){return vt(e,ct)}function Ht(e){return e}class G extends Error{response;request;options;constructor(t,s,r){const i=t.status||t.status===0?t.status:"",n=t.statusText||"",o=`${i} ${n}`.trim(),u=o?`status code ${o}`:"an unknown error";super(`Request failed with ${u}: ${s.method} ${s.url}`),this.name="HTTPError",this.response=t,this.request=s,this.options=r}}class Z extends Error{request;constructor(t){super(`Request timed out: ${t.method} ${t.url}`),this.name="TimeoutError",this.request=t}}const g=e=>e!==null&&typeof e=="object",v=(...e)=>{for(const t of e)if((!g(t)||Array.isArray(t))&&t!==void 0)throw new TypeError("The `options` argument must be an object");return L({},...e)},tt=(e={},t={})=>{const s=new globalThis.Headers(e),r=t instanceof globalThis.Headers,i=new globalThis.Headers(t);for(const[n,o]of i.entries())r&&o==="undefined"||o===void 0?s.delete(n):s.set(n,o);return s};function E(e,t,s){return Object.hasOwn(t,s)&&t[s]===void 0?[]:L(e[s]??[],t[s]??[])}const et=(e={},t={})=>({beforeRequest:E(e,t,"beforeRequest"),beforeRetry:E(e,t,"beforeRetry"),afterResponse:E(e,t,"afterResponse"),beforeError:E(e,t,"beforeError")}),L=(...e)=>{let t={},s={},r={};for(const i of e)if(Array.isArray(i))Array.isArray(t)||(t=[]),t=[...t,...i];else if(g(i)){for(let[n,o]of Object.entries(i))g(o)&&n in t&&(o=L(t[n],o)),t={...t,[n]:o};g(i.hooks)&&(r=et(r,i.hooks),t.hooks=r),g(i.headers)&&(s=tt(s,i.headers),t.headers=s)}return t},Et=(()=>{let e=!1,t=!1;const s=typeof globalThis.ReadableStream=="function",r=typeof globalThis.Request=="function";if(s&&r)try{t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")}catch(i){if(i instanceof Error&&i.message==="unsupported BodyInit type")return!1;throw i}return e&&!t})(),Ct=typeof globalThis.AbortController=="function",St=typeof globalThis.ReadableStream=="function",Ot=typeof globalThis.FormData=="function",st=["get","post","put","patch","head","delete"],xt={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},k=2147483647,rt=Symbol("stop"),kt={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},It={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},qt=e=>st.includes(e)?e.toUpperCase():e,Pt=["get","put","head","delete","options","trace"],At=[408,413,429,500,502,503,504],Ut=[413,429,503],W={limit:2,methods:Pt,statusCodes:At,afterStatusCodes:Ut,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:e=>.3*2**(e-1)*1e3},Dt=(e={})=>{if(typeof e=="number")return{...W,limit:e};if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return{...W,...e}};async function Lt(e,t,s,r){return new Promise((i,n)=>{const o=setTimeout(()=>{s&&s.abort(),n(new Z(e))},r.timeout);r.fetch(e,t).then(i).catch(n).then(()=>{clearTimeout(o)})})}async function Qt(e,{signal:t}){return new Promise((s,r)=>{t&&(t.throwIfAborted(),t.addEventListener("abort",i,{once:!0}));function i(){clearTimeout(n),r(t.reason)}const n=setTimeout(()=>{t?.removeEventListener("abort",i),s()},e)})}const Ft=(e,t)=>{const s={};for(const r in t)!(r in It)&&!(r in kt)&&!(r in e)&&(s[r]=t[r]);return s};class C{static create(t,s){const r=new C(t,s),i=async()=>{if(typeof r._options.timeout=="number"&&r._options.timeout>k)throw new RangeError(`The \`timeout\` option cannot be greater than ${k}`);await Promise.resolve();let u=await r._fetch();for(const a of r._options.hooks.afterResponse){const h=await a(r.request,r._options,r._decorateResponse(u.clone()));h instanceof globalThis.Response&&(u=h)}if(r._decorateResponse(u),!u.ok&&r._options.throwHttpErrors){let a=new G(u,r.request,r._options);for(const h of r._options.hooks.beforeError)a=await h(a);throw a}if(r._options.onDownloadProgress){if(typeof r._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!St)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(u.clone(),r._options.onDownloadProgress)}return u},o=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(i):i();for(const[u,a]of Object.entries(xt))o[u]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||a);const h=await o;if(u==="json"){if(h.status===204||(await h.clone().arrayBuffer()).byteLength===0)return"";if(s.parseJson)return s.parseJson(await h.text())}return h[u]()};return o}request;abortController;_retryCount=0;_input;_options;constructor(t,s={}){if(this._input=t,this._options={...s,headers:tt(this._input.headers,s.headers),hooks:et({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},s.hooks),method:qt(s.method??this._input.method??"GET"),prefixUrl:String(s.prefixUrl||""),retry:Dt(s.retry),throwHttpErrors:s.throwHttpErrors!==!1,timeout:s.timeout??1e4,fetch:s.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(Ct){this.abortController=new globalThis.AbortController;const r=this._options.signal??this._input.signal;r?.aborted&&this.abortController.abort(r?.reason),r?.addEventListener("abort",()=>{this.abortController.abort(r.reason)}),this._options.signal=this.abortController.signal}if(Et&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const i="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),n=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,i);(Ot&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(n,{...this.request}),this._options)}}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount>this._options.retry.limit||t instanceof Z)throw t;if(t instanceof G){if(!this._options.retry.statusCodes.includes(t.response.status))throw t;const r=t.response.headers.get("Retry-After")??t.response.headers.get("RateLimit-Reset")??t.response.headers.get("X-RateLimit-Reset")??t.response.headers.get("X-Rate-Limit-Reset");if(r&&this._options.retry.afterStatusCodes.includes(t.response.status)){let i=Number(r)*1e3;Number.isNaN(i)?i=Date.parse(r)-Date.now():i>=Date.parse("2024-01-01")&&(i-=Date.now());const n=this._options.retry.maxRetryAfter??i;return i<n?i:n}if(t.response.status===413)throw t}const s=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,s)}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(s){const r=Math.min(this._calculateRetryDelay(s),k);if(this._retryCount<1)throw s;await Qt(r,{signal:this._options.signal});for(const i of this._options.hooks.beforeRetry)if(await i({request:this.request,options:this._options,error:s,retryCount:this._retryCount})===rt)return;return this._retry(t)}}async _fetch(){for(const r of this._options.hooks.beforeRequest){const i=await r(this.request,this._options);if(i instanceof Request){this.request=i;break}if(i instanceof Response)return i}const t=Ft(this.request,this._options),s=this.request;return this.request=s.clone(),this._options.timeout===!1?this._options.fetch(s,t):Lt(s,t,this.abortController,this._options)}_stream(t,s){const r=Number(t.headers.get("content-length"))||0;let i=0;return t.status===204?(s&&s({percent:1,totalBytes:r,transferredBytes:i},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(n){const o=t.body.getReader();s&&s({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array);async function u(){const{done:a,value:h}=await o.read();if(a){n.close();return}if(s){i+=h.byteLength;const c=r===0?0:i/r;s({percent:c,transferredBytes:i,totalBytes:r},h)}n.enqueue(h),await u()}await u()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}/*! MIT License © Sindre Sorhus */const U=e=>{const t=(s,r)=>C.create(s,v(e,r));for(const s of st)t[s]=(r,i)=>C.create(r,v(e,i,{method:s}));return t.create=s=>U(v(s)),t.extend=s=>(typeof s=="function"&&(s=s(e??{})),U(v(e,s))),t.stop=rt,t},Q=U(),Bt=e=>({queryKey:["ANNEN_PART_VEDTAK",e],queryFn:async()=>{const t=await Q.post(".//rest/innsyn/v2/annenPartVedtak",{json:e}).json();return t===""?null:t},select:t=>{if(t!==null)return t}}),$t=e=>({queryKey:["TILGJENGELIGE_STONADSKONTOER",e],queryFn:()=>Q.post(".//rest/konto",{json:e}).json(),staleTime:1/0}),Vt=e=>({queryKey:["TRENGER_DOKUMENTERER_MORS_ARBEID",e],queryFn:()=>Q.post(".//rest/innsyn/v2/trengerDokumentereMorsArbeid",{json:e}).json()});export{G as H,Bt as a,$t as b,Q as k,Ht as q,Vt as t,Nt as u};
