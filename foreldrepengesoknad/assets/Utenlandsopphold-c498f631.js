import{j as t}from"./jsx-runtime-69eee039.js";import{u as L,H as Q,F as h,B as m,i as a,d as f,v as oe,p as de,q as ae,b as le,s as se,r as z,t as K,w as $,x as J,k as re,y as T,z as V,E as B,e as N,m as ie,a as C}from"./validationUtils-98d33cd3.js";import"./index-e13aeee6.js";import{R as pe}from"./index-7c191284.js";import{T as me,M as ue,e as ce,f as he,Y as g,g as G,h as E}from"./getTypedFormComponents-b55cb5c1.js";import{S as _,a as ge}from"./mapSøkerinfoDTO-d68bd2d0.js";import{u as fe}from"./useOnValidSubmit-6a51f59a.js";import{a as xe,L as ke}from"./useSøknad-73e632aa.js";import{u as Ne,a as ve,b as je,s as Se,c as be}from"./useSaveLoadedRoute-952bea34.js";import{Q as Be}from"./index-47edccfa.js";import{I as x,x as q,y as w}from"./dateUtils-3d3f8269.js";import{c as W,a as P}from"./formUtils-17a5d191.js";import{a as Ie}from"./submitUtils-6c106b54.js";import{B as ye,L as De}from"./Link-00530630.js";function Me(e){var o=e.name,d=e.labels,l=e.listRenderer,c=e.formRenderer,r=e.sortFunc,s=e.onAfterChange,p=e.dialogWidth,n=e.shouldCloseOnOverlayClick,i=e.error,X=e.maxItems,Z=e.useFastField,ee=e.confirmDelete,R=e.validate,v=pe.useContext(me),te=Z?ce:he;return t.jsx(te,{name:o,validate:R?function(j){return R(j,o)}:void 0,children:function(j){var S=j.field,A=j.form;return t.jsx(ue,{labels:d,items:S.value,error:i||(v?v.getAndRenderFieldErrorMessage(S,A):void 0),maxItems:X,dialogWidth:p,shouldCloseOnOverlayClick:n,confirmDelete:ee,onChange:function(k){var b=r?k.sort(r):k;A.setFieldValue(S.name,b),s&&s(b),v&&v.onAfterFieldValueSet()},formRenderer:c,listRenderer:function(k){var b=k.onEdit,ne=k.onDelete;return l({items:S.value,onDelete:ne,onEdit:b})}})}})}var u=(e=>(e.harBoddINorgeSiste12Mnd="harBoddINorgeSiste12Mnd",e.utenlandsoppholdSiste12Mnd="utenlandsoppholdSiste12Mnd",e.skalBoINorgeNeste12Mnd="skalBoINorgeNeste12Mnd",e.utenlandsoppholdNeste12Mnd="utenlandsoppholdNeste12Mnd",e))(u||{});const Fe={harBoddINorgeSiste12Mnd:g.UNANSWERED,utenlandsoppholdSiste12Mnd:[],skalBoINorgeNeste12Mnd:g.UNANSWERED,utenlandsoppholdNeste12Mnd:[]},I=G(),Ue={[u.harBoddINorgeSiste12Mnd]:{isAnswered:({harBoddINorgeSiste12Mnd:e})=>e!==g.UNANSWERED,isIncluded:()=>!0,visibilityFilter:({skalBoINorgeNeste12Mnd:e})=>e!==g.UNANSWERED},[u.utenlandsoppholdSiste12Mnd]:{isAnswered:({utenlandsoppholdSiste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({harBoddINorgeSiste12Mnd:e})=>e===g.NO},[u.skalBoINorgeNeste12Mnd]:{isAnswered:({skalBoINorgeNeste12Mnd:e})=>e!==g.UNANSWERED,isIncluded:()=>!0},[u.utenlandsoppholdNeste12Mnd]:{isAnswered:({utenlandsoppholdNeste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({skalBoINorgeNeste12Mnd:e})=>e===g.NO}},Oe=Be(Ue),Le=e=>{const{fom:o,landkode:d,tom:l}=e;return o!==void 0&&d!==void 0&&l!==void 0},y=G(),Re=e=>({fom:e.fom,tom:e.tom,landkode:e.landkode}),F=({maxDate:e,minDate:o,bosted:d,onSubmit:l,onCancel:c,erFremtidigOpphold:r})=>{const s=L(),p=n=>{const i={...d,fom:n.fom,tom:n.tom,landkode:n.landkode};if(Le(i))l(i);else throw new Error("BostedUtlandForm: Formvalues is not a valid BostedUtland on submit.")};return t.jsx(y.FormikWrapper,{initialValues:d?Re(d):{},onSubmit:p,renderForm:({values:n})=>t.jsxs(y.Form,{onCancel:c,showButtonArrows:!1,submitButtonLabel:"Legg til",children:[t.jsx(Q,{size:"medium",as:"h1",children:t.jsx(h,{id:"utenlandsopphold.leggTilUtenlandsopphold.tittel"})}),t.jsx(m,{children:t.jsx(y.DateIntervalPicker,{legend:a(s,"utenlandsopphold.leggTilUtenlandsopphold.tidsrom"),fromDatepickerProps:{name:"fom",label:a(s,"utenlandsopphold.leggTilUtenlandsopphold.fraogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:o,maxDate:x(n.tom)||e,validate:i=>n.tom&&n.fom&&f(n.tom).isSame(n.fom)?"Fra og med dato kan ikke være samme som til og med dato":q.validateFromDateInRange({intl:s,date:x(i),minDate:o,maxDate:e,errorKey:"valideringsfeil.fraOgMedDato.førTilDato",toDate:x(n.tom),disableWeekend:!1})},toDatepickerProps:{name:"tom",label:a(s,"utenlandsopphold.leggTilUtenlandsopphold.tilogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:x(n.fom)||o,maxDate:e,validate:i=>n.tom&&n.fom&&f(n.tom).isSame(n.fom)?"Til og med dato kan ikke være samme som fra og med dato":q.validateToDateInRange({intl:s,date:x(i),minDate:o,maxDate:e,errorKey:"valideringsfeil.tilOgMedDato.etterFraDato",fromDate:x(n.fom),disableWeekend:!1})}})}),t.jsx(m,{margin:"xl",children:t.jsx(y.CountrySelect,{name:"landkode",label:r?a(s,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandSkalDuBoI"):a(s,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandHarDuBoddI"),validate:i=>oe(i,a(s,r?"valideringsfeil.utenlandsopphold.landDuSkalBoIPåkrevd":"valideringsfeil.utenlandsopphold.landDuHarBoddIPåkrevd")),useAlpha3Code:!1})})]})})};try{F.displayName="BostedUtlandForm",F.__docgenInfo={description:"",displayName:"BostedUtlandForm",props:{minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},bosted:{defaultValue:null,description:"",name:"bosted",required:!1,type:{name:"BostedUtland"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: BostedUtland) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const M=le("bostedUtlandList"),U=({bosteder:e,onDelete:o,onEdit:d})=>{const l=L(),c=r=>{const s=E(r.landkode,l.locale);return t.jsxs("div",{className:M.element("label"),children:[t.jsxs("span",{className:M.element("land"),children:[d&&t.jsx(ae,{onClick:()=>d(r),children:s}),!d&&t.jsx("span",{children:s})]}),t.jsxs("span",{className:M.element("dato"),children:[w(f(r.fom).toDate())," -"," ",w(f(r.tom).toDate())]})]})};return t.jsx(de,{getItemId:r=>r.id,getItemTitle:r=>E(r.landkode,l.locale),onDelete:o,onEdit:d,labelRenderer:c,items:e})};try{U.displayName="BostedUtlandList",U.__docgenInfo={description:"",displayName:"BostedUtlandList",props:{bosteder:{defaultValue:null,description:"",name:"bosteder",required:!0,type:{name:"BostedUtland[]"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((opphold: BostedUtland) => void)"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((opphold: BostedUtland) => void)"}}}}}catch{}function D({name:e,minDate:o,maxDate:d,validate:l,labels:c,erFremtidigOpphold:r}){return t.jsx(Me,{name:e,labels:c,validate:l,dialogWidth:"narrow",sortFunc:se,formRenderer:({onSubmit:s,onCancel:p,item:n})=>t.jsx(F,{bosted:n,minDate:o,maxDate:d,onSubmit:s,onCancel:p,erFremtidigOpphold:r}),listRenderer:({items:s,onEdit:p,onDelete:n})=>t.jsx(U,{bosteder:s,onEdit:p,onDelete:n})})}try{D.displayName="BostedUtlandListAndDialog",D.__docgenInfo={description:"",displayName:"BostedUtlandListAndDialog",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"FieldNames"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"any"}},minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"ModalFormAndListLabels"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const H=e=>({fom:e.tidsperiode.fom,tom:e.tidsperiode.tom,landkode:e.land}),Ae=e=>({...Fe,harBoddINorgeSiste12Mnd:W(e.iNorgeSiste12Mnd),skalBoINorgeNeste12Mnd:W(e.iNorgeNeste12Mnd),utenlandsoppholdNeste12Mnd:e.senereOpphold.map(H),utenlandsoppholdSiste12Mnd:e.tidligereOpphold.map(H)}),Y=e=>e.map(o=>({land:o.landkode,tidsperiode:{fom:o.fom,tom:o.tom}})),Te=e=>{const{harBoddINorgeSiste12Mnd:o,skalBoINorgeNeste12Mnd:d,utenlandsoppholdNeste12Mnd:l,utenlandsoppholdSiste12Mnd:c}=e;return{iNorgeSiste12Mnd:P(o),iNorgeNeste12Mnd:P(d),senereOpphold:d===g.NO?Y(l):[],tidligereOpphold:o===g.NO?Y(c):[]}},Ve=e=>o=>{if(o.length===0)return a(e,"valideringsfeil.utenlandsopphold.neste12Måneder.ikkeRegistrert");const d=o.map(l=>({from:f(l.fom).toDate(),to:f(l.tom).toDate()}));if(z(d))return a(e,"valideringsfeil.utenlandsopphold.overlapp");if(K(d,{from:new Date,to:$}))return a(e,"valideringsfeil.utenlandsoppholdUtenforPeriode")},Ce=e=>o=>{if(o.length===0)return a(e,"valideringsfeil.utenlandsopphold.siste12Måneder.ikkeRegistrert");const d=o.map(l=>({from:f(l.fom).toDate(),to:f(l.tom).toDate()}));if(z(d))return a(e,"valideringsfeil.utenlandsopphold.overlapp");if(K(d,{from:J,to:new Date}))return a(e,"valideringsfeil.utenlandsoppholdUtenforPeriode")},O=()=>{const e=L(),{informasjonOmUtenlandsopphold:o}=xe(),d=p=>{const n=Te(p);return[ge.setInformasjonOmUtenlandsopphold(n)]},{handleSubmit:l,isSubmitting:c}=fe(d,_.INNTEKTSINFORMASJON,p=>Ie(p)),r=Ne(),s=ve();return je(_.UTENLANDSOPPHOLD),t.jsx(I.FormikWrapper,{initialValues:Ae(o),onSubmit:l,renderForm:({values:p})=>{const n=Oe.getVisbility(p);return t.jsx(re,{bannerTitle:a(e,"søknad.pageheading"),activeStepId:"utenlandsopphold",pageTitle:a(e,"søknad.utenlandsopphold"),onCancel:r,onContinueLater:s,steps:Se(e,!1),children:t.jsxs(I.Form,{includeButtons:!1,includeValidationSummary:!0,children:[t.jsx(m,{visible:n.isVisible(u.skalBoINorgeNeste12Mnd),padBottom:"l",children:t.jsx(I.YesOrNoQuestion,{legend:a(e,"utenlandsopphold.neste12Måneder.spørsmål"),name:u.skalBoINorgeNeste12Mnd,description:a(e,"utenlandsopphold.neste12MånederInfotekst"),labels:{yes:a(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddINorge"),no:a(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:i=>T(i,"valideringsfeil.utenlandsopphold.skalBoINorgePåkrevd")})}),t.jsx(m,{padBottom:"xl",visible:n.isVisible(u.utenlandsoppholdNeste12Mnd),children:t.jsx(D,{name:u.utenlandsoppholdNeste12Mnd,minDate:V,maxDate:$,labels:{addLabel:a(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold neste 12 måneder"},erFremtidigOpphold:!0,validate:Ve(e)})}),t.jsx(m,{padBottom:"l",visible:n.isVisible(u.harBoddINorgeSiste12Mnd),children:t.jsx(I.YesOrNoQuestion,{legend:a(e,"utenlandsopphold.siste12Måneder.spørsmål"),name:u.harBoddINorgeSiste12Mnd,description:a(e,"utenlandsopphold.siste12MånederInfotekst"),labels:{yes:a(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddINorge"),no:a(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:i=>T(i,"valideringsfeil.utenlandsopphold.harBoddINorgePåkrevd")})}),t.jsx(m,{padBottom:"xl",visible:n.isVisible(u.utenlandsoppholdSiste12Mnd),children:t.jsx(D,{minDate:J,maxDate:V,name:u.utenlandsoppholdSiste12Mnd,labels:{addLabel:a(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold siste 12 måneder"},erFremtidigOpphold:!1,validate:Ce(e)})}),t.jsx(m,{padBottom:"xl",children:t.jsxs(B,{"aria-label":"Informasjon om utenlandsopphold",children:[t.jsxs(B.Header,{children:[t.jsx(B.Title,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.header.tittel"})}),t.jsx(N,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.header.ingress"})})]}),t.jsxs(B.Content,{children:[t.jsx(m,{padBottom:"l",children:t.jsx(N,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon1"})})}),t.jsx(m,{padBottom:"l",children:t.jsx(N,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon2"})})}),t.jsx(m,{padBottom:"xl",children:t.jsx(N,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon3"})})}),t.jsx(m,{padBottom:"l",children:t.jsx(Q,{as:"h4",size:"medium",children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.undertittel"})})}),t.jsx(m,{padBottom:"l",children:t.jsx(N,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon4"})})}),t.jsx(ye,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon5",values:{a:i=>t.jsx(De,{href:"https://nav.no/foreldrepenger#utland",rel:"noreferrer",target:"_blank",children:i})}})})]})]})}),t.jsx(m,{children:t.jsxs(ie,{children:[t.jsx(C,{variant:"secondary",as:ke,to:be("utenlandsopphold"),children:t.jsx(h,{id:"backlink.label"})}),n.areAllQuestionsAnswered()&&t.jsx(C,{type:"submit",disabled:c,loading:c,children:a(e,"søknad.gåVidere")})]})})]})})}})},Xe=O;try{O.displayName="Utenlandsopphold",O.__docgenInfo={description:"",displayName:"Utenlandsopphold",props:{}}}catch{}export{Xe as U};
//# sourceMappingURL=Utenlandsopphold-c498f631.js.map
