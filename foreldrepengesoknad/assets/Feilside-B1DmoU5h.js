import{j as r}from"./jsx-runtime-_e34SzbC.js";import{E as x,H as m,z as y,J as j,b as c,B as u,m as w}from"./Tidsperioden-lcgOIGrW.js";import"./index--IHLcpuH.js";import"./index-DVXBtNgz.js";import"./_baseToString-VGUwjf1B.js";import"./_createSet-CoetV_mz.js";import{n as f}from"./amplitude.esm-BThBy0fb.js";import{g as i}from"./apiInterceptor-ChqlQpSB.js";import{a as g}from"./useRequest-DZS6KsAA.js";import{c as b}from"./FpDataContext-BcznBdmF.js";import{L as v,H as C,B as E}from"./Link-SOWRV7cb.js";const A=(t,e)=>x(e)?e:!Array.isArray(e)&&m(e,[m.HTML5_FMT.DATE,"YYYY-MM-DDTHH:mm:ss.SSSZ"],!0).isValid()?new Date(e):e,D=t=>{if(t)return JSON.parse(t,A)},B="/rest/soknad",H="/rest/soknad/endre",M=()=>{const{data:t,error:e}=g("/rest/sokerinfo",{config:{withCredentials:!0}});return{søkerinfoData:t,søkerinfoError:e}},T=()=>{const{data:t,error:e}=g("/rest/innsyn/v2/saker",{config:{withCredentials:!0}});return{sakerData:t,sakerError:e}},F=()=>{const{data:t,error:e,requestStatus:n}=g("/rest/storage/foreldrepenger",{config:{transformResponse:D,withCredentials:!0}});return{storageData:t,storageError:e,storageStatus:n}},I=(t,e)=>i(e).post("/rest/storage/foreldrepenger",t,{withCredentials:!0}),U=t=>i(t).get("/rest/storage/kvittering/foreldrepenger",{withCredentials:!0,timeout:15*1e3}),L=(t,e,n)=>{const s=t.erEndringssøknad?H:B;return i(e).post(s,t,{withCredentials:!0,timeout:120*1e3,headers:{"content-type":"application/json;"},signal:n})},N=(t,e)=>i(t).delete("/rest/storage/foreldrepenger",{withCredentials:!0,signal:e}),Y=(t,e,n)=>{const s=e.reduce((o,a)=>(a.uuid&&o.push(a.uuid),o),[]);return i(t).delete("/rest/storage/foreldrepenger/vedlegg",{withCredentials:!0,data:s,signal:n})},_={storeAppState:I,getStorageKvittering:U,useStoredAppState:F,useSøkerinfo:M,sendSøknad:L,useGetSaker:T,deleteMellomlagretSøknad:N,deleteMellomlagredeVedlegg:Y},O=(t,e,n=!0)=>{if(n){console.log({eventName:t,eventData:e});return}setTimeout(()=>{try{f&&f.getInstance().logEvent(t,e)}catch(s){console.error(s)}})},R=({containerId:t,illustrasjon:e,tittel:n,ingress:s,skalKunneGåTilbakeTilSøknad:o,språkkode:a,setLanguage:p,søker:d})=>{const l=w("feilside"),h=b(),k=async()=>{if(d){O("applikasjon-hendelse",{app:"foreldrepengesoknad",team:"foreldrepenger",hendelse:"avbrutt"}),h();try{await _.deleteMellomlagretSøknad(d.fnr)}catch{}window.location.href="https://nav.no"}},S=()=>{window.location.reload()};return r.jsxs(r.Fragment,{children:[p&&a&&r.jsx(y,{locale:a,availableLocales:["en","nb","nn"],toggle:p}),e&&r.jsx(j,{dialog:{title:e.tittel,text:r.jsxs(r.Fragment,{children:[r.jsx(c,{padBottom:"m",children:e.tekst}),e.lenke&&r.jsx(v,{href:e.lenke.url,children:e.lenke.tekst})]})}}),r.jsxs("div",{id:t,className:l.block,children:[r.jsx(c,{padBottom:"l",children:r.jsx(C,{size:"large",level:"2",children:n})}),r.jsx(c,{padBottom:"l",children:r.jsx(E,{children:s})}),d!==void 0&&!o&&r.jsx("div",{className:l.element("avbrytKnapp"),children:r.jsx(u,{variant:"primary",onClick:k,children:"Start søknaden på nytt"})}),d!==void 0&&o&&r.jsx("div",{className:l.element("avbrytKnapp"),children:r.jsx(u,{variant:"primary",onClick:S,children:"Gå tilbake til søknaden"})})]})]})};R.__docgenInfo={description:"",methods:[],displayName:"Feilside"};export{_ as A,R as F,O as l};
