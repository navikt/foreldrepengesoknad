import{r as l}from"./index-7c191284.js";import{E as N,g as k}from"./apiInterceptor-9746ae07.js";import{r as w,o as C}from"./validationUtils-52801e0e.js";import{r as h,s as v}from"./dateUtils-04b407de.js";import"./jsx-runtime-69eee039.js";import"./index-e13aeee6.js";const P=()=>{window.location.href=N.LOGIN_URL+"?redirect="+window.location.origin};var i=(e=>(e.UNFETCHED="Unfetched",e.IN_PROGRESS="InProgress",e.FINISHED="Finished",e))(i||{});const U={config:{},isSuspended:!1},m=(e,t=U)=>{const[r,o]=l.useState(),[u,S]=l.useState(null),[n,a]=l.useState(i.UNFETCHED),c=t.fnr?k(t.fnr):k();return l.useEffect(()=>{!t.isSuspended&&n===i.UNFETCHED&&(a(i.IN_PROGRESS),c.get(e,t.config).then(s=>{s.data===""?o(void 0):o(s.data),a(i.FINISHED)}).catch(s=>{s.response&&(s.response.status===401||s.response.status===403)?P():S(s),a(i.FINISHED)}))},[t,e,c,n]),{data:r,error:u,requestStatus:n}},y=(e,t,r=U)=>{const[o,u]=l.useState(),[S,n]=l.useState(null),[a,c]=l.useState(i.UNFETCHED),s=r.fnr?k(r.fnr):k();return l.useEffect(()=>{!r.isSuspended&&a===i.UNFETCHED&&(c(i.IN_PROGRESS),s.post(e,t,r.config).then(d=>{d.data===""?u(void 0):u(d.data),c(i.FINISHED)}).catch(d=>{d.response&&(d.response.status===401||d.response.status===403)?P():n(d),c(i.FINISHED)}))},[r,e,s,a,t]),{data:o,error:S,requestStatus:a}},G=(e,t)=>w(t)?t:!Array.isArray(t)&&h(t,[h.HTML5_FMT.DATE,"YYYY-MM-DDTHH:mm:ss.SSSZ"],!0).isValid()?new Date(t):t,O=e=>{if(e)return JSON.parse(e,G)},g=(e,t)=>C(e)?v(e,t):void 0,_=N.UTTAK_API_URL,M="/soknad",Y="/soknad/endre",q=()=>{const{data:e,error:t}=m("/sokerinfo",{config:{withCredentials:!0}});return{søkerinfoData:e,søkerinfoError:t}},L=()=>{const{data:e,error:t}=m("/innsyn/v2/saker",{config:{withCredentials:!0}});return{sakerData:e,sakerError:t}},j=(e,t,r,o)=>{const u={annenPartFødselsnummer:e,barnFødselsnummer:t,familiehendelse:r},{data:S,error:n,requestStatus:a}=y("/innsyn/v2/annenPartVedtak",u,{config:{withCredentials:!0},isSuspended:o});return n&&n.message.includes("Ugyldig ident")?{eksisterendeSakAnnenPartData:void 0,eksisterendeSakAnnenPartError:void 0,eksisterendeSakAnnenPartRequestStatus:i.FINISHED}:{eksisterendeSakAnnenPartData:S,eksisterendeSakAnnenPartError:n,eksisterendeSakAnnenPartRequestStatus:a}},x=()=>{const{data:e,error:t}=m("/storage",{config:{transformResponse:O,withCredentials:!0}});return{storageData:e,storageError:t}},b=(e,t)=>{const{søknad:r,version:o,currentRoute:u,uttaksplanInfo:S,antallUkerIUttaksplan:n,eksisterendeSak:a,endringstidspunkt:c,harAnnenPartEksisterendeSak:s,harEksisterendeSak:d,perioderSomSkalSendesInn:E,harUttaksplanBlittSlettet:D,søknadGjelderEtNyttBarn:p,barnFraNesteSak:I,brukerSvarteJaPåAutoJustering:A,annenPartsUttakErLagtTilIPlan:H}=e;return k(t).post("/storage",{søknad:r,version:o,currentRoute:u,uttaksplanInfo:S,antallUkerIUttaksplan:n,eksisterendeSak:a,endringstidspunkt:c,harAnnenPartEksisterendeSak:s,harEksisterendeSak:d,perioderSomSkalSendesInn:E,harUttaksplanBlittSlettet:D,søknadGjelderEtNyttBarn:p,barnFraNesteSak:I,brukerSvarteJaPåAutoJustering:A,annenPartsUttakErLagtTilIPlan:H},{withCredentials:!0})},B=e=>k(e).delete("/storage",{withCredentials:!0}),V=e=>k(e).get("/storage/kvittering/foreldrepenger",{withCredentials:!0,timeout:15*1e3}),J=(e,t=!1)=>{const{antallBarn:r,farHarRettINorge:o,morHarRettINorge:u,harAnnenForelderTilsvarendeRettEØS:S,dekningsgrad:n,fødselsdato:a,termindato:c,omsorgsovertakelsesdato:s,morHarAleneomsorg:d,farHarAleneomsorg:E,startdatoUttak:D,minsterett:p,erMor:I,morHarUføretrygd:A,familieHendelseDatoNesteSak:H}=e,f="YYYYMMDD",F={farHarRett:o,morHarRett:u,harAnnenForelderTilsvarendeRettEØS:S,morHarAleneomsorg:d||!1,farHarAleneomsorg:E||!1,dekningsgrad:n,antallBarn:r,fødselsdato:g(a,f),termindato:g(c,f),omsorgsovertakelseDato:g(s,f),startdatoUttak:g(D,f),minsterett:p,erMor:I,morHarUføretrygd:A,familieHendelseDatoNesteSak:g(H,f)},{data:R,error:T}=m(`${_}/konto`,{config:{timeout:15*1e3,params:F,withCredentials:!1},isSuspended:t});return{tilgjengeligeStønadskontoerData:R,tilgjengeligeStønadskontoerError:T}};function K(e,t,r){const o=e.erEndringssøknad?Y:M;return k(t).post(o,e,{withCredentials:!0,timeout:120*1e3,headers:{"content-type":"application/json;"},signal:r})}const ee={useGetUttakskontoer:J,storeAppState:b,deleteStoredAppState:B,getStorageKvittering:V,useGetAnnenPartsVedtak:j,useStoredAppState:x,useSøkerinfo:q,sendSøknad:K,useGetSaker:L};export{ee as A,i as R,P as r};
//# sourceMappingURL=api-e34d46b4.js.map
