import{j as i}from"./jsx-runtime-Cw0GR0a5.js";import{d as M,B as u,F as w,e as R,h as C}from"./Tidsperioden-CX6uww3z.js";import{S as y}from"./innsendingsType-DprMYF-V.js";import{i as v,m as z,A as V}from"./vedleggUtils-5XSvYUIy.js";import"./Uttaksdagen-C7qvZjyy.js";import{r as G}from"./index-CTjT7uj6.js";import{u as P}from"./index-DSgjoNiG.js";import"./index-CCQ3W5xA.js";import{d as X}from"./globalUtil-B8nm0HCY.js";import"./_baseToString-Cq6MbKF_.js";import"./_createSet-D2BJ0WVx.js";import{a as J}from"./ByttBrowserModal-DiOm4a-5.js";import{g as K}from"./apiInterceptor-D-WKbiXB.js";import{A as $}from"./AttachmentList-BlHmUIYG.js";import{B as W}from"./Label-C_UMiHsP.js";import"./index-BRV0Se7Z.js";import"./Link-D0RLsnK2.js";import"./index-9r8iugjR.js";import"./tslib.es6-CcC3cBMT.js";import"./guid-CsArkN6i.js";import"./links-BegG-28I.js";import"./VStack-C3DRnCHF.js";import"./message-CjkJih2D.js";import"./bemUtils-DmNyTjfb.js";import"./Attachment-BeKeXGAe.js";function Y(e){const t={withCredentials:!0,timeout:45e3,headers:{"content-type":"multipart/form-data"}},r=new FormData;return r.append("id",e.id),r.append("vedlegg",e.file,e.filename),K().post("/rest/storage/foreldrepenger/vedlegg",r,t)}const q={saveAttachment:Y},T=[".pdf",".jpeg",".jpg",".png"],_=16,H=_*1024*1024,Q=(e,t,r)=>e.map(a=>{const s=z(a,t,r);return s.pending=!0,s}),Z=e=>{const t=e.split(".").pop();return T.includes(`.${t.toLowerCase()}`)},ee=e=>e<=H,te=(e,t,r)=>e.filter(a=>{const s=Z(a.filename);s||t(o=>o.concat(r.formatMessage({id:"vedlegg.feilmelding.ugyldig.type"},{filename:a.filename})));const m=ee(a.filesize);return m||t(o=>o.concat(r.formatMessage({id:"vedlegg.feilmelding.ugyldig.størrelse"},{filename:a.filename,maxStørrelse:_}))),s&&m}),oe=(e,t,r,a,s,m)=>{e.forEach(async(o,d)=>{try{const l=await q.saveAttachment(o);o.pending=!1,o.url=l.headers.location,o.uploaded=!0,o.uuid=l.data,t(s+d,o)}catch{r(s+d),a(f=>f.concat(m.formatMessage({id:"vedlegg.feilmelding.opplasting.feilet"},{filename:o.filename})))}})},L=({attachments:e,name:t,onFileInputClick:r,attachmentType:a,skjemanummer:s,label:m,legend:o,...d})=>{const l=P(),{setFieldValue:f}=M(),[g,F]=G.useState([]);return i.jsxs(i.Fragment,{children:[i.jsx(u,{padBottom:"xl",children:i.jsx(w,{legend:o,buttonLabel:m,name:t,accept:T.join(", "),onFilesSelect:(n,{push:N,replace:b,remove:B})=>{const O=Q(n,a,s),h=te(O,F,l);h.forEach(U=>N(U)),oe(h,b,B,F,e.length,l)},onClick:r,error:g.length>0?g.map(n=>i.jsx(W,{children:n},n)):void 0,...d})}),i.jsx(u,{padBottom:"xl",visible:e.length>0,children:i.jsx($,{attachments:e.filter(n=>!v(n)),showFileSize:!0,onDelete:n=>{f(t,X(e,n))}})}),i.jsx(u,{padBottom:"l",children:i.jsx(J,{})})]})},D=L;L.__docgenInfo={description:"",methods:[],displayName:"FormikFileUploader"};const Le={title:"components/FormikFileUploader",component:D},I=e=>i.jsx(R,{initialValues:{},onSubmit:()=>{},children:i.jsx(C,{children:i.jsx(D,{...e})})}),p=I.bind({});p.args={attachments:[],name:"field_name",label:"Last opp vedlegg",attachmentType:V.ADOPSJONSVEDTAK,skjemanummer:y.ANNET};const c=I.bind({});c.args={attachments:[{id:"1",pending:!1,filename:"Fil som er lastet opp"}],name:"field_name",label:"Last opp vedlegg",attachmentType:V.ADOPSJONSVEDTAK,skjemanummer:y.ANNET};var S,x,j;p.parameters={...p.parameters,docs:{...(S=p.parameters)==null?void 0:S.docs,source:{originalSource:`args => <Formik initialValues={{}} onSubmit={() => undefined}>
        <Form>
            <FormikFileUploader {...args} />
        </Form>
    </Formik>`,...(j=(x=p.parameters)==null?void 0:x.docs)==null?void 0:j.source}}};var k,A,E;c.parameters={...c.parameters,docs:{...(k=c.parameters)==null?void 0:k.docs,source:{originalSource:`args => <Formik initialValues={{}} onSubmit={() => undefined}>
        <Form>
            <FormikFileUploader {...args} />
        </Form>
    </Formik>`,...(E=(A=c.parameters)==null?void 0:A.docs)==null?void 0:E.source}}};const De=["Default","FilSomErLastetOpp"];export{p as Default,c as FilSomErLastetOpp,De as __namedExportsOrder,Le as default};
