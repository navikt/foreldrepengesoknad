import{j as e}from"./jsx-runtime-69eee039.js";import{u as q,i as p,j as I,B as r,H as J,G as U,f as v,A as H,k as K,h as Y}from"./validationUtils-3923a44f.js";import{r as P}from"./index-7c191284.js";import"./_baseToString-4b695375.js";import"./_createSet-32a27317.js";import{l as $}from"./links-b36d21ab.js";import{u as z,a as s,S as R}from"./mapSøkerinfoDTO-f0b0bc3c.js";import{u as Q}from"./useOnValidSubmit-6a5c6f7b.js";import{a as W}from"./useSøknad-bb41a340.js";import{g as w,s as X,V as B,a as Z,v as ee,S as _,b as f,B as te,c as ne,d as se}from"./velkommenUtils-6a8ccc93.js";import{D as ae}from"./DinePlikter-0392aa4b.js";import{D as re}from"./DinePersonopplysningerModal-ea441356.js";import{a as oe}from"./submitUtils-4c286eb0.js";import{m as ie,o as le,a as de,b as me}from"./eksisterendeSakUtils-9aeb0224.js";import{u as ke}from"./useSøkerinfo-ae49b1f5.js";import{B as pe}from"./Link-b834ea2b.js";const j=({locale:c,saker:x,onChangeLocale:A})=>{const o=q(),D=W(),{dispatch:b,state:S}=z(),[C,V]=P.useState(!1),h=Y("velkommen"),y=ke(),{registrerteBarn:T}=y,u=w(x,T),F=[...u].sort(X);P.useEffect(()=>{S.søknad.søker.språkkode!==c&&b(s.setSpråkkode(c))},[b,c,S.søknad.søker.språkkode]);const G=i=>{const t=i.valgteBarn===_.SØKNAD_GJELDER_NYTT_BARN?void 0:u.find(a=>a.id===i.valgteBarn),d=t!==void 0&&!!t.kanSøkeOmEndring,m=d&&t.sak!==void 0?x.find(a=>{var g;return a.saksnummer===((g=t.sak)==null?void 0:g.saksnummer)}):void 0,n=[s.setVelkommen(i.harForståttRettigheterOgPlikter),s.setErEndringssøknad(d)];let k;t!==void 0&&(k=se(t,F),n.push(s.setBarnFraNesteSak(k)));const l=k!==void 0?k.startdatoFørsteStønadsperiode:void 0,N=d&&m,O=t!==void 0&&t.sak!==void 0&&t.kanSøkeOmEndring===!1,M=!N&&!O&&t!==void 0;if(N){const a=ie(m,l),g=le(S.søkerinfo,a,o,m.annenPart,t);n.push(s.updateCurrentRoute(R.UTTAKSPLAN)),n.push(s.setSøknad(g)),n.push(s.setEksisterendeSak(a)),n.push(s.setBrukerSvarteJaPåAutoJustering(a==null?void 0:a.grunnlag.ønskerJustertUttakVedFødsel)),n.push(s.setSøknadGjelderEtNyttBarn(!1))}else if(O){const a=de(t,o,y);n.push(s.setSøknad(a)),n.push(s.setSøknadGjelderEtNyttBarn(!1))}else if(M){const a=me(t);n.push(s.setSøknad(a)),n.push(s.setSøknadGjelderEtNyttBarn(!1))}else n.push(s.setSøknadGjelderEtNyttBarn(!0));return n},{handleSubmit:L,isSubmitting:E}=Q(G,R.SØKERSITUASJON,i=>oe(i));return e.jsx(B.FormikWrapper,{initialValues:Z(D.harGodkjentVilkår),onSubmit:L,renderForm:({values:i,setFieldValue:t})=>{const d=ee.getVisbility({...i,selectableBarn:u}),m=i.valgteBarn,n=m===_.SØKNAD_GJELDER_NYTT_BARN?void 0:u.find(l=>l.id===m),k=n!==void 0&&n.kanSøkeOmEndring===!0?p(o,"velkommen.endreSøknad"):p(o,"velkommen.begynnMedSøknad");return e.jsxs(B.Form,{includeButtons:!1,children:[e.jsx(I,{locale:c,availableLocales:["nb","nn"],toggle:l=>A(l)}),e.jsxs("div",{className:h.block,children:[e.jsx(r,{children:e.jsx(J,{size:"xlarge",className:`${h.element("tittel")}`,children:p(o,"velkommen.tittel")})}),e.jsx(r,{padBottom:"l",children:e.jsxs(U,{poster:!0,children:[e.jsx(r,{padBottom:"m",children:p(o,"velkommen.guidepanel.del1")})," ",e.jsx(r,{children:e.jsx(v,{id:"velkommen.guidepanel.del2",values:{a:l=>e.jsx("a",{className:"lenke",rel:"noopener noreferrer",href:$.foreldrepenger,target:"_blank",children:l})}})})]})}),e.jsx(r,{padBottom:"l",visible:d.isVisible(f.valgteBarn),children:e.jsx(te,{selectableBarn:F,visibility:d,formValues:i,setFieldValue:t})}),e.jsx(r,{padBottom:"l",visible:d.isVisible(f.harForståttRettigheterOgPlikter),children:e.jsx(H,{variant:"info",children:p(o,"velkommen.lagring.info")})}),e.jsx(r,{padBottom:"l",visible:d.isVisible(f.harForståttRettigheterOgPlikter),children:e.jsx(B.ConfirmationCheckbox,{name:f.harForståttRettigheterOgPlikter,label:p(o,"velkommen.samtykke"),validate:ne(o),children:e.jsxs(e.Fragment,{children:[e.jsx(r,{padBottom:"l",children:e.jsx(v,{id:"velkommen.samtykkeIntro.del1"})}),e.jsx(r,{padBottom:"m",children:e.jsx(ae,{})})]})})}),e.jsx(r,{padBottom:"l",children:e.jsx("div",{style:{textAlign:"center"},children:e.jsx(K,{type:"submit",variant:"primary",disabled:E,loading:E,children:k})})}),e.jsx(pe,{className:h.element("personopplysningerLink"),children:e.jsx("a",{className:"lenke",href:"#",onClick:l=>{l.preventDefault(),V(!0)},children:e.jsx(v,{id:"velkommen.lesMerOmPersonopplysninger"})})}),e.jsx(re,{isOpen:C,onRequestClose:()=>V(!1)})]})]})}})},Oe=j;try{j.displayName="Velkommen",j.__docgenInfo={description:"",displayName:"Velkommen",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string"}},onChangeLocale:{defaultValue:null,description:"",name:"onChangeLocale",required:!0,type:{name:"(locale: Locale) => void"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'},{value:'"en"'}]}},saker:{defaultValue:null,description:"",name:"saker",required:!0,type:{name:"Sak[]"}},fnr:{defaultValue:null,description:"",name:"fnr",required:!0,type:{name:"string"}}}}}catch{}export{Oe as V};
//# sourceMappingURL=Velkommen-e408353b.js.map
