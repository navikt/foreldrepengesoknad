import{r as u}from"./index-BP8_t0zE.js";import{g as m}from"./apiInterceptor-D-WKbiXB.js";import{j as p}from"./tslib.es6-BMc9PpVS.js";import"./Tidsperioden-DbKFRn-R.js";import"./Uttaksdagen-B0FM17qM.js";import{z as f,i as g,C as v,E as C,F as x}from"./useFpNavigator-BVwVhtUu.js";import{i as D,l as H,m as K,j as B}from"./FpDataContext-wT6-gpAc.js";import"./_baseToString-7VaozA17.js";import"./_createSet-1Wr4uFiM.js";import{g as U}from"./barnUtils-BcuO7KJQ.js";import{c as y}from"./eksisterendeSakUtils-B9l3V8nw.js";var E=(t=>(t.UNFETCHED="Unfetched",t.IN_PROGRESS="InProgress",t.FINISHED="Finished",t))(E||{});const R={config:{},isSuspended:!1},it=(t,e=R)=>{const[r,s]=u.useState(),[c,o]=u.useState(null),[n,a]=u.useState(E.UNFETCHED),d=e.fnr?m(e.fnr):m();return u.useEffect(()=>{!e.isSuspended&&n===E.UNFETCHED&&(a(E.IN_PROGRESS),d.get(t,e.config).then(i=>{i.data===""?s(void 0):s(i.data),a(E.FINISHED)}).catch(i=>{o(i),a(E.FINISHED)}))},[e,t,d,n]),{data:r,error:c,requestStatus:n}},M=(t,e,r=R)=>{const[s,c]=u.useState(),[o,n]=u.useState(null),[a,d]=u.useState(E.UNFETCHED),i=r.fnr?m(r.fnr):m();return u.useEffect(()=>{!r.isSuspended&&a===E.UNFETCHED&&(d(E.IN_PROGRESS),i.post(t,e,r.config).then(l=>{l.data===""?c(void 0):c(l.data),d(E.FINISHED)}).catch(l=>{n(l),d(E.FINISHED)}))},[r,t,i,a,e]),{data:s,error:o,requestStatus:a}};var S=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER="STØNADSKONTOER",t))(S||{});const _={},O=u.createContext(_),h=u.createContext(void 0),q=({children:t,initialState:e})=>{const[r,s]=u.useReducer((c,o)=>{switch(o.type){case"update":return{...c,[o.key]:[o.hash,o.data]};case"reset":return{};default:throw new Error}},e||_);return p.jsx(O.Provider,{value:r,children:p.jsx(h.Provider,{value:s,children:t})})},V=(t,e)=>{const s=u.useContext(O)[t];return s&&s[0]===e?s[1]:void 0},G=(t,e)=>{const r=u.useContext(h);return s=>{r&&r({type:"update",key:t,hash:e,data:s})}};q.__docgenInfo={description:"",methods:[],displayName:"FpApiDataContext",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},initialState:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    [FpApiDataType.ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.NESTE_SAK_ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.STØNADSKONTOER]?: [number, TilgjengeligeStønadskontoer];
}`,signature:{properties:[]}},description:""}}};const j=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),k=t=>{let e=0;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);e=(e<<5)-e+s,e=e&e}return e},w={[S.ANNEN_PART_VEDTAK]:"/rest/innsyn/v2/annenPartVedtak",[S.NESTE_SAK_ANNEN_PART_VEDTAK]:"/rest/innsyn/v2/annenPartVedtak",[S.STØNADSKONTOER]:"/rest/konto"},ut=(t,e,r)=>{var l;const s=k(JSON.stringify(j(e))),c=V(t,s),o=!!c,n=G(t,s),{data:a,requestStatus:d,error:i}=M(w[t],e,{config:{withCredentials:t!==S.STØNADSKONTOER},isSuspended:o||r});return u.useEffect(()=>{a&&n(a)},[a]),(l=i==null?void 0:i.message)!=null&&l.includes("Ugyldig ident")?{data:void 0,requestStatus:E.FINISHED,error:null}:{data:o?c:a,requestStatus:o?E.FINISHED:d,error:i}},L=(t,e)=>t?!0:f(e)?!!e.harRettPåForeldrepengerINorge:!1,z=(t,e)=>t?f(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,J=(t,e)=>{if(D(t)||B(t))return e||t.termindato},Y=(t,e)=>e||t||void 0,Q=(t,e,r)=>t&&r?r:e,W=(t,e,r,s,c)=>r||s?"ALENEOMSORG":t&&e||c?"BEGGE_RETT":"BARE_SØKER_RETT",ct=(t,e,r,s,c,o)=>{const n=f(e)?e:void 0,a=g(r.rolle),d=v(a,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),i=C(!a,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),l=s!==void 0?s.startdatoFørsteStønadsperiode:void 0,N=y(c,t,a,U(t),l),I=Q(a,t.antallBarn,N==null?void 0:N.grunnlag.antallBarn),P=Y(o==null?void 0:o.grunnlag.termindato,N==null?void 0:N.grunnlag.termindato),A=g(r.rolle),T=g(r.rolle),F=f(e)&&e.harRettPåForeldrepengerIEØS;return{rettighetstype:W(L(A,e),z(A,e),i||!1,d||!1,F||!1),brukerrolle:T?"FAR":"MOR",antallBarn:I.toString(),fødselsdato:D(t)?t.fødselsdatoer[0]:void 0,termindato:J(t,P),omsorgsovertakelseDato:H(t)||K(t)?t.adopsjonsdato:void 0,morHarUføretrygd:x(e,T),familieHendelseDatoNesteSak:l}};export{q as F,E as R,S as a,Q as b,Y as c,it as d,ct as g,ut as u};
