import{j as e}from"./jsx-runtime-69eee039.js";import{b as Wt,u as Qt,a as zt,s as $t,c as Zt,M as Xt}from"./useSaveLoadedRoute-44907666.js";import{r as u}from"./index-7c191284.js";import{u as oe,i as F,M as be,B as y,H as en,k as ae,f as B,h as tn,Z as nn,Y as ie,d as R,U as ct,a2 as Pe,E as rn,A as Ne,b as tt,W as Fe,a1 as sn,o as gt,_ as an,aa as on}from"./validationUtils-3923a44f.js";import"./index-e13aeee6.js";import"./_baseToString-4b695375.js";import"./_createSet-32a27317.js";import{I as ln}from"./IntlProvider-7d7f37e2.js";import{S as a,u as le,a as k,m as dn,F as kn}from"./mapSøkerinfoDTO-f0b0bc3c.js";import{u as ft,b as un,m as St,a as pn,i as mn,g as cn,c as gn,L as fn,s as Sn,R as vn,t as h,N as nt,B as En}from"./useSøknad-bb41a340.js";import{A as D,R as H}from"./api-39fe6dcd.js";import{Q as hn,g as rt,a as An,s as q,w as Fn,F as jn,c as bn}from"./submitUtils-deb96a79.js";import{l as vt}from"./links-b36d21ab.js";import{F as Et}from"./Feilside-96633929.js";import{V as Pn}from"./Velkommen-00f22ffd.js";import{A as Nn}from"./AnnenForelder-0c2841c3.js";import{I as yn}from"./Inntektsinformasjon-1a84b068.js";import{O as Tn}from"./OmBarnet-be38760f.js";import{c as xn,O as st}from"./Oppsummering-1fc5b19f.js";import{S as In}from"./Søkersituasjon-b7a8e671.js";import{U as Dn}from"./Utenlandsopphold-6cd8ffaa.js";import{g as Un,a as On,b as Mn,c as at,d as Vn,U as _n}from"./UttaksplanInfo-9e1aa231.js";import{i as Y,S as ye,B as Bn,p as Rn,q as ot,r as Gn,t as Ln,u as Jn,D as it,a as Kn,E as Cn,F as Hn,G as wn,H as qn}from"./Periodene-7b9c80a7.js";import{f as Yn,s as Wn,D as je}from"./leggTilPeriode-23ab0ec4.js";import{g as Qn,U as zn,a as $n,u as Zn}from"./Uttaksplan-ef6c88e4.js";import{g as Xn}from"./arbeidsforholdUtils-667b1f29.js";import{u as er}from"./useOnValidSubmit-aae2fccb.js";import{u as tr}from"./useSøkerinfo-ae49b1f5.js";import{b as nr,c as rr}from"./dateUtils-8d5a81ce.js";import{B as lt}from"./Link-b834ea2b.js";import{a as sr,c as ar}from"./formUtils-f08b9c6b.js";import{c as or,g as ir}from"./eksisterendeSakUtils-327b3d6a.js";import{g as lr,I as dr}from"./InfoOmSøknaden-b1b47928.js";import{A as kr}from"./FormikFileUploader-2fb5425e.js";import{S as dt,d as ur}from"./SøknadSendt-730dc25c.js";import{B as pr}from"./ByttBrowserModal-8a9c22ec.js";import{A as mr}from"./apiInterceptor-7ea9ce80.js";/* empty css            */import"./amplitude-bdf1e125.js";import"./index-b3a39e30.js";import"./v4-a960c1f4.js";import"./AttachmentType-f6ad37cf.js";import"./velkommenUtils-44e78e8f.js";import"./DinePlikter-0392aa4b.js";import"./DinePersonopplysningerModal-ea441356.js";import"./validationUtil-eb14dde0.js";import"./RegistrertePersonalia-ec341efb.js";import"./InteractiveListElement-b6030105.js";import"./Næring-cfb2428d.js";import"./LenkeKnapp-a5650a66.js";import"./_baseIteratee-9b4fb880.js";import"./_baseUniq-e5198354.js";import"./AttachmentList-bc8c7263.js";import"./Attachment-31710907.js";import"./AdvarselIkon-93d01dab.js";import"./util-9e7f8b23.js";const cr=[{arbeidsgiverId:"896929119",arbeidsgiverIdType:"orgnr",arbeidsgiverNavn:"SAUEFABRIKK",stillingsprosent:100,fom:"2018-03-01"}],gr={søker:{fnr:"06499121154",fornavn:"Tapper",etternavn:"Konvolutt",kjønn:"M",fødselsdato:"1991-09-06",bankkonto:{kontonummer:"",banknavn:""}},arbeidsforhold:cr},fr=[{fom:"2022-12-12",tom:"2023-02-17",kontoType:"FEDREKVOTE",resultat:{innvilget:!0,trekkerMinsterett:!0,trekkerDager:!0,årsak:"ANNET"},samtidigUttak:100,flerbarnsdager:!1},{fom:"2023-02-20",tom:"2023-03-05",kontoType:"FELLESPERIODE",resultat:{innvilget:!0,trekkerMinsterett:!0,trekkerDager:!0,årsak:"ANNET"},samtidigUttak:50,flerbarnsdager:!1},{fom:"2023-03-20",tom:"2023-03-31",kontoType:"FEDREKVOTE",resultat:{innvilget:!0,trekkerMinsterett:!0,trekkerDager:!0,årsak:"ANNET"},flerbarnsdager:!1}],Sr="HUNDRE",vr={perioder:fr,dekningsgrad:Sr},Er=[{saksnummer:"352011594",sakAvsluttet:!1,sisteSøknadMottattDato:"2023-03-31",kanSøkeOmEndring:!1,sakTilhørerMor:!1,gjelderAdopsjon:!0,morUføretrygd:!1,harAnnenForelderTilsvarendeRettEØS:!1,ønskerJustertUttakVedFødsel:!1,rettighetType:"BEGGE_RETT",annenPart:{type:"person",fnr:"05489305072",fornavn:"Sentral",etternavn:"Tangent"},familiehendelse:{fødselsdato:"2023-02-01",antallBarn:1,omsorgsovertakelse:"2023-04-10"},åpenBehandling:{tilstand:"VENT_INNTEKTSMELDING",søknadsperioder:[{fom:"2023-04-10",tom:"2023-07-21",kontoType:"FEDREKVOTE",flerbarnsdager:!1},{fom:"2023-07-24",tom:"2023-09-15",kontoType:"FELLESPERIODE",morsAktivitet:"UTDANNING",flerbarnsdager:!1}]},barn:[],dekningsgrad:"HUNDRE"}],hr=[],Ar={foreldrepenger:Er,engangsstønad:[],svangerskapspenger:hr},Fr="2019-02-01",jr="23123",br={innsendingstidspunkt:Fr,pdf:jr},Pr={MØDREKVOTE:95,FEDREKVOTE:95,FELLESPERIODE:90,FORELDREPENGER_FØR_FØDSEL:15,FORELDREPENGER:80},Nr={},yr={kontoer:Pr,minsteretter:Nr},ht="selectedLocale",Tr=()=>sessionStorage.getItem(ht)||"nb",xr=t=>{sessionStorage.setItem(ht,t)},Te=({fornavn:t})=>{const n=oe();return e.jsx(Et,{dokumenttittel:"NAV Foreldrepengesøknad",ingress:F(n,"velkommen.ingress"),tittel:F(n,"velkommen.tittel"),illustrasjon:{tittel:F(n,"velkommen.ikkeMyndig.tittel",{navn:t.toLowerCase()}),tekst:F(n,"velkommen.ikkeMyndig.ingress"),lenke:{tekst:F(n,"velkommen.ikkeMyndig.boblelenketekst"),url:vt.papirsøknad}},skalKunneGåTilbakeTilSøknad:!1})};try{Te.displayName="IkkeMyndig",Te.__docgenInfo={description:"",displayName:"IkkeMyndig",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string"}}}}}catch{}const Ir=(t,n)=>{const[r,o]=u.useState(t);return u.useEffect(()=>{const i=setTimeout(()=>{o(t)},n);return()=>{clearTimeout(i)}},[t,n]),r};const Dr=({isOpen:t,setIsOpen:n})=>{const r=oe(),o=tn("vilDuGåTilbakeModal"),i=ft();return e.jsxs(be,{className:o.block,"aria-label":"Vil du gå tilbake",closeButton:!1,open:t,onClose:()=>n(!1),children:[e.jsx(y,{padBottom:"l",children:e.jsx(en,{size:"small",as:"h1",children:F(r,"uttaksplan.vilDuGåTilbakeModal.tittel")})}),e.jsx(y,{padBottom:"l",children:e.jsx(lt,{children:F(r,"uttaksplan.vilDuGåTilbakeModal.intro")})}),e.jsx(y,{padBottom:"l",children:e.jsx(lt,{children:F(r,"uttaksplan.vilDuGåTilbakeModal.spørsmål")})}),e.jsxs("div",{className:o.element("knapperad"),children:[e.jsx(ae,{onClick:()=>{n(!1),i(a.UTTAKSPLAN_INFO)},children:e.jsx(B,{id:"uttaksplan.vilDuGåTilbakeModal.okLabel"})}),e.jsx(ae,{variant:"secondary",onClick:()=>n(!1),children:e.jsx(B,{id:"uttaksplan.vilDuGåTilbakeModal.avbrytLabel"})})]})]})};try{VilDuGTilbakeModal.displayName="VilDuGTilbakeModal",VilDuGTilbakeModal.__docgenInfo={description:"",displayName:"VilDuGTilbakeModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},setIsOpen:{defaultValue:null,description:"",name:"setIsOpen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}}}}}catch{}var W=(t=>(t.ønskerAutomatiskJustering="ønskerAutomatiskJustering",t))(W||{});const xe=nn(),Ur=t=>sr(t),Or=t=>({ønskerAutomatiskJustering:t!==void 0?ar(t):ie.UNANSWERED}),At=(t,n)=>n!==void 0&&Y(t)&&R(t.tidsperiode.fom).isSame(ct(n).denneEllerNeste(),"day")&&t.forelder===Pe.farMedmor&&t.konto===ye.Fedrekvote&&t.ønskerSamtidigUttak===!0&&t.ønskerFlerbarnsdager!==!0,Mr=(t,n,r,o)=>o.type===un.UFØDT&&r&&t.length===1&&At(t[0],n),Vr=(t,n,r,o,i,l,g)=>t&&rn(n)&&r==="fødsel"&&o.length!==0&&St(i)&&l!==void 0&&!g,Ie=({termindato:t,perioderMedUttakRundtFødsel:n,antallBarn:r,visibility:o})=>{const i=oe(),l=ct(t).denneEllerNeste(),{dispatch:g,state:f}=le(),j=f.brukerSvarteJaPåAutoJustering&&n.length>1,d=f.brukerSvarteJaPåAutoJustering&&n.length===1&&!R(n[0].tidsperiode.fom).isSame(l,"day"),m=f.brukerSvarteJaPåAutoJustering&&n.length===1&&R(n[0].tidsperiode.fom).isSame(l,"day")&&(Y(n[0])&&(n[0].konto!==ye.Fedrekvote||!n[0].ønskerSamtidigUttak)||Bn(n[0])),G=f.brukerSvarteJaPåAutoJustering&&n.length===1&&R(n[0].tidsperiode.fom).isSame(l,"day")&&Y(n[0])&&n[0].konto===ye.Fedrekvote&&n[0].ønskerFlerbarnsdager===!0;let I="";j&&(I="uttaksplan.automatiskJustering.info.hvisFlerePerioder"),d&&(I="uttaksplan.automatiskJustering.info.hvisIkkeLengerStarterPåTermin"),m&&(I="uttaksplan.automatiskJustering.info.hvisEndretPeriodePåTermin"),G&&(I="uttaksplan.automatiskJustering.info.hvisEndretPeriodeTilØnskerFlerbarnsdager");const M=T=>{const Q=Ur(T);g(k.setØnskerJustertUttakVedFødsel(Q)),g(k.setBrukerSvarteJaPåAutoJustering(Q))};return e.jsx(xe.Form,{includeButtons:!1,children:e.jsxs("div",{style:{paddingTop:"1rem",paddingBottom:"1rem"},children:[I!==""&&e.jsx(y,{padBottom:"l",children:e.jsx(Ne,{variant:"info",children:e.jsx(B,{id:I})})}),e.jsx(y,{visible:o.isVisible(W.ønskerAutomatiskJustering),padBottom:"l",children:e.jsx(xe.YesOrNoQuestion,{name:W.ønskerAutomatiskJustering,legend:F(i,"uttaksplan.automatiskJustering.spørsmål",{antallBarn:r}),validate:T=>{if(T===ie.UNANSWERED)return F(i,"uttaksplan.automatiskJustering.svar.påkrevd")},afterOnChange:T=>M(T)})})]})})};try{Ie.displayName="AutomatiskJusteringForm",Ie.__docgenInfo={description:"",displayName:"AutomatiskJusteringForm",props:{termindato:{defaultValue:null,description:"",name:"termindato",required:!0,type:{name:"Date"}},perioderMedUttakRundtFødsel:{defaultValue:null,description:"",name:"perioderMedUttakRundtFødsel",required:!0,type:{name:"Periode[]"}},antallBarn:{defaultValue:null,description:"",name:"antallBarn",required:!0,type:{name:"number"}},visibility:{defaultValue:null,description:"",name:"visibility",required:!0,type:{name:"QuestionVisibility<UttaksplanFormField, undefined>"}}}}}catch{}const _r=(t,n)=>t.length!==1||n===void 0?!1:At(t[0],n),Br={[W.ønskerAutomatiskJustering]:{isIncluded:({perioderMedUttakRundtFødsel:t,termindato:n})=>_r(t,n),isAnswered:({ønskerAutomatiskJustering:t})=>t!==ie.UNANSWERED}},Rr=hn(Br),kt=()=>{const t=oe(),n=tr(),r=pn(),[o,i]=u.useState(!1),[l,g]=u.useState(!0),[f,j]=u.useState(!1),{dispatch:d,state:m}=le(),[G,I]=u.useState(m.endringstidspunkt),[M,T]=u.useState(m.perioderSomSkalSendesInn),Q=r.erEndringssøknad?a.OPPSUMMERING:a.UTENLANDSOPPHOLD,{uttaksplanInfo:bt,eksisterendeSak:A,harUttaksplanBlittSlettet:Pt,annenPartsUttakErLagtTilIPlan:Ue}=m,{person:z,arbeidsforhold:Nt}=n,{annenForelder:S,søker:yt,barn:v,søkersituasjon:V,dekningsgrad:Oe,erEndringssøknad:x,tilleggsopplysninger:$}=r,{erAleneOmOmsorg:Me}=yt,{situasjon:de}=V,{rolle:Ve}=V,{barnFraNesteSak:b}=m,_e=Ir(m,3e3),Tt=Rn(S),Z=ot(S)?!!S.harRettPåForeldrepengerINorge||!!S.harRettPåForeldrepengerIEØS:!1,p=mn(r.søkersituasjon.rolle),X=Gn(!p,Me,S),ee=Ln(p,Me,S),ke=X||ee,xt=Z?void 0:p?Pe.farMedmor:Pe.mor,U=cn(v),L=tt(U),It=Qn(S,p),Dt=Jn(z,S,p,t),Be=v.antallBarn,Ut=Be>1,Re=it(Ve,p,S),P=A==null?void 0:A.uttaksplan,Ot=A?A.uttaksplan!==void 0:!1,Mt=!1,Vt=nr(bt),_=gn(v),ue=ot(S)&&!S.utenlandskFnr?S.fnr:void 0,pe=de==="adopsjon",me=b!==void 0?b.annenForelderFnr:void 0,Ge=b!==void 0&&b.fnr!==void 0&&b.fnr.length>0?b.fnr[0]:void 0,J=b!==void 0?b.familiehendelsesdato:void 0,O=b!==void 0?b.startdatoFørsteStønadsperiode:void 0,ce=!it(V.rolle,p,S),Le=!St(v)&&v.fnr!==void 0&&v.fnr.length>0?v.fnr[0]:void 0,te=!(!ke&&ue!==void 0&&ue!==""&&(Le!==void 0||U!==void 0));Wt(a.UTTAKSPLAN);const{eksisterendeSakAnnenPartData:Je,eksisterendeSakAnnenPartError:ge,eksisterendeSakAnnenPartRequestStatus:fe}=D.useGetAnnenPartsVedtak(ue,Le,U,te),N=u.useMemo(()=>or(Je,v,p,U,O),[Je,v,p,U,O]),Ke=Un(A==null?void 0:A.grunnlag.termindato,N==null?void 0:N.grunnlag.termindato),K=On(p,v.antallBarn,N==null?void 0:N.grunnlag.antallBarn);u.useEffect(()=>{if(p&&r.barn.antallBarn!==K){const s={...r,barn:{...r.barn,antallBarn:K}};d(k.setSøknad(s))}},[p,K,d,r]);const Se=!(me!==void 0&&me!==""&&(Ge!==void 0||J!==void 0)&&(te||fe===H.FINISHED)),{eksisterendeSakAnnenPartData:_t,eksisterendeSakAnnenPartError:ve,eksisterendeSakAnnenPartRequestStatus:Ce}=D.useGetAnnenPartsVedtak(me,Ge,Fe(J),Se),ne=ir(_t);u.useEffect(()=>{if(ne!==void 0&&m.barnFraNesteSak!==void 0&&(R(ne).isBefore(m.barnFraNesteSak.startdatoFørsteStønadsperiode,"d")||m.barnFraNesteSak.startdatoFørsteStønadsperiode===void 0)){const s={...m.barnFraNesteSak,startdatoFørsteStønadsperiode:ne};d(k.setBarnFraNesteSak(s))}},[O,ne,b,d,m.barnFraNesteSak]);const He=$n({erDeltUttak:Z,morHarRett:Re,søkerErAleneOmOmsorg:ke});u.useEffect(()=>{if(A!==void 0&&P!==void 0&&N!==void 0&&!Ue){P.forEach(c=>{if(Y(c)){const se=Kn(N.uttaksplan).finnOverlappendePerioder(c);se.length!==0&&se.find(et=>Cn(et)&&et.ønskerSamtidigUttak===!0)&&(c.ønskerSamtidigUttak||(c.ønskerSamtidigUttak=!0,c.samtidigUttakProsent=Mn(c.gradert,c.stillingsprosent)))}});const s=Yn(Wn(P,N.uttaksplan,L,O,!0),He,L,pe,ce,p,O),E={...A,uttaksplan:s};d(k.setUttaksplan(s)),d(k.setEksisterendeSak(E)),d(k.setAnnenPartsUttakErLagtTilIPlan(!0))}},[N,P,L,He,pe,ce,p,d,O,A,Ue]);const Bt=()=>{j(!0);const s=xn($);return[k.setTilleggsopplysninger(s),k.setEndringstidspunkt(G),k.setPerioderSomSkalSendesInn(M)]},Rt=(s,E)=>{const c=s!==wn.Ingen?s:void 0,se={...$,begrunnelseForSenEndring:{...$.begrunnelseForSenEndring,tekst:E,ekstraInformasjon:c}};d(k.setTilleggsopplysninger(se))};u.useEffect(()=>{const s=P==null?void 0:P.find(E=>Y(E)&&E.angittAvAnnenPart);if(s&&G===void 0){const E=s.tidsperiode.fom;d(k.setEndringstidspunkt(E));const c=rt(r.uttaksplan,x,p,P,E);T(c),d(k.setPerioderSomSkalSendesInn(c))}},[P,d,G,p,r.uttaksplan,x]);const{handleSubmit:we,isSubmitting:qe}=er(Bt,Q,s=>An(s)),C=Hn(r.uttaksplan,L,_),re=Vr(p,L,de,C,v,_,ce),Ye=Mr(C,_,p,v),Gt=()=>{(re||x)&&!Ye&&d(k.setØnskerJustertUttakVedFødsel(void 0))},Lt=s=>re&&Ye&&s!==void 0,Ee=u.useRef(null),Jt=s=>{j(!0),l&&!Xe&&(Ee.current&&Ee.current.handleSubmit(),Gt(),Lt(s.ønskerAutomatiskJustering)&&we(s))},Kt=Qt(),Ct=zt();u.useEffect(()=>{D.storeAppState(_e,z.fnr)},[z.fnr,_e]);const Ht=sn(z.kjønn,Tt,Z,X,ee,Ve),We=(te?!1:fe!==H.FINISHED)||(Se?!1:Ce!==H.FINISHED),{tilgjengeligeStønadskontoerData:he,tilgjengeligeStønadskontoerError:Ae}=D.useGetUttakskontoer(at(je.HUNDRE_PROSENT,v,S,V,ee,X,Fe(J),K,Ke),We),{tilgjengeligeStønadskontoerData:Qe}=D.useGetUttakskontoer(at(je.ÅTTI_PROSENT,v,S,V,ee,X,Fe(J),K,Ke),We),wt=s=>{j(!1),d(k.setUttaksplan(s));const E=rr(P,s,x);I(E);const c=rt(s,x,p,P,E);T(c),d(k.setPerioderSomSkalSendesInn(c))};if(u.useEffect(()=>{if(Ae)throw q(Ae),new Error("Vi klarte ikke å hente opp stønadskontoer. Prøv igjen om noen minutter og hvis problemet vedvarer kontakt brukerstøtte.");if(ge)throw q(ge),new Error("Vi klarte ikke å hente informasjon om saken til annen forelder. Prøv igjen om noen minutter og hvis problemet vedvarer kontakt brukerstøtte.");if(ve)throw q(ve),new Error("Vi klarte ikke å hente informasjon om saken til annen forelder for neste barn. Prøv igjen om noen minutter og hvis problemet vedvarer kontakt brukerstøtte.")},[Ae,ge,ve]),!he||!Qe||fe!==H.FINISHED&&!te||Ce!==H.FINISHED&&!Se)return e.jsx("div",{style:{textAlign:"center",padding:"12rem 0"},children:e.jsx(gt,{size:"2xlarge"})});const ze=Vn(Qe,he),$e=lr(he.minsteretter.toTette),Ze=Oe===je.HUNDRE_PROSENT?ze[100]:ze[80],Xe=x&&(M===void 0||M.length===0),qt=()=>{const s=r.uttaksplan.filter(E=>qn(E));d(k.slettUttaksplan(s)),d(k.setUttaksplanSlettet(!0))},Yt=()=>{m.eksisterendeSak&&(d(k.setUttaksplan(m.eksisterendeSak.uttaksplan)),d(k.setPerioderSomSkalSendesInn([])),T([]))};return e.jsx(xe.FormikWrapper,{initialValues:Or(m.søknad.ønskerJustertUttakVedFødsel),onSubmit:we,innerRef:Ee,renderForm:({values:s})=>{const E=Rr.getVisbility({ønskerAutomatiskJustering:s[W.ønskerAutomatiskJustering]??ie.NO,termindato:_,perioderMedUttakRundtFødsel:C});return e.jsxs(an,{bannerTitle:F(t,"søknad.pageheading"),activeStepId:"uttaksplan",pageTitle:F(t,"søknad.uttaksplan"),onCancel:Kt,onContinueLater:Ct,steps:$t(t,x),children:[e.jsx(y,{padBottom:"l",children:e.jsx(dr,{eksisterendeSak:A,erIUttaksplanenSteg:!0,tilgjengeligeStønadskontoer:Ze,minsterettUkerToTette:$e})}),e.jsx(zn,{foreldreSituasjon:Ht,forelderVedAleneomsorg:xt,erDeltUttak:Z,uttaksplan:r.uttaksplan,familiehendelsesdato:U,handleOnPlanChange:wt,stønadskontoer:Ze,navnPåForeldre:Dt,annenForelder:S,arbeidsforhold:Xn(Nt,pe,p,tt(U)),erEndringssøknad:x,erFarEllerMedmor:p,erFlerbarnssøknad:Ut,erAleneOmOmsorg:ke,harMidlertidigOmsorg:Mt,situasjon:de,erMorUfør:It,morHarRett:Re,søkersituasjon:V,dekningsgrad:Oe,antallBarn:Be,tilleggsopplysninger:$,setUttaksplanErGyldig:g,handleBegrunnelseChange:Rt,eksisterendeSak:A,perioderSomSkalSendesInn:M,morsSisteDag:Vt,harKomplettUttaksplan:Ot,opprinneligPlan:Pt?void 0:P,handleSlettUttaksplan:qt,handleResetUttaksplan:Yt,termindato:_,barn:v,saveAttachment:kr.saveAttachment,visAutomatiskJusteringForm:re,perioderMedUttakRundtFødsel:C,barnFraNesteSak:b,familiehendelsesdatoNesteSak:J,førsteUttaksdagNesteBarnsSak:O,minsterettUkerToTette:$e}),re&&e.jsx(y,{padBottom:"l",children:e.jsx(Ie,{termindato:_,perioderMedUttakRundtFødsel:C,antallBarn:v.antallBarn,visibility:E})}),e.jsx(Dr,{isOpen:o,setIsOpen:i}),!l&&f&&e.jsx(y,{textAlignCenter:!0,padBottom:"l",children:e.jsx(Ne,{variant:"error",children:e.jsx(B,{id:"uttaksplan.validering.kanIkkeGåVidere"})})}),Xe&&f&&e.jsx(y,{textAlignCenter:!0,padBottom:"l",children:e.jsx(Ne,{variant:"error",children:e.jsx(B,{id:"uttaksplan.validering.kanIkkeGåVidereEndringssøknad"})})}),e.jsx(y,{textAlignCenter:!0,padBottom:"l",children:e.jsxs(on,{children:[!x&&e.jsx(ae,{variant:"secondary",as:fn,onClick:c=>{c.preventDefault(),i(!0)},to:Zt("uttaksplan"),children:e.jsx(B,{id:"backlink.label"})}),e.jsx(ae,{type:"submit",onClick:Jt,disabled:qe,loading:qe,children:F(t,"søknad.gåVidere")})]})})]})}})},Gr=(t,n)=>{switch(t){case a.SØKERSITUASJON:return n.harGodkjentVilkår===!0;case a.OPPSUMMERING:return Zn(n.uttaksplan)===!1&&n.uttaksplan.length>0;default:return!0}},Lr=(t,n,r)=>t?r?n?e.jsxs(e.Fragment,{children:[e.jsx(h,{path:a.UTTAKSPLAN,element:e.jsx(kt,{})}),e.jsx(h,{path:a.OPPSUMMERING,element:e.jsx(st,{})}),e.jsx(h,{path:a.SØKNAD_SENDT,element:e.jsx(dt,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{path:a.SØKERSITUASJON,element:e.jsx(In,{})}),e.jsx(h,{path:a.OM_BARNET,element:e.jsx(Tn,{})}),e.jsx(h,{path:a.ANNEN_FORELDER,element:e.jsx(Nn,{})}),e.jsx(h,{path:a.UTTAKSPLAN_INFO,element:e.jsx(_n,{})}),e.jsx(h,{path:a.UTTAKSPLAN,element:e.jsx(kt,{})}),e.jsx(h,{path:a.UTENLANDSOPPHOLD,element:e.jsx(Dn,{})}),e.jsx(h,{path:a.INNTEKTSINFORMASJON,element:e.jsx(yn,{})}),e.jsx(h,{path:a.OPPSUMMERING,element:e.jsx(st,{})}),e.jsx(h,{path:a.SØKNAD_SENDT,element:e.jsx(dt,{})})]}):e.jsx(h,{path:"*",element:e.jsx(nt,{to:a.IKKE_MYNDIG})}):e.jsx(h,{path:"*",element:e.jsx(nt,{to:a.VELKOMMEN})}),Jr=({fornavn:t,locale:n,onChangeLocale:r,currentRoute:o})=>{const{state:i}=le(),l=ft(),g=Sn(),f=i.søknad.harGodkjentVilkår,j=i.søkerinfo.person.erMyndig,[d,m]=u.useState(!0);return u.useEffect(()=>{o&&j&&f&&d&&(m(!1),Gr(o,i.søknad)?l(o):g.pathname===a.OPPSUMMERING&&l(a.UTTAKSPLAN))},[o,j,f,l,d,i.søknad,g.pathname]),e.jsxs(vn,{children:[e.jsx(h,{path:a.VELKOMMEN,element:e.jsx(Pn,{fornavn:t,locale:n,saker:i.saker,onChangeLocale:r,fnr:i.søkerinfo.person.fnr})}),e.jsx(h,{path:a.IKKE_MYNDIG,element:e.jsx(Te,{fornavn:i.søkerinfo.person.fornavn})}),Lr(f,i.søknad.erEndringssøknad,j)]})};try{ForeldrepengesknadRoutes.displayName="ForeldrepengesknadRoutes",ForeldrepengesknadRoutes.__docgenInfo={description:"",displayName:"ForeldrepengesknadRoutes",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'},{value:'"en"'}]}},onChangeLocale:{defaultValue:null,description:"",name:"onChangeLocale",required:!0,type:{name:"(locale: Locale) => void"}},currentRoute:{defaultValue:null,description:"",name:"currentRoute",required:!0,type:{name:"enum",value:[{value:'"/"'},{value:'"/soknad/sokersituasjon"'},{value:'"/soknad/om-barnet"'},{value:'"/soknad/annen-forelder"'},{value:'"/soknad/uttaksplan-info"'},{value:'"/soknad/uttaksplan"'},{value:'"/soknad/utenlandsopphold"'},{value:'"/soknad/inntektsinformasjon"'},{value:'"/soknad/manglende-vedlegg"'},{value:'"/soknad/oppsummering"'},{value:'"/soknad/soknad-sendt"'},{value:'"ikke-myndig"'}]}}}}}catch{}const Kr=t=>{switch(t){case a.UTTAKSPLAN:case a.OPPSUMMERING:case a.SØKNAD_SENDT:return!0;default:return!1}},Cr=t=>t.søknad&&t.søknad.erEndringssøknad&&!Kr(t.currentRoute)?!1:t.version===5,Hr=()=>e.jsx("div",{style:{textAlign:"center",padding:"12rem 0"},children:e.jsx(gt,{size:"2xlarge"})}),wr=({locale:t,onChangeLocale:n})=>{const{søkerinfoData:r,søkerinfoError:o}=D.useSøkerinfo(),{sakerData:i,sakerError:l}=D.useGetSaker(),{storageData:g}=D.useStoredAppState(),{dispatch:f,state:j}=le();return u.useEffect(()=>{g&&Cr(g)&&f(k.applyStoredState(g)),r&&f(k.setSøkerinfo(dn(r))),i&&f(k.setSaker(i.foreldrepenger))},[f,g,r,i]),u.useEffect(()=>{if(o)throw q(o),new Error("Vi klarte ikke å hente informasjon om deg. Prøv igjen om noen minutter og hvis problemet vedvarer kontakt brukerstøtte.");if(l)throw q(l),new Error("Vi klarte ikke å hente informasjon om sakene dine. Prøv igjen om noen minutter og hvis problemet vedvarer kontakt brukerstøtte.")},[o,l]),!j.søkerinfo||!i?Hr():e.jsx(En,{children:e.jsx(Jr,{fornavn:j.søkerinfo.person.fornavn,locale:t,onChangeLocale:n,currentRoute:g?g.currentRoute:a.VELKOMMEN})})};try{Foreldrepengesknad.displayName="Foreldrepengesknad",Foreldrepengesknad.__docgenInfo={description:"",displayName:"Foreldrepengesknad",props:{locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'},{value:'"en"'}]}},onChangeLocale:{defaultValue:null,description:"",name:"onChangeLocale",required:!0,type:{name:"any"}}}}}catch{}class De extends u.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}componentDidCatch(n,r){n&&n.message!=="window.hasFocus is not a function"&&(this.setState({...this.state,hasError:!0,error:n}),Fn(o=>{o.setExtras(r),bn(n)}))}render(){var n;if(this.state.hasError){const r=!!this.state.error&&!!this.state.error.message&&this.state.error.message===jn,o=r?"Feil: for mange vedlegg":"Informasjon om feilen";return e.jsx(Et,{dokumenttittel:"NAV Foreldrepengesøknad",ingress:`${(n=this.state.error)==null?void 0:n.message}`,tittel:o,illustrasjon:{tittel:"Hei!",tekst:"Noe har gått galt med søknaden.",lenke:{tekst:"Her finner du en lenke til brukerstøtte",url:vt.brukerstøtte}},skalKunneGåTilbakeTilSøknad:r})}return this.props.children}}try{De.displayName="ErrorBoundary",De.__docgenInfo={description:"",displayName:"ErrorBoundary",props:{}}}catch{}const qr=()=>{const t=ur();return t?t.name==="ie":!1},Ft=Tr();R.locale(Ft);const Yr=()=>{const[t,n]=u.useState(Ft);return u.useEffect(()=>{be.setAppElement&&be.setAppElement("#app")}),e.jsx(kn,{children:e.jsx(De,{children:e.jsxs(ln,{locale:t,children:[e.jsx(pr,{skalEndreNettleser:qr()}),e.jsx(wr,{locale:t,onChangeLocale:r=>{xr(r),n(r)}})]})})})},jt=Yr;const $s={title:"AppContainer",component:jt},Wr=({søkerinfoData:t,sakerData:n,annenPartVedtakData:r,stønadskontoerData:o,storageKvitteringData:i})=>{const l=new Xt(mr);return l.onGet("/sokerinfo").reply(200,t),l.onGet("/innsyn/v2/saker").reply(200,n),l.onGet("/innsyn/v2/annenPartVedtak").reply(200,r),l.onGet("/konto").reply(200,o),l.onGet("/storage/kvittering/foreldrepenger").reply(200,i),l.onPost("/storage").reply(200,{}),l.onPost("/soknad").reply(200,{}),l.onPost("/sendSøknadUrl").reply(200,{}),l.onDelete("/storage").reply(200,{}),e.jsx(jt,{})},w=Wr.bind({});w.args={søkerinfoData:gr,sakerData:Ar,annenPartVedtakData:vr,stønadskontoerData:yr,storageKvitteringData:br};var ut,pt,mt;w.parameters={...w.parameters,docs:{...(ut=w.parameters)==null?void 0:ut.docs,source:{originalSource:`({
  søkerinfoData,
  sakerData,
  annenPartVedtakData,
  stønadskontoerData,
  storageKvitteringData
}) => {
  const apiMock = new MockAdapter(AxiosInstance);
  apiMock.onGet('/sokerinfo').reply(200, søkerinfoData);
  apiMock.onGet('/innsyn/v2/saker').reply(200, sakerData);
  apiMock.onGet('/innsyn/v2/annenPartVedtak').reply(200, annenPartVedtakData);
  apiMock.onGet('/konto').reply(200, stønadskontoerData);
  apiMock.onGet('/storage/kvittering/foreldrepenger').reply(200, storageKvitteringData);
  apiMock.onPost('/storage').reply(200, {});
  apiMock.onPost('/soknad').reply(200, {});
  apiMock.onPost('/sendSøknadUrl').reply(200, {});
  apiMock.onDelete('/storage').reply(200, {});
  return <AppContainer />;
}`,...(mt=(pt=w.parameters)==null?void 0:pt.docs)==null?void 0:mt.source}}};const Zs=["VisApp"];export{w as VisApp,Zs as __namedExportsOrder,$s as default};
//# sourceMappingURL=AppContainer.stories-ce11cf03.js.map
