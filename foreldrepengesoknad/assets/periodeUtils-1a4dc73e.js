import{d as i,i as d,h as w}from"./validationUtils-00d66cf2.js";import"./jsx-runtime-670450c2.js";import"./index-7e4e529b.js";import"./index-f1f749bf.js";import{S as u,w as j,s as k,n as S,A as $,d as C,P as o,G as W,u as B,v as _,e as O,I as M,U as f,X as q,M as V,Y as z,Z as Y}from"./dateUtils-becbdc23.js";import{d as x}from"./getTypedFormComponents-a42e978b.js";var F=(e=>(e.mor="mor",e.farMedmor="farMedmor",e))(F||{}),c=(e=>(e.UttakFellesperiodeAnnenForelder="UTTAK_FELLESP_ANNEN_FORELDER",e.UttakFedrekvoteAnnenForelder="UTTAK_FEDREKVOTE_ANNEN_FORELDER",e.UttakMødrekvoteAnnenForelder="UTTAK_MØDREKVOTE_ANNEN_FORELDER",e.UttakForeldrepengerAnnenForelder="UTTAK_FORELDREPENGER_ANNEN_FORELDER",e.ForeldrepengerFørFødsel="UTTAK_FORELDREPENGER_FØR_FØDSEL_ANNEN_FORELDER",e.Ingen="INGEN",e))(c||{});const J=/^[0-9]*$/,Z=e=>{let t=2,r=0;for(let s=e.length-2;s>=0;--s)r+=parseInt(e.charAt(s),10)*t,++t>7&&(t=2);const n=11-r%11;return n===11?0:n},X=e=>J.test(e)&&e.length===9,Q=e=>e.charAt(0)==="8"||e.charAt(0)==="9",ze=e=>!e||X(e)===!1||Q(e)===!1||e==="999999999"?!1:Z(e)===parseInt(e.charAt(8),10),ee=RegExp(/^[-]?[0-9,.\s]*$/),te=e=>e.replace(/,/g,".").replace(/\s/g,"").replace(/%/g,""),p=e=>{if(e!=null&&e.length>0&&ee.test(e)){const t=te(e);return(t.match(/\./g)||[]).length>1?void 0:parseFloat(t)}};var m={};function D(e){return ae(e)||se(e)||ne(e)||re()}function re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ne(e,t){if(e){if(typeof e=="string")return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}function se(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ae(e){if(Array.isArray(e))return b(e)}function b(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oe=new RegExp("^\\d{11}$"),ue=function(t){return U(t)},de=function(t){return U(t)},ie=function(t){return U(t)},le=function(t){return U(t)},fe=function(t){return t.substring(0,1)>=4?"dnr":t.substring(2,3)>=8?"tnr":t.substring(2,3)>=4?"hnr":"fnr"},U=function(t){var r=fe(t);return ce(t,r)},ce=function(t,r){if(!oe.test(t))return{status:"invalid",reasons:["fnr, dnr or hnr must consist of 11 digits"]};var n=[].concat(D(ke(t)),D(me(t,r)));return n.length==0?{status:"valid",type:r}:{status:"invalid",reasons:n}},ke=function(t){var r=11-(3*t[0]+7*t[1]+6*t[2]+1*t[3]+8*t[4]+9*t[5]+4*t[6]+5*t[7]+2*t[8])%11,n=11-(5*t[0]+4*t[1]+3*t[2]+2*t[3]+7*t[4]+6*t[5]+5*t[6]+4*t[7]+3*t[8]+2*r)%11;return r===11&&(r=0),n===11&&(n=0),r<10&&n<10&&r==t[9]&&n==t[10]?[]:["checksums don't match"]},me=function(t,r){r==="dnr"?t=t.substring(0,1)-4+t.substring(1):r==="hnr"?t=t.substring(0,2)+(t.substring(2,3)-4)+t.substring(3):r==="tnr"&&(t=t.substring(0,2)+(t.substring(2,3)-8)+t.substring(3));var n=t.substring(0,2),s=t.substring(2,4),a=t.substring(4,6),l=new Date(a==="00"?"2000":a,s-1,n);return l&&l.getMonth()+1==s&&l.getDate()==n?[]:["invalid date"]};m.fnr=ue;m.dnr=de;m.hnr=ie;m.tnr=le;m.idnr=U;const ge=e=>{const t=m.idnr(e);return t.status!=="valid"?!1:t.type},Fe=(e,t)=>{const r=t==="dnr"?`${Number(e.substr(0,1))-4}${e.substr(1,1)}`:e.substr(0,2),n=e.substr(2,2),s=e.substr(4,2);let a=i(`${r}-${n}-${s}`,"DD-MM-YY");return a.get("year")>i().get("year")&&(a=a.subtract(100,"year")),a.isValid()?a.isBefore(i().subtract(16,"year"),"day"):!1},pe=/^[\u034f0-9a-zA-ZÁáĄąÂâĀāĂăßČčĆćÇçĎďĐđÐðĔĕÉéĘęĖėÈèËëÊêĒēĢģİiĮįÍíÎîÏïĪīĶķŁłŊŋŇňŃńŅņÑñÞþŠšŚśŞşŤťŦŧŢţŲųŪūÚúŮůÝýŽžŹźŻżÕõÔôÓóÖöÜüÄäŒœÆæØøÅå .'\-/\n\r%§\\!?@_()+:;,="&\t\u00a0\u00ad\u061c\u115f\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u200b\u200c\u200d\u200e\u200f\u202d\u202f\u205f\u2060\u2061\u2062\u2063\u2064\u206a\u206b\u206c\u206d\u206e\u206f\u3000\u2800\u3164\ufeff\uffa0\u1160]*$/,ve=/[\u034f0-9a-zA-ZÁáĄąÂâĀāĂăßČčĆćÇçĎďĐđÐðĔĕÉéĘęĖėÈèËëÊêĒēĢģİiĮįÍíÎîÏïĪīĶķŁłŊŋŇňŃńŅņÑñÞþŠšŚśŞşŤťŦŧŢţŲųŪūÚúŮůÝýŽžŹźŻżÕõÔôÓóÖöÜüÄäŒœÆæØøÅå .'\-/\n\r%§\\!?@_()+:;,="&\t\u00a0\u00ad\u061c\u115f\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u200b\u200c\u200d\u200e\u200f\u202d\u202f\u205f\u2060\u2061\u2062\u2063\u2064\u206a\u206b\u206c\u206d\u206e\u206f\u3000\u2800\u3164\ufeff\uffa0\u1160]*/g,Ue=/[\u034f\t\u00a0\u00ad\u061c\u115f\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u200b\u200c\u200d\u200e\u200f\u202d\u202f\u205f\u2060\u2061\u2062\u2063\u2064\u206a\u206b\u206c\u206d\u206e\u206f\u3000\u2800\u3164\ufeff\uffa0\u1160]/g,Ye=(e,t,r)=>n=>{if(r)return n===void 0||n.trim()===""?d(e,"valideringsfeil.fødselsnummer.required"):void 0;if(n===t)return d(e,"valideringsfeil.fødselsnummer.ugyldigEgetFødselsnummer");const s=ge(n);return!r&&!Fe(n,s)&&s==="fnr"?d(e,"valideringsfeil.fødselsnummer.underSeksten"):s==="fnr"||s==="dnr"||s==="hnr"?void 0:d(e,"valideringsfeil.fødselsnummer.ugyldigFødselsnummer")},Ae=(e,t,r)=>{if(!w(e)||typeof e=="string"&&e.trim()==="")return d(r,"valideringsfeil.inputfelt.required",{inputFeltLabel:t})},Je=(e,t)=>r=>{const n=Ae(r,e,t);return n||Se(r,e,t)},Ee=e=>{const t=e.replace(ve,""),r=new Set(t.split(""));return Array.from(r).join("")},ye=(e,t,r)=>{const n=Ee(e).replace(/[\t]/g,"Tabulatortegn");return d(r,"valideringsfeil.fritekst.kanIkkeInneholdeTegn",{feltNavn:t,ugyldigeTegn:n})},Te=e=>pe.test(e),Se=(e,t,r)=>{if(!Te(e))return ye(e,t,r)},Ze=e=>e.replace(Ue," "),I=e=>e.charAt(0).toUpperCase()+e.slice(1),Xe=e=>e.filter(t=>t.konto===u.Fellesperiode||t.konto===u.Fedrekvote||t.konto===u.Mødrekvote||t.konto===u.Foreldrepenger||t.konto===u.AktivitetsfriKvote).map(t=>t.konto),R=(e,t,r,n,s)=>{let a;switch(t){case u.Mødrekvote:a=r.mor;break;case u.Fedrekvote:a=r.farMedmor;break;default:a=void 0}if(a)return e.formatMessage({id:"uttaksplan.stønadskontotype.foreldernavn.kvote"},{navn:H(I(a),e.locale)});if(n===!0&&s===!1){if(t===u.AktivitetsfriKvote)return e.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSFRI_KVOTE_BFHR"});if(t===u.Foreldrepenger)return e.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSKRAV_KVOTE_BFHR"})}return e.formatMessage({id:`uttaksplan.stønadskontotype.${t}`})},be=(e,t,r,n,s,a,l)=>{const y=E(r,n);if(s!==void 0){const T=H(y,e.locale),A=t===u.Fellesperiode?"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttakFellesperiode":"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttak";return d(e,A,{navn:I(T),prosent:s})}return R(e,t,n,a,l)},Re=e=>{const t=e.charAt(e.length-1).toLowerCase();return t==="s"||t==="x"||t==="z"},H=(e,t)=>t!=="nb"?e:Re(e)?`${e}'`:`${e}s`;var g=(e=>(e.Arbeid="ARBEID",e.Utdanning="UTDANNING",e.Kvalifiseringsprogrammet="KVALPROG",e.Introduksjonsprogrammet="INTROPROG",e.TrengerHjelp="TRENGER_HJELP",e.Innlagt="INNLAGT",e.ArbeidOgUtdanning="ARBEID_OG_UTDANNING",e.Uføre="UFØRE",e.IkkeOppgitt="IKKE_OPPGITT",e))(g||{}),v=(e=>(e.institusjonsoppholdAnnenForelder="INSTITUSJONSOPPHOLD_ANNEN_FORELDER",e.sykdomAnnenForelder="SYKDOM_ANNEN_FORELDER",e.aleneomsorg="ALENEOMSORG",e.ikkeRettAnnenForelder="IKKE_RETT_ANNEN_FORELDER",e))(v||{});const Ie=e=>{const t=j(e).getAntallUttaksdager();if(k(e)){const r=e.stillingsprosent!==void 0,n=e.samtidigUttakProsent!==void 0;if(r&&n||r){const s=(100-p(e.stillingsprosent))/100;return t*s}else return n?t*(p(e.samtidigUttakProsent)/100):t}return t},he=10,L=2*7,Ne=6*7,Qe=(e,t,r,n)=>$(e)&&t&&r&&n==="fødsel",Pe=e=>k(e)&&e.forelder===F.farMedmor&&e.konto===u.Fedrekvote&&!e.erMorForSyk&&e.morsAktivitetIPerioden===void 0&&!e.ønskerFlerbarnsdager&&e.ønskerSamtidigUttak===!0,h=(e,t,r)=>Pe(e)&&P(e.tidsperiode,t,r),_e=(e,t)=>k(e)&&e.forelder===F.farMedmor&&!t,Oe=(e,t)=>{const r=t!==void 0?i(t).subtract(L,"day"):i(e).subtract(L,"day"),n=i.min(r,i(e));return S(n.toDate()).denneEllerNeste()},N=e=>{const t=S(e).denneEllerNeste();return S(i(t).add(Ne,"day").toDate()).forrige()},Me=(e,t,r)=>{const n=Oe(t,r);return i(e.fom).isSameOrAfter(n,"day")},et=(e,t)=>k(e)&&i(e.tidsperiode.fom).isBefore(t,"day"),tt=(e,t)=>{const r=N(t);return i(e.tom).isSameOrBefore(r,"day")},P=(e,t,r)=>Me(e,t,r)&&i(e.fom).isSameOrBefore(N(t),"day"),rt=(e,t,r)=>e.filter(n=>h(n,t,r)),nt=(e,t,r,n,s,a,l)=>e!==void 0&&C(e)&&s&&l==="fødsel"&&$(t)&&r===o.Uttak&&(n===u.Fedrekvote||n===u.Foreldrepenger||n===u.AktivitetsfriKvote)&&P(e,t,a),st=(e,t)=>{const r=N(e),n=Ie({tidsperiode:{fom:t,tom:r}});return Math.min(n,he)},De=(e,t,r,n,s,a)=>n==="fødsel"&&h(r,s,a)?t+d(e,"rundtFødsel"):t,at=(e,t,r,n)=>(h(e,t,n)||_e(e,r))&&W(e.tidsperiode,t),ot=(e,t,r)=>e.filter(n=>(k(n)||B(n))&&P(n.tidsperiode,t,r)),ut=(e,t,r)=>!!e&&t!==void 0&&i(r).isSame(t,"d"),dt=e=>({fom:M(e.fom),tom:M(e.tom)}),it=e=>{const t=p(e);return t?t>0:!1},lt=e=>{const t=p(e);return t?t<=100:!1},ft=e=>{const t=p(e);return t?t<100:!1},K=e=>e!==void 0&&isNaN(parseFloat(e))===!1,G=e=>{if(e===void 0)return;const t=parseFloat(e);if(!isNaN(t))return Math.round(t)===t?Math.round(t):t},Le=(e,t)=>{if(t)return t;if(e){let r=(100-e)*100;return r=Math.round(r)/100,r}},Ke=(e,t,r,n)=>{const s=I(r);return n?d(e,`uttaksplan.oppholdsårsaktype.foreldernavn.far.${t}`,{foreldernavn:s}):d(e,`uttaksplan.oppholdsårsaktype.foreldernavn.mor.${t}`,{foreldernavn:s})},Ge=e=>e===c.UttakFedrekvoteAnnenForelder?u.Fedrekvote:e===c.UttakMødrekvoteAnnenForelder?u.Mødrekvote:e===c.UttakFellesperiodeAnnenForelder?u.Fellesperiode:e===c.UttakForeldrepengerAnnenForelder?u.Foreldrepenger:u.ForeldrepengerFørFødsel,ct=e=>{switch(e){case u.Fedrekvote:return c.UttakFedrekvoteAnnenForelder;case u.Mødrekvote:return c.UttakMødrekvoteAnnenForelder;case u.Fellesperiode:return c.UttakFellesperiodeAnnenForelder;default:return}},E=(e,t)=>t.farMedmor?e===F.mor?t.mor:t.farMedmor:e===F.mor?t.mor:e,kt=(e,t,r,n,s,a,l,y)=>{switch(t.type){case o.Uttak:{const T=R(e,t.konto,r,l,y),A=De(e,T,t,a,n,s);return t.gradert&&K(t.stillingsprosent)||t.ønskerSamtidigUttak&&K(t.samtidigUttakProsent)?`${A} ${d(e,"gradering.prosent",{stillingsprosent:Le(G(t.stillingsprosent),t.samtidigUttakProsent?G(t.samtidigUttakProsent):void 0)})}`:A}case o.PeriodeUtenUttak:return d(e,"uttaksplan.periodetype.periodeUtenUttak.tittel");case o.Overføring:return R(e,t.konto,r);case o.Utsettelse:return t.årsak?d(e,"uttaksplan.periodeliste.utsettelsesårsak",{årsak:d(e,`uttaksplan.utsettelsesårsak.${t.årsak}`)}):d(e,"uttaksplan.periodeliste.utsettelsesårsak.ukjent");case o.Opphold:return Ke(e,t.årsak,E(t.forelder,r),t.forelder==="mor");case o.Hull:return d(e,"uttaksplan.periodetype.hull.tittel");case o.Info:switch(t.infotype){case _.uttakAnnenPart:return be(e,Ge(t.årsak),t.forelder,r,t.samtidigUttakProsent);case _.utsettelseAnnenPart:return d(e,`uttaksplan.periodetype.info.utsettelse.${t.årsak}`,{navn:E(t.forelder,r)});default:return d(e,`uttaksplan.periodetype.info.${t.infotype}`)}}},mt=(e,t)=>{if(t===void 0)return!1;const r=je(e,t);return r?r.resultat.innvilget:!1},je=(e,t)=>t.saksperioder.find(r=>z(Y(r.periode),e.tidsperiode)),gt=(e,t)=>e.type===o.Utsettelse||e.type===o.Uttak||e.type===o.Overføring||e.type===o.Opphold||e.type===o.Info?E(e.forelder,t):"Ingen forelder registrert",Ft=e=>{switch(e){case o.Uttak:return"uttaksplan.slettPeriode.uttak";case o.Overføring:return"uttaksplan.slettPeriode.overføring";case o.Opphold:return"uttaksplan.slettPeriode.opphold";case o.Utsettelse:return"uttaksplan.slettPeriode.utsettelse";default:return""}},$e=(e,t)=>e.tidsperiode.fom!==void 0&&e.tidsperiode.tom!==void 0&&i(e.tidsperiode.fom).isSameOrAfter(t,"day")&&i(e.tidsperiode.tom).isSameOrAfter(t,"day"),pt=(e,t)=>$e(e,t)===!1,vt=e=>(e.type===o.Uttak||e.type===o.Opphold)&&i(e.tidsperiode.fom).isBefore(i().startOf("day").subtract(3,"months"),"day"),Ut=e=>e.årsak===f.Sykdom||e.årsak===f.InstitusjonSøker||e.årsak===f.InstitusjonBarnet,At=e=>!!(B(e)&&(e.årsak===v.institusjonsoppholdAnnenForelder||e.årsak===v.sykdomAnnenForelder)||k(e)&&(e.erMorForSyk===!0||e.morsAktivitetIPerioden===g.TrengerHjelp||e.morsAktivitetIPerioden===g.Innlagt)||q(e)&&(e.morsAktivitetIPerioden===g.Innlagt||e.morsAktivitetIPerioden===g.TrengerHjelp)),Et=e=>k(e)&&!V(x(e.tidsperiode.fom)),Be=e=>e.type===o.Utsettelse&&!V(x(e.tidsperiode.fom)),yt=e=>e.årsak===f.Arbeid,Tt=e=>e.type===o.Utsettelse,Ve=e=>e.type===o.Utsettelse&&(e.årsak===f.Ferie||e.årsak===f.Arbeid),St=e=>Be(e)&&Ve(e),bt=e=>e===f.Sykdom||e===f.InstitusjonBarnet||e===f.InstitusjonSøker||e===v.institusjonsoppholdAnnenForelder||e===v.sykdomAnnenForelder,Rt=(e,t)=>t.some(r=>j(e).erLik(r,!0,!0)),It=(e,t)=>{if(k(e)){const r=t.filter(n=>O(n)).find(n=>O(n)&&i(e.tidsperiode.fom).isSame(n.tidsperiode.fom)&&n.ønskerSamtidigUttak===!0&&n.id!==e.id);return r!==void 0?r:void 0}},ht=(e,t,r)=>{const n=e.find(s=>s.id===t.id);return n&&n.isValid!==r?e.map(s=>s.id===n.id?{...s,isValid:r}:s):n?e:[...e,{id:t.id,isValid:r}]};export{st as $,N as A,P as B,rt as C,he as D,et as E,F,at as G,ot as H,Ze as I,Se as J,Ye as K,Je as L,g as M,ze as N,v as O,ut as P,Tt as Q,Ut as R,At as S,Be as T,Et as U,yt as V,vt as W,Ie as X,bt as Y,Rt as Z,De as _,Ft as a,c as a0,_e as a1,dt as a2,nt as a3,ct as a4,te as a5,Xe as a6,R as b,E as c,kt as d,Ke as e,It as f,ht as g,Ge as h,p as i,I as j,pt as k,mt as l,Ee as m,St as n,H as o,gt as p,lt as q,ft as r,it as s,Qe as t,Pe as u,Te as v,Me as w,Oe as x,h as y,tt as z};
//# sourceMappingURL=periodeUtils-1a4dc73e.js.map
