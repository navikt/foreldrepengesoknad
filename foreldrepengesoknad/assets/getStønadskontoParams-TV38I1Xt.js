import{r as u}from"./index-BP8_t0zE.js";import{g as f}from"./apiInterceptor-BCtLUnPl.js";import{j as p}from"./Uttaksdagen-DrQ0Oxxl.js";import{D as m,E as D,G as v,H as x,I as C}from"./FpDataContext-BW_0HfWx.js";import"./dateFormValidation-DXkRFCUV.js";import{g as H,j as K}from"./barnUtils-CwWCeo2u.js";import{c as B}from"./eksisterendeSakUtils-BoCmg3dy.js";import{i as g,h as U,j as y}from"./useFpNavigator-rsQS18v_.js";var c=(t=>(t.UNFETCHED="Unfetched",t.IN_PROGRESS="InProgress",t.FINISHED="Finished",t))(c||{});const R={config:{},isSuspended:!1},at=(t,e=R)=>{const[r,s]=u.useState(),[E,o]=u.useState(null),[n,a]=u.useState(c.UNFETCHED),d=e.fnr?f(e.fnr):f();return u.useEffect(()=>{!e.isSuspended&&n===c.UNFETCHED&&(a(c.IN_PROGRESS),d.get(t,e.config).then(i=>{s(i.data===""?void 0:i.data),a(c.FINISHED)}).catch(i=>{o(i),a(c.FINISHED)}))},[e,t,d,n]),{data:r,error:E,requestStatus:n}},M=(t,e,r=R)=>{const[s,E]=u.useState(),[o,n]=u.useState(null),[a,d]=u.useState(c.UNFETCHED),i=r.fnr?f(r.fnr):f();return u.useEffect(()=>{!r.isSuspended&&a===c.UNFETCHED&&(d(c.IN_PROGRESS),i.post(t,e,r.config).then(l=>{E(l.data===""?void 0:l.data),d(c.FINISHED)}).catch(l=>{n(l),d(c.FINISHED)}))},[r,t,i,a,e]),{data:s,error:o,requestStatus:a}};var S=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER="STØNADSKONTOER",t))(S||{});const _={},O=u.createContext(_),h=u.createContext(void 0),q=({children:t,initialState:e})=>{const[r,s]=u.useReducer((E,o)=>{switch(o.type){case"update":return{...E,[o.key]:[o.hash,o.data]};case"reset":return{};default:throw new Error}},e||_);return p.jsx(O.Provider,{value:r,children:p.jsx(h.Provider,{value:s,children:t})})},G=(t,e)=>{const s=u.useContext(O)[t];return s&&s[0]===e?s[1]:void 0},V=(t,e)=>{const r=u.useContext(h);return s=>{r&&r({type:"update",key:t,hash:e,data:s})}};q.__docgenInfo={description:"",methods:[],displayName:"FpApiDataContext",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},initialState:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    [FpApiDataType.ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.NESTE_SAK_ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.STØNADSKONTOER]?: [number, TilgjengeligeStønadskontoer];
}`,signature:{properties:[]}},description:""}}};const j=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),k=t=>{let e=0;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);e=(e<<5)-e+s,e=e&e}return e},w={[S.ANNEN_PART_VEDTAK]:"/rest/innsyn/v2/annenPartVedtak",[S.NESTE_SAK_ANNEN_PART_VEDTAK]:"/rest/innsyn/v2/annenPartVedtak",[S.STØNADSKONTOER]:"/rest/konto"},ot=(t,e,r)=>{var l;const s=k(JSON.stringify(j(e))),E=G(t,s),o=!!E,n=V(t,s),{data:a,requestStatus:d,error:i}=M(w[t],e,{config:{withCredentials:t!==S.STØNADSKONTOER},isSuspended:o||r});return u.useEffect(()=>{a&&n(a)},[a]),(l=i==null?void 0:i.message)!=null&&l.includes("Ugyldig ident")?{data:void 0,requestStatus:c.FINISHED,error:null}:{data:o?E:a,requestStatus:o?c.FINISHED:d,error:i}},L=(t,e)=>t?!0:m(e)?!!e.harRettPåForeldrepengerINorge:!1,J=(t,e)=>t?m(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,Y=(t,e)=>{if(D(t)||C(t))return e||t.termindato},z=(t,e)=>e||t||void 0,Q=(t,e,r)=>t&&r?r:e,W=(t,e,r,s,E)=>r||s?"ALENEOMSORG":t&&e||E?"BEGGE_RETT":"BARE_SØKER_RETT",nt=(t,e,r,s,E,o)=>{const n=m(e)?e:void 0,a=g(r.rolle),d=U(a,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),i=y(!a,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),l=s!==void 0?s.startdatoFørsteStønadsperiode:void 0,N=B(E,t,a,H(t),l),I=Q(a,t.antallBarn,N==null?void 0:N.grunnlag.antallBarn),P=z(o==null?void 0:o.grunnlag.termindato,N==null?void 0:N.grunnlag.termindato),A=g(r.rolle),T=g(r.rolle),F=m(e)&&e.harRettPåForeldrepengerIEØS;return{rettighetstype:W(L(A,e),J(A,e),i||!1,d||!1,F||!1),brukerrolle:T?"FAR":"MOR",antallBarn:I.toString(),fødselsdato:D(t)?t.fødselsdatoer[0]:void 0,termindato:Y(t,P),omsorgsovertakelseDato:v(t)||x(t)?t.adopsjonsdato:void 0,morHarUføretrygd:K(e,T),familieHendelseDatoNesteSak:l}};export{q as F,c as R,S as a,Q as b,z as c,at as d,nt as g,ot as u};
