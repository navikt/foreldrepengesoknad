import{d as s}from"./validationUtils-00d66cf2.js";import{d as f,i as c,o as d,T as p,s as v,b as I,u as K,z as k,y as U,t as D,_ as S,w as P,$ as h,n as g,S as b,E as A,P as F}from"./dateUtils-becbdc23.js";import{Q as N,R as O,S as y,T,U as H,V as _,W as G,X as R}from"./periodeUtils-1a4dc73e.js";var a=(e=>(e.Sykdom="SYKDOM",e.Uttak="UTTAK",e.SykdomOgUttak="SYKDOM_OG_UTTAK",e.InstitusjonSøker="INSTITUSJONSOPPHOLD_SØKER",e.InstitusjonBarnet="INSTITUSJONSOPPHOLD_BARNET",e.Arbeid="ARBEID",e.ArbeidOgUttak="ARBEID_OG_UTTAK",e.Ingen="INGEN",e))(a||{});const ke=e=>({getPeriode:t=>j(e,t),getOpphold:()=>C(e),getUttak:()=>x(e),getOverføringer:()=>L(e),getHull:()=>V(e),getHullOgInfoOgPerioderUtenUttak:()=>Y(e),getInfoperioder:()=>z(e),getUtsettelser:()=>w(e),getPerioderEtterFamiliehendelsesdato:t=>M(e,t),getPerioderFørFamiliehendelsesdato:t=>te(e,t),getPerioderMedUgyldigTidsperiode:()=>ne(e),getPerioderMedFerieForForelder:t=>fe(e,t),getFørstePerioderEtterFamiliehendelsesdato:t=>re(e,t),getForeldrepengerFørTermin:()=>ae(e),getFørsteUttaksdag:()=>ie(e),getFørsteUttaksdagEtterSistePeriode:()=>le(e),getFørsteUttaksdagEksluderInfoperioderOgFrittUttak:()=>oe(e),getAntallUttaksdager:()=>se(e),getAntallFeriedager:t=>de(e,t),finnOverlappendePerioder:t=>Q(e,t),finnPeriodeMedDato:t=>W(e,t),finnFørstePeriodeEtterDato:t=>X(e,t),finnAlleForegåendePerioder:t=>E(e,t),finnAllePåfølgendePerioder:t=>B(e,t),finnDenForegåendePerioden:t=>$(e,t),finnPåfølgendePeriode:t=>q(e,t),forskyvPerioder:t=>Z(e,t),sort:()=>[...e].sort(m),finnSisteInfoperiode:()=>ge(e)});function m(e,t){return f(e.tidsperiode)===!1||f(t.tidsperiode)===!1?c(e)&&e.skalIkkeHaUttakFørTermin?-1:f(e.tidsperiode)?1:-1:s(e.tidsperiode.fom).isSame(t.tidsperiode.fom,"day")?d(e)?-1:1:p(t.tidsperiode).erOmsluttetAv(e.tidsperiode)?1:s(e.tidsperiode.fom).isBefore(t.tidsperiode.fom,"day")?-1:1}function j(e,t){return e.find(r=>r.id===t)}function x(e){return e.filter(t=>v(t))}function w(e){return e.filter(t=>I(t))}function J(e){return e.filter(t=>A(t))}function L(e){return e.filter(t=>K(t))}function V(e){return e.filter(t=>k(t))}function Y(e){return e.filter(t=>k(t)||d(t)||U(t))}function z(e){return e.filter(t=>d(t))}function C(e){return e.filter(t=>D(t))}function Q(e,t){return e.filter(r=>{if(r.id===t.id||!f(t.tidsperiode))return!1;const{fom:i,tom:n}=r.tidsperiode;if(!i||!n)return!1;const o=S(i,t.tidsperiode)||S(n,t.tidsperiode),l=s(t.tidsperiode.fom).isSameOrAfter(i,"day")&&s(t.tidsperiode.tom).isSameOrBefore(n,"day");return o||l})}function W(e,t){return e.find(r=>s(t).isBetween(r.tidsperiode.fom,r.tidsperiode.tom,"day","[]"))}function X(e,t){return e.find(r=>s(r.tidsperiode.fom).isAfter(t,"day"))}function E(e,t){return e.filter(r=>s(r.tidsperiode.tom).isBefore(t.tidsperiode.fom,"day"))}function B(e,t){return e.filter(r=>s(r.tidsperiode.fom).isAfter(t.tidsperiode.tom,"day"))}function $(e,t){const r=E(e,t);if(r.length>0)return r.pop()}function q(e,t){const r=B(e,t);if(r.length>0)return r[0]}function Z(e,t){let r=t;return e.reduce((i,n)=>{if(I(n)){i.push(n);const o=P(n).getAntallUttaksdager();return o>=r?r=0:r-=o,i}if(d(n)||k(n)||U(n)||h(n)){const o=P(n).getAntallUttaksdager();if(o>r){const l=g(g(n.tidsperiode.fom).denneEllerNeste()).leggTil(r),u={...n,tidsperiode:{fom:l,tom:n.tidsperiode.tom}};return r=0,i.push(u),i}else return o===r?(r=0,i):(r-=o,i)}return i.push(ee(n,r)),i},[])}function ee(e,t){if(t===0)return e;const r=g(g(e.tidsperiode.fom).denneEllerNeste()).leggTil(t);return P(e).setStartdato(r)}function te(e,t){return e.filter(r=>c(r)||f(r.tidsperiode)&&s(r.tidsperiode.fom).isBefore(t,"day"))}function M(e,t){return e.filter(r=>f(r.tidsperiode)&&s(r.tidsperiode.fom).isSameOrAfter(t,"day")&&c(r)===!1)}function re(e,t){const r=M(e,t).sort(m);return r.length>0?r[0]:void 0}function ne(e){return e.filter(t=>f(t.tidsperiode)===!1&&c(t)===!1)}function ie(e){const t=e.filter(r=>r.tidsperiode.fom!==void 0).sort(m).shift();if(t)return t.tidsperiode.fom}function oe(e){const t=e.filter(r=>r.tidsperiode.fom!==void 0&&!d(r)&&!U(r)&&!h(r)).sort(m).shift();if(t)return t.tidsperiode.fom}function se(e){return e.reduce((t,r)=>t+P(r).getAntallUttaksdager(),0)}function de(e,t){return J(e).filter(r=>f(r.tidsperiode)&&t?r.forelder===t:!0).map(r=>p(r.tidsperiode).getAntallUttaksdager()).reduce((r,i)=>r+i,0)}function fe(e,t){return e.filter(r=>ue(r,t))}function ae(e){const t=e.find(r=>v(r)&&r.konto===b.ForeldrepengerFørFødsel);return t||void 0}function le(e){if(e.length!==0)return g(e[e.length-1].tidsperiode.tom).neste()}const ue=(e,t)=>A(e)&&e.forelder===t;function ge(e){return e.filter(t=>d(t)).sort(m).reverse()[0]}const Ue=e=>{const t=e.filter(N),r=t.some(O),i=e.some(y),n=t.filter(T).some(O),o=e.filter(H).some(y),l=t.filter(T).some(_),u=e.some(G);return l?u?a.ArbeidOgUttak:a.Arbeid:r||n||o||i?u?a.SykdomOgUttak:a.Sykdom:u?a.Uttak:a.Ingen},Fe=e=>{const t=e.filter(r=>!d(r));return t.length===0?!1:t.every(r=>r.type===F.Opphold)},Se=e=>e.filter(t=>!d(t)).slice().reverse().findIndex(t=>t.type===F.Opphold)===0,Oe=e=>e.filter(t=>!d(t)).findIndex(t=>t.type===F.Opphold)===0,ye=e=>Math.floor(e.map(t=>R(t)).reduce((t,r)=>t+r,0));export{ke as P,a as S,Se as a,Oe as b,Ue as c,ye as g,m as s,Fe as u};
//# sourceMappingURL=Periodene-dd720f95.js.map
