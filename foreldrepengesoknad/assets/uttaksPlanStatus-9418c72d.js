import{S as d,b as c,P as o,d as j,n as h,o as U,O as I,U as S,h as V,g as $,a as H,p as R}from"./Perioden-14a4f262.js";import{U as E,d as i,i as k,Q as B,x as F,j as x,X as w,I as L,aa as W,ab as J}from"./Tidsperioden-32d6ceea.js";import"./jsx-runtime-1caa8f64.js";import"./index-1cdf6ce0.js";import{c as A}from"./stringUtils-e4ae28d6.js";import{j as G}from"./barnUtils-27f7dae4.js";var f=(t=>(t.UttakFellesperiodeAnnenForelder="UTTAK_FELLESP_ANNEN_FORELDER",t.UttakFedrekvoteAnnenForelder="UTTAK_FEDREKVOTE_ANNEN_FORELDER",t.UttakMødrekvoteAnnenForelder="UTTAK_MØDREKVOTE_ANNEN_FORELDER",t.UttakForeldrepengerAnnenForelder="UTTAK_FORELDREPENGER_ANNEN_FORELDER",t.ForeldrepengerFørFødsel="UTTAK_FORELDREPENGER_FØR_FØDSEL_ANNEN_FORELDER",t.Ingen="INGEN",t))(f||{}),N=(t=>(t.institusjonsoppholdAnnenForelder="INSTITUSJONSOPPHOLD_ANNEN_FORELDER",t.sykdomAnnenForelder="SYKDOM_ANNEN_FORELDER",t.aleneomsorg="ALENEOMSORG",t.ikkeRettAnnenForelder="IKKE_RETT_ANNEN_FORELDER",t))(N||{});const z=/^[0-9]*$/,Q=t=>{let e=2,r=0;for(let n=t.length-2;n>=0;--n)r+=parseInt(t.charAt(n),10)*e,++e>7&&(e=2);const s=11-r%11;return s===11?0:s},q=t=>z.test(t)&&t.length===9,C=t=>t.charAt(0)==="8"||t.charAt(0)==="9",Rt=t=>!t||q(t)===!1||C(t)===!1||t==="999999999"?!1:Q(t)===parseInt(t.charAt(8),10),X=RegExp(/^[-]?[0-9,.\s]*$/),Y=t=>t.replace(/,/g,".").replace(/\s/g,"").replace(/%/g,""),g=t=>{if(t!=null&&t.length>0&&X.test(t)){const e=Y(t);return(e.match(/\./g)||[]).length>1?void 0:parseFloat(e)}},Tt=(t,e,r)=>{if(!e)return t;const s=E(r).denneEllerNeste();return i(e).isBefore(i(s),"d")?t.filter(l=>l===d.Fellesperiode||l===d.Foreldrepenger):t},Mt=t=>t.filter(e=>e.konto===d.Fellesperiode||e.konto===d.Fedrekvote||e.konto===d.Mødrekvote||e.konto===d.Foreldrepenger||e.konto===d.AktivitetsfriKvote).map(e=>e.konto),T=(t,e,r,s,n)=>{let a;switch(e){case d.Mødrekvote:a=r.mor;break;case d.Fedrekvote:a=r.farMedmor;break;default:a=void 0}if(a)return t.formatMessage({id:"uttaksplan.stønadskontotype.foreldernavn.kvote"},{navn:G(A(a),t.locale)});if(s===!0&&n===!1){if(e===d.AktivitetsfriKvote)return t.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSFRI_KVOTE_BFHR"});if(e===d.Foreldrepenger)return t.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSKRAV_KVOTE_BFHR"})}return t.formatMessage({id:`uttaksplan.stønadskontotype.${e}`})},Z=(t,e,r,s,n,a,l)=>{const u=p(r,s);if(n!==void 0){const v=G(u,t.locale),m=e===d.Fellesperiode?"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttakFellesperiode":"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttak";return k(t,m,{navn:A(v),prosent:n})}return T(t,e,s,a,l)},tt=10,D=2*7,et=6*7,yt=(t,e,r,s)=>B(t)&&e&&r&&s==="fødsel",rt=t=>c(t)&&t.forelder===F.farMedmor&&t.konto===d.Fedrekvote&&!t.erMorForSyk&&t.morsAktivitetIPerioden===void 0&&!t.ønskerFlerbarnsdager&&t.ønskerSamtidigUttak===!0,M=(t,e,r)=>rt(t)&&O(t.tidsperiode,e,r),st=(t,e)=>c(t)&&t.forelder===F.farMedmor&&!e,nt=(t,e)=>{const r=e!==void 0?i(e).subtract(D,"day"):i(t).subtract(D,"day"),s=i.min(r,i(t));return E(s.toDate()).denneEllerNeste()},y=t=>{const e=E(t).denneEllerNeste();return E(i(e).add(et,"day").toDate()).forrige()},at=(t,e,r)=>{const s=nt(e,r);return i(t.fom).isSameOrAfter(s,"day")},Ot=(t,e)=>c(t)&&i(t.tidsperiode.fom).isBefore(e,"day"),_t=(t,e)=>{const r=y(e);return i(t.tom).isSameOrBefore(r,"day")},O=(t,e,r)=>at(t,e,r)&&i(t.fom).isSameOrBefore(y(e),"day"),ht=(t,e,r)=>t.filter(s=>M(s,e,r)),It=(t,e,r,s,n,a,l)=>t!==void 0&&x(t)&&n&&l==="fødsel"&&B(e)&&r===o.Uttak&&(s===d.Fedrekvote||s===d.Foreldrepenger||s===d.AktivitetsfriKvote)&&O(t,e,a),Lt=(t,e)=>{const r=y(t),s=P({tidsperiode:{fom:e,tom:r}});return Math.min(s,tt)},ot=(t,e,r,s,n,a)=>s==="fødsel"&&M(r,n,a)?e+k(t,"rundtFødsel"):e,Dt=(t,e,r,s)=>(M(t,e,s)||st(t,r))&&w(t.tidsperiode,e),Kt=(t,e,r)=>t.filter(s=>(c(s)||j(s))&&O(s.tidsperiode,e,r)),bt=(t,e,r)=>!!t&&e!==void 0&&i(r).isSame(e,"d"),jt=t=>({fom:L(t.fom),tom:L(t.tom)}),Vt=t=>{const e=g(t);return e?e>0:!1},Bt=t=>{const e=g(t);return e?e<=100:!1},Gt=t=>{const e=g(t);return e?e<100:!1},K=t=>t!==void 0&&isNaN(parseFloat(t))===!1,b=t=>{if(t===void 0)return;const e=parseFloat(t);if(!isNaN(e))return Math.round(e)===e?Math.round(e):e},dt=(t,e)=>{if(e)return e;if(t){let r=(100-t)*100;return r=Math.round(r)/100,r}},it=(t,e,r,s)=>{const n=A(r);return s?k(t,`uttaksplan.oppholdsårsaktype.foreldernavn.far.${e}`,{foreldernavn:n}):k(t,`uttaksplan.oppholdsårsaktype.foreldernavn.mor.${e}`,{foreldernavn:n})},_=t=>t===f.UttakFedrekvoteAnnenForelder?d.Fedrekvote:t===f.UttakMødrekvoteAnnenForelder?d.Mødrekvote:t===f.UttakFellesperiodeAnnenForelder?d.Fellesperiode:t===f.UttakForeldrepengerAnnenForelder?d.Foreldrepenger:d.ForeldrepengerFørFødsel,$t=t=>{switch(t){case d.Fedrekvote:return f.UttakFedrekvoteAnnenForelder;case d.Mødrekvote:return f.UttakMødrekvoteAnnenForelder;case d.Fellesperiode:return f.UttakFellesperiodeAnnenForelder;default:return}},p=(t,e)=>{let r="";return e.farMedmor?r=t===F.mor?e.mor:e.farMedmor:r=t===F.mor?e.mor:t,A(r)},lt=(t,e,r,s,n,a,l,u)=>{const v=T(t,e.konto,r,l,u),m=ot(t,v,e,a,s,n);return e.gradert&&K(e.stillingsprosent)||e.ønskerSamtidigUttak&&K(e.samtidigUttakProsent)?`${m} ${k(t,"gradering.prosent",{stillingsprosent:dt(b(e.stillingsprosent),e.samtidigUttakProsent?b(e.samtidigUttakProsent):void 0)})}`:m},ut=(t,e,r,s)=>{switch(e.infotype){case U.uttakAnnenPart:return Z(t,_(e.årsak),e.forelder,r,e.samtidigUttakProsent);case U.utsettelseAnnenPart:return k(t,`uttaksplan.periodetype.info.utsettelse.${e.årsak}`,{navn:p(e.forelder,r)});case U.avslåttPeriode:return e.opprinneligSøkt===I.Arbeid||e.opprinneligSøkt===I.Ferie?"Avslått utsettelse":e.forelder===F.mor&&s||e.forelder===F.farMedmor&&!s?k(t,"uttaksplan.periodetype.info.avslåttPeriode.annenPart",{navn:p(e.forelder,r)}):k(t,`uttaksplan.periodetype.info.${e.infotype}`)}},Ht=(t,e,r,s,n,a,l,u)=>{switch(e.type){case o.Uttak:return lt(t,e,r,s,n,a,l,u);case o.PeriodeUtenUttak:return k(t,"uttaksplan.periodetype.periodeUtenUttak.tittel");case o.Overføring:return T(t,e.konto,r);case o.Utsettelse:return e.årsak?k(t,"uttaksplan.periodeliste.utsettelsesårsak",{årsak:k(t,`uttaksplan.utsettelsesårsak.${e.årsak}`)}):k(t,"uttaksplan.periodeliste.utsettelsesårsak.ukjent");case o.Opphold:return it(t,e.årsak,p(e.forelder,r),e.forelder==="mor");case o.Hull:return k(t,"uttaksplan.periodetype.hull.tittel");case o.Info:return ut(t,e,r,l)}},xt=(t,e)=>{if(e===void 0)return!1;const r=kt(t,e);return r?r.resultat.innvilget:!1},kt=(t,e)=>e.saksperioder.find(r=>W(J(r.periode),t.tidsperiode)),wt=(t,e)=>t.type===o.Utsettelse||t.type===o.Uttak||t.type===o.Overføring||t.type===o.Opphold||t.type===o.Info?p(t.forelder,e):"Ingen forelder registrert",Wt=t=>{switch(t){case o.Uttak:return"uttaksplan.slettPeriode.uttak";case o.Overføring:return"uttaksplan.slettPeriode.overføring";case o.Opphold:return"uttaksplan.slettPeriode.opphold";case o.Utsettelse:return"uttaksplan.slettPeriode.utsettelse";case o.Info:return"uttaksplan.slettPeriode.info";default:return""}},ft=(t,e)=>t.tidsperiode.fom!==void 0&&t.tidsperiode.tom!==void 0&&i(t.tidsperiode.fom).isSameOrAfter(e,"day")&&i(t.tidsperiode.tom).isSameOrAfter(e,"day"),Jt=(t,e)=>ft(t,e)===!1,zt=t=>t===S.Sykdom||t===S.InstitusjonBarnet||t===S.InstitusjonSøker||t===N.institusjonsoppholdAnnenForelder||t===N.sykdomAnnenForelder,Qt=(t,e)=>e.some(r=>V(t).erLik(r,!0,!0)),qt=(t,e)=>{if(c(t)){const r=e.filter(s=>h(s)).find(s=>h(s)&&i(t.tidsperiode.fom).isSame(s.tidsperiode.fom)&&s.ønskerSamtidigUttak===!0&&s.id!==t.id);return r!==void 0?r:void 0}},Ct=(t,e,r)=>{const s=t.find(n=>n.id===e.id);return s&&s.isValid!==r?t.map(n=>n.id===s.id?{...n,isValid:r}:n):s?t:[...t,{id:e.id,isValid:r}]},P=t=>{const e=V(t).getAntallUttaksdager();if(c(t)){const r=t.stillingsprosent!==void 0,s=t.samtidigUttakProsent!==void 0;if(r&&s||r){const n=(100-g(t.stillingsprosent))/100;return e*n}else return s?e*(g(t.samtidigUttakProsent)/100):e}return e},ct=t=>[...t.filter(c),...gt(t.filter($)),...pt(t.filter(j)),...mt(t.filter(H)),...Ut(t.filter(R))],Ft=(t,e,r)=>{const s=ct(e);return t.map(n=>{let a=r?0:n.dager;const l=s.filter(u=>u.konto===n.konto);return l&&(l.forEach(u=>{(u.type===o.Uttak||u.type===o.Overføring||R(u))&&(a=r?a+P(u):a-P(u))}),a=r?Math.floor(a):Math.ceil(a)),{konto:n.konto,dager:a}})},Xt=(t,e)=>Ft(t,e,!0),gt=t=>t.length===0?[]:t.map(e=>({id:e.id,tidsperiode:e.tidsperiode,type:o.Uttak,konto:_(e.årsak),forelder:e.forelder})),pt=t=>t.length===0?[]:t.map(e=>({id:e.id,tidsperiode:e.tidsperiode,type:o.Uttak,konto:e.konto,forelder:e.forelder})),mt=t=>{if(t.length===0)return[];const e=[];return t.filter(r=>R(r)===!1).forEach(r=>{r.infotype===U.uttakAnnenPart&&e.push(r)}),e.map(r=>{const{type:s,årsak:n,...a}=r;return{type:o.Uttak,konto:_(r.årsak),...a}})},Ut=t=>t.length===0?[]:t.filter(e=>e.avslåttPeriodeType===o.Uttak||e.avslåttPeriodeType===o.Utsettelse).map(e=>({type:o.Uttak,konto:e.kontoType,tidsperiode:e.tidsperiode,id:e.id,forelder:e.forelder}));export{p as A,it as B,qt as C,ct as D,Xt as E,Ft as F,Jt as G,xt as H,zt as I,wt as J,Vt as K,Bt as L,Gt as M,yt as N,f as O,rt as P,at as Q,_t as R,ht as S,tt as T,Ot as U,nt as a,Kt as b,Qt as c,T as d,Rt as e,P as f,Ht as g,ot as h,y as i,Lt as j,Dt as k,N as l,g as m,M as n,st as o,jt as p,It as q,_ as r,O as s,$t as t,bt as u,Y as v,Ct as w,Mt as x,Tt as y,Wt as z};
