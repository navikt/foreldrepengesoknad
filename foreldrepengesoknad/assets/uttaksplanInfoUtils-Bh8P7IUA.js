import{r as d}from"./index-Cu9bd8lq.js";import{j as h}from"./jsx-runtime-DoxjgJx5.js";import{u as w,R as D,a as Y}from"./useRequest-Bq8ZCFOD.js";import{E as y}from"./Environment-O62Hvuhd.js";import{c as G,$ as J,a0 as L,y as $,o as z,d as m,a1 as W}from"./Tidsperioden-BXZJ7Xx1.js";import"./index-C-6Uy6j4.js";import{I as T,H as S,K as Q,J as X,x as v,V as Z,W as b,D as f,z as tt,S as P}from"./index-BUeOcrf5.js";import{g as et}from"./useFpNavigator-59rUkzFa.js";import"./_baseToString-yTMKM5a7.js";import"./_createSet-BNfKGSGn.js";import{e as E}from"./barnUtils-CInKtSjf.js";import{c as rt}from"./eksisterendeSakUtils-NtznYZJp.js";var A=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER_100="STØNADSKONTOER_100",t.STØNADSKONTOER_80="STØNADSKONTOER_80",t))(A||{});const k={},K=d.createContext(k),I=d.createContext(void 0),at=({children:t})=>{const[e,r]=d.useReducer((a,o)=>{switch(o.type){case"update":return{...a,[o.key]:[o.hash,o.data]};case"reset":return{};default:throw new Error}},k);return h.jsx(K.Provider,{value:e,children:h.jsx(I.Provider,{value:r,children:t})})},H=(t,e)=>{const a=d.useContext(K)[t];return a&&a[0]===e?a[1]:void 0},x=(t,e)=>{const r=d.useContext(I);return a=>{r&&r({type:"update",key:t,hash:e,data:a})}};at.__docgenInfo={description:"",methods:[],displayName:"FpApiDataContext",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},initialState:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    [FpApiDataType.ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.NESTE_SAK_ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.STØNADSKONTOER_100]?: [number, TilgjengeligeStønadskontoerDTO];
    [FpApiDataType.STØNADSKONTOER_80]?: [number, TilgjengeligeStønadskontoerDTO];
}`,signature:{properties:[]}},description:""},onDispatch:{required:!1,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"{ type: 'update'; key: FpApiDataType; hash: number; data: any } | { type: 'reset' }",elements:[{name:"signature",type:"object",raw:"{ type: 'update'; key: FpApiDataType; hash: number; data: any }",signature:{properties:[{key:"type",value:{name:"literal",value:"'update'",required:!0}},{key:"key",value:{name:"FpApiDataType",required:!0}},{key:"hash",value:{name:"number",required:!0}},{key:"data",value:{name:"any",required:!0}}]}},{name:"signature",type:"object",raw:"{ type: 'reset' }",signature:{properties:[{key:"type",value:{name:"literal",value:"'reset'",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""}}};const q=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),F=t=>{let e=0;for(let r=0;r<t.length;r++){const a=t.charCodeAt(r);e=(e<<5)-e+a,e=e&e}return e},j={[A.ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[A.NESTE_SAK_ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[A.STØNADSKONTOER_80]:`${y.REST_API_URL}/konto`,[A.STØNADSKONTOER_100]:`${y.REST_API_URL}/konto`},Ot=(t,e,r)=>{const a=F(JSON.stringify(q(e))),o=H(t,a),n=!!o,i=x(t,a),{data:s,requestStatus:c,error:u}=w(j[t],{config:{timeout:15*1e3,params:e,withCredentials:!1},isSuspended:n||r});return d.useEffect(()=>{s&&i(s)},[s]),{data:n?o:s,requestStatus:n?D.FINISHED:c,error:u}},ht=(t,e,r)=>{const a=F(JSON.stringify(q(e))),o=H(t,a),n=!!o,i=x(t,a),{data:s,requestStatus:c,error:u}=Y(j[t],e,{config:{withCredentials:!0},isSuspended:n||r});return d.useEffect(()=>{s&&i(s)},[s]),u&&u.message.includes("Ugyldig ident")?{data:void 0,requestStatus:D.FINISHED,error:null}:{data:n?o:s,requestStatus:n?D.FINISHED:c,error:u}},st=(t,e)=>t?!0:T(e)?!!e.harRettPåForeldrepengerINorge:!1,ot=(t,e)=>t?T(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,nt=t=>T(t)?!!t.harRettPåForeldrepengerIEØS:!1,it=(t,e)=>{if(v(t)||tt(t))return e||t.termindato},ut=(t,e)=>e||t||void 0,dt=(t,e,r)=>t&&r?r:e,p=(t,e)=>$(t)?z(t,e):void 0,yt=(t,e,r,a,o,n)=>{const i=T(e)?e:void 0,s=S(r.rolle),c=Q(s,(i==null?void 0:i.erAleneOmOmsorg)||!1,e),u=X(!s,(i==null?void 0:i.erAleneOmOmsorg)||!1,e),C=a==null?void 0:a.familiehendelsesdato,B=a!==void 0?a.startdatoFørsteStønadsperiode:void 0,l=rt(o,t,s,E(t),B),M=dt(s,t.antallBarn,l==null?void 0:l.grunnlag.antallBarn),U=ut(n==null?void 0:n.grunnlag.termindato,l==null?void 0:l.grunnlag.termindato),N=S(r.rolle),V=G(E(t)),_=S(r.rolle),g="YYYYMMDD",O={farHarRett:st(N,e),morHarRett:ot(N,e),harAnnenForelderTilsvarendeRettEØS:nt(e),morHarAleneomsorg:u||!1,farHarAleneomsorg:c||!1,antallBarn:M,fødselsdato:p(v(t)?t.fødselsdatoer[0]:void 0,g),termindato:p(it(t,U),g),omsorgsovertakelseDato:p(Z(t)||b(t)?t.adopsjonsdato:void 0,g),startdatoUttak:p(E(t),g),minsterett:J(V),erMor:!_,morHarUføretrygd:et(e,_),familieHendelseDatoNesteSak:p(L(C),g)};return{stønadskontoParams100:{...O,dekningsgrad:f.HUNDRE_PROSENT},stønadskontoParams80:{...O,dekningsgrad:f.ÅTTI_PROSENT}}},lt=(t,e)=>{const r=[];return r.push({...t[0],dager:t[0].dager-e}),r.push({konto:P.AktivitetsfriKvote,dager:e}),r},R=t=>{let e=[];Object.keys(t.kontoer).filter(a=>a!==P.Flerbarnsdager).forEach(a=>{e.push({konto:a,dager:t.kontoer[a]})});const r=t.minsteretter.generellMinsterett;return r>0&&(e=lt(e,r)),e},Rt=(t,e)=>{const r=R(t),a=R(e);return{[f.ÅTTI_PROSENT]:r,[f.HUNDRE_PROSENT]:a}},vt=(t,e,r)=>{if(t===void 0||e===void 0||r!=="fødsel")return!1;const a=m(t).isSameOrAfter(m(new Date("2019-07-01")),"day");return m(t).add(7,"weeks").add(3,"days").isBefore(m(e),"days")&&a},Pt=(t,e)=>t&&e?(100-parseInt(e,10)).toString():"100",kt=(t,e)=>W({fom:m(t).toDate(),tom:m(e).toDate()}).getAntallUttaksdager()-1;export{at as F,A as a,Ot as b,Rt as c,dt as d,Pt as e,kt as f,yt as g,vt as s,ht as u};
