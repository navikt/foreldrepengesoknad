import{r as d}from"./index-Cu9bd8lq.js";import{j as h}from"./jsx-runtime-DoxjgJx5.js";import{u as w,R as N,a as L}from"./useRequest-Bq8ZCFOD.js";import{E as R}from"./Environment-O62Hvuhd.js";import{e as Y,O as G,P as J,z as $,p as z,d as l,T as W}from"./Tidsperioden-uYz_lIz2.js";import"./index-C-6Uy6j4.js";import{x as f,J as E,L as X,K as Q,y as v,W as Z,X as b,D as T,A as tt,S as P}from"./index-KchjYVEa.js";import{g as et}from"./useFpNavigator-CnqD88so.js";import"./_baseToString-yTMKM5a7.js";import"./_createSet-BNfKGSGn.js";import{g as S}from"./barnUtils-DBQFgAwJ.js";import{c as rt}from"./eksisterendeSakUtils-CcY07o3H.js";var A=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER_100="STØNADSKONTOER_100",t.STØNADSKONTOER_80="STØNADSKONTOER_80",t))(A||{});const k={},K=d.createContext(k),I=d.createContext(void 0),at=({children:t})=>{const[e,r]=d.useReducer((a,o)=>{switch(o.type){case"update":return{...a,[o.key]:[o.hash,o.data]};case"reset":return{};default:throw new Error}},k);return h.jsx(K.Provider,{value:e,children:h.jsx(I.Provider,{value:r,children:t})})},H=(t,e)=>{const a=d.useContext(K)[t];return a&&a[0]===e?a[1]:void 0},x=(t,e)=>{const r=d.useContext(I);return a=>{r&&r({type:"update",key:t,hash:e,data:a})}};at.__docgenInfo={description:"",methods:[],displayName:"FpApiDataContext",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},initialState:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    [FpApiDataType.ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.NESTE_SAK_ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.STØNADSKONTOER_100]?: [number, TilgjengeligeStønadskontoerDTO];
    [FpApiDataType.STØNADSKONTOER_80]?: [number, TilgjengeligeStønadskontoerDTO];
}`,signature:{properties:[]}},description:""},onDispatch:{required:!1,tsType:{name:"signature",type:"function",raw:"(action: Action) => void",signature:{arguments:[{type:{name:"union",raw:"{ type: 'update'; key: FpApiDataType; hash: number; data: any } | { type: 'reset' }",elements:[{name:"signature",type:"object",raw:"{ type: 'update'; key: FpApiDataType; hash: number; data: any }",signature:{properties:[{key:"type",value:{name:"literal",value:"'update'",required:!0}},{key:"key",value:{name:"FpApiDataType",required:!0}},{key:"hash",value:{name:"number",required:!0}},{key:"data",value:{name:"any",required:!0}}]}},{name:"signature",type:"object",raw:"{ type: 'reset' }",signature:{properties:[{key:"type",value:{name:"literal",value:"'reset'",required:!0}}]}}]},name:"action"}],return:{name:"void"}}},description:""}}};const q=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),F=t=>{let e=0;for(let r=0;r<t.length;r++){const a=t.charCodeAt(r);e=(e<<5)-e+a,e=e&e}return e},C={[A.ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[A.NESTE_SAK_ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[A.STØNADSKONTOER_80]:`${R.REST_API_URL}/konto`,[A.STØNADSKONTOER_100]:`${R.REST_API_URL}/konto`},_t=(t,e,r)=>{const a=F(JSON.stringify(q(e))),o=H(t,a),n=!!o,i=x(t,a),{data:s,requestStatus:c,error:u}=w(C[t],{config:{timeout:15*1e3,params:e,withCredentials:!1},isSuspended:n||r});return d.useEffect(()=>{s&&i(s)},[s]),{data:n?o:s,requestStatus:n?N.FINISHED:c,error:u}},ht=(t,e,r)=>{const a=F(JSON.stringify(q(e))),o=H(t,a),n=!!o,i=x(t,a),{data:s,requestStatus:c,error:u}=L(C[t],e,{config:{withCredentials:!0},isSuspended:n||r});return d.useEffect(()=>{s&&i(s)},[s]),u&&u.message.includes("Ugyldig ident")?{data:void 0,requestStatus:N.FINISHED,error:null}:{data:n?o:s,requestStatus:n?N.FINISHED:c,error:u}},st=(t,e)=>t?!0:f(e)?!!e.harRettPåForeldrepengerINorge:!1,ot=(t,e)=>t?f(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,nt=t=>f(t)?!!t.harRettPåForeldrepengerIEØS:!1,it=(t,e)=>{if(v(t)||tt(t))return e||t.termindato},ut=(t,e)=>e||t||void 0,dt=(t,e,r)=>t&&r?r:e,g=(t,e)=>$(t)?z(t,e):void 0,Rt=(t,e,r,a,o,n)=>{const i=f(e)?e:void 0,s=E(r.rolle),c=X(s,(i==null?void 0:i.erAleneOmOmsorg)||!1,e),u=Q(!s,(i==null?void 0:i.erAleneOmOmsorg)||!1,e),M=a==null?void 0:a.familiehendelsesdato,U=a!==void 0?a.startdatoFørsteStønadsperiode:void 0,m=rt(o,t,s,S(t),U),B=dt(s,t.antallBarn,m==null?void 0:m.grunnlag.antallBarn),j=ut(n==null?void 0:n.grunnlag.termindato,m==null?void 0:m.grunnlag.termindato),D=E(r.rolle),V=Y(S(t)),O=E(r.rolle),p="YYYYMMDD",_={farHarRett:st(D,e),morHarRett:ot(D,e),harAnnenForelderTilsvarendeRettEØS:nt(e),morHarAleneomsorg:u||!1,farHarAleneomsorg:c||!1,antallBarn:B,fødselsdato:g(v(t)?t.fødselsdatoer[0]:void 0,p),termindato:g(it(t,j),p),omsorgsovertakelseDato:g(Z(t)||b(t)?t.adopsjonsdato:void 0,p),startdatoUttak:g(S(t),p),minsterett:G(V),erMor:!O,morHarUføretrygd:et(e,O),familieHendelseDatoNesteSak:g(J(M),p)};return{stønadskontoParams100:{..._,dekningsgrad:T.HUNDRE_PROSENT},stønadskontoParams80:{..._,dekningsgrad:T.ÅTTI_PROSENT}}},mt=(t,e)=>{const r=[];return r.push({...t[0],dager:t[0].dager-e}),r.push({konto:P.AktivitetsfriKvote,dager:e}),r},y=t=>{let e=[];Object.keys(t.kontoer).filter(a=>a!==P.Flerbarnsdager).forEach(a=>{e.push({konto:a,dager:t.kontoer[a]})});const r=t.minsteretter.generellMinsterett;return r>0&&(e=mt(e,r)),e},yt=(t,e)=>{const r=y(t),a=y(e);return{[T.ÅTTI_PROSENT]:r,[T.HUNDRE_PROSENT]:a}},vt=(t,e,r)=>{if(!(!e||!r))return t===T.HUNDRE_PROSENT?e.minsteretter:r.minsteretter},Pt=(t,e,r)=>{if(t===void 0||e===void 0||r!=="fødsel")return!1;const a=l(t).isSameOrAfter(l(new Date("2019-07-01")),"day");return l(t).add(7,"weeks").add(3,"days").isBefore(l(e),"days")&&a},kt=(t,e)=>t&&e?(100-parseInt(e,10)).toString():"100",Kt=(t,e)=>W({fom:l(t).toDate(),tom:l(e).toDate()}).getAntallUttaksdager()-1;export{at as F,A as a,_t as b,yt as c,dt as d,kt as e,Kt as f,Rt as g,vt as h,ut as i,Pt as s,ht as u};
