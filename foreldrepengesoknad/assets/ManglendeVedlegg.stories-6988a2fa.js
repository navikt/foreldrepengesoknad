import{j as e}from"./jsx-runtime-69eee039.js";import{w as Z}from"./withRouter-a172066d.js";import{w as ee,F as ne}from"./ForeldrepengerStateMock-c0a24792.js";import{A as te}from"./AxiosMock-2e314ed2.js";import{_ as re}from"./søkerinfoKvinneMedEttBarn-8f2bf17a.js";import{_ as oe,u as se,d as _,$ as ae,i as d,B as S,G as de,a9 as b,L as ie,R as le,y as L,aa as ge,ab as pe,j as R,ac as y}from"./Tidsperioden-bc4aa89e.js";import{q as me,m as ce,s as ke}from"./Periodene-3e3b4ab3.js";import{A as p}from"./AttachmentType-f6ad37cf.js";import"./index-e13aeee6.js";import"./index-7c191284.js";import"./_baseToString-4b695375.js";import"./_createSet-f4a01039.js";import{S as O}from"./mapSøkerinfoDTO-23fed2f2.js";import{u as ue}from"./useOnValidSubmit-f79aa596.js";import{a as fe,L as Ee}from"./useSøknad-26978d9c.js";import{u as Se,a as ye,b as Me,s as ve,g as je,c as Ae}from"./useSaveLoadedRoute-2e481752.js";import{Q as Ne,a as Te}from"./submitUtils-97d75fe7.js";import{f as xe,i as Ve}from"./util-88d81413.js";import{F as he,S as M}from"./FormikFileUploader-1e1345f2.js";import{F as I}from"./message-0de53699.js";import{B as P}from"./Link-b834ea2b.js";import"./apiInterceptor-7ea9ce80.js";import"./index-b3a39e30.js";import"./v4-a960c1f4.js";import"./api-cf202c98.js";import"./amplitude-e7683f28.js";import"./AttachmentList-6bd7cc9e.js";import"./Attachment-3a7d5334.js";const Fe=4,_e="/soknad/uttaksplan-info",be={søknad:{type:"foreldrepenger",harGodkjentVilkår:!0,søkersituasjon:{situasjon:"fødsel",rolle:"mor"},barn:{type:"ufødt",terminbekreftelse:[],termindato:"2021-03-15",terminbekreftelsedato:"2021-03-15",antallBarn:"1",datoForAleneomsorg:"",dokumentasjonAvAleneomsorg:[]},annenForelder:{kanIkkeOppgis:!0},søker:{språkkode:"nb"},informasjonOmUtenlandsopphold:{tidligereOpphold:[],senereOpphold:[]},erEndringssøknad:!1,uttaksplan:[]},version:Fe,currentRoute:_e,søknadGjelderEtNyttBarn:!0};var m=(n=>(n.vedlegg="vedlegg",n))(m||{});const U=oe(),Le={[m.vedlegg]:{isAnswered:({vedlegg:n,manglendeVedleggTyper:o,erLikEllerMindreEnnFireUkerTilUttaketStarter:i})=>i?!0:o.every(a=>n.filter(l=>!!l).flat().some(l=>l.type===a)),isIncluded:()=>!0}},Re=Ne(Le),Oe=()=>({[m.vedlegg]:[]}),j=(n,o)=>n===p.MORS_AKTIVITET_DOKUMENTASJON?{navn:o}:void 0,Ie=n=>n.reduce((i,a)=>isNaN(+a)?i+"."+a:i+"["+a+"]","").replace(".søknad.",""),A=()=>{const n=se(),o=fe(),{uttaksplan:i,erEndringssøknad:a}=o,l=xe(o),N=Array.from(l.keys()),W=r=>(r.vedlegg.forEach((f,E)=>{if(f){const g=Ie(N[E].split("."));b.set(o,g,f)}}),[]),{handleSubmit:q,isSubmitting:T}=ue(W,O.OPPSUMMERING,r=>Te(r)),J=Se(),z=ye(),v=me(o.annenForelder)?o.annenForelder.fornavn:"",x=i.filter(r=>r.tidsperiode.fom!==void 0&&!ce(r)).sort(ke).shift(),V=x!==void 0&&_(x.tidsperiode.fom).isSameOrBefore(_().add(4,"weeks"),"day"),X=Array.from(l.values()).map(r=>r.type);return Me(O.MANGLENDE_VEDLEGG),e.jsx(U.FormikWrapper,{initialValues:Oe(),onSubmit:q,renderForm:({values:r})=>{const f=Re.getVisbility({...r,manglendeVedleggTyper:X,erLikEllerMindreEnnFireUkerTilUttaketStarter:V});return e.jsx(ae,{bannerTitle:d(n,"søknad.pageheading"),activeStepId:"dokumentasjon",pageTitle:d(n,"søknad.manglendeVedlegg"),onCancel:J,onContinueLater:z,steps:ve(n,a),children:e.jsxs(U.Form,{includeButtons:!1,children:[e.jsx(S,{padBottom:"l",children:e.jsx(de,{children:e.jsx(I,{id:V?"manglendeVedlegg.veileder":"manglendeVedlegg.uttaksplan.advarsel.forTidligUtenDokumentasjon"})})}),N.map((E,g)=>{var h,F;const Y=E.replace("søknad.",""),t=b.get(o,Y.replace(".vedlegg","").split(".")),s=l.get(E);return s.type===p.SEN_ENDRING?null:e.jsxs(S,{children:[e.jsx(ie,{children:d(n,`manglendeVedlegg.title.${s.type}`,j(s.type,v))}),e.jsx(le,{header:d(n,`manglendeVedlegg.apneLabel.${s.type}`,j(s.type,v)),children:e.jsx("div",{style:{backgroundColor:"#f1f1f1",padding:"1.5rem"},children:e.jsx(P,{children:d(n,`manglendeVedlegg.info.${s.type}`,j(s.type,v))})})}),(t==null?void 0:t.tidsperiode)&&(t==null?void 0:t.type)&&e.jsx(S,{margin:"l",children:e.jsx(P,{children:d(n,Ve(s.type)?"manglendeVedlegg.uttak.periode.tidsperiode":"manglendeVedlegg.periode.tidsperiode",{type:d(n,s.type===p.ANNEN_INNTEKT?`inntektstype.${t.type.toLowerCase()}`:t.type),fom:L(t.tidsperiode.fom),tom:t.tidsperiode.tom?L(t.tidsperiode.tom):"-"})})}),e.jsx(ge,{name:m.vedlegg,render:()=>e.jsx(he,{name:`${m.vedlegg}.${g}`,legend:"",label:d(n,"manglendeVedlegg.lastopp.manglende.vedlegg"),attachments:r.vedlegg&&r.vedlegg.length>g&&r.vedlegg[g]?r.vedlegg[g]:[],attachmentType:s.type,skjemanummer:s.skjemanummer},`${m.vedlegg}.${g}`)})]},s.type+((h=t==null?void 0:t.tidsperiode)==null?void 0:h.fom)+((F=t==null?void 0:t.tidsperiode)==null?void 0:F.tom))}),e.jsx(S,{children:e.jsxs(pe,{children:[e.jsx(R,{variant:"secondary",as:Ee,to:a?je("dokumentasjon"):Ae("dokumentasjon"),children:e.jsx(I,{id:"backlink.label"})}),f.areAllQuestionsAnswered()&&e.jsx(R,{type:"submit",disabled:T,loading:T,children:d(n,"søknad.gåVidere")})]})})]})})}})},w=A;try{A.displayName="ManglendeVedlegg",A.__docgenInfo={description:"",displayName:"ManglendeVedlegg",props:{}}}catch{}const Q=re,c=be,pn={title:"steps/ManglendeVedlegg",component:w,decorators:[Z,ee]},H=({context:n,søkerinfo:o})=>{const i=a=>{a.onPost("/storage/vedlegg").reply(200,{data:{}},{location:""})};return e.jsx(te,{mock:i,children:e.jsx(ne,{søknad:n,søkerinfo:o,children:e.jsx(w,{})})})},k=H.bind({});k.args={context:{...c,søknad:{...c.søknad,barn:{...c.søknad.barn,dokumentasjonAvAleneomsorg:[y(p.ALENEOMSORG,M.DOK_AV_ALENEOMSORG)],terminbekreftelse:[y(p.TERMINBEKREFTELSE,M.TERMINBEKREFTELSE)]}}},søkerinfo:Q};const u=H.bind({});u.args={context:{...c,søknad:{...c.søknad,søker:{...c.søknad.søker,andreInntekterSiste10Mnd:[{pågående:!0,tidsperiode:{fom:"2021-08-01",tom:""},type:"ETTERLØNN_SLUTTPAKKE",vedlegg:[y(p.ANNEN_INNTEKT,M.ETTERLØNN_ELLER_SLUTTVEDERLAG)]},{pågående:!0,tidsperiode:{fom:"2021-09-01",tom:""},type:"ETTERLØNN_SLUTTPAKKE",vedlegg:[y(p.ANNEN_INNTEKT,M.ETTERLØNN_ELLER_SLUTTVEDERLAG)]}]}}},søkerinfo:Q};var B,G,D;k.parameters={...k.parameters,docs:{...(B=k.parameters)==null?void 0:B.docs,source:{originalSource:`({
  context,
  søkerinfo
}) => {
  const restMock = (apiMock: MockAdapter) => {
    apiMock.onPost('/storage/vedlegg').reply(200, {
      data: {}
    }, {
      location: ''
    });
  };
  return <AxiosMock mock={restMock}>
            <ForeldrepengerStateMock søknad={context} søkerinfo={søkerinfo}>
                <ManglendeVedlegg />
            </ForeldrepengerStateMock>
        </AxiosMock>;
}`,...(D=(G=k.parameters)==null?void 0:G.docs)==null?void 0:D.source}}};var K,C,$;u.parameters={...u.parameters,docs:{...(K=u.parameters)==null?void 0:K.docs,source:{originalSource:`({
  context,
  søkerinfo
}) => {
  const restMock = (apiMock: MockAdapter) => {
    apiMock.onPost('/storage/vedlegg').reply(200, {
      data: {}
    }, {
      location: ''
    });
  };
  return <AxiosMock mock={restMock}>
            <ForeldrepengerStateMock søknad={context} søkerinfo={søkerinfo}>
                <ManglendeVedlegg />
            </ForeldrepengerStateMock>
        </AxiosMock>;
}`,...($=(C=u.parameters)==null?void 0:C.docs)==null?void 0:$.source}}};const mn=["Default","ManglerVedleggForUlikePerioder"];export{k as Default,u as ManglerVedleggForUlikePerioder,mn as __namedExportsOrder,pn as default};
//# sourceMappingURL=ManglendeVedlegg.stories-6988a2fa.js.map
