import{D as c}from"./Dekningsgrad-fced8842.js";import{b as O,S as H}from"./Perioden-b1f81fc9.js";import{f as L}from"./uttaksPlanStatus-4d798447.js";import{r as u}from"./index-1cdf6ce0.js";import{j as P}from"./jsx-runtime-1caa8f64.js";import{u as J,R as D,a as $}from"./useRequest-603f2ddc.js";import{E as v}from"./apiInterceptor-d1094a41.js";import{k as E,m as Q,l as z,o as N,s as F,t as W,u as X,v as Z}from"./barnUtils-397fbc9c.js";import{I as b,Q as A,a6 as tt,C as et,s as rt,d as S,T as st}from"./dates-c7d75be6.js";import"./index-753920cd.js";import{i as T}from"./isFarEllerMedmor-120238ea.js";import"./_baseToString-2517c4f7.js";import"./_createSet-019d3bf6.js";import{c as at}from"./eksisterendeSakUtils-903321d5.js";const ot=(t,e)=>E(t)&&e?!!t.erUfør:!1,kt=t=>E(t)&&!!t.harRettPåForeldrepengerIEØS,nt=(t,e)=>e===2?t===c.HUNDRE_PROSENT?17:21:t===c.HUNDRE_PROSENT?46:56,It=(t,e,r)=>t.slice().filter(a=>O(a)&&a.ønskerFlerbarnsdager===!0).reduce((a,n)=>O(n)?L(n)+a:a,0)>nt(e,r)*5;var p=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER_100="STØNADSKONTOER_100",t.STØNADSKONTOER_80="STØNADSKONTOER_80",t))(p||{});const K={},U=u.createContext(K),x=u.createContext(void 0),k=({children:t})=>{const[e,r]=u.useReducer((s,a)=>{switch(a.type){case"update":return{...s,[a.key]:[a.hash,a.data]};case"reset":return{};default:throw new Error}},K);return P.jsx(U.Provider,{value:e,children:P.jsx(x.Provider,{value:r,children:t})})},C=(t,e)=>{const s=u.useContext(U)[t];return s&&s[0]===e?s[1]:void 0},y=(t,e)=>{const r=u.useContext(x);return s=>{r&&r({type:"update",key:t,hash:e,data:s})}};try{k.displayName="FpApiDataContext",k.__docgenInfo={description:"",displayName:"FpApiDataContext",props:{initialState:{defaultValue:null,description:"",name:"initialState",required:!1,type:{name:"FpApiDataHashMap"}},onDispatch:{defaultValue:null,description:"",name:"onDispatch",required:!1,type:{name:"((action: Action) => void)"}}}}}catch{}const M=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),B=t=>{let e=0;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);e=(e<<5)-e+s,e=e&e}return e},j={[p.ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[p.NESTE_SAK_ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[p.STØNADSKONTOER_80]:`${v.REST_API_URL}/konto`,[p.STØNADSKONTOER_100]:`${v.REST_API_URL}/konto`},Ht=(t,e,r)=>{const s=B(JSON.stringify(M(e))),a=C(t,s),n=!!a,i=y(t,s),{data:o,requestStatus:m,error:l}=J(j[t],{config:{timeout:15*1e3,params:e,withCredentials:!1},isSuspended:n||r});return u.useEffect(()=>{o&&i(o)},[o]),{data:n?a:o,requestStatus:n?D.FINISHED:m,error:l}},Ft=(t,e,r)=>{const s=B(JSON.stringify(M(e))),a=C(t,s),n=!!a,i=y(t,s),{data:o,requestStatus:m,error:l}=$(j[t],e,{config:{withCredentials:!0},isSuspended:n||r});return u.useEffect(()=>{o&&i(o)},[o]),l&&l.message.includes("Ugyldig ident")?{data:void 0,requestStatus:D.FINISHED,error:null}:{data:n?a:o,requestStatus:n?D.FINISHED:m,error:l}},it=(t,e)=>t?!0:E(e)?!!e.harRettPåForeldrepengerINorge:!1,lt=(t,e)=>t?E(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,ut=t=>E(t)?!!t.harRettPåForeldrepengerIEØS:!1,dt=(t,e)=>{if(F(t)||Z(t))return e||A(t.termindato)},ct=(t,e)=>e||t||void 0,mt=(t,e,r)=>t&&r?r:e,f=(t,e)=>et(t)?rt(t,e):void 0,Kt=(t,e,r,s,a,n,i)=>{const o=T(r.rolle),m=Q(o,s.erAleneOmOmsorg,e),l=z(!o,s.erAleneOmOmsorg,e),q=a==null?void 0:a.familiehendelsesdato,V=a!==void 0?a.startdatoFørsteStønadsperiode:void 0,d=at(n,t,o,N(t),V),w=mt(o,t.antallBarn,d==null?void 0:d.grunnlag.antallBarn),Y=ct(i==null?void 0:i.grunnlag.termindato,d==null?void 0:d.grunnlag.termindato),R=T(r.rolle),G=b(N(t)),h=T(r.rolle),g="YYYYMMDD",_={farHarRett:it(R,e),morHarRett:lt(R,e),harAnnenForelderTilsvarendeRettEØS:ut(e),morHarAleneomsorg:l||!1,farHarAleneomsorg:m||!1,antallBarn:w,fødselsdato:f(F(t)?A(t.fødselsdatoer[0]):void 0,g),termindato:f(dt(t,Y),g),omsorgsovertakelseDato:f(W(t)||X(t)?A(t.adopsjonsdato):void 0,g),startdatoUttak:f(N(t),g),minsterett:tt(G),erMor:!h,morHarUføretrygd:ot(e,h),familieHendelseDatoNesteSak:f(A(q),g)};return{stønadskontoParams100:{..._,dekningsgrad:c.HUNDRE_PROSENT},stønadskontoParams80:{..._,dekningsgrad:c.ÅTTI_PROSENT}}},gt=(t,e)=>{const r=[];return r.push({...t[0],dager:t[0].dager-e}),r.push({konto:H.AktivitetsfriKvote,dager:e}),r},I=t=>{let e=[];Object.keys(t.kontoer).filter(s=>s!==H.Flerbarnsdager).forEach(s=>{e.push({konto:s,dager:t.kontoer[s]})});const r=t.minsteretter.generellMinsterett;return r>0&&(e=gt(e,r)),e},Ut=(t,e)=>{const r=I(t),s=I(e);return{[c.ÅTTI_PROSENT]:r,[c.HUNDRE_PROSENT]:s}},xt=(t,e,r)=>{if(t===void 0||e===void 0||r!=="fødsel")return!1;const s=S(t).isSameOrAfter(S(new Date("2019-07-01")),"day");return S(t).add(7,"weeks").add(3,"days").isBefore(S(e),"days")&&s},Ct=(t,e)=>t&&e?(100-parseInt(e,10)).toString():"100",yt=(t,e)=>st({fom:t,tom:e}).getAntallUttaksdager()-1;export{k as F,nt as a,p as b,Kt as c,Ht as d,Ut as e,ot as f,yt as g,mt as h,Ct as i,kt as j,It as k,xt as s,Ft as u};
