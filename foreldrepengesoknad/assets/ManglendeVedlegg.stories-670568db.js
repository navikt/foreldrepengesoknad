import{j as e}from"./jsx-runtime-69eee039.js";import{w as Y}from"./withIntl-38d35964.js";import{w as ee}from"./withRouter-15cc08d4.js";import{w as ne,F as te}from"./ForeldrepengerStateMock-2ca64e3f.js";import{A as re}from"./AxiosMock-9c813813.js";import{_ as oe}from"./søkerinfoKvinneMedEttBarn-8f2bf17a.js";import{Z as se,u as ae,d as _,_ as de,i as d,B as S,G as ie,f as b,a8 as L,L as le,R as ge,x as R,a9 as pe,aa as me,k as I,ab as y}from"./validationUtils-3e3f35a1.js";import{q as ce,m as ke,s as ue}from"./Periodene-52ff0d39.js";import{A as p}from"./AttachmentType-f6ad37cf.js";import"./index-e13aeee6.js";import"./index-7c191284.js";import"./_baseToString-4b695375.js";import"./_createSet-32a27317.js";import{S as O}from"./mapSøkerinfoDTO-c2e267b6.js";import{u as fe}from"./useOnValidSubmit-9255204e.js";import{a as Ee,L as Se}from"./useSøknad-67949f34.js";import{u as ye,a as Me,b as ve,s as je,g as Ae,c as Ne}from"./useSaveLoadedRoute-ccd0af0e.js";import{Q as xe,a as Te}from"./submitUtils-3190d349.js";import{f as Ve,i as he}from"./util-1e71b1e1.js";import{F as Fe,S as M}from"./FormikFileUploader-a3627c10.js";import{B as P}from"./Link-b834ea2b.js";import"./IntlProvider-b5f77251.js";import"./apiInterceptor-c6c2844c.js";import"./index-b3a39e30.js";import"./v4-a960c1f4.js";import"./api-02a26928.js";import"./amplitude-bdf1e125.js";import"./AttachmentList-ca8f0ac5.js";import"./Attachment-f47bbeea.js";const _e=4,be="/soknad/uttaksplan-info",Le={søknad:{type:"foreldrepenger",harGodkjentVilkår:!0,søkersituasjon:{situasjon:"fødsel",rolle:"mor"},barn:{type:"ufødt",terminbekreftelse:[],termindato:"2021-03-15",terminbekreftelsedato:"2021-03-15",antallBarn:"1",datoForAleneomsorg:"",dokumentasjonAvAleneomsorg:[]},annenForelder:{kanIkkeOppgis:!0},søker:{språkkode:"nb"},informasjonOmUtenlandsopphold:{tidligereOpphold:[],senereOpphold:[]},erEndringssøknad:!1,uttaksplan:[]},version:_e,currentRoute:be,søknadGjelderEtNyttBarn:!0};var m=(n=>(n.vedlegg="vedlegg",n))(m||{});const U=se(),Re={[m.vedlegg]:{isAnswered:({vedlegg:n,manglendeVedleggTyper:o,erLikEllerMindreEnnFireUkerTilUttaketStarter:i})=>i?!0:o.every(a=>n.filter(l=>!!l).flat().some(l=>l.type===a)),isIncluded:()=>!0}},Ie=xe(Re),Oe=()=>({[m.vedlegg]:[]}),j=(n,o)=>n===p.MORS_AKTIVITET_DOKUMENTASJON?{navn:o}:void 0,Pe=n=>n.reduce((i,a)=>isNaN(+a)?i+"."+a:i+"["+a+"]","").replace(".søknad.",""),A=()=>{const n=ae(),o=Ee(),{uttaksplan:i,erEndringssøknad:a}=o,l=Ve(o),N=Array.from(l.keys()),W=r=>(r.vedlegg.forEach((f,E)=>{if(f){const g=Pe(N[E].split("."));L.set(o,g,f)}}),[]),{handleSubmit:q,isSubmitting:x}=fe(W,O.OPPSUMMERING,r=>Te(r)),J=ye(),Z=Me(),v=ce(o.annenForelder)?o.annenForelder.fornavn:"",T=i.filter(r=>r.tidsperiode.fom!==void 0&&!ke(r)).sort(ue).shift(),V=T!==void 0&&_(T.tidsperiode.fom).isSameOrBefore(_().add(4,"weeks"),"day"),z=Array.from(l.values()).map(r=>r.type);return ve(O.MANGLENDE_VEDLEGG),e.jsx(U.FormikWrapper,{initialValues:Oe(),onSubmit:q,renderForm:({values:r})=>{const f=Ie.getVisbility({...r,manglendeVedleggTyper:z,erLikEllerMindreEnnFireUkerTilUttaketStarter:V});return e.jsx(de,{bannerTitle:d(n,"søknad.pageheading"),activeStepId:"dokumentasjon",pageTitle:d(n,"søknad.manglendeVedlegg"),onCancel:J,onContinueLater:Z,steps:je(n,a),children:e.jsxs(U.Form,{includeButtons:!1,children:[e.jsx(S,{padBottom:"l",children:e.jsx(ie,{children:e.jsx(b,{id:V?"manglendeVedlegg.veileder":"manglendeVedlegg.uttaksplan.advarsel.forTidligUtenDokumentasjon"})})}),N.map((E,g)=>{var h,F;const X=E.replace("søknad.",""),t=L.get(o,X.replace(".vedlegg","").split(".")),s=l.get(E);return s.type===p.SEN_ENDRING?null:e.jsxs(S,{children:[e.jsx(le,{children:d(n,`manglendeVedlegg.title.${s.type}`,j(s.type,v))}),e.jsx(ge,{header:d(n,`manglendeVedlegg.apneLabel.${s.type}`,j(s.type,v)),children:e.jsx("div",{style:{backgroundColor:"#f1f1f1",padding:"1.5rem"},children:e.jsx(P,{children:d(n,`manglendeVedlegg.info.${s.type}`,j(s.type,v))})})}),(t==null?void 0:t.tidsperiode)&&(t==null?void 0:t.type)&&e.jsx(S,{margin:"l",children:e.jsx(P,{children:d(n,he(s.type)?"manglendeVedlegg.uttak.periode.tidsperiode":"manglendeVedlegg.periode.tidsperiode",{type:d(n,s.type===p.ANNEN_INNTEKT?`inntektstype.${t.type.toLowerCase()}`:t.type),fom:R(t.tidsperiode.fom),tom:t.tidsperiode.tom?R(t.tidsperiode.tom):"-"})})}),e.jsx(pe,{name:m.vedlegg,render:()=>e.jsx(Fe,{name:`${m.vedlegg}.${g}`,legend:"",label:d(n,"manglendeVedlegg.lastopp.manglende.vedlegg"),attachments:r.vedlegg&&r.vedlegg.length>g&&r.vedlegg[g]?r.vedlegg[g]:[],attachmentType:s.type,skjemanummer:s.skjemanummer},`${m.vedlegg}.${g}`)})]},s.type+((h=t==null?void 0:t.tidsperiode)==null?void 0:h.fom)+((F=t==null?void 0:t.tidsperiode)==null?void 0:F.tom))}),e.jsx(S,{children:e.jsxs(me,{children:[e.jsx(I,{variant:"secondary",as:Se,to:a?Ae("dokumentasjon"):Ne("dokumentasjon"),children:e.jsx(b,{id:"backlink.label"})}),f.areAllQuestionsAnswered()&&e.jsx(I,{type:"submit",disabled:x,loading:x,children:d(n,"søknad.gåVidere")})]})})]})})}})},$=A;try{A.displayName="ManglendeVedlegg",A.__docgenInfo={description:"",displayName:"ManglendeVedlegg",props:{}}}catch{}const Q=oe,c=Le,cn={title:"steps/ManglendeVedlegg",component:$,decorators:[ee,Y,ne]},H=({context:n,søkerinfo:o})=>{const i=a=>{a.onPost("/storage/vedlegg").reply(200,{data:{}},{location:""})};return e.jsx(re,{mock:i,children:e.jsx(te,{søknad:n,søkerinfo:o,children:e.jsx($,{})})})},k=H.bind({});k.args={context:{...c,søknad:{...c.søknad,barn:{...c.søknad.barn,dokumentasjonAvAleneomsorg:[y(p.ALENEOMSORG,M.DOK_AV_ALENEOMSORG)],terminbekreftelse:[y(p.TERMINBEKREFTELSE,M.TERMINBEKREFTELSE)]}}},søkerinfo:Q};const u=H.bind({});u.args={context:{...c,søknad:{...c.søknad,søker:{...c.søknad.søker,andreInntekterSiste10Mnd:[{pågående:!0,tidsperiode:{fom:"2021-08-01",tom:""},type:"ETTERLØNN_SLUTTPAKKE",vedlegg:[y(p.ANNEN_INNTEKT,M.ETTERLØNN_ELLER_SLUTTVEDERLAG)]},{pågående:!0,tidsperiode:{fom:"2021-09-01",tom:""},type:"ETTERLØNN_SLUTTPAKKE",vedlegg:[y(p.ANNEN_INNTEKT,M.ETTERLØNN_ELLER_SLUTTVEDERLAG)]}]}}},søkerinfo:Q};var B,G,D;k.parameters={...k.parameters,docs:{...(B=k.parameters)==null?void 0:B.docs,source:{originalSource:`({
  context,
  søkerinfo
}) => {
  const restMock = (apiMock: MockAdapter) => {
    apiMock.onPost('/storage/vedlegg').reply(200, {
      data: {}
    }, {
      location: ''
    });
  };
  return <AxiosMock mock={restMock}>
            <ForeldrepengerStateMock søknad={context} søkerinfo={søkerinfo}>
                <ManglendeVedlegg />
            </ForeldrepengerStateMock>
        </AxiosMock>;
}`,...(D=(G=k.parameters)==null?void 0:G.docs)==null?void 0:D.source}}};var K,w,C;u.parameters={...u.parameters,docs:{...(K=u.parameters)==null?void 0:K.docs,source:{originalSource:`({
  context,
  søkerinfo
}) => {
  const restMock = (apiMock: MockAdapter) => {
    apiMock.onPost('/storage/vedlegg').reply(200, {
      data: {}
    }, {
      location: ''
    });
  };
  return <AxiosMock mock={restMock}>
            <ForeldrepengerStateMock søknad={context} søkerinfo={søkerinfo}>
                <ManglendeVedlegg />
            </ForeldrepengerStateMock>
        </AxiosMock>;
}`,...(C=(w=u.parameters)==null?void 0:w.docs)==null?void 0:C.source}}};const kn=["Default","ManglerVedleggForUlikePerioder"];export{k as Default,u as ManglerVedleggForUlikePerioder,kn as __namedExportsOrder,cn as default};
//# sourceMappingURL=ManglendeVedlegg.stories-670568db.js.map
