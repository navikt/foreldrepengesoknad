import{S as d,b as c,P as a,d as I,n as D,o as T,U as f,p as x,h as j,g as W,a as w,q as S}from"./Perioden-1c854ba4.js";import{i as u,Q as B,a8 as F,d as i,U as N,x as J,W as q,I as L,ao as V,_ as H,ap as z,aq as Q}from"./Tidsperioden-57efcdec.js";import"./jsx-runtime-69eee039.js";import"./index-7c191284.js";import{c as P}from"./stringUtils-9279c9e4.js";import{g as $}from"./barnUtils-bee45dcc.js";var m=(t=>(t.Arbeid="ARBEID",t.Utdanning="UTDANNING",t.Kvalifiseringsprogrammet="KVALPROG",t.Introduksjonsprogrammet="INTROPROG",t.TrengerHjelp="TRENGER_HJELP",t.Innlagt="INNLAGT",t.ArbeidOgUtdanning="ARBEID_OG_UTDANNING",t.Uføre="UFØRE",t.IkkeOppgitt="IKKE_OPPGITT",t))(m||{}),g=(t=>(t.UttakFellesperiodeAnnenForelder="UTTAK_FELLESP_ANNEN_FORELDER",t.UttakFedrekvoteAnnenForelder="UTTAK_FEDREKVOTE_ANNEN_FORELDER",t.UttakMødrekvoteAnnenForelder="UTTAK_MØDREKVOTE_ANNEN_FORELDER",t.UttakForeldrepengerAnnenForelder="UTTAK_FORELDREPENGER_ANNEN_FORELDER",t.ForeldrepengerFørFødsel="UTTAK_FORELDREPENGER_FØR_FØDSEL_ANNEN_FORELDER",t.Ingen="INGEN",t))(g||{}),U=(t=>(t.institusjonsoppholdAnnenForelder="INSTITUSJONSOPPHOLD_ANNEN_FORELDER",t.sykdomAnnenForelder="SYKDOM_ANNEN_FORELDER",t.aleneomsorg="ALENEOMSORG",t.ikkeRettAnnenForelder="IKKE_RETT_ANNEN_FORELDER",t))(U||{});const Y=/^[0-9]*$/,C=t=>{let e=2,r=0;for(let n=t.length-2;n>=0;--n)r+=parseInt(t.charAt(n),10)*e,++e>7&&(e=2);const s=11-r%11;return s===11?0:s},X=t=>Y.test(t)&&t.length===9,Z=t=>t.charAt(0)==="8"||t.charAt(0)==="9",_t=t=>!t||X(t)===!1||Z(t)===!1||t==="999999999"?!1:C(t)===parseInt(t.charAt(8),10),tt=RegExp(/^[-]?[0-9,.\s]*$/),et=t=>t.replace(/,/g,".").replace(/\s/g,"").replace(/%/g,""),p=t=>{if(t!=null&&t.length>0&&tt.test(t)){const e=et(t);return(e.match(/\./g)||[]).length>1?void 0:parseFloat(e)}},ht=t=>t.filter(e=>e.konto===d.Fellesperiode||e.konto===d.Fedrekvote||e.konto===d.Mødrekvote||e.konto===d.Foreldrepenger||e.konto===d.AktivitetsfriKvote).map(e=>e.konto),y=(t,e,r,s,n)=>{let o;switch(e){case d.Mødrekvote:o=r.mor;break;case d.Fedrekvote:o=r.farMedmor;break;default:o=void 0}if(o)return t.formatMessage({id:"uttaksplan.stønadskontotype.foreldernavn.kvote"},{navn:$(P(o),t.locale)});if(s===!0&&n===!1){if(e===d.AktivitetsfriKvote)return t.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSFRI_KVOTE_BFHR"});if(e===d.Foreldrepenger)return t.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSKRAV_KVOTE_BFHR"})}return t.formatMessage({id:`uttaksplan.stønadskontotype.${e}`})},rt=(t,e,r,s,n,o,k)=>{const l=E(r,s);if(n!==void 0){const v=$(l,t.locale),A=e===d.Fellesperiode?"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttakFellesperiode":"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttak";return u(t,A,{navn:P(v),prosent:n})}return y(t,e,s,o,k)},st=10,K=2*7,nt=6*7,Mt=(t,e,r,s)=>B(t)&&e&&r&&s==="fødsel",at=t=>c(t)&&t.forelder===F.farMedmor&&t.konto===d.Fedrekvote&&!t.erMorForSyk&&t.morsAktivitetIPerioden===void 0&&!t.ønskerFlerbarnsdager&&t.ønskerSamtidigUttak===!0,O=(t,e,r)=>at(t)&&h(t.tidsperiode,e,r),ot=(t,e)=>c(t)&&t.forelder===F.farMedmor&&!e,dt=(t,e)=>{const r=e!==void 0?i(e).subtract(K,"day"):i(t).subtract(K,"day"),s=i.min(r,i(t));return N(s.toDate()).denneEllerNeste()},_=t=>{const e=N(t).denneEllerNeste();return N(i(e).add(nt,"day").toDate()).forrige()},it=(t,e,r)=>{const s=dt(e,r);return i(t.fom).isSameOrAfter(s,"day")},Dt=(t,e)=>c(t)&&i(t.tidsperiode.fom).isBefore(e,"day"),Lt=(t,e)=>{const r=_(e);return i(t.tom).isSameOrBefore(r,"day")},h=(t,e,r)=>it(t,e,r)&&i(t.fom).isSameOrBefore(_(e),"day"),Kt=(t,e,r)=>t.filter(s=>O(s,e,r)),bt=(t,e,r,s,n,o,k)=>t!==void 0&&J(t)&&n&&k==="fødsel"&&B(e)&&r===a.Uttak&&(s===d.Fedrekvote||s===d.Foreldrepenger||s===d.AktivitetsfriKvote)&&h(t,e,o),Gt=(t,e)=>{const r=_(t),s=R({tidsperiode:{fom:e,tom:r}});return Math.min(s,st)},lt=(t,e,r,s,n,o)=>s==="fødsel"&&O(r,n,o)?e+u(t,"rundtFødsel"):e,jt=(t,e,r,s)=>(O(t,e,s)||ot(t,r))&&q(t.tidsperiode,e),Bt=(t,e,r)=>t.filter(s=>(c(s)||I(s))&&h(s.tidsperiode,e,r)),Vt=(t,e,r)=>!!t&&e!==void 0&&i(r).isSame(e,"d"),Ht=t=>({fom:L(t.fom),tom:L(t.tom)}),$t=t=>{const e=p(t);return e?e>0:!1},xt=t=>{const e=p(t);return e?e<=100:!1},Wt=t=>{const e=p(t);return e?e<100:!1},b=t=>t!==void 0&&isNaN(parseFloat(t))===!1,G=t=>{if(t===void 0)return;const e=parseFloat(t);if(!isNaN(e))return Math.round(e)===e?Math.round(e):e},ut=(t,e)=>{if(e)return e;if(t){let r=(100-t)*100;return r=Math.round(r)/100,r}},kt=(t,e,r,s)=>{const n=P(r);return s?u(t,`uttaksplan.oppholdsårsaktype.foreldernavn.far.${e}`,{foreldernavn:n}):u(t,`uttaksplan.oppholdsårsaktype.foreldernavn.mor.${e}`,{foreldernavn:n})},M=t=>t===g.UttakFedrekvoteAnnenForelder?d.Fedrekvote:t===g.UttakMødrekvoteAnnenForelder?d.Mødrekvote:t===g.UttakFellesperiodeAnnenForelder?d.Fellesperiode:t===g.UttakForeldrepengerAnnenForelder?d.Foreldrepenger:d.ForeldrepengerFørFødsel,wt=t=>{switch(t){case d.Fedrekvote:return g.UttakFedrekvoteAnnenForelder;case d.Mødrekvote:return g.UttakMødrekvoteAnnenForelder;case d.Fellesperiode:return g.UttakFellesperiodeAnnenForelder;default:return}},E=(t,e)=>{let r="";return e.farMedmor?r=t===F.mor?e.mor:e.farMedmor:r=t===F.mor?e.mor:t,P(r)},ft=(t,e,r,s,n,o,k,l)=>{const v=y(t,e.konto,r,k,l),A=lt(t,v,e,o,s,n);return e.gradert&&b(e.stillingsprosent)||e.ønskerSamtidigUttak&&b(e.samtidigUttakProsent)?`${A} ${u(t,"gradering.prosent",{stillingsprosent:ut(G(e.stillingsprosent),e.samtidigUttakProsent?G(e.samtidigUttakProsent):void 0)})}`:A},ct=(t,e,r,s)=>{switch(e.infotype){case T.uttakAnnenPart:return rt(t,M(e.årsak),e.forelder,r,e.samtidigUttakProsent);case T.utsettelseAnnenPart:return u(t,`uttaksplan.periodetype.info.utsettelse.${e.årsak}`,{navn:E(e.forelder,r)});case T.avslåttPeriode:return e.forelder===F.mor&&s||e.forelder===F.farMedmor&&!s?u(t,"uttaksplan.periodetype.info.avslåttPeriode.annenPart",{navn:E(e.forelder,r)}):u(t,`uttaksplan.periodetype.info.${e.infotype}`)}},Jt=(t,e,r,s,n,o,k,l)=>{switch(e.type){case a.Uttak:return ft(t,e,r,s,n,o,k,l);case a.PeriodeUtenUttak:return u(t,"uttaksplan.periodetype.periodeUtenUttak.tittel");case a.Overføring:return y(t,e.konto,r);case a.Utsettelse:return e.årsak?u(t,"uttaksplan.periodeliste.utsettelsesårsak",{årsak:u(t,`uttaksplan.utsettelsesårsak.${e.årsak}`)}):u(t,"uttaksplan.periodeliste.utsettelsesårsak.ukjent");case a.Opphold:return kt(t,e.årsak,E(e.forelder,r),e.forelder==="mor");case a.Hull:return u(t,"uttaksplan.periodetype.hull.tittel");case a.Info:return ct(t,e,r,k)}},qt=(t,e)=>{if(e===void 0)return!1;const r=gt(t,e);return r?r.resultat.innvilget:!1},gt=(t,e)=>e.saksperioder.find(r=>z(Q(r.periode),t.tidsperiode)),zt=(t,e)=>t.type===a.Utsettelse||t.type===a.Uttak||t.type===a.Overføring||t.type===a.Opphold||t.type===a.Info?E(t.forelder,e):"Ingen forelder registrert",Qt=t=>{switch(t){case a.Uttak:return"uttaksplan.slettPeriode.uttak";case a.Overføring:return"uttaksplan.slettPeriode.overføring";case a.Opphold:return"uttaksplan.slettPeriode.opphold";case a.Utsettelse:return"uttaksplan.slettPeriode.utsettelse";case a.Info:return"uttaksplan.slettPeriode.info";default:return""}},Ft=(t,e)=>t.tidsperiode.fom!==void 0&&t.tidsperiode.tom!==void 0&&i(t.tidsperiode.fom).isSameOrAfter(e,"day")&&i(t.tidsperiode.tom).isSameOrAfter(e,"day"),Yt=(t,e)=>Ft(t,e)===!1,Ct=t=>(t.type===a.Uttak||t.type===a.Opphold)&&i(t.tidsperiode.fom).isBefore(i().startOf("day").subtract(3,"months"),"day"),Xt=t=>t.årsak===f.Sykdom||t.årsak===f.InstitusjonSøker||t.årsak===f.InstitusjonBarnet,Zt=t=>!!(I(t)&&(t.årsak===U.institusjonsoppholdAnnenForelder||t.årsak===U.sykdomAnnenForelder)||c(t)&&(t.erMorForSyk===!0||t.morsAktivitetIPerioden===m.TrengerHjelp||t.morsAktivitetIPerioden===m.Innlagt)||x(t)&&(t.morsAktivitetIPerioden===m.Innlagt||t.morsAktivitetIPerioden===m.TrengerHjelp)),te=t=>c(t)&&!V(H(t.tidsperiode.fom)),mt=t=>t.type===a.Utsettelse&&!V(H(t.tidsperiode.fom)),ee=t=>t.årsak===f.Arbeid,re=t=>t.type===a.Utsettelse,Ut=t=>t.type===a.Utsettelse&&(t.årsak===f.Ferie||t.årsak===f.Arbeid),se=t=>mt(t)&&Ut(t),ne=t=>t===f.Sykdom||t===f.InstitusjonBarnet||t===f.InstitusjonSøker||t===U.institusjonsoppholdAnnenForelder||t===U.sykdomAnnenForelder,ae=(t,e)=>e.some(r=>j(t).erLik(r,!0,!0)),oe=(t,e)=>{if(c(t)){const r=e.filter(s=>D(s)).find(s=>D(s)&&i(t.tidsperiode.fom).isSame(s.tidsperiode.fom)&&s.ønskerSamtidigUttak===!0&&s.id!==t.id);return r!==void 0?r:void 0}},de=(t,e,r)=>{const s=t.find(n=>n.id===e.id);return s&&s.isValid!==r?t.map(n=>n.id===s.id?{...n,isValid:r}:n):s?t:[...t,{id:e.id,isValid:r}]},R=t=>{const e=j(t).getAntallUttaksdager();if(c(t)){const r=t.stillingsprosent!==void 0,s=t.samtidigUttakProsent!==void 0;if(r&&s||r){const n=(100-p(t.stillingsprosent))/100;return e*n}else return s?e*(p(t.samtidigUttakProsent)/100):e}return e},pt=t=>[...t.filter(c),...At(t.filter(W)),...Tt(t.filter(I)),...Pt(t.filter(w)),...vt(t.filter(S))],Et=(t,e,r)=>{const s=pt(e);return t.map(n=>{let o=r?0:n.dager;const k=s.filter(l=>l.konto===n.konto);return k&&(k.forEach(l=>{(l.type===a.Uttak||l.type===a.Overføring||S(l))&&(o=r?o+R(l):o-R(l))}),o=r?Math.floor(o):Math.ceil(o)),{konto:n.konto,dager:o}})},ie=(t,e)=>Et(t,e,!0),At=t=>t.length===0?[]:t.map(e=>({id:e.id,tidsperiode:e.tidsperiode,type:a.Uttak,konto:M(e.årsak),forelder:e.forelder})),Tt=t=>t.length===0?[]:t.map(e=>({id:e.id,tidsperiode:e.tidsperiode,type:a.Uttak,konto:e.konto,forelder:e.forelder})),Pt=t=>{if(t.length===0)return[];const e=[];return t.filter(r=>S(r)===!1).forEach(r=>{r.infotype===T.uttakAnnenPart&&e.push(r)}),e.map(r=>{const{type:s,årsak:n,...o}=r;return{type:a.Uttak,konto:M(r.årsak),...o}})},vt=t=>t.length===0?[]:t.filter(e=>e.avslåttPeriodeType===a.Uttak||e.avslåttPeriodeType===a.Utsettelse).map(e=>({type:a.Uttak,konto:e.kontoType,tidsperiode:e.tidsperiode,id:e.id,forelder:e.forelder}));export{st as $,M as A,wt as B,et as C,de as D,ht as E,Qt as F,E as G,kt as H,oe as I,pt as J,ie as K,Et as L,m as M,Yt as N,g as O,qt as P,ne as Q,se as R,zt as S,$t as T,xt as U,Wt as V,Mt as W,at as X,it as Y,Lt as Z,Kt as _,Xt as a,Dt as a0,Zt as b,mt as c,te as d,re as e,ee as f,dt as g,Ct as h,R as i,Jt as j,_t as k,Bt as l,ae as m,y as n,lt as o,_ as p,Gt as q,jt as r,h as s,U as t,Vt as u,p as v,O as w,ot as x,Ht as y,bt as z};
//# sourceMappingURL=uttaksPlanStatus-1f5446f4.js.map
