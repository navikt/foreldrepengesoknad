import{j as t}from"./jsx-runtime-69eee039.js";import{af as oe,ag as de,ah as ae,ai as le,Y as g,Z as Q,u as L,H as K,f as h,B as m,i as a,b as k,d as f,aj as V,ak as se,al as re,am as T,an as ie,ao as C,h as pe,ap as me,aq as z,ar as $,as as J,at as Z,_ as ue,au as E,av as _,aw as B,n as N,aa as ce,k as q}from"./validationUtils-024c2399.js";import"./index-e13aeee6.js";import{R as he}from"./index-7c191284.js";import"./_baseToString-4b695375.js";import"./_createSet-1fb11dfb.js";import{S as w,a as ge}from"./mapSøkerinfoDTO-695a75e8.js";import{u as fe}from"./useOnValidSubmit-63822350.js";import{a as ke,L as xe}from"./useSøknad-e5916e1e.js";import{u as Ne,a as ve,b as je,s as Se,c as be}from"./useSaveLoadedRoute-b612c2e3.js";import{Q as Be,a as Ie}from"./submitUtils-db323592.js";import{c as W,a as P}from"./formUtils-a66fbbf6.js";import{B as ye,L as De}from"./Link-b834ea2b.js";function Ue(e){var o=e.name,d=e.labels,l=e.listRenderer,c=e.formRenderer,r=e.sortFunc,s=e.onAfterChange,p=e.dialogWidth,n=e.shouldCloseOnOverlayClick,i=e.error,G=e.maxItems,X=e.useFastField,ee=e.confirmDelete,R=e.validate,v=he.useContext(oe),te=X?ae:le;return t.jsx(te,{name:o,validate:R?function(j){return R(j,o)}:void 0,children:function(j){var S=j.field,A=j.form;return t.jsx(de,{labels:d,items:S.value,error:i||(v?v.getAndRenderFieldErrorMessage(S,A):void 0),maxItems:G,dialogWidth:p,shouldCloseOnOverlayClick:n,confirmDelete:ee,onChange:function(x){var b=r?x.sort(r):x;A.setFieldValue(S.name,b),s&&s(b),v&&v.onAfterFieldValueSet()},formRenderer:c,listRenderer:function(x){var b=x.onEdit,ne=x.onDelete;return l({items:S.value,onDelete:ne,onEdit:b})}})}})}var u=(e=>(e.harBoddINorgeSiste12Mnd="harBoddINorgeSiste12Mnd",e.utenlandsoppholdSiste12Mnd="utenlandsoppholdSiste12Mnd",e.skalBoINorgeNeste12Mnd="skalBoINorgeNeste12Mnd",e.utenlandsoppholdNeste12Mnd="utenlandsoppholdNeste12Mnd",e))(u||{});const Me={harBoddINorgeSiste12Mnd:g.UNANSWERED,utenlandsoppholdSiste12Mnd:[],skalBoINorgeNeste12Mnd:g.UNANSWERED,utenlandsoppholdNeste12Mnd:[]},I=Q(),Fe={[u.harBoddINorgeSiste12Mnd]:{isAnswered:({harBoddINorgeSiste12Mnd:e})=>e!==g.UNANSWERED,isIncluded:()=>!0,visibilityFilter:({skalBoINorgeNeste12Mnd:e})=>e!==g.UNANSWERED},[u.utenlandsoppholdSiste12Mnd]:{isAnswered:({utenlandsoppholdSiste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({harBoddINorgeSiste12Mnd:e})=>e===g.NO},[u.skalBoINorgeNeste12Mnd]:{isAnswered:({skalBoINorgeNeste12Mnd:e})=>e!==g.UNANSWERED,isIncluded:()=>!0},[u.utenlandsoppholdNeste12Mnd]:{isAnswered:({utenlandsoppholdNeste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({skalBoINorgeNeste12Mnd:e})=>e===g.NO}},Oe=Be(Fe),Le=e=>{const{fom:o,landkode:d,tom:l}=e;return o!==void 0&&d!==void 0&&l!==void 0},y=Q(),Re=e=>({fom:e.fom,tom:e.tom,landkode:e.landkode}),M=({maxDate:e,minDate:o,bosted:d,onSubmit:l,onCancel:c,erFremtidigOpphold:r})=>{const s=L(),p=n=>{const i={...d,fom:n.fom,tom:n.tom,landkode:n.landkode};if(Le(i))l(i);else throw new Error("BostedUtlandForm: Formvalues is not a valid BostedUtland on submit.")};return t.jsx(y.FormikWrapper,{initialValues:d?Re(d):{},onSubmit:p,renderForm:({values:n})=>t.jsxs(y.Form,{onCancel:c,showButtonArrows:!1,submitButtonLabel:"Legg til",children:[t.jsx(K,{size:"medium",as:"h1",children:t.jsx(h,{id:"utenlandsopphold.leggTilUtenlandsopphold.tittel"})}),t.jsx(m,{children:t.jsx(y.DateIntervalPicker,{legend:a(s,"utenlandsopphold.leggTilUtenlandsopphold.tidsrom"),fromDatepickerProps:{name:"fom",label:a(s,"utenlandsopphold.leggTilUtenlandsopphold.fraogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:o,maxDate:k(n.tom)||e,validate:i=>n.tom&&n.fom&&f(n.tom).isSame(n.fom)?"Fra og med dato kan ikke være samme som til og med dato":V.validateFromDateInRange({intl:s,date:k(i),minDate:o,maxDate:e,errorKey:"valideringsfeil.fraOgMedDato.førTilDato",toDate:k(n.tom),disableWeekend:!1})},toDatepickerProps:{name:"tom",label:a(s,"utenlandsopphold.leggTilUtenlandsopphold.tilogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:k(n.fom)||o,maxDate:e,validate:i=>n.tom&&n.fom&&f(n.tom).isSame(n.fom)?"Til og med dato kan ikke være samme som fra og med dato":V.validateToDateInRange({intl:s,date:k(i),minDate:o,maxDate:e,errorKey:"valideringsfeil.tilOgMedDato.etterFraDato",fromDate:k(n.fom),disableWeekend:!1})}})}),t.jsx(m,{margin:"xl",children:t.jsx(y.CountrySelect,{name:"landkode",label:r?a(s,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandSkalDuBoI"):a(s,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandHarDuBoddI"),validate:i=>se(i,a(s,r?"valideringsfeil.utenlandsopphold.landDuSkalBoIPåkrevd":"valideringsfeil.utenlandsopphold.landDuHarBoddIPåkrevd")),useAlpha3Code:!1})})]})})};try{M.displayName="BostedUtlandForm",M.__docgenInfo={description:"",displayName:"BostedUtlandForm",props:{minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},bosted:{defaultValue:null,description:"",name:"bosted",required:!1,type:{name:"BostedUtland"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: BostedUtland) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const U=pe("bostedUtlandList"),F=({bosteder:e,onDelete:o,onEdit:d})=>{const l=L(),c=r=>{const s=T(r.landkode,l.locale);return t.jsxs("div",{className:U.element("label"),children:[t.jsxs("span",{className:U.element("land"),children:[d&&t.jsx(ie,{onClick:()=>d(r),children:s}),!d&&t.jsx("span",{children:s})]}),t.jsxs("span",{className:U.element("dato"),children:[C(f(r.fom).toDate())," -"," ",C(f(r.tom).toDate())]})]})};return t.jsx(re,{getItemId:r=>r.id,getItemTitle:r=>T(r.landkode,l.locale),onDelete:o,onEdit:d,labelRenderer:c,items:e})};try{F.displayName="BostedUtlandList",F.__docgenInfo={description:"",displayName:"BostedUtlandList",props:{bosteder:{defaultValue:null,description:"",name:"bosteder",required:!0,type:{name:"BostedUtland[]"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((opphold: BostedUtland) => void)"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((opphold: BostedUtland) => void)"}}}}}catch{}function D({name:e,minDate:o,maxDate:d,validate:l,labels:c,erFremtidigOpphold:r}){return t.jsx(Ue,{name:e,labels:c,validate:l,dialogWidth:"narrow",sortFunc:me,formRenderer:({onSubmit:s,onCancel:p,item:n})=>t.jsx(M,{bosted:n,minDate:o,maxDate:d,onSubmit:s,onCancel:p,erFremtidigOpphold:r}),listRenderer:({items:s,onEdit:p,onDelete:n})=>t.jsx(F,{bosteder:s,onEdit:p,onDelete:n})})}try{D.displayName="BostedUtlandListAndDialog",D.__docgenInfo={description:"",displayName:"BostedUtlandListAndDialog",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"FieldNames"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"any"}},minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"ModalFormAndListLabels"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const Y=e=>({fom:e.tidsperiode.fom,tom:e.tidsperiode.tom,landkode:e.land}),Ae=e=>({...Me,harBoddINorgeSiste12Mnd:W(e.iNorgeSiste12Mnd),skalBoINorgeNeste12Mnd:W(e.iNorgeNeste12Mnd),utenlandsoppholdNeste12Mnd:e.senereOpphold.map(Y),utenlandsoppholdSiste12Mnd:e.tidligereOpphold.map(Y)}),H=e=>e.map(o=>({land:o.landkode,tidsperiode:{fom:o.fom,tom:o.tom}})),Ve=e=>{const{harBoddINorgeSiste12Mnd:o,skalBoINorgeNeste12Mnd:d,utenlandsoppholdNeste12Mnd:l,utenlandsoppholdSiste12Mnd:c}=e;return{iNorgeSiste12Mnd:P(o),iNorgeNeste12Mnd:P(d),senereOpphold:d===g.NO?H(l):[],tidligereOpphold:o===g.NO?H(c):[]}},Te=e=>o=>{if(o.length===0)return a(e,"valideringsfeil.utenlandsopphold.neste12Måneder.ikkeRegistrert");const d=o.map(l=>({from:f(l.fom).toDate(),to:f(l.tom).toDate()}));if(z(d))return a(e,"valideringsfeil.utenlandsopphold.overlapp");if($(d,{from:new Date,to:J}))return a(e,"valideringsfeil.utenlandsoppholdUtenforPeriode")},Ce=e=>o=>{if(o.length===0)return a(e,"valideringsfeil.utenlandsopphold.siste12Måneder.ikkeRegistrert");const d=o.map(l=>({from:f(l.fom).toDate(),to:f(l.tom).toDate()}));if(z(d))return a(e,"valideringsfeil.utenlandsopphold.overlapp");if($(d,{from:Z,to:new Date}))return a(e,"valideringsfeil.utenlandsoppholdUtenforPeriode")},O=()=>{const e=L(),{informasjonOmUtenlandsopphold:o}=ke(),d=p=>{const n=Ve(p);return[ge.setInformasjonOmUtenlandsopphold(n)]},{handleSubmit:l,isSubmitting:c}=fe(d,w.INNTEKTSINFORMASJON,p=>Ie(p)),r=Ne(),s=ve();return je(w.UTENLANDSOPPHOLD),t.jsx(I.FormikWrapper,{initialValues:Ae(o),onSubmit:l,renderForm:({values:p})=>{const n=Oe.getVisbility(p);return t.jsx(ue,{bannerTitle:a(e,"søknad.pageheading"),activeStepId:"utenlandsopphold",pageTitle:a(e,"søknad.utenlandsopphold"),onCancel:r,onContinueLater:s,steps:Se(e,!1),children:t.jsxs(I.Form,{includeButtons:!1,includeValidationSummary:!0,children:[t.jsx(m,{visible:n.isVisible(u.skalBoINorgeNeste12Mnd),padBottom:"l",children:t.jsx(I.YesOrNoQuestion,{legend:a(e,"utenlandsopphold.neste12Måneder.spørsmål"),name:u.skalBoINorgeNeste12Mnd,description:a(e,"utenlandsopphold.neste12MånederInfotekst"),labels:{yes:a(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddINorge"),no:a(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:i=>E(i,"valideringsfeil.utenlandsopphold.skalBoINorgePåkrevd")})}),t.jsx(m,{padBottom:"xl",visible:n.isVisible(u.utenlandsoppholdNeste12Mnd),children:t.jsx(D,{name:u.utenlandsoppholdNeste12Mnd,minDate:_,maxDate:J,labels:{addLabel:a(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold neste 12 måneder"},erFremtidigOpphold:!0,validate:Te(e)})}),t.jsx(m,{padBottom:"l",visible:n.isVisible(u.harBoddINorgeSiste12Mnd),children:t.jsx(I.YesOrNoQuestion,{legend:a(e,"utenlandsopphold.siste12Måneder.spørsmål"),name:u.harBoddINorgeSiste12Mnd,description:a(e,"utenlandsopphold.siste12MånederInfotekst"),labels:{yes:a(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddINorge"),no:a(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:i=>E(i,"valideringsfeil.utenlandsopphold.harBoddINorgePåkrevd")})}),t.jsx(m,{padBottom:"xl",visible:n.isVisible(u.utenlandsoppholdSiste12Mnd),children:t.jsx(D,{minDate:Z,maxDate:_,name:u.utenlandsoppholdSiste12Mnd,labels:{addLabel:a(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold siste 12 måneder"},erFremtidigOpphold:!1,validate:Ce(e)})}),t.jsx(m,{padBottom:"xl",children:t.jsxs(B,{"aria-label":"Informasjon om utenlandsopphold",children:[t.jsxs(B.Header,{children:[t.jsx(B.Title,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.header.tittel"})}),t.jsx(N,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.header.ingress"})})]}),t.jsxs(B.Content,{children:[t.jsx(m,{padBottom:"l",children:t.jsx(N,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon1"})})}),t.jsx(m,{padBottom:"l",children:t.jsx(N,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon2"})})}),t.jsx(m,{padBottom:"xl",children:t.jsx(N,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon3"})})}),t.jsx(m,{padBottom:"l",children:t.jsx(K,{as:"h4",size:"medium",children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.undertittel"})})}),t.jsx(m,{padBottom:"l",children:t.jsx(N,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon4"})})}),t.jsx(ye,{children:t.jsx(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon5",values:{a:i=>t.jsx(De,{href:"https://nav.no/foreldrepenger#utland",rel:"noreferrer",target:"_blank",children:i})}})})]})]})}),t.jsx(m,{children:t.jsxs(ce,{children:[t.jsx(q,{variant:"secondary",as:xe,to:be("utenlandsopphold"),children:t.jsx(h,{id:"backlink.label"})}),n.areAllQuestionsAnswered()&&t.jsx(q,{type:"submit",disabled:c,loading:c,children:a(e,"søknad.gåVidere")})]})})]})})}})},Ze=O;try{O.displayName="Utenlandsopphold",O.__docgenInfo={description:"",displayName:"Utenlandsopphold",props:{}}}catch{}export{Ze as U};
//# sourceMappingURL=Utenlandsopphold-4e93196d.js.map
