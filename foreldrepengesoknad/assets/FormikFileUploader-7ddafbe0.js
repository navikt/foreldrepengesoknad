import{j as i}from"./jsx-runtime-69eee039.js";import{r as A}from"./index-7c191284.js";import{u as m,a0 as F,j as f,a1 as K,a2 as V,a3 as D,a4 as k,i as I}from"./Tidsperioden-57efcdec.js";import"./index-e13aeee6.js";import"./_baseToString-4b695375.js";import"./_createSet-f4a01039.js";import{g as G,E as y}from"./apiInterceptor-cff81df8.js";import{A as M}from"./AttachmentList-8d3b0f2c.js";import{B as U}from"./Link-b834ea2b.js";var h=(e=>(e.OMSORGSOVERTAKELSE="omsorgsovertakelse",e.ADOPSJONSVEDTAK="adopsjonsvedtak",e.TERMINBEKREFTELSE="terminbekreftelse",e.FØDSELSATTEST="fødselsattest",e.ANNEN_INNTEKT="anneninntektDokumentasjon",e.UTSETTELSE_SYKDOM="utsettelseSykdomUttaksplan",e.MORS_AKTIVITET_DOKUMENTASJON="morsaktivitetdokumentasjon",e.OVERFØRING_KVOTE="dokumentasjonOverføringAvKvote",e.ALENEOMSORG="dokumentasjonAvAleneomsorg",e.SEN_ENDRING="senEndring",e.HV_ØVELSE="hvØvelse",e.NAV_TILTAK="navTiltak",e))(h||{}),B=(e=>(e.ANNET="I000060",e.BEKREFTELSE_DELTAR_KVALIFISERINGSPROGRAM="I000051",e.BEKREFTELSE_FRA_STUDIESTED="I000061",e.DOKUMENTASJON_AV_TERMIN_ELLER_FØDSEL="I000041",e.DOK_AV_ALENEOMSORG="I000110",e.DOK_BEGRUNNELSE_SØKE_TILBAKE_I_TID="I000111",e.DOK_DELTAKELSE_I_INTRODUKSJONSPROGRAMMET="I000112",e.DOK_INNLEGGELSE="I000037",e.DOK_MILITÆR_SILVIL_TJENESTE="I000039",e.DOK_MORS_UTDANNING_ARBEID_SYKDOM="I000038",e.DOK_OVERFØRING_FOR_SYK="I000023",e.ETTERLØNN_ELLER_SLUTTVEDERLAG="I000044",e.INNTEKTSOPPLYSNINGER_FRILANS_ELLER_SELVSTENDIG="I000007",e.OMSORGSOVERTAKELSESDATO="I000042",e.TERMINBEKREFTELSE="I000062",e.HV_ØVELSE="I000116",e.NAV_TILTAK="I000117",e))(B||{});function x(e){const t={withCredentials:!0,timeout:45e3,headers:{"content-type":"multipart/form-data"}},a=new FormData;a.append("id",e.id),a.append("vedlegg",e.file,e.filename);const n=`${y.REST_API_URL}/storage/vedlegg`;return G().post(n,a,t)}const b={saveAttachment:x},N=[".pdf",".jpeg",".jpg",".png"],T=16777,j=.0009765625,q=(e,t,a)=>e.map(n=>{const o=k(n,t,a);return o.pending=!0,o}),P=e=>{const t=e.split(".").pop();return N.includes(`.${t.toLowerCase()}`)},C=e=>e*j<=T,Y=(e,t,a)=>e.filter(n=>{const o=P(n.filename);o||t(l=>l.concat(I(a,"vedlegg.feilmelding.ugyldig.type",{filename:n.filename})));const r=C(n.filesize);return r||t(l=>l.concat(I(a,"vedlegg.feilmelding.ugyldig.størrelse",{filename:n.filename,maxStørrelse:T}))),o&&r}),w=(e,t,a,n,o,r)=>{e.forEach(async(l,E)=>{try{const u=await b.saveAttachment(l);l.pending=!1,l.url=u.headers.location,l.uploaded=!0,l.uuid=u.data,t(o+E,l)}catch{a(o+E),n(d=>d.concat(I(r,"vedlegg.feilmelding.opplasting.feilet",{filename:l.filename})))}})},p=({attachments:e,name:t,onFileInputClick:a,attachmentType:n,skjemanummer:o,label:r,legend:l,...E})=>{const u=m(),{setFieldValue:d}=F(),[c,_]=A.useState([]);return i.jsxs(i.Fragment,{children:[i.jsx(f,{padBottom:"l",children:i.jsx(K,{legend:l,buttonLabel:r,name:t,accept:N.join(", "),onFilesSelect:(s,{push:S,replace:L,remove:R})=>{const g=q(s,n,o),v=Y(g,_,u);v.forEach(O=>S(O)),w(v,L,R,_,e.length,u)},onClick:a,error:c.length>0?c.map(s=>i.jsx(U,{children:s},s)):void 0,...E})}),i.jsx(f,{padBottom:"l",visible:e.length>0,children:i.jsx(M,{attachments:e.filter(s=>!V(s)),showFileSize:!0,onDelete:s=>{d(t,D(e,s))}})})]})},te=p;try{p.displayName="FormikFileUploader",p.__docgenInfo={description:"",displayName:"FormikFileUploader",props:{attachments:{defaultValue:null,description:"",name:"attachments",required:!0,type:{name:"Attachment[]"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"any"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},attachmentType:{defaultValue:null,description:"",name:"attachmentType",required:!0,type:{name:"enum",value:[{value:'"omsorgsovertakelse"'},{value:'"adopsjonsvedtak"'},{value:'"terminbekreftelse"'},{value:'"fødselsattest"'},{value:'"anneninntektDokumentasjon"'},{value:'"utsettelseSykdomUttaksplan"'},{value:'"morsaktivitetdokumentasjon"'},{value:'"dokumentasjonOverføringAvKvote"'},{value:'"dokumentasjonAvAleneomsorg"'},{value:'"senEndring"'},{value:'"hvØvelse"'},{value:'"navTiltak"'}]}},skjemanummer:{defaultValue:null,description:"",name:"skjemanummer",required:!0,type:{name:"enum",value:[{value:'"I000060"'},{value:'"I000051"'},{value:'"I000061"'},{value:'"I000041"'},{value:'"I000110"'},{value:'"I000111"'},{value:'"I000112"'},{value:'"I000037"'},{value:'"I000039"'},{value:'"I000038"'},{value:'"I000023"'},{value:'"I000044"'},{value:'"I000007"'},{value:'"I000042"'},{value:'"I000062"'},{value:'"I000116"'},{value:'"I000117"'}]}},legend:{defaultValue:null,description:"",name:"legend",required:!0,type:{name:"string"}},onFileInputClick:{defaultValue:null,description:"",name:"onFileInputClick",required:!1,type:{name:"(() => void)"}}}}}catch{}export{h as A,te as F,B as S,b as a};
//# sourceMappingURL=FormikFileUploader-7ddafbe0.js.map
