import{S as d,b as c,P as o,d as b,n as h,o as U,U as N,h as j,g as G,a as $,p as S}from"./Perioden-0a366813.js";import{U as E,d as i,i as k,Z as V,A as F,l as H,$ as w,I,aa as x,ab as W}from"./Tidsperioden-50230361.js";import"./jsx-runtime-1caa8f64.js";import"./index-1cdf6ce0.js";import{c as A}from"./stringUtils-5476a1f3.js";import{j as B}from"./barnUtils-91b846b3.js";var f=(t=>(t.UttakFellesperiodeAnnenForelder="UTTAK_FELLESP_ANNEN_FORELDER",t.UttakFedrekvoteAnnenForelder="UTTAK_FEDREKVOTE_ANNEN_FORELDER",t.UttakMødrekvoteAnnenForelder="UTTAK_MØDREKVOTE_ANNEN_FORELDER",t.UttakForeldrepengerAnnenForelder="UTTAK_FORELDREPENGER_ANNEN_FORELDER",t.ForeldrepengerFørFødsel="UTTAK_FORELDREPENGER_FØR_FØDSEL_ANNEN_FORELDER",t.Ingen="INGEN",t))(f||{}),P=(t=>(t.institusjonsoppholdAnnenForelder="INSTITUSJONSOPPHOLD_ANNEN_FORELDER",t.sykdomAnnenForelder="SYKDOM_ANNEN_FORELDER",t.aleneomsorg="ALENEOMSORG",t.ikkeRettAnnenForelder="IKKE_RETT_ANNEN_FORELDER",t))(P||{});const J=/^[0-9]*$/,z=t=>{let e=2,r=0;for(let n=t.length-2;n>=0;--n)r+=parseInt(t.charAt(n),10)*e,++e>7&&(e=2);const s=11-r%11;return s===11?0:s},q=t=>J.test(t)&&t.length===9,C=t=>t.charAt(0)==="8"||t.charAt(0)==="9",Rt=t=>!t||q(t)===!1||C(t)===!1||t==="999999999"?!1:z(t)===parseInt(t.charAt(8),10),Q=RegExp(/^[-]?[0-9,.\s]*$/),Y=t=>t.replace(/,/g,".").replace(/\s/g,"").replace(/%/g,""),g=t=>{if(t!=null&&t.length>0&&Q.test(t)){const e=Y(t);return(e.match(/\./g)||[]).length>1?void 0:parseFloat(e)}},St=(t,e,r)=>{if(!e)return t;const s=E(r).denneEllerNeste();return i(e).isBefore(i(s),"d")?t.filter(l=>l===d.Fellesperiode||l===d.Foreldrepenger):t},Tt=t=>t.filter(e=>e.konto===d.Fellesperiode||e.konto===d.Fedrekvote||e.konto===d.Mødrekvote||e.konto===d.Foreldrepenger||e.konto===d.AktivitetsfriKvote).map(e=>e.konto),T=(t,e,r,s,n)=>{let a;switch(e){case d.Mødrekvote:a=r.mor;break;case d.Fedrekvote:a=r.farMedmor;break;default:a=void 0}if(a)return t.formatMessage({id:"uttaksplan.stønadskontotype.foreldernavn.kvote"},{navn:B(A(a),t.locale)});if(s===!0&&n===!1){if(e===d.AktivitetsfriKvote)return t.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSFRI_KVOTE_BFHR"});if(e===d.Foreldrepenger)return t.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSKRAV_KVOTE_BFHR"})}return t.formatMessage({id:`uttaksplan.stønadskontotype.${e}`})},Z=(t,e,r,s,n,a,l)=>{const u=p(r,s);if(n!==void 0){const v=B(u,t.locale),m=e===d.Fellesperiode?"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttakFellesperiode":"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttak";return k(t,m,{navn:A(v),prosent:n})}return T(t,e,s,a,l)},X=10,L=2*7,tt=6*7,Mt=(t,e,r,s)=>V(t)&&e&&r&&s==="fødsel",et=t=>c(t)&&t.forelder===F.farMedmor&&t.konto===d.Fedrekvote&&!t.erMorForSyk&&t.morsAktivitetIPerioden===void 0&&!t.ønskerFlerbarnsdager&&t.ønskerSamtidigUttak===!0,M=(t,e,r)=>et(t)&&O(t.tidsperiode,e,r),rt=(t,e)=>c(t)&&t.forelder===F.farMedmor&&!e,st=(t,e)=>{const r=e!==void 0?i(e).subtract(L,"day"):i(t).subtract(L,"day"),s=i.min(r,i(t));return E(s.toDate()).denneEllerNeste()},y=t=>{const e=E(t).denneEllerNeste();return E(i(e).add(tt,"day").toDate()).forrige()},nt=(t,e,r)=>{const s=st(e,r);return i(t.fom).isSameOrAfter(s,"day")},yt=(t,e)=>c(t)&&i(t.tidsperiode.fom).isBefore(e,"day"),Ot=(t,e)=>{const r=y(e);return i(t.tom).isSameOrBefore(r,"day")},O=(t,e,r)=>nt(t,e,r)&&i(t.fom).isSameOrBefore(y(e),"day"),_t=(t,e,r)=>t.filter(s=>M(s,e,r)),ht=(t,e,r,s,n,a,l)=>t!==void 0&&H(t)&&n&&l==="fødsel"&&V(e)&&r===o.Uttak&&(s===d.Fedrekvote||s===d.Foreldrepenger||s===d.AktivitetsfriKvote)&&O(t,e,a),It=(t,e)=>{const r=y(t),s=R({tidsperiode:{fom:e,tom:r}});return Math.min(s,X)},at=(t,e,r,s,n,a)=>s==="fødsel"&&M(r,n,a)?e+k(t,"rundtFødsel"):e,Lt=(t,e,r,s)=>(M(t,e,s)||rt(t,r))&&w(t.tidsperiode,e),Dt=(t,e,r)=>t.filter(s=>(c(s)||b(s))&&O(s.tidsperiode,e,r)),Kt=(t,e,r)=>!!t&&e!==void 0&&i(r).isSame(e,"d"),bt=t=>({fom:I(t.fom),tom:I(t.tom)}),jt=t=>{const e=g(t);return e?e>0:!1},Vt=t=>{const e=g(t);return e?e<=100:!1},Bt=t=>{const e=g(t);return e?e<100:!1},D=t=>t!==void 0&&isNaN(parseFloat(t))===!1,K=t=>{if(t===void 0)return;const e=parseFloat(t);if(!isNaN(e))return Math.round(e)===e?Math.round(e):e},ot=(t,e)=>{if(e)return e;if(t){let r=(100-t)*100;return r=Math.round(r)/100,r}},dt=(t,e,r,s)=>{const n=A(r);return s?k(t,`uttaksplan.oppholdsårsaktype.foreldernavn.far.${e}`,{foreldernavn:n}):k(t,`uttaksplan.oppholdsårsaktype.foreldernavn.mor.${e}`,{foreldernavn:n})},_=t=>t===f.UttakFedrekvoteAnnenForelder?d.Fedrekvote:t===f.UttakMødrekvoteAnnenForelder?d.Mødrekvote:t===f.UttakFellesperiodeAnnenForelder?d.Fellesperiode:t===f.UttakForeldrepengerAnnenForelder?d.Foreldrepenger:d.ForeldrepengerFørFødsel,Gt=t=>{switch(t){case d.Fedrekvote:return f.UttakFedrekvoteAnnenForelder;case d.Mødrekvote:return f.UttakMødrekvoteAnnenForelder;case d.Fellesperiode:return f.UttakFellesperiodeAnnenForelder;default:return}},p=(t,e)=>{let r="";return e.farMedmor?r=t===F.mor?e.mor:e.farMedmor:r=t===F.mor?e.mor:t,A(r)},it=(t,e,r,s,n,a,l,u)=>{const v=T(t,e.konto,r,l,u),m=at(t,v,e,a,s,n);return e.gradert&&D(e.stillingsprosent)||e.ønskerSamtidigUttak&&D(e.samtidigUttakProsent)?`${m} ${k(t,"gradering.prosent",{stillingsprosent:ot(K(e.stillingsprosent),e.samtidigUttakProsent?K(e.samtidigUttakProsent):void 0)})}`:m},lt=(t,e,r,s)=>{switch(e.infotype){case U.uttakAnnenPart:return Z(t,_(e.årsak),e.forelder,r,e.samtidigUttakProsent);case U.utsettelseAnnenPart:return k(t,`uttaksplan.periodetype.info.utsettelse.${e.årsak}`,{navn:p(e.forelder,r)});case U.avslåttPeriode:return e.forelder===F.mor&&s||e.forelder===F.farMedmor&&!s?k(t,"uttaksplan.periodetype.info.avslåttPeriode.annenPart",{navn:p(e.forelder,r)}):k(t,`uttaksplan.periodetype.info.${e.infotype}`)}},$t=(t,e,r,s,n,a,l,u)=>{switch(e.type){case o.Uttak:return it(t,e,r,s,n,a,l,u);case o.PeriodeUtenUttak:return k(t,"uttaksplan.periodetype.periodeUtenUttak.tittel");case o.Overføring:return T(t,e.konto,r);case o.Utsettelse:return e.årsak?k(t,"uttaksplan.periodeliste.utsettelsesårsak",{årsak:k(t,`uttaksplan.utsettelsesårsak.${e.årsak}`)}):k(t,"uttaksplan.periodeliste.utsettelsesårsak.ukjent");case o.Opphold:return dt(t,e.årsak,p(e.forelder,r),e.forelder==="mor");case o.Hull:return k(t,"uttaksplan.periodetype.hull.tittel");case o.Info:return lt(t,e,r,l)}},Ht=(t,e)=>{if(e===void 0)return!1;const r=ut(t,e);return r?r.resultat.innvilget:!1},ut=(t,e)=>e.saksperioder.find(r=>x(W(r.periode),t.tidsperiode)),wt=(t,e)=>t.type===o.Utsettelse||t.type===o.Uttak||t.type===o.Overføring||t.type===o.Opphold||t.type===o.Info?p(t.forelder,e):"Ingen forelder registrert",xt=t=>{switch(t){case o.Uttak:return"uttaksplan.slettPeriode.uttak";case o.Overføring:return"uttaksplan.slettPeriode.overføring";case o.Opphold:return"uttaksplan.slettPeriode.opphold";case o.Utsettelse:return"uttaksplan.slettPeriode.utsettelse";case o.Info:return"uttaksplan.slettPeriode.info";default:return""}},kt=(t,e)=>t.tidsperiode.fom!==void 0&&t.tidsperiode.tom!==void 0&&i(t.tidsperiode.fom).isSameOrAfter(e,"day")&&i(t.tidsperiode.tom).isSameOrAfter(e,"day"),Wt=(t,e)=>kt(t,e)===!1,Jt=t=>t===N.Sykdom||t===N.InstitusjonBarnet||t===N.InstitusjonSøker||t===P.institusjonsoppholdAnnenForelder||t===P.sykdomAnnenForelder,zt=(t,e)=>e.some(r=>j(t).erLik(r,!0,!0)),qt=(t,e)=>{if(c(t)){const r=e.filter(s=>h(s)).find(s=>h(s)&&i(t.tidsperiode.fom).isSame(s.tidsperiode.fom)&&s.ønskerSamtidigUttak===!0&&s.id!==t.id);return r!==void 0?r:void 0}},Ct=(t,e,r)=>{const s=t.find(n=>n.id===e.id);return s&&s.isValid!==r?t.map(n=>n.id===s.id?{...n,isValid:r}:n):s?t:[...t,{id:e.id,isValid:r}]},R=t=>{const e=j(t).getAntallUttaksdager();if(c(t)){const r=t.stillingsprosent!==void 0,s=t.samtidigUttakProsent!==void 0;if(r&&s||r){const n=(100-g(t.stillingsprosent))/100;return e*n}else return s?e*(g(t.samtidigUttakProsent)/100):e}return e},ft=t=>[...t.filter(c),...Ft(t.filter(G)),...gt(t.filter(b)),...pt(t.filter($)),...mt(t.filter(S))],ct=(t,e,r)=>{const s=ft(e);return t.map(n=>{let a=r?0:n.dager;const l=s.filter(u=>u.konto===n.konto);return l&&(l.forEach(u=>{(u.type===o.Uttak||u.type===o.Overføring||S(u))&&(a=r?a+R(u):a-R(u))}),a=r?Math.floor(a):Math.ceil(a)),{konto:n.konto,dager:a}})},Qt=(t,e)=>ct(t,e,!0),Ft=t=>t.length===0?[]:t.map(e=>({id:e.id,tidsperiode:e.tidsperiode,type:o.Uttak,konto:_(e.årsak),forelder:e.forelder})),gt=t=>t.length===0?[]:t.map(e=>({id:e.id,tidsperiode:e.tidsperiode,type:o.Uttak,konto:e.konto,forelder:e.forelder})),pt=t=>{if(t.length===0)return[];const e=[];return t.filter(r=>S(r)===!1).forEach(r=>{r.infotype===U.uttakAnnenPart&&e.push(r)}),e.map(r=>{const{type:s,årsak:n,...a}=r;return{type:o.Uttak,konto:_(r.årsak),...a}})},mt=t=>t.length===0?[]:t.filter(e=>e.avslåttPeriodeType===o.Uttak||e.avslåttPeriodeType===o.Utsettelse).map(e=>({type:o.Uttak,konto:e.kontoType,tidsperiode:e.tidsperiode,id:e.id,forelder:e.forelder}));export{p as A,dt as B,qt as C,ft as D,Qt as E,ct as F,Wt as G,Ht as H,Jt as I,wt as J,jt as K,Vt as L,Bt as M,Mt as N,f as O,et as P,nt as Q,Ot as R,_t as S,X as T,yt as U,$t as a,Dt as b,zt as c,T as d,Rt as e,R as f,st as g,at as h,y as i,It as j,Lt as k,P as l,g as m,M as n,rt as o,bt as p,ht as q,_ as r,O as s,Gt as t,Kt as u,Y as v,Ct as w,Tt as x,St as y,xt as z};
