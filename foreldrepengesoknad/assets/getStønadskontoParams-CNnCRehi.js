import{r as c}from"./index-BP8_t0zE.js";import{g as m}from"./apiInterceptor-D-WKbiXB.js";import{j as p}from"./jsx-runtime-CexXSJP5.js";import"./Tidsperioden-C6mWeONA.js";import"./index-CSpfAsmC.js";import{w as f,v as A,z as v,A as x,B as C}from"./useFpNavigator-Ovpq5UnG.js";import{i as D,m as H,l as K,j as B}from"./FpDataContext-BTc1vbhf.js";import"./_baseToString-7VaozA17.js";import"./_createSet-W-93wHM-.js";import{c as U}from"./barnUtils-CaCDHL4F.js";import{c as y}from"./eksisterendeSakUtils-CpNr9XGS.js";var E=(t=>(t.UNFETCHED="Unfetched",t.IN_PROGRESS="InProgress",t.FINISHED="Finished",t))(E||{});const R={config:{},isSuspended:!1},it=(t,e=R)=>{const[r,s]=c.useState(),[u,o]=c.useState(null),[n,a]=c.useState(E.UNFETCHED),d=e.fnr?m(e.fnr):m();return c.useEffect(()=>{!e.isSuspended&&n===E.UNFETCHED&&(a(E.IN_PROGRESS),d.get(t,e.config).then(i=>{i.data===""?s(void 0):s(i.data),a(E.FINISHED)}).catch(i=>{o(i),a(E.FINISHED)}))},[e,t,d,n]),{data:r,error:u,requestStatus:n}},M=(t,e,r=R)=>{const[s,u]=c.useState(),[o,n]=c.useState(null),[a,d]=c.useState(E.UNFETCHED),i=r.fnr?m(r.fnr):m();return c.useEffect(()=>{!r.isSuspended&&a===E.UNFETCHED&&(d(E.IN_PROGRESS),i.post(t,e,r.config).then(l=>{l.data===""?u(void 0):u(l.data),d(E.FINISHED)}).catch(l=>{n(l),d(E.FINISHED)}))},[r,t,i,a,e]),{data:s,error:o,requestStatus:a}};var S=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER="STØNADSKONTOER",t))(S||{});const _={},O=c.createContext(_),h=c.createContext(void 0),q=({children:t,initialState:e})=>{const[r,s]=c.useReducer((u,o)=>{switch(o.type){case"update":return{...u,[o.key]:[o.hash,o.data]};case"reset":return{};default:throw new Error}},e||_);return p.jsx(O.Provider,{value:r,children:p.jsx(h.Provider,{value:s,children:t})})},V=(t,e)=>{const s=c.useContext(O)[t];return s&&s[0]===e?s[1]:void 0},G=(t,e)=>{const r=c.useContext(h);return s=>{r&&r({type:"update",key:t,hash:e,data:s})}};q.__docgenInfo={description:"",methods:[],displayName:"FpApiDataContext",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},initialState:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    [FpApiDataType.ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.NESTE_SAK_ANNEN_PART_VEDTAK]?: [number, AnnenPartVedtakDTO];
    [FpApiDataType.STØNADSKONTOER]?: [number, TilgjengeligeStønadskontoer];
}`,signature:{properties:[]}},description:""}}};const j=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),w=t=>{let e=0;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);e=(e<<5)-e+s,e=e&e}return e},k={[S.ANNEN_PART_VEDTAK]:"/rest/innsyn/v2/annenPartVedtak",[S.NESTE_SAK_ANNEN_PART_VEDTAK]:"/rest/innsyn/v2/annenPartVedtak",[S.STØNADSKONTOER]:"/rest/konto"},ct=(t,e,r)=>{var l;const s=w(JSON.stringify(j(e))),u=V(t,s),o=!!u,n=G(t,s),{data:a,requestStatus:d,error:i}=M(k[t],e,{config:{withCredentials:t!==S.STØNADSKONTOER},isSuspended:o||r});return c.useEffect(()=>{a&&n(a)},[a]),(l=i==null?void 0:i.message)!=null&&l.includes("Ugyldig ident")?{data:void 0,requestStatus:E.FINISHED,error:null}:{data:o?u:a,requestStatus:o?E.FINISHED:d,error:i}},L=(t,e)=>t?!0:f(e)?!!e.harRettPåForeldrepengerINorge:!1,z=(t,e)=>t?f(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,J=(t,e)=>{if(D(t)||B(t))return e||t.termindato},Y=(t,e)=>e||t||void 0,Q=(t,e,r)=>t&&r?r:e,W=(t,e,r,s,u)=>r||s?"ALENEOMSORG":t&&e||u?"BEGGE_RETT":"BARE_SØKER_RETT",ut=(t,e,r,s,u,o)=>{const n=f(e)?e:void 0,a=A(r.rolle),d=v(a,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),i=x(!a,(n==null?void 0:n.erAleneOmOmsorg)||!1,e),l=s!==void 0?s.startdatoFørsteStønadsperiode:void 0,N=y(u,t,a,U(t),l),I=Q(a,t.antallBarn,N==null?void 0:N.grunnlag.antallBarn),P=Y(o==null?void 0:o.grunnlag.termindato,N==null?void 0:N.grunnlag.termindato),g=A(r.rolle),T=A(r.rolle),F=f(e)&&e.harRettPåForeldrepengerIEØS;return{rettighetstype:W(L(g,e),z(g,e),i||!1,d||!1,F||!1),brukerrolle:T?"FAR":"MOR",antallBarn:I.toString(),fødselsdato:D(t)?t.fødselsdatoer[0]:void 0,termindato:J(t,P),omsorgsovertakelseDato:H(t)||K(t)?t.adopsjonsdato:void 0,morHarUføretrygd:C(e,T),familieHendelseDatoNesteSak:l}};export{q as F,E as R,S as a,Q as b,Y as c,it as d,ut as g,ct as u};
