import{d as i,i as d,o as C,l as j}from"./validationUtils-7f8e3dc4.js";import"./jsx-runtime-69eee039.js";import"./index-e13aeee6.js";import"./index-7c191284.js";import{S as u,k as $,c as k,U as I,n as B,i as W,P as o,E as q,e as V,M as _,I as M,H as b,J as f,N as z,O as x,Q as J,G as Y}from"./dateUtils-ec18dffd.js";var g=(e=>(e.mor="mor",e.farMedmor="farMedmor",e))(g||{}),c=(e=>(e.UttakFellesperiodeAnnenForelder="UTTAK_FELLESP_ANNEN_FORELDER",e.UttakFedrekvoteAnnenForelder="UTTAK_FEDREKVOTE_ANNEN_FORELDER",e.UttakMødrekvoteAnnenForelder="UTTAK_MØDREKVOTE_ANNEN_FORELDER",e.UttakForeldrepengerAnnenForelder="UTTAK_FORELDREPENGER_ANNEN_FORELDER",e.ForeldrepengerFørFødsel="UTTAK_FORELDREPENGER_FØR_FØDSEL_ANNEN_FORELDER",e.Ingen="INGEN",e))(c||{});const Z=/^[0-9]*$/,Q=e=>{let t=2,r=0;for(let s=e.length-2;s>=0;--s)r+=parseInt(e.charAt(s),10)*t,++t>7&&(t=2);const n=11-r%11;return n===11?0:n},X=e=>Z.test(e)&&e.length===9,ee=e=>e.charAt(0)==="8"||e.charAt(0)==="9",Je=e=>!e||X(e)===!1||ee(e)===!1||e==="999999999"?!1:Q(e)===parseInt(e.charAt(8),10),te=RegExp(/^[-]?[0-9,.\s]*$/),re=e=>e.replace(/,/g,".").replace(/\s/g,"").replace(/%/g,""),v=e=>{if(e!=null&&e.length>0&&te.test(e)){const t=re(e);return(t.match(/\./g)||[]).length>1?void 0:parseFloat(t)}};var m={};function D(e){return oe(e)||ae(e)||se(e)||ne()}function ne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(e,t){if(e){if(typeof e=="string")return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}}function ae(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oe(e){if(Array.isArray(e))return R(e)}function R(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ue=new RegExp("^\\d{11}$"),de=function(t){return E(t)},ie=function(t){return E(t)},le=function(t){return E(t)},fe=function(t){return E(t)},ce=function(t){return t.substring(0,1)>=4?"dnr":t.substring(2,3)>=8?"tnr":t.substring(2,3)>=4?"hnr":"fnr"},E=function(t){var r=ce(t);return ke(t,r)},ke=function(t,r){if(!ue.test(t))return{status:"invalid",reasons:["fnr, dnr or hnr must consist of 11 digits"]};var n=[].concat(D(ge(t)),D(me(t,r)));return n.length==0?{status:"valid",type:r}:{status:"invalid",reasons:n}},ge=function(t){var r=11-(3*t[0]+7*t[1]+6*t[2]+1*t[3]+8*t[4]+9*t[5]+4*t[6]+5*t[7]+2*t[8])%11,n=11-(5*t[0]+4*t[1]+3*t[2]+2*t[3]+7*t[4]+6*t[5]+5*t[6]+4*t[7]+3*t[8]+2*r)%11;return r===11&&(r=0),n===11&&(n=0),r<10&&n<10&&r==t[9]&&n==t[10]?[]:["checksums don't match"]},me=function(t,r){r==="dnr"?t=t.substring(0,1)-4+t.substring(1):r==="hnr"?t=t.substring(0,2)+(t.substring(2,3)-4)+t.substring(3):r==="tnr"&&(t=t.substring(0,2)+(t.substring(2,3)-8)+t.substring(3));var n=t.substring(0,2),s=t.substring(2,4),a=t.substring(4,6),l=new Date(a==="00"?"2000":a,s-1,n);return l&&l.getMonth()+1==s&&l.getDate()==n?[]:["invalid date"]};m.fnr=de;m.dnr=ie;m.hnr=le;m.tnr=fe;m.idnr=E;const Fe=e=>{const t=m.idnr(e);return t.status!=="valid"?!1:t.type},pe=(e,t)=>{const r=t==="dnr"?`${Number(e.substr(0,1))-4}${e.substr(1,1)}`:e.substr(0,2),n=e.substr(2,2),s=e.substr(4,2);let a=i(`${r}-${n}-${s}`,"DD-MM-YY");return a.get("year")>i().get("year")&&(a=a.subtract(100,"year")),a.isValid()?a.isBefore(i().subtract(16,"year"),"day"):!1},ve=/^[\u034f0-9a-zA-ZÁáĄąÂâĀāĂăßČčĆćÇçĎďĐđÐðĔĕÉéĘęĖėÈèËëÊêĒēĢģİiĮįÍíÎîÏïĪīĶķŁłŊŋŇňŃńŅņÑñÞþŠšŚśŞşŤťŦŧŢţŲųŪūÚúŮůÝýŽžŹźŻżÕõÔôÓóÖöÜüÄäŒœÆæØøÅå .'\-/\n\r%§\\!?@_()+:;,="&\t\u00a0\u00ad\u061c\u115f\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u200b\u200c\u200d\u200e\u200f\u202d\u202f\u205f\u2060\u2061\u2062\u2063\u2064\u206a\u206b\u206c\u206d\u206e\u206f\u3000\u2800\u3164\ufeff\uffa0\u1160]*$/,Ue=/[\u034f0-9a-zA-ZÁáĄąÂâĀāĂăßČčĆćÇçĎďĐđÐðĔĕÉéĘęĖėÈèËëÊêĒēĢģİiĮįÍíÎîÏïĪīĶķŁłŊŋŇňŃńŅņÑñÞþŠšŚśŞşŤťŦŧŢţŲųŪūÚúŮůÝýŽžŹźŻżÕõÔôÓóÖöÜüÄäŒœÆæØøÅå .'\-/\n\r%§\\!?@_()+:;,="&\t\u00a0\u00ad\u061c\u115f\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u200b\u200c\u200d\u200e\u200f\u202d\u202f\u205f\u2060\u2061\u2062\u2063\u2064\u206a\u206b\u206c\u206d\u206e\u206f\u3000\u2800\u3164\ufeff\uffa0\u1160]*/g,Ae=/[\u034f\t\u00a0\u00ad\u061c\u115f\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u200b\u200c\u200d\u200e\u200f\u202d\u202f\u205f\u2060\u2061\u2062\u2063\u2064\u206a\u206b\u206c\u206d\u206e\u206f\u3000\u2800\u3164\ufeff\uffa0\u1160]/g,Ye=(e,t,r,n)=>s=>{if(n)return s===void 0||s.trim()===""?d(e,"valideringsfeil.fødselsnummer.required"):H(s,r,e);if(s===t)return d(e,"valideringsfeil.fødselsnummer.ugyldigEgetFødselsnummer");const a=Fe(s);return!n&&!pe(s,a)&&a==="fnr"?d(e,"valideringsfeil.fødselsnummer.underSeksten"):a==="fnr"||a==="dnr"||a==="hnr"?void 0:d(e,"valideringsfeil.fødselsnummer.ugyldigFødselsnummer")},Ee=(e,t,r)=>{if(!C(e)||typeof e=="string"&&e.trim()==="")return d(r,"valideringsfeil.inputfelt.required",{inputFeltLabel:t})},Ze=(e,t)=>r=>{const n=Ee(r,e,t);return n||H(r,e,t)},ye=e=>{const t=e.replace(Ue,""),r=new Set(t.split(""));return Array.from(r).join("")},Te=(e,t,r)=>{const n=ye(e).replace(/[\t]/g,"Tabulatortegn");return d(r,"valideringsfeil.fritekst.kanIkkeInneholdeTegn",{feltNavn:t,ugyldigeTegn:n})},Se=e=>ve.test(e),H=(e,t,r)=>{if(!Se(e))return Te(e,t,r)},Qe=e=>e.replace(Ae," "),T=e=>e.charAt(0).toUpperCase()+e.slice(1),Xe=e=>e.filter(t=>t.konto===u.Fellesperiode||t.konto===u.Fedrekvote||t.konto===u.Mødrekvote||t.konto===u.Foreldrepenger||t.konto===u.AktivitetsfriKvote).map(t=>t.konto),N=(e,t,r,n,s)=>{let a;switch(t){case u.Mødrekvote:a=r.mor;break;case u.Fedrekvote:a=r.farMedmor;break;default:a=void 0}if(a)return e.formatMessage({id:"uttaksplan.stønadskontotype.foreldernavn.kvote"},{navn:w(T(a),e.locale)});if(n===!0&&s===!1){if(t===u.AktivitetsfriKvote)return e.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSFRI_KVOTE_BFHR"});if(t===u.Foreldrepenger)return e.formatMessage({id:"uttaksplan.stønadskontotype.AKTIVITETSKRAV_KVOTE_BFHR"})}return e.formatMessage({id:`uttaksplan.stønadskontotype.${t}`})},be=(e,t,r,n,s,a,l)=>{const F=A(r,n);if(s!==void 0){const S=w(F,e.locale),y=t===u.Fellesperiode?"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttakFellesperiode":"uttaksplan.periodeAnnenPart.tittel.gradertEllerSamtidigUttak";return d(e,y,{navn:T(S),prosent:s})}return N(e,t,n,a,l)},Ie=e=>{const t=e.charAt(e.length-1).toLowerCase();return t==="s"||t==="x"||t==="z"},w=(e,t)=>t!=="nb"?e:Ie(e)?`${e}'`:`${e}s`;var p=(e=>(e.Arbeid="ARBEID",e.Utdanning="UTDANNING",e.Kvalifiseringsprogrammet="KVALPROG",e.Introduksjonsprogrammet="INTROPROG",e.TrengerHjelp="TRENGER_HJELP",e.Innlagt="INNLAGT",e.ArbeidOgUtdanning="ARBEID_OG_UTDANNING",e.Uføre="UFØRE",e.IkkeOppgitt="IKKE_OPPGITT",e))(p||{}),U=(e=>(e.institusjonsoppholdAnnenForelder="INSTITUSJONSOPPHOLD_ANNEN_FORELDER",e.sykdomAnnenForelder="SYKDOM_ANNEN_FORELDER",e.aleneomsorg="ALENEOMSORG",e.ikkeRettAnnenForelder="IKKE_RETT_ANNEN_FORELDER",e))(U||{});const Re=e=>{const t=$(e).getAntallUttaksdager();if(k(e)){const r=e.stillingsprosent!==void 0,n=e.samtidigUttakProsent!==void 0;if(r&&n||r){const s=(100-v(e.stillingsprosent))/100;return t*s}else return n?t*(v(e.samtidigUttakProsent)/100):t}return t},Ne=10,L=2*7,he=6*7,et=(e,t,r,n)=>B(e)&&t&&r&&n==="fødsel",Pe=e=>k(e)&&e.forelder===g.farMedmor&&e.konto===u.Fedrekvote&&!e.erMorForSyk&&e.morsAktivitetIPerioden===void 0&&!e.ønskerFlerbarnsdager&&e.ønskerSamtidigUttak===!0,h=(e,t,r)=>Pe(e)&&O(e.tidsperiode,t,r),Oe=(e,t)=>k(e)&&e.forelder===g.farMedmor&&!t,_e=(e,t)=>{const r=t!==void 0?i(t).subtract(L,"day"):i(e).subtract(L,"day"),n=i.min(r,i(e));return I(n.toDate()).denneEllerNeste()},P=e=>{const t=I(e).denneEllerNeste();return I(i(t).add(he,"day").toDate()).forrige()},Me=(e,t,r)=>{const n=_e(t,r);return i(e.fom).isSameOrAfter(n,"day")},tt=(e,t)=>k(e)&&i(e.tidsperiode.fom).isBefore(t,"day"),rt=(e,t)=>{const r=P(t);return i(e.tom).isSameOrBefore(r,"day")},O=(e,t,r)=>Me(e,t,r)&&i(e.fom).isSameOrBefore(P(t),"day"),nt=(e,t,r)=>e.filter(n=>h(n,t,r)),st=(e,t,r,n,s,a,l)=>e!==void 0&&W(e)&&s&&l==="fødsel"&&B(t)&&r===o.Uttak&&(n===u.Fedrekvote||n===u.Foreldrepenger||n===u.AktivitetsfriKvote)&&O(e,t,a),at=(e,t)=>{const r=P(e),n=Re({tidsperiode:{fom:t,tom:r}});return Math.min(n,Ne)},De=(e,t,r,n,s,a)=>n==="fødsel"&&h(r,s,a)?t+d(e,"rundtFødsel"):t,ot=(e,t,r,n)=>(h(e,t,n)||Oe(e,r))&&q(e.tidsperiode,t),ut=(e,t,r)=>e.filter(n=>(k(n)||V(n))&&O(n.tidsperiode,t,r)),dt=(e,t,r)=>!!e&&t!==void 0&&i(r).isSame(t,"d"),it=e=>({fom:M(e.fom),tom:M(e.tom)}),lt=e=>{const t=v(e);return t?t>0:!1},ft=e=>{const t=v(e);return t?t<=100:!1},ct=e=>{const t=v(e);return t?t<100:!1},K=e=>e!==void 0&&isNaN(parseFloat(e))===!1,G=e=>{if(e===void 0)return;const t=parseFloat(e);if(!isNaN(t))return Math.round(t)===t?Math.round(t):t},Le=(e,t)=>{if(t)return t;if(e){let r=(100-e)*100;return r=Math.round(r)/100,r}},Ke=(e,t,r,n)=>{const s=T(r);return n?d(e,`uttaksplan.oppholdsårsaktype.foreldernavn.far.${t}`,{foreldernavn:s}):d(e,`uttaksplan.oppholdsårsaktype.foreldernavn.mor.${t}`,{foreldernavn:s})},Ge=e=>e===c.UttakFedrekvoteAnnenForelder?u.Fedrekvote:e===c.UttakMødrekvoteAnnenForelder?u.Mødrekvote:e===c.UttakFellesperiodeAnnenForelder?u.Fellesperiode:e===c.UttakForeldrepengerAnnenForelder?u.Foreldrepenger:u.ForeldrepengerFørFødsel,kt=e=>{switch(e){case u.Fedrekvote:return c.UttakFedrekvoteAnnenForelder;case u.Mødrekvote:return c.UttakMødrekvoteAnnenForelder;case u.Fellesperiode:return c.UttakFellesperiodeAnnenForelder;default:return}},A=(e,t)=>{let r="";return t.farMedmor?r=e===g.mor?t.mor:t.farMedmor:r=e===g.mor?t.mor:e,T(r)},je=(e,t,r,n,s,a,l,F)=>{const S=N(e,t.konto,r,l,F),y=De(e,S,t,a,n,s);return t.gradert&&K(t.stillingsprosent)||t.ønskerSamtidigUttak&&K(t.samtidigUttakProsent)?`${y} ${d(e,"gradering.prosent",{stillingsprosent:Le(G(t.stillingsprosent),t.samtidigUttakProsent?G(t.samtidigUttakProsent):void 0)})}`:y},$e=(e,t,r,n)=>{switch(t.infotype){case b.uttakAnnenPart:return be(e,Ge(t.årsak),t.forelder,r,t.samtidigUttakProsent);case b.utsettelseAnnenPart:return d(e,`uttaksplan.periodetype.info.utsettelse.${t.årsak}`,{navn:A(t.forelder,r)});case b.avslåttPeriode:return t.forelder===g.mor&&n||t.forelder===g.farMedmor&&!n?d(e,"uttaksplan.periodetype.info.avslåttPeriode.annenPart",{navn:A(t.forelder,r)}):d(e,`uttaksplan.periodetype.info.${t.infotype}`)}},gt=(e,t,r,n,s,a,l,F)=>{switch(t.type){case o.Uttak:return je(e,t,r,n,s,a,l,F);case o.PeriodeUtenUttak:return d(e,"uttaksplan.periodetype.periodeUtenUttak.tittel");case o.Overføring:return N(e,t.konto,r);case o.Utsettelse:return t.årsak?d(e,"uttaksplan.periodeliste.utsettelsesårsak",{årsak:d(e,`uttaksplan.utsettelsesårsak.${t.årsak}`)}):d(e,"uttaksplan.periodeliste.utsettelsesårsak.ukjent");case o.Opphold:return Ke(e,t.årsak,A(t.forelder,r),t.forelder==="mor");case o.Hull:return d(e,"uttaksplan.periodetype.hull.tittel");case o.Info:return $e(e,t,r,l)}},mt=(e,t)=>{if(t===void 0)return!1;const r=Be(e,t);return r?r.resultat.innvilget:!1},Be=(e,t)=>t.saksperioder.find(r=>J(Y(r.periode),e.tidsperiode)),Ft=(e,t)=>e.type===o.Utsettelse||e.type===o.Uttak||e.type===o.Overføring||e.type===o.Opphold||e.type===o.Info?A(e.forelder,t):"Ingen forelder registrert",pt=e=>{switch(e){case o.Uttak:return"uttaksplan.slettPeriode.uttak";case o.Overføring:return"uttaksplan.slettPeriode.overføring";case o.Opphold:return"uttaksplan.slettPeriode.opphold";case o.Utsettelse:return"uttaksplan.slettPeriode.utsettelse";case o.Info:return"uttaksplan.slettPeriode.info";default:return""}},Ve=(e,t)=>e.tidsperiode.fom!==void 0&&e.tidsperiode.tom!==void 0&&i(e.tidsperiode.fom).isSameOrAfter(t,"day")&&i(e.tidsperiode.tom).isSameOrAfter(t,"day"),vt=(e,t)=>Ve(e,t)===!1,Ut=e=>(e.type===o.Uttak||e.type===o.Opphold)&&i(e.tidsperiode.fom).isBefore(i().startOf("day").subtract(3,"months"),"day"),At=e=>e.årsak===f.Sykdom||e.årsak===f.InstitusjonSøker||e.årsak===f.InstitusjonBarnet,Et=e=>!!(V(e)&&(e.årsak===U.institusjonsoppholdAnnenForelder||e.årsak===U.sykdomAnnenForelder)||k(e)&&(e.erMorForSyk===!0||e.morsAktivitetIPerioden===p.TrengerHjelp||e.morsAktivitetIPerioden===p.Innlagt)||z(e)&&(e.morsAktivitetIPerioden===p.Innlagt||e.morsAktivitetIPerioden===p.TrengerHjelp)),yt=e=>k(e)&&!x(j(e.tidsperiode.fom)),xe=e=>e.type===o.Utsettelse&&!x(j(e.tidsperiode.fom)),Tt=e=>e.årsak===f.Arbeid,St=e=>e.type===o.Utsettelse,He=e=>e.type===o.Utsettelse&&(e.årsak===f.Ferie||e.årsak===f.Arbeid),bt=e=>xe(e)&&He(e),It=e=>e===f.Sykdom||e===f.InstitusjonBarnet||e===f.InstitusjonSøker||e===U.institusjonsoppholdAnnenForelder||e===U.sykdomAnnenForelder,Rt=(e,t)=>t.some(r=>$(e).erLik(r,!0,!0)),Nt=(e,t)=>{if(k(e)){const r=t.filter(n=>_(n)).find(n=>_(n)&&i(e.tidsperiode.fom).isSame(n.tidsperiode.fom)&&n.ønskerSamtidigUttak===!0&&n.id!==e.id);return r!==void 0?r:void 0}},ht=(e,t,r)=>{const n=e.find(s=>s.id===t.id);return n&&n.isValid!==r?e.map(s=>s.id===n.id?{...s,isValid:r}:s):n?e:[...e,{id:t.id,isValid:r}]};export{et as $,Ge as A,kt as B,re as C,ht as D,Xe as E,g as F,pt as G,O as H,It as I,Rt as J,De as K,at as L,p as M,ot as N,c as O,A as P,Ke as Q,Nt as R,vt as S,mt as T,Se as U,ye as V,bt as W,Ft as X,lt as Y,ft as Z,ct as _,At as a,Pe as a0,Me as a1,rt as a2,nt as a3,Ne as a4,tt as a5,ut as a6,Et as b,xe as c,yt as d,St as e,Tt as f,Ut as g,Re as h,_e as i,st as j,P as k,gt as l,Ye as m,Ze as n,Je as o,h as p,Oe as q,Qe as r,it as s,T as t,dt as u,H as v,N as w,U as x,w as y,v as z};
//# sourceMappingURL=periodeUtils-2fc4c766.js.map
