const x=Object.prototype.toString;function j(s,t){return x.call(s)===`[object ${t}]`}function B(s){return j(s,"Object")}function P(s){return!!(s&&s.then&&typeof s.then=="function")}function p(s){return s&&s.Math==Math?s:void 0}const c=typeof globalThis=="object"&&p(globalThis)||typeof window=="object"&&p(window)||typeof self=="object"&&p(self)||typeof global=="object"&&p(global)||function(){return this}()||{};function H(){return c}function R(s,t,e){const n=e||c,i=n.__SENTRY__=n.__SENTRY__||{};return i[s]||(i[s]=t())}const C="Sentry Logger ",b=["debug","info","warn","error","log","assert","trace"];function I(s){if(!("console"in c))return s();const t=c.console,e={};b.forEach(n=>{const i=t[n]&&t[n].__sentry_original__;n in t&&i&&(e[n]=t[n],t[n]=i)});try{return s()}finally{Object.keys(e).forEach(n=>{t[n]=e[n]})}}function w(){let s=!1;const t={enable:()=>{s=!0},disable:()=>{s=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?b.forEach(e=>{t[e]=(...n)=>{s&&I(()=>{c.console[e](`${C}[${e}]:`,...n)})}}):b.forEach(e=>{t[e]=()=>{}}),t}let l;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?l=R("logger",w):l=w();function q(s){return y(s,new Map)}function y(s,t){if(B(s)){const e=t.get(s);if(e!==void 0)return e;const n={};t.set(s,n);for(const i of Object.keys(s))typeof s[i]<"u"&&(n[i]=y(s[i],t));return n}if(Array.isArray(s)){const e=t.get(s);if(e!==void 0)return e;const n=[];return t.set(s,n),s.forEach(i=>{n.push(y(i,t))}),n}return s}function f(){const s=c,t=s.crypto||s.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const e=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,n=>(n^(e()&15)>>n/4).toString(16))}function F(s){return Array.isArray(s)?s:[s]}function $(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function J(){return!$()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function W(s,t){return s.require(t)}var u;(function(s){s[s.PENDING=0]="PENDING";const e=1;s[s.RESOLVED=e]="RESOLVED";const n=2;s[s.REJECTED=n]="REJECTED"})(u||(u={}));class h{constructor(t){h.prototype.__init.call(this),h.prototype.__init2.call(this),h.prototype.__init3.call(this),h.prototype.__init4.call(this),this._state=u.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(e){this._reject(e)}}then(t,e){return new h((n,i)=>{this._handlers.push([!1,r=>{if(!t)n(r);else try{n(t(r))}catch(o){i(o)}},r=>{if(!e)i(r);else try{n(e(r))}catch(o){i(o)}}]),this._executeHandlers()})}catch(t){return this.then(e=>e,t)}finally(t){return new h((e,n)=>{let i,r;return this.then(o=>{r=!1,i=o,t&&t()},o=>{r=!0,i=o,t&&t()}).then(()=>{if(r){n(i);return}e(i)})})}__init(){this._resolve=t=>{this._setResult(u.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(u.REJECTED,t)}}__init3(){this._setResult=(t,e)=>{if(this._state===u.PENDING){if(P(e)){e.then(this._resolve,this._reject);return}this._state=t,this._value=e,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===u.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(e=>{e[0]||(this._state===u.RESOLVED&&e[1](this._value),this._state===u.REJECTED&&e[2](this._value),e[0]=!0)})}}}const U=H(),T={nowSeconds:()=>Date.now()/1e3};function V(){const{performance:s}=U;if(!s||!s.now)return;const t=Date.now()-s.now();return{now:()=>s.now(),timeOrigin:t}}function K(){try{return W(module,"perf_hooks").performance}catch{return}}const m=J()?K():V(),O=m===void 0?T:{nowSeconds:()=>(m.timeOrigin+m.now())/1e3},v=T.nowSeconds.bind(T),A=O.nowSeconds.bind(O);(()=>{const{performance:s}=U;if(!s||!s.now)return;const t=3600*1e3,e=s.now(),n=Date.now(),i=s.timeOrigin?Math.abs(s.timeOrigin+e-n):t,r=i<t,o=s.timing&&s.timing.navigationStart,a=typeof o=="number"?Math.abs(o+e-n):t,d=a<t;return r||d?i<=a?s.timeOrigin:o:n})();const X="production";function Q(s){const t=A(),e={sid:f(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>z(e)};return s&&S(e,s),e}function S(s,t={}){if(t.user&&(!s.ipAddress&&t.user.ip_address&&(s.ipAddress=t.user.ip_address),!s.did&&!t.did&&(s.did=t.user.id||t.user.email||t.user.username)),s.timestamp=t.timestamp||A(),t.ignoreDuration&&(s.ignoreDuration=t.ignoreDuration),t.sid&&(s.sid=t.sid.length===32?t.sid:f()),t.init!==void 0&&(s.init=t.init),!s.did&&t.did&&(s.did=`${t.did}`),typeof t.started=="number"&&(s.started=t.started),s.ignoreDuration)s.duration=void 0;else if(typeof t.duration=="number")s.duration=t.duration;else{const e=s.timestamp-s.started;s.duration=e>=0?e:0}t.release&&(s.release=t.release),t.environment&&(s.environment=t.environment),!s.ipAddress&&t.ipAddress&&(s.ipAddress=t.ipAddress),!s.userAgent&&t.userAgent&&(s.userAgent=t.userAgent),typeof t.errors=="number"&&(s.errors=t.errors),t.status&&(s.status=t.status)}function Z(s,t){let e={};t?e={status:t}:s.status==="ok"&&(e={status:"exited"}),S(s,e)}function z(s){return q({sid:`${s.sid}`,init:s.init,started:new Date(s.started*1e3).toISOString(),timestamp:new Date(s.timestamp*1e3).toISOString(),status:s.status,errors:s.errors,did:typeof s.did=="number"||typeof s.did=="string"?`${s.did}`:void 0,duration:s.duration,attrs:{release:s.release,environment:s.environment,ip_address:s.ipAddress,user_agent:s.userAgent}})}const tt=100;class g{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=k()}static clone(t){const e=new g;return t&&(e._breadcrumbs=[...t._breadcrumbs],e._tags={...t._tags},e._extra={...t._extra},e._contexts={...t._contexts},e._user=t._user,e._level=t._level,e._span=t._span,e._session=t._session,e._transactionName=t._transactionName,e._fingerprint=t._fingerprint,e._eventProcessors=[...t._eventProcessors],e._requestSession=t._requestSession,e._attachments=[...t._attachments],e._sdkProcessingMetadata={...t._sdkProcessingMetadata},e._propagationContext={...t._propagationContext}),e}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&S(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return e===null?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){const e=t(this);return e instanceof g?e:this}return t instanceof g?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):B(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=k(),this}addBreadcrumb(t,e){const n=typeof e=="number"?e:tt;if(n<=0)return this;const i={timestamp:v(),...t};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-n),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,e={}){if(this._extra&&Object.keys(this._extra).length&&(t.extra={...this._extra,...t.extra}),this._tags&&Object.keys(this._tags).length&&(t.tags={...this._tags,...t.tags}),this._user&&Object.keys(this._user).length&&(t.user={...this._user,...t.user}),this._contexts&&Object.keys(this._contexts).length&&(t.contexts={...this._contexts,...t.contexts}),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts={trace:this._span.getTraceContext(),...t.contexts};const n=this._span.transaction;if(n){t.sdkProcessingMetadata={dynamicSamplingContext:n.getDynamicSamplingContext(),...t.sdkProcessingMetadata};const i=n.name;i&&(t.tags={transaction:i,...t.tags})}}return this._applyFingerprint(t),t.breadcrumbs=[...t.breadcrumbs||[],...this._breadcrumbs],t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...et(),...this._eventProcessors],t,e)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(t,e,n,i=0){return new h((r,o)=>{const _=t[i];if(e===null||typeof _!="function")r(e);else{const a=_({...e},n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.id&&a===null&&l.log(`Event processor "${_.id}" dropped event`),P(a)?a.then(d=>this._notifyEventProcessors(t,d,n,i+1).then(r)).then(null,o):this._notifyEventProcessors(t,a,n,i+1).then(r).then(null,o)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?F(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}}function et(){return R("globalEventProcessors",()=>[])}function k(){return{traceId:f(),spanId:f().substring(16),sampled:!1}}const Y=4,st=100;class M{constructor(t,e=new g,n=Y){this._version=n,this._stack=[{scope:e}],t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){const e=this.getStackTop();e.client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=g.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const e=this.pushScope();try{t(e)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,e){const n=this._lastEventId=e&&e.event_id?e.event_id:f(),i=new Error("Sentry syntheticException");return this._withClient((r,o)=>{r.captureException(t,{originalException:t,syntheticException:i,...e,event_id:n},o)}),n}captureMessage(t,e,n){const i=this._lastEventId=n&&n.event_id?n.event_id:f(),r=new Error(t);return this._withClient((o,_)=>{o.captureMessage(t,e,{originalException:t,syntheticException:r,...n,event_id:i},_)}),i}captureEvent(t,e){const n=e&&e.event_id?e.event_id:f();return t.type||(this._lastEventId=n),this._withClient((i,r)=>{i.captureEvent(t,{...e,event_id:n},r)}),n}lastEventId(){return this._lastEventId}addBreadcrumb(t,e){const{scope:n,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:o=st}=i.getOptions&&i.getOptions()||{};if(o<=0)return;const a={timestamp:v(),...t},d=r?I(()=>r(a,e)):a;d!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",d,e),n.addBreadcrumb(d,o))}setUser(t){this.getScope().setUser(t)}setTags(t){this.getScope().setTags(t)}setExtras(t){this.getScope().setExtras(t)}setTag(t,e){this.getScope().setTag(t,e)}setExtra(t,e){this.getScope().setExtra(t,e)}setContext(t,e){this.getScope().setContext(t,e)}configureScope(t){const{scope:e,client:n}=this.getStackTop();n&&t(e)}run(t){const e=L(this);try{t(this)}finally{L(e)}}getIntegration(t){const e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&l.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,e){const n=this._callExtensionMethod("startTransaction",t,e);return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&!n&&console.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,n=e.getSession();n&&Z(n),this._sendSessionUpdate(),e.setSession()}startSession(t){const{scope:e,client:n}=this.getStackTop(),{release:i,environment:r=X}=n&&n.getOptions()||{},{userAgent:o}=c.navigator||{},_=Q({release:i,environment:r,user:e.getUser(),...o&&{userAgent:o},...t}),a=e.getSession&&e.getSession();return a&&a.status==="ok"&&S(a,{status:"exited"}),this.endSession(),e.setSession(_),_}shouldSendDefaultPii(){const t=this.getClient(),e=t&&t.getOptions();return!!(e&&e.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:e}=this.getStackTop(),n=t.getSession();n&&e&&e.captureSession&&e.captureSession(n)}_withClient(t){const{scope:e,client:n}=this.getStackTop();n&&t(n,e)}_callExtensionMethod(t,...e){const i=E().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,e);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&l.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function E(){return c.__SENTRY__=c.__SENTRY__||{extensions:{},hub:void 0},c}function L(s){const t=E(),e=N(t);return G(t,s),e}function D(){const s=E();if(s.__SENTRY__&&s.__SENTRY__.acs){const t=s.__SENTRY__.acs.getCurrentHub();if(t)return t}return nt(s)}function nt(s=E()){return(!it(s)||N(s).isOlderThan(Y))&&G(s,new M),N(s)}function it(s){return!!(s&&s.__SENTRY__&&s.__SENTRY__.hub)}function N(s){return R("hub",()=>new M,s)}function G(s,t){if(!s)return!1;const e=s.__SENTRY__=s.__SENTRY__||{};return e.hub=t,!0}function rt(s,t){return D().captureException(s,{captureContext:t})}function ot(s,t){const e=typeof t=="string"?t:void 0,n=typeof t!="string"?{captureContext:t}:void 0;return D().captureMessage(s,e,n)}function at(s){D().withScope(s)}export{ot as a,rt as c,at as w};
//# sourceMappingURL=exports-70c8b745.js.map
