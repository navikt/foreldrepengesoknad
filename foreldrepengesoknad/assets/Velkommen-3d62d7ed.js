import{j as e}from"./jsx-runtime-69eee039.js";import{u as q,i as p,h as I,B as r,H as J,G as U,A as H,j as K,f as Y}from"./Tidsperioden-bc4aa89e.js";import{r as P}from"./index-7c191284.js";import"./_baseToString-4b695375.js";import"./_createSet-f4a01039.js";import{l as $}from"./links-b36d21ab.js";import{u as z,a as s,S as R}from"./mapSøkerinfoDTO-23fed2f2.js";import{u as Q}from"./useOnValidSubmit-6ae715f6.js";import{a as W}from"./useSøknad-26978d9c.js";import{g as w,s as X,V as v,a as Z,v as ee,S as _,b as f,B as te,c as ne,d as se}from"./velkommenUtils-02bcc932.js";import{D as ae}from"./DinePlikter-1887aa82.js";import{D as re}from"./DinePersonopplysningerModal-652f60cc.js";import{a as oe}from"./submitUtils-ec131b19.js";import{m as ie,o as le,a as de,b as me}from"./eksisterendeSakUtils-f3118081.js";import{u as ke}from"./useSøkerinfo-417aa154.js";import{F as B}from"./message-0de53699.js";import{B as pe}from"./Link-b834ea2b.js";const j=({locale:c,saker:x,onChangeLocale:A})=>{const o=q(),D=W(),{dispatch:b,state:S}=z(),[C,V]=P.useState(!1),h=Y("velkommen"),y=ke(),{registrerteBarn:T}=y,u=w(x,T),F=[...u].sort(X);P.useEffect(()=>{S.søknad.søker.språkkode!==c&&b(s.setSpråkkode(c))},[b,c,S.søknad.søker.språkkode]);const G=i=>{const t=i.valgteBarn===_.SØKNAD_GJELDER_NYTT_BARN?void 0:u.find(a=>a.id===i.valgteBarn),l=t!==void 0&&!!t.kanSøkeOmEndring,m=l&&t.sak!==void 0?x.find(a=>{var g;return a.saksnummer===((g=t.sak)==null?void 0:g.saksnummer)}):void 0,n=[s.setVelkommen(i.harForståttRettigheterOgPlikter),s.setErEndringssøknad(l)];let k;t!==void 0&&(k=se(t,F),n.push(s.setBarnFraNesteSak(k)));const d=k!==void 0?k.startdatoFørsteStønadsperiode:void 0,E=l&&m,O=t!==void 0&&t.sak!==void 0&&t.kanSøkeOmEndring===!1,M=!E&&!O&&t!==void 0;if(E){const a=ie(m,d),g=le(S.søkerinfo,a,o,m.annenPart,t);n.push(s.updateCurrentRoute(R.UTTAKSPLAN)),n.push(s.setSøknad(g)),n.push(s.setEksisterendeSak(a)),n.push(s.setBrukerSvarteJaPåAutoJustering(a==null?void 0:a.grunnlag.ønskerJustertUttakVedFødsel)),n.push(s.setSøknadGjelderEtNyttBarn(!1))}else if(O){const a=de(t,o,y);n.push(s.setSøknad(a)),n.push(s.setSøknadGjelderEtNyttBarn(!1))}else if(M){const a=me(t);n.push(s.setSøknad(a)),n.push(s.setSøknadGjelderEtNyttBarn(!1))}else n.push(s.setSøknadGjelderEtNyttBarn(!0));return n},{handleSubmit:L,isSubmitting:N}=Q(G,R.SØKERSITUASJON,i=>oe(i));return e.jsx(v.FormikWrapper,{initialValues:Z(D.harGodkjentVilkår),onSubmit:L,renderForm:({values:i,setFieldValue:t})=>{const l=ee.getVisbility({...i,selectableBarn:u}),m=i.valgteBarn,n=m===_.SØKNAD_GJELDER_NYTT_BARN?void 0:u.find(d=>d.id===m),k=n!==void 0&&n.kanSøkeOmEndring===!0?p(o,"velkommen.endreSøknad"):p(o,"velkommen.begynnMedSøknad");return e.jsxs(v.Form,{includeButtons:!1,children:[e.jsx(I,{locale:c,availableLocales:["nb","nn"],toggle:A}),e.jsxs("div",{className:h.block,children:[e.jsx(r,{children:e.jsx(J,{size:"xlarge",className:`${h.element("tittel")}`,children:p(o,"velkommen.tittel")})}),e.jsx(r,{padBottom:"l",children:e.jsxs(U,{poster:!0,children:[e.jsx(r,{padBottom:"m",children:p(o,"velkommen.guidepanel.del1")})," ",e.jsx(r,{children:e.jsx(B,{id:"velkommen.guidepanel.del2",values:{a:d=>e.jsx("a",{className:"lenke",rel:"noopener noreferrer",href:$.foreldrepenger,target:"_blank",children:d})}})})]})}),e.jsx(r,{padBottom:"l",visible:l.isVisible(f.valgteBarn),children:e.jsx(te,{selectableBarn:F,visibility:l,formValues:i,setFieldValue:t})}),e.jsx(r,{padBottom:"l",visible:l.isVisible(f.harForståttRettigheterOgPlikter),children:e.jsx(H,{variant:"info",children:p(o,"velkommen.lagring.info")})}),e.jsx(r,{padBottom:"l",visible:l.isVisible(f.harForståttRettigheterOgPlikter),children:e.jsx(v.ConfirmationCheckbox,{name:f.harForståttRettigheterOgPlikter,label:p(o,"velkommen.samtykke"),validate:ne(o),children:e.jsxs(e.Fragment,{children:[e.jsx(r,{padBottom:"l",children:e.jsx(B,{id:"velkommen.samtykkeIntro.del1"})}),e.jsx(r,{padBottom:"m",children:e.jsx(ae,{})})]})})}),e.jsx(r,{padBottom:"l",children:e.jsx("div",{style:{textAlign:"center"},children:e.jsx(K,{type:"submit",variant:"primary",disabled:N,loading:N,children:k})})}),e.jsx(pe,{className:h.element("personopplysningerLink"),children:e.jsx("a",{className:"lenke",href:"#",onClick:d=>{d.preventDefault(),V(!0)},children:e.jsx(B,{id:"velkommen.lesMerOmPersonopplysninger"})})}),e.jsx(re,{isOpen:C,onRequestClose:()=>V(!1)})]})]})}})},Pe=j;try{j.displayName="Velkommen",j.__docgenInfo={description:"",displayName:"Velkommen",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string"}},onChangeLocale:{defaultValue:null,description:"",name:"onChangeLocale",required:!0,type:{name:"(locale: LocaleNo) => void"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'}]}},saker:{defaultValue:null,description:"",name:"saker",required:!0,type:{name:"Sak[]"}},fnr:{defaultValue:null,description:"",name:"fnr",required:!0,type:{name:"string"}}}}}catch{}export{Pe as V};
//# sourceMappingURL=Velkommen-3d62d7ed.js.map
