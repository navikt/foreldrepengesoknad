import{r as l}from"./index-1cdf6ce0.js";import{j as R}from"./jsx-runtime-1caa8f64.js";import{u as G,R as T,a as L}from"./useRequest-a00d1ba3.js";import{E as P}from"./apiInterceptor-716e24db.js";import{c as J,b as $,e as A,j as k,k as Z,l as z,i as D,m as Q}from"./barnUtils-e770e0b5.js";import{I as W,x as S,Z as X,t as b,y as tt,d as p}from"./Tidsperioden-d3b158ba.js";import{D as E}from"./Periodene-56628acc.js";import"./index-753920cd.js";import{i as N}from"./isFarEllerMedmor-120238ea.js";import{g as et}from"./uttaksplanHarForMangeFlerbarnsuker-2f023a86.js";import"./_baseToString-43959ddd.js";import"./_createSet-fe2162c5.js";import{c as rt}from"./eksisterendeSakUtils-42f6657b.js";import{S as x}from"./Perioden-96b8bac4.js";var f=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER_100="STØNADSKONTOER_100",t.STØNADSKONTOER_80="STØNADSKONTOER_80",t))(f||{});const H={},K=l.createContext(H),y=l.createContext(void 0),v=({children:t})=>{const[e,r]=l.useReducer((s,a)=>{switch(a.type){case"update":return{...s,[a.key]:[a.hash,a.data]};case"reset":return{};default:throw new Error}},H);return R.jsx(K.Provider,{value:e,children:R.jsx(y.Provider,{value:r,children:t})})},C=(t,e)=>{const s=l.useContext(K)[t];return s&&s[0]===e?s[1]:void 0},F=(t,e)=>{const r=l.useContext(y);return s=>{r&&r({type:"update",key:t,hash:e,data:s})}};try{v.displayName="FpApiDataContext",v.__docgenInfo={description:"",displayName:"FpApiDataContext",props:{initialState:{defaultValue:null,description:"",name:"initialState",required:!1,type:{name:"FpApiDataHashMap"}},onDispatch:{defaultValue:null,description:"",name:"onDispatch",required:!1,type:{name:"((action: Action) => void)"}}}}}catch{}const M=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),B=t=>{let e=0;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);e=(e<<5)-e+s,e=e&e}return e},U={[f.ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[f.NESTE_SAK_ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[f.STØNADSKONTOER_80]:`${P.REST_API_URL}/konto`,[f.STØNADSKONTOER_100]:`${P.REST_API_URL}/konto`},Ot=(t,e,r)=>{const s=B(JSON.stringify(M(e))),a=C(t,s),n=!!a,i=F(t,s),{data:o,requestStatus:c,error:d}=G(U[t],{config:{timeout:15*1e3,params:e,withCredentials:!1},isSuspended:n||r});return l.useEffect(()=>{o&&i(o)},[o]),{data:n?a:o,requestStatus:n?T.FINISHED:c,error:d}},Rt=(t,e,r)=>{const s=B(JSON.stringify(M(e))),a=C(t,s),n=!!a,i=F(t,s),{data:o,requestStatus:c,error:d}=L(U[t],e,{config:{withCredentials:!0},isSuspended:n||r});return l.useEffect(()=>{o&&i(o)},[o]),d&&d.message.includes("Ugyldig ident")?{data:void 0,requestStatus:T.FINISHED,error:null}:{data:n?a:o,requestStatus:n?T.FINISHED:c,error:d}},st=(t,e)=>t?!0:D(e)?!!e.harRettPåForeldrepengerINorge:!1,at=(t,e)=>t?D(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,ot=t=>D(t)?!!t.harRettPåForeldrepengerIEØS:!1,nt=(t,e)=>{if(k(t)||Q(t))return e||S(t.termindato)},it=(t,e)=>e||t||void 0,dt=(t,e,r)=>t&&r?r:e,g=(t,e)=>b(t)?tt(t,e):void 0,Pt=(t,e,r,s,a,n,i)=>{const o=N(r.rolle),c=J(o,s.erAleneOmOmsorg,e),d=$(!o,s.erAleneOmOmsorg,e),j=a==null?void 0:a.familiehendelsesdato,q=a!==void 0?a.startdatoFørsteStønadsperiode:void 0,u=rt(n,t,o,A(t),q),V=dt(o,t.antallBarn,u==null?void 0:u.grunnlag.antallBarn),w=it(i==null?void 0:i.grunnlag.termindato,u==null?void 0:u.grunnlag.termindato),_=N(r.rolle),Y=W(A(t)),h=N(r.rolle),m="YYYYMMDD",O={farHarRett:st(_,e),morHarRett:at(_,e),harAnnenForelderTilsvarendeRettEØS:ot(e),morHarAleneomsorg:d||!1,farHarAleneomsorg:c||!1,antallBarn:V,fødselsdato:g(k(t)?S(t.fødselsdatoer[0]):void 0,m),termindato:g(nt(t,w),m),omsorgsovertakelseDato:g(Z(t)||z(t)?S(t.adopsjonsdato):void 0,m),startdatoUttak:g(A(t),m),minsterett:X(Y),erMor:!h,morHarUføretrygd:et(e,h),familieHendelseDatoNesteSak:g(S(j),m)};return{stønadskontoParams100:{...O,dekningsgrad:E.HUNDRE_PROSENT},stønadskontoParams80:{...O,dekningsgrad:E.ÅTTI_PROSENT}}},lt=(t,e)=>{const r=[];return r.push({...t[0],dager:t[0].dager-e}),r.push({konto:x.AktivitetsfriKvote,dager:e}),r},I=t=>{let e=[];Object.keys(t.kontoer).filter(s=>s!==x.Flerbarnsdager).forEach(s=>{e.push({konto:s,dager:t.kontoer[s]})});const r=t.minsteretter.generellMinsterett;return r>0&&(e=lt(e,r)),e},vt=(t,e)=>{const r=I(t),s=I(e);return{[E.ÅTTI_PROSENT]:r,[E.HUNDRE_PROSENT]:s}},It=(t,e,r)=>{if(t===void 0||e===void 0||r!=="fødsel")return!1;const s=p(t).isSameOrAfter(p(new Date("2019-07-01")),"day");return p(t).add(7,"weeks").add(3,"days").isBefore(p(e),"days")&&s},kt=(t,e)=>t&&e?(100-parseInt(e,10)).toString():"100";export{v as F,f as a,Ot as b,vt as c,dt as d,kt as e,Pt as g,It as s,Rt as u};
