{"version":3,"file":"annenForelderUtils-13e8b534.js","sources":["../../src/app/steps/uttaksplan-info/utils/uttaksplanDatoavgrensninger.ts","../../src/app/utils/annenForelderUtils.ts"],"sourcesContent":["import dayjs from 'dayjs';\nimport { Uttaksdagen } from './Uttaksdagen';\nimport uttaksConstants from 'app/constants';\nimport { andreAugust2022ReglerGjelder } from 'app/utils/dateUtils';\nimport { Situasjon } from 'app/types/Situasjon';\nimport { getFørsteUttaksdag2UkerFørFødsel } from 'app/utils/wlbUtils';\nimport { dateToISOString } from '@navikt/sif-common-formik-ds/lib';\nimport { DatepickerLimitations } from '@navikt/ds-datepicker';\n\nfunction sisteMuligePermisjonsdag(familiehendelsedato: Date): Date {\n    const startDato = Uttaksdagen(familiehendelsedato).denneEllerNeste();\n    return Uttaksdagen(\n        dayjs(startDato).add(uttaksConstants.MAKS_PERMISJONSLENGDE_I_ÅR, 'years').toDate(),\n    ).denneEllerNeste();\n}\n\nconst konverterMinOgMaxDatoerTilString = (minDate: Date, maxDate: Date) => ({\n    minDate: dateToISOString(minDate),\n    maxDate: dateToISOString(maxDate),\n});\n\nconst defaultPermisjonsperiodeAvgrensning = (familiehendelsesdato: Date): DatepickerLimitations => {\n    const minDato = Uttaksdagen(familiehendelsesdato).denneEllerNeste();\n    const maksDato = sisteMuligePermisjonsdag(familiehendelsesdato);\n    return {\n        ...konverterMinOgMaxDatoerTilString(minDato, maksDato),\n        weekendsNotSelectable: true,\n    };\n};\n\nconst startdatoFørTermin = (familiehendelsesdato: Date, termindato: Date | undefined): DatepickerLimitations => {\n    const termindatoMinus12Uker =\n        termindato !== undefined\n            ? Uttaksdagen(termindato).trekkFra(uttaksConstants.MAKS_ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL * 5 - 1)\n            : undefined;\n    const erFødselsdatoFørTermindatoMinus12Uker = dayjs(familiehendelsesdato).isBefore(termindatoMinus12Uker);\n    const datoÅRegneFra = erFødselsdatoFørTermindatoMinus12Uker !== undefined ? familiehendelsesdato : termindato;\n    const maksDato = Uttaksdagen(dayjs(datoÅRegneFra).toDate()).forrige();\n    const minDato = Uttaksdagen(maksDato).trekkFra(uttaksConstants.MAKS_ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL * 5 - 1);\n    return {\n        ...konverterMinOgMaxDatoerTilString(minDato, maksDato),\n        weekendsNotSelectable: true,\n    };\n};\n\nconst startdatoFørTerminForeldrepengerFørFødselKonto = (familiehendelsesdato: string): DatepickerLimitations => {\n    const maksDato = Uttaksdagen(dayjs(familiehendelsesdato).toDate()).forrige();\n    const minDato = Uttaksdagen(maksDato).trekkFra(uttaksConstants.ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL * 5 - 1);\n    return {\n        ...konverterMinOgMaxDatoerTilString(minDato, maksDato),\n        weekendsNotSelectable: true,\n    };\n};\n\nconst ekstrauttakFørFødsel = (familiehendelsesdato: string): DatepickerLimitations => {\n    const sisteDagFørFødsel = Uttaksdagen(dayjs(familiehendelsesdato).toDate()).forrige();\n    const minDato = Uttaksdagen(sisteDagFørFødsel).trekkFra(\n        uttaksConstants.MAKS_ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL * 5 - 1,\n    );\n    const maksDato = Uttaksdagen(sisteDagFørFødsel).trekkFra(\n        uttaksConstants.ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL * 5 - 1,\n    );\n    return {\n        ...konverterMinOgMaxDatoerTilString(minDato, maksDato),\n        weekendsNotSelectable: true,\n    };\n};\n\nconst startdatoPermisjonAleneomsorgFarMedmor = (\n    datoForAleneomsorg: string,\n    familiehendelsesdato: string,\n): DatepickerLimitations => {\n    const minDato = Uttaksdagen(dayjs(datoForAleneomsorg).toDate()).denneEllerNeste();\n    const maksDato = sisteMuligePermisjonsdag(dayjs(familiehendelsesdato).toDate());\n    return {\n        ...konverterMinOgMaxDatoerTilString(minDato, maksDato),\n        weekendsNotSelectable: true,\n    };\n};\n\nconst startdatoPermisjonAdopsjon = (familiehendelsesdato: string): DatepickerLimitations => {\n    return defaultPermisjonsperiodeAvgrensning(dayjs(familiehendelsesdato).toDate());\n};\n\nconst morsSisteUttaksdag = (familiehendelsesdato: string): DatepickerLimitations => {\n    return defaultPermisjonsperiodeAvgrensning(dayjs(familiehendelsesdato).toDate());\n};\n\nconst startdatoPermisjonFarMedmor = (\n    familiehendelsesdato: Date,\n    termindato: Date | undefined,\n    situasjon: Situasjon,\n): DatepickerLimitations => {\n    const defaultAvgrensning = defaultPermisjonsperiodeAvgrensning(familiehendelsesdato);\n    if (situasjon === 'fødsel' && andreAugust2022ReglerGjelder(familiehendelsesdato)) {\n        return {\n            ...defaultAvgrensning,\n            minDate: dateToISOString(getFørsteUttaksdag2UkerFørFødsel(familiehendelsesdato, termindato)),\n        };\n    }\n    return defaultAvgrensning;\n};\n\nexport const uttaksplanDatoavgrensninger = {\n    startdatoFørTermin,\n    morsSisteUttaksdag,\n    startdatoPermisjonFarMedmor,\n    startdatoPermisjonAdopsjon,\n    startdatoPermisjonAleneomsorgFarMedmor,\n    startdatoFørTerminForeldrepengerFørFødselKonto,\n    ekstrauttakFørFødsel,\n};\n","import { intlUtils } from '@navikt/fp-common';\nimport AnnenForelder, { AnnenForelderOppgitt, isAnnenForelderOppgitt } from 'app/context/types/AnnenForelder';\nimport { RettighetType } from 'app/types/RettighetType';\nimport { Sak } from 'app/types/Sak';\nimport { IntlShape } from 'react-intl';\n\nexport const getErMorUfør = (annenForelder: AnnenForelder, erFarEllerMedmor: boolean) => {\n    if (isAnnenForelderOppgitt(annenForelder) && erFarEllerMedmor) {\n        return !!annenForelder.erUfør;\n    }\n\n    return false;\n};\n\nexport const harAnnenForelderRettIEØS = (annenForelder: AnnenForelder): boolean => {\n    return isAnnenForelderOppgitt(annenForelder) && !!annenForelder.harRettPåForeldrepengerIEØS;\n};\n\nexport const getMockAnnenForelder = (sak: Sak, intl: IntlShape): AnnenForelderOppgitt => {\n    return {\n        fornavn: intlUtils(intl, 'annen.forelder'),\n        etternavn: '',\n        fnr: '',\n        harRettPåForeldrepengerINorge:\n            sak.rettighetType === RettighetType.BEGGE_RETT && !sak.harAnnenForelderTilsvarendeRettEØS,\n        harRettPåForeldrepengerIEØS: sak.harAnnenForelderTilsvarendeRettEØS,\n        erUfør: (!sak.sakTilhørerMor && sak.morUføretrygd) || undefined,\n        kanIkkeOppgis: false,\n    };\n};\n"],"names":["sisteMuligePermisjonsdag","familiehendelsedato","startDato","Uttaksdagen","dayjs","uttaksConstants","konverterMinOgMaxDatoerTilString","minDate","maxDate","dateToISOString","defaultPermisjonsperiodeAvgrensning","familiehendelsesdato","minDato","maksDato","startdatoFørTermin","termindato","termindatoMinus12Uker","datoÅRegneFra","startdatoFørTerminForeldrepengerFørFødselKonto","ekstrauttakFørFødsel","sisteDagFørFødsel","startdatoPermisjonAleneomsorgFarMedmor","datoForAleneomsorg","startdatoPermisjonAdopsjon","morsSisteUttaksdag","startdatoPermisjonFarMedmor","situasjon","defaultAvgrensning","andreAugust2022ReglerGjelder","getFørsteUttaksdag2UkerFørFødsel","uttaksplanDatoavgrensninger","getErMorUfør","annenForelder","erFarEllerMedmor","isAnnenForelderOppgitt","harAnnenForelderRettIEØS"],"mappings":"iVASA,SAASA,EAAyBC,EAAiC,CAC/D,MAAMC,EAAYC,EAAYF,CAAmB,EAAE,gBAAgB,EAC5D,OAAAE,EACHC,EAAMF,CAAS,EAAE,IAAIG,EAAgB,2BAA4B,OAAO,EAAE,OAAO,GACnF,gBAAgB,CACtB,CAEA,MAAMC,EAAmC,CAACC,EAAeC,KAAmB,CACxE,QAASC,EAAgBF,CAAO,EAChC,QAASE,EAAgBD,CAAO,CACpC,GAEME,EAAuCC,GAAsD,CAC/F,MAAMC,EAAUT,EAAYQ,CAAoB,EAAE,gBAAgB,EAC5DE,EAAWb,EAAyBW,CAAoB,EACvD,MAAA,CACH,GAAGL,EAAiCM,EAASC,CAAQ,EACrD,sBAAuB,EAAA,CAE/B,EAEMC,EAAqB,CAACH,EAA4BI,IAAwD,CACtG,MAAAC,EACFD,IAAe,OACTZ,EAAYY,CAAU,EAAE,SAASV,EAAgB,2CAA6C,EAAI,CAAC,EACnG,OAEJY,EADwCb,EAAMO,CAAoB,EAAE,SAASK,CAAqB,IACxC,OAAYL,EAAuBI,EAC7FF,EAAWV,EAAYC,EAAMa,CAAa,EAAE,OAAQ,CAAA,EAAE,UACtDL,EAAUT,EAAYU,CAAQ,EAAE,SAASR,EAAgB,2CAA6C,EAAI,CAAC,EAC1G,MAAA,CACH,GAAGC,EAAiCM,EAASC,CAAQ,EACrD,sBAAuB,EAAA,CAE/B,EAEMK,EAAkDP,GAAwD,CACtG,MAAAE,EAAWV,EAAYC,EAAMO,CAAoB,EAAE,OAAQ,CAAA,EAAE,UAC7DC,EAAUT,EAAYU,CAAQ,EAAE,SAASR,EAAgB,sCAAwC,EAAI,CAAC,EACrG,MAAA,CACH,GAAGC,EAAiCM,EAASC,CAAQ,EACrD,sBAAuB,EAAA,CAE/B,EAEMM,EAAwBR,GAAwD,CAC5E,MAAAS,EAAoBjB,EAAYC,EAAMO,CAAoB,EAAE,OAAQ,CAAA,EAAE,UACtEC,EAAUT,EAAYiB,CAAiB,EAAE,SAC3Cf,EAAgB,2CAA6C,EAAI,CAAA,EAE/DQ,EAAWV,EAAYiB,CAAiB,EAAE,SAC5Cf,EAAgB,sCAAwC,EAAI,CAAA,EAEzD,MAAA,CACH,GAAGC,EAAiCM,EAASC,CAAQ,EACrD,sBAAuB,EAAA,CAE/B,EAEMQ,EAAyC,CAC3CC,EACAX,IACwB,CAClB,MAAAC,EAAUT,EAAYC,EAAMkB,CAAkB,EAAE,OAAQ,CAAA,EAAE,kBAC1DT,EAAWb,EAAyBI,EAAMO,CAAoB,EAAE,QAAQ,EACvE,MAAA,CACH,GAAGL,EAAiCM,EAASC,CAAQ,EACrD,sBAAuB,EAAA,CAE/B,EAEMU,EAA8BZ,GACzBD,EAAoCN,EAAMO,CAAoB,EAAE,OAAQ,CAAA,EAG7Ea,EAAsBb,GACjBD,EAAoCN,EAAMO,CAAoB,EAAE,OAAQ,CAAA,EAG7Ec,EAA8B,CAChCd,EACAI,EACAW,IACwB,CAClB,MAAAC,EAAqBjB,EAAoCC,CAAoB,EACnF,OAAIe,IAAc,UAAYE,EAA6BjB,CAAoB,EACpE,CACH,GAAGgB,EACH,QAASlB,EAAgBoB,EAAiClB,EAAsBI,CAAU,CAAC,CAAA,EAG5FY,CACX,EAEaG,EAA8B,CACvC,mBAAAhB,EACA,mBAAAU,EACA,4BAAAC,EACA,2BAAAF,EACA,uCAAAF,EACA,+CAAAH,EACA,qBAAAC,CACJ,ECzGaY,EAAe,CAACC,EAA8BC,IACnDC,EAAuBF,CAAa,GAAKC,EAClC,CAAC,CAACD,EAAc,OAGpB,GAGEG,EAA4BH,GAC9BE,EAAuBF,CAAa,GAAK,CAAC,CAACA,EAAc"}