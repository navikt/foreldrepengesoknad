import{r as l}from"./index-1cdf6ce0.js";import{j as O}from"./jsx-runtime-1caa8f64.js";import{u as L,R as D,a as Y}from"./useRequest-84d89b79.js";import{E as R}from"./axios-91b57d60.js";import{e as G,Z as J,_ as $,K as W,w as X,d as c,$ as Z}from"./dates-b9443337.js";import{K as E,J as A,O as z,L as Q,f as I,W as b,X as tt,D as S,h as et,S as K}from"./dateFormValidation-6d447680.js";import"./index-753920cd.js";import{g as rt}from"./useFpNavigator-b74d057a.js";import"./_baseToString-2517c4f7.js";import"./_createSet-019d3bf6.js";import{e as N}from"./barnUtils-98a96df3.js";import{c as st}from"./eksisterendeSakUtils-6d1126dd.js";var p=(t=>(t.ANNEN_PART_VEDTAK="ANNEN_PART_VEDTAK",t.NESTE_SAK_ANNEN_PART_VEDTAK="NESTE_SAK_ANNEN_PART_VEDTAK",t.STØNADSKONTOER_100="STØNADSKONTOER_100",t.STØNADSKONTOER_80="STØNADSKONTOER_80",t))(p||{});const k={},H=l.createContext(k),x=l.createContext(void 0),P=({children:t})=>{const[e,r]=l.useReducer((s,o)=>{switch(o.type){case"update":return{...s,[o.key]:[o.hash,o.data]};case"reset":return{};default:throw new Error}},k);return O.jsx(H.Provider,{value:e,children:O.jsx(x.Provider,{value:r,children:t})})},y=(t,e)=>{const s=l.useContext(H)[t];return s&&s[0]===e?s[1]:void 0},C=(t,e)=>{const r=l.useContext(x);return s=>{r&&r({type:"update",key:t,hash:e,data:s})}};try{P.displayName="FpApiDataContext",P.__docgenInfo={description:"",displayName:"FpApiDataContext",props:{initialState:{defaultValue:null,description:"",name:"initialState",required:!1,type:{name:"FpApiDataHashMap"}},onDispatch:{defaultValue:null,description:"",name:"onDispatch",required:!1,type:{name:"((action: Action) => void)"}}}}}catch{}const M=t=>Object.keys(t).sort((e,r)=>e.localeCompare(r)).reduce((e,r)=>(e[r]=t[r],e),{}),B=t=>{let e=0;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);e=(e<<5)-e+s,e=e&e}return e},U={[p.ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[p.NESTE_SAK_ANNEN_PART_VEDTAK]:"/innsyn/v2/annenPartVedtak",[p.STØNADSKONTOER_80]:`${R.REST_API_URL}/konto`,[p.STØNADSKONTOER_100]:`${R.REST_API_URL}/konto`},ht=(t,e,r)=>{const s=B(JSON.stringify(M(e))),o=y(t,s),n=!!o,i=C(t,s),{data:a,requestStatus:m,error:d}=L(U[t],{config:{timeout:15*1e3,params:e,withCredentials:!1},isSuspended:n||r});return l.useEffect(()=>{a&&i(a)},[a]),{data:n?o:a,requestStatus:n?D.FINISHED:m,error:d}},Ot=(t,e,r)=>{const s=B(JSON.stringify(M(e))),o=y(t,s),n=!!o,i=C(t,s),{data:a,requestStatus:m,error:d}=Y(U[t],e,{config:{withCredentials:!0},isSuspended:n||r});return l.useEffect(()=>{a&&i(a)},[a]),d&&d.message.includes("Ugyldig ident")?{data:void 0,requestStatus:D.FINISHED,error:null}:{data:n?o:a,requestStatus:n?D.FINISHED:m,error:d}},at=(t,e)=>t?!0:E(e)?!!e.harRettPåForeldrepengerINorge:!1,ot=(t,e)=>t?E(e)?!!e.harRettPåForeldrepengerINorge:!1:!0,nt=t=>E(t)?!!t.harRettPåForeldrepengerIEØS:!1,it=(t,e)=>{if(I(t)||et(t))return e||t.termindato},dt=(t,e)=>e||t||void 0,lt=(t,e,r)=>t&&r?r:e,f=(t,e)=>W(t)?X(t,e):void 0,Rt=(t,e,r,s,o,n)=>{const i=E(e)?e:void 0,a=A(r.rolle),m=z(a,(i==null?void 0:i.erAleneOmOmsorg)||!1,e),d=Q(!a,(i==null?void 0:i.erAleneOmOmsorg)||!1,e),F=s==null?void 0:s.familiehendelsesdato,j=s!==void 0?s.startdatoFørsteStønadsperiode:void 0,u=st(o,t,a,N(t),j),q=lt(a,t.antallBarn,u==null?void 0:u.grunnlag.antallBarn),V=dt(n==null?void 0:n.grunnlag.termindato,u==null?void 0:u.grunnlag.termindato),T=A(r.rolle),w=G(N(t)),_=A(r.rolle),g="YYYYMMDD",h={farHarRett:at(T,e),morHarRett:ot(T,e),harAnnenForelderTilsvarendeRettEØS:nt(e),morHarAleneomsorg:d||!1,farHarAleneomsorg:m||!1,antallBarn:q,fødselsdato:f(I(t)?t.fødselsdatoer[0]:void 0,g),termindato:f(it(t,V),g),omsorgsovertakelseDato:f(b(t)||tt(t)?t.adopsjonsdato:void 0,g),startdatoUttak:f(N(t),g),minsterett:J(w),erMor:!_,morHarUføretrygd:rt(e,_),familieHendelseDatoNesteSak:f($(F),g)};return{stønadskontoParams100:{...h,dekningsgrad:S.HUNDRE_PROSENT},stønadskontoParams80:{...h,dekningsgrad:S.ÅTTI_PROSENT}}},ut=(t,e)=>{const r=[];return r.push({...t[0],dager:t[0].dager-e}),r.push({konto:K.AktivitetsfriKvote,dager:e}),r},v=t=>{let e=[];Object.keys(t.kontoer).filter(s=>s!==K.Flerbarnsdager).forEach(s=>{e.push({konto:s,dager:t.kontoer[s]})});const r=t.minsteretter.generellMinsterett;return r>0&&(e=ut(e,r)),e},Pt=(t,e)=>{const r=v(t),s=v(e);return{[S.ÅTTI_PROSENT]:r,[S.HUNDRE_PROSENT]:s}},vt=(t,e,r)=>{if(t===void 0||e===void 0||r!=="fødsel")return!1;const s=c(t).isSameOrAfter(c(new Date("2019-07-01")),"day");return c(t).add(7,"weeks").add(3,"days").isBefore(c(e),"days")&&s},It=(t,e)=>t&&e?(100-parseInt(e,10)).toString():"100",Kt=(t,e)=>Z({fom:c(t).toDate(),tom:c(e).toDate()}).getAntallUttaksdager()-1;export{P as F,p as a,ht as b,Pt as c,lt as d,It as e,Kt as f,Rt as g,vt as s,Ot as u};
