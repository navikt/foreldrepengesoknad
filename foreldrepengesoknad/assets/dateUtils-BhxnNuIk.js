import{d as s,h as A,O as B,P as j,z as Y,E as G,Q as H}from"./Tidsperioden-DXYe3XPH.js";import{c as F,g as T}from"./index-DVXBtNgz.js";import"./jsx-runtime-_e34SzbC.js";import"./index--IHLcpuH.js";import{S as W,X as y,Y as b,Z as Q,_ as R}from"./index-fVqCcxAQ.js";import"./_baseToString-CUxX9raG.js";import"./_createSet-BJbToUt4.js";import{g as V}from"./annenForelderUtils-alN3WCz9.js";import{g as X}from"./barnUtils-B4myndx0.js";var I={exports:{}};(function(e,r){(function(n,a){e.exports=a()})(F,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},a={};return function(p,c,i){var t,x=function(o,h,m){m===void 0&&(m={});var d=new Date(o),g=function(D,v){v===void 0&&(v={});var $=v.timeZoneName||"short",w=D+"|"+$,z=a[w];return z||(z=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:D,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:$}),a[w]=z),z}(h,m);return g.formatToParts(d)},f=function(o,h){for(var m=x(o,h),d=[],g=0;g<m.length;g+=1){var D=m[g],v=D.type,$=D.value,w=n[v];w>=0&&(d[w]=parseInt($,10))}var z=d[3],E=z===24?0:z,S=d[0]+"-"+d[1]+"-"+d[2]+" "+E+":"+d[4]+":"+d[5]+":000",k=+o;return(i.utc(S).valueOf()-(k-=k%1e3))/6e4},l=c.prototype;l.tz=function(o,h){o===void 0&&(o=t);var m=this.utcOffset(),d=this.toDate(),g=d.toLocaleString("en-US",{timeZone:o}),D=Math.round((d-new Date(g))/1e3/60),v=i(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(d.getTimezoneOffset()/15)-D,!0);if(h){var $=v.utcOffset();v=v.add(m-$,"minute")}return v.$x.$timezone=o,v},l.offsetName=function(o){var h=this.$x.$timezone||i.tz.guess(),m=x(this.valueOf(),h,{timeZoneName:o}).find(function(d){return d.type.toLowerCase()==="timezonename"});return m&&m.value};var u=l.startOf;l.startOf=function(o,h){if(!this.$x||!this.$x.$timezone)return u.call(this,o,h);var m=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return u.call(m,o,h).tz(this.$x.$timezone,!0)},i.tz=function(o,h,m){var d=m&&h,g=m||h||t,D=f(+i(),g);if(typeof o!="string")return i(o).tz(g);var v=function(E,S,k){var M=E-60*S*1e3,O=f(M,k);if(S===O)return[M,S];var U=f(M-=60*(O-S)*1e3,k);return O===U?[M,O]:[E-60*Math.min(O,U)*1e3,Math.max(O,U)]}(i.utc(o,d).valueOf(),D,g),$=v[0],w=v[1],z=i($).utcOffset(w);return z.$x.$timezone=g,z},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(o){t=o}}})})(I);var C=I.exports;const N=T(C);var L={exports:{}};(function(e,r){(function(n,a){e.exports=a()})(F,function(){return function(n,a){var p=a.prototype,c=p.format;p.format=function(i){var t=this,x=this.$locale();if(!this.isValid())return c.bind(this)(i);var f=this.$utils(),l=(i||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(u){switch(u){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return x.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return x.ordinal(t.week(),"W");case"w":case"ww":return f.s(t.week(),u==="w"?1:2,"0");case"W":case"WW":return f.s(t.isoWeek(),u==="W"?1:2,"0");case"k":case"kk":return f.s(String(t.$H===0?24:t.$H),u==="k"?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return u}});return c.bind(this)(l)}}})})(L);var J=L.exports;const _=T(J);s.extend(A);s.extend(B);s.extend(j);s.extend(N);s.extend(_);const ne=s().subtract(4,"year").startOf("day").toDate(),Z=(e,r)=>!Y(e)||!Y(r)||!G(e)||!G(r)?!1:!!s(e).isBefore(r,"day"),fe=e=>[...e].sort((r,n)=>Z(r.fødselsdato,n.fødselsdato)?1:-1)[e.length-1],de=e=>[...e].map(n=>H(n)).sort((n,a)=>Z(n,a)?-1:1),ue=(e,r,n)=>{if(n!==void 0)return n;if(r!==void 0)return r;if(e!==void 0)return e;throw new Error("Mangler fødselsdato/termindato/adopsjonsdato for barnet.")},me=e=>{const r=new Date("2021-10-01");return s(e).isSameOrAfter(r,"day")&&s(new Date).isSameOrAfter(r,"day")},ce=(e,r,n)=>{if(!n)return;const a=e===void 0?void 0:e.filter(t=>!W(t)),p=r.filter(t=>!W(t));let c,i;if(a)p.forEach((t,x)=>{if(c)return;const{fom:f}=t.tidsperiode,l=a.find(u=>s(u.tidsperiode.fom).isSame(f,"day"));if(l!==void 0){const u=y(t).erLik(l,!1,!0);(!u||u&&y(t).slutterEtter(l.tidsperiode.tom))&&(c=f)}if(l===void 0&&(c=f),l!==void 0&&p.length-1===x&&(y(t).erLik(l,!0,!0)||(c=f)),c&&b(t)&&s(c).isAfter(a[a.length-1].tidsperiode.tom)){const u=p.find(o=>(Q(o)||R(o))&&s(o.tidsperiode.fom).isAfter(c));c=u!==void 0?u.tidsperiode.fom:c}}),a.forEach(t=>{if(i)return;const{fom:x}=t.tidsperiode,f=p.find(l=>s(l.tidsperiode.fom).isSame(x,"day"));f!==void 0&&!y(t).erLik(f,!1,!0)&&(i=f.tidsperiode.fom),f===void 0&&(i=x)});else if(p.length>0)return p[0].tidsperiode.fom;return q(c,i)},q=(e,r)=>{if(!(e===void 0&&r===void 0))return e!==void 0&&r===void 0?e:e===void 0&&r!==void 0?r:s(e).isSameOrBefore(s(r))?e:r},le=(e,r)=>{const n=X(e),a=V(r);return s(n).isSameOrAfter(s("2024-07-01"),"d")&&s().isBefore(s("2024-07-01"),"d")&&a&&e.antallBarn===1};export{le as a,fe as b,ce as c,ne as d,me as f,ue as g,Z as i,de as s,N as t};
