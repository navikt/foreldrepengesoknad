import{j as e}from"./jsx-runtime-69eee039.js";import{b as Wt,u as zt,a as $t,s as Xt,g as Zt,M as en}from"./useSaveLoadedRoute-1e0d0b3f.js";import{r as u}from"./index-7c191284.js";import{u as oe,i as F,M as be,B as T,H as tn,j as ae,f as nn,_ as rn,Y as ie,d as B,U as ct,a3 as Ne,J as sn,A as Pe,b as tt,X as Fe,a2 as an,n as ft,$ as on,ab as ln}from"./Tidsperioden-297a98ae.js";import{I as dn}from"./TidligereUtenlandsoppholdPanel-b83637af.js";import{n as kn,a as nt,b as un}from"./app-09adf141.js";import"./index-e13aeee6.js";import"./_baseToString-4b695375.js";import"./_createSet-f4a01039.js";import{S as s,u as le,a as k,m as pn,F as mn}from"./mapSøkerinfoDTO-5b982ed5.js";import{u as St,b as gn,m as vt,a as cn,i as fn,g as Sn,c as vn,L as En,s as hn,R as An,t as m,N as rt,B as Fn}from"./useSøknad-b4078322.js";import{A as D,R as H}from"./api-06957017.js";import{g as st,s as jn,a as q,w as bn,F as Nn,c as Pn}from"./submitUtils-814eb1c0.js";import{l as Et}from"./links-b36d21ab.js";import{F as ht}from"./Feilside-253ef76e.js";import{V as Tn}from"./Velkommen-367c355f.js";import{A as yn}from"./AnnenForelder-ba0f4bdd.js";import{I as xn}from"./Inntektsinformasjon-04506114.js";import{O as In}from"./OmBarnet-0139639b.js";import{c as Dn,O as at}from"./Oppsummering-6d863af6.js";import{S as Un}from"./Søkersituasjon-5e7d05fe.js";import{g as On,a as Mn,b as _n,c as ot,d as Vn,U as Bn}from"./UttaksplanInfo-10f55d3c.js";import{i as Y,S as Te,B as Rn,p as Gn,q as it,r as Ln,t as Jn,u as Kn,D as lt,a as Cn,E as Hn,F as wn,G as qn,H as Yn}from"./Periodene-a3aa2caf.js";import{f as Qn,s as Wn,D as je}from"./leggTilPeriode-c7579a43.js";import{g as zn,U as $n,a as Xn,u as Zn}from"./Uttaksplan-cbad47ce.js";import{g as er}from"./arbeidsforholdUtils-981c48c4.js";import{a as tr}from"./useOnValidSubmit-2f04562e.js";import{u as nr}from"./useSøkerinfo-c2fc08ca.js";import{b as rr,c as sr}from"./dateUtils-92fccdda.js";import{F as R}from"./message-ebd688c0.js";import{B as dt}from"./Link-b834ea2b.js";import{a as ar,c as or}from"./formUtils-b05c92fb.js";import{c as ir,g as lr}from"./eksisterendeSakUtils-c6ec9ec6.js";import{g as dr,I as kr}from"./InfoOmSøknaden-3cf3f976.js";import{A as ur}from"./FormikFileUploader-b07a358a.js";import{Q as pr}from"./index-47edccfa.js";import{S as kt,d as mr}from"./SøknadSendt-5fa3acc7.js";import{U as gr}from"./UtenlandsoppholdSteg-ef0da64d.js";import{T as cr}from"./TidligereUtenlandsoppholdSteg-0d32d2e0.js";import{S as fr}from"./SenereUtenlandsoppholdSteg-464b12c0.js";import{B as Sr}from"./ByttBrowserModal-36ee0f59.js";import{A as vr}from"./apiInterceptor-565c1682.js";import"./amplitude-e7683f28.js";import"./index-b3a39e30.js";import"./v4-a960c1f4.js";import"./provider-ce5e3c55.js";import"./AttachmentType-f6ad37cf.js";import"./velkommenUtils-4774fd23.js";import"./DinePlikter-f34864a9.js";import"./DinePersonopplysningerModal-8cb995dc.js";import"./validationUtil-519349e2.js";import"./RegistrertePersonalia-35923fb3.js";import"./InteractiveListElement-956c4147.js";import"./Næring-b1d048a9.js";import"./LenkeKnapp-a5650a66.js";import"./_baseIteratee-9b4fb880.js";import"./_baseUniq-1bfab55f.js";import"./AttachmentList-75d0cccd.js";import"./Attachment-5e96a78f.js";import"./AdvarselIkon-93d01dab.js";import"./util-4acd1f50.js";const Er=[{arbeidsgiverId:"896929119",arbeidsgiverIdType:"orgnr",arbeidsgiverNavn:"SAUEFABRIKK",stillingsprosent:100,fom:"2018-03-01"}],hr={søker:{fnr:"06499121154",fornavn:"Tapper",etternavn:"Konvolutt",kjønn:"M",fødselsdato:"1991-09-06",bankkonto:{kontonummer:"",banknavn:""}},arbeidsforhold:Er},Ar=[{fom:"2022-12-12",tom:"2023-02-17",kontoType:"FEDREKVOTE",resultat:{innvilget:!0,trekkerMinsterett:!0,trekkerDager:!0,årsak:"ANNET"},samtidigUttak:100,flerbarnsdager:!1},{fom:"2023-02-20",tom:"2023-03-05",kontoType:"FELLESPERIODE",resultat:{innvilget:!0,trekkerMinsterett:!0,trekkerDager:!0,årsak:"ANNET"},samtidigUttak:50,flerbarnsdager:!1},{fom:"2023-03-20",tom:"2023-03-31",kontoType:"FEDREKVOTE",resultat:{innvilget:!0,trekkerMinsterett:!0,trekkerDager:!0,årsak:"ANNET"},flerbarnsdager:!1}],Fr="HUNDRE",jr={perioder:Ar,dekningsgrad:Fr},br=[{saksnummer:"352011594",sakAvsluttet:!1,sisteSøknadMottattDato:"2023-03-31",kanSøkeOmEndring:!1,sakTilhørerMor:!1,gjelderAdopsjon:!0,morUføretrygd:!1,harAnnenForelderTilsvarendeRettEØS:!1,ønskerJustertUttakVedFødsel:!1,rettighetType:"BEGGE_RETT",annenPart:{type:"person",fnr:"05489305072",fornavn:"Sentral",etternavn:"Tangent"},familiehendelse:{fødselsdato:"2023-02-01",antallBarn:1,omsorgsovertakelse:"2023-04-10"},åpenBehandling:{tilstand:"VENT_INNTEKTSMELDING",søknadsperioder:[{fom:"2023-04-10",tom:"2023-07-21",kontoType:"FEDREKVOTE",flerbarnsdager:!1},{fom:"2023-07-24",tom:"2023-09-15",kontoType:"FELLESPERIODE",morsAktivitet:"UTDANNING",flerbarnsdager:!1}]},barn:[],dekningsgrad:"HUNDRE"}],Nr=[],Pr={foreldrepenger:br,engangsstønad:[],svangerskapspenger:Nr},Tr="2019-02-01",yr="23123",xr={innsendingstidspunkt:Tr,pdf:yr},Ir={MØDREKVOTE:95,FEDREKVOTE:95,FELLESPERIODE:90,FORELDREPENGER_FØR_FØDSEL:15,FORELDREPENGER:80},Dr={},Ur={kontoer:Ir,minsteretter:Dr},At="selectedLocale",Or=()=>sessionStorage.getItem(At)||"nb",Mr=t=>{sessionStorage.setItem(At,t)},ye=({fornavn:t})=>{const n=oe();return e.jsx(ht,{dokumenttittel:"NAV Foreldrepengesøknad",ingress:F(n,"velkommen.ingress"),tittel:F(n,"velkommen.tittel"),illustrasjon:{tittel:F(n,"velkommen.ikkeMyndig.tittel",{navn:t.toLowerCase()}),tekst:F(n,"velkommen.ikkeMyndig.ingress"),lenke:{tekst:F(n,"velkommen.ikkeMyndig.boblelenketekst"),url:Et.papirsøknad}},skalKunneGåTilbakeTilSøknad:!1})};try{ye.displayName="IkkeMyndig",ye.__docgenInfo={description:"",displayName:"IkkeMyndig",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string"}}}}}catch{}const _r=(t,n)=>{const[r,o]=u.useState(t);return u.useEffect(()=>{const i=setTimeout(()=>{o(t)},n);return()=>{clearTimeout(i)}},[t,n]),r};const Vr=({isOpen:t,setIsOpen:n})=>{const r=oe(),o=nn("vilDuGåTilbakeModal"),i=St();return e.jsxs(be,{className:o.block,"aria-label":"Vil du gå tilbake",closeButton:!1,open:t,onClose:()=>n(!1),children:[e.jsx(T,{padBottom:"l",children:e.jsx(tn,{size:"small",as:"h1",children:F(r,"uttaksplan.vilDuGåTilbakeModal.tittel")})}),e.jsx(T,{padBottom:"l",children:e.jsx(dt,{children:F(r,"uttaksplan.vilDuGåTilbakeModal.intro")})}),e.jsx(T,{padBottom:"l",children:e.jsx(dt,{children:F(r,"uttaksplan.vilDuGåTilbakeModal.spørsmål")})}),e.jsxs("div",{className:o.element("knapperad"),children:[e.jsx(ae,{onClick:()=>{n(!1),i(s.UTTAKSPLAN_INFO)},children:e.jsx(R,{id:"uttaksplan.vilDuGåTilbakeModal.okLabel"})}),e.jsx(ae,{variant:"secondary",onClick:()=>n(!1),children:e.jsx(R,{id:"uttaksplan.vilDuGåTilbakeModal.avbrytLabel"})})]})]})};try{VilDuGTilbakeModal.displayName="VilDuGTilbakeModal",VilDuGTilbakeModal.__docgenInfo={description:"",displayName:"VilDuGTilbakeModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},setIsOpen:{defaultValue:null,description:"",name:"setIsOpen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}}}}}catch{}var Q=(t=>(t.ønskerAutomatiskJustering="ønskerAutomatiskJustering",t))(Q||{});const xe=rn(),Br=t=>ar(t),Rr=t=>({ønskerAutomatiskJustering:t!==void 0?or(t):ie.UNANSWERED}),Ft=(t,n)=>n!==void 0&&Y(t)&&B(t.tidsperiode.fom).isSame(ct(n).denneEllerNeste(),"day")&&t.forelder===Ne.farMedmor&&t.konto===Te.Fedrekvote&&t.ønskerSamtidigUttak===!0&&t.ønskerFlerbarnsdager!==!0,Gr=(t,n,r,o)=>o.type===gn.UFØDT&&r&&t.length===1&&Ft(t[0],n),Lr=(t,n,r,o,i,l,f)=>t&&sn(n)&&r==="fødsel"&&o.length!==0&&vt(i)&&l!==void 0&&!f,Ie=({termindato:t,perioderMedUttakRundtFødsel:n,antallBarn:r,visibility:o})=>{const i=oe(),l=ct(t).denneEllerNeste(),{dispatch:f,state:S}=le(),j=S.brukerSvarteJaPåAutoJustering&&n.length>1,d=S.brukerSvarteJaPåAutoJustering&&n.length===1&&!B(n[0].tidsperiode.fom).isSame(l,"day"),g=S.brukerSvarteJaPåAutoJustering&&n.length===1&&B(n[0].tidsperiode.fom).isSame(l,"day")&&(Y(n[0])&&(n[0].konto!==Te.Fedrekvote||!n[0].ønskerSamtidigUttak)||Rn(n[0])),G=S.brukerSvarteJaPåAutoJustering&&n.length===1&&B(n[0].tidsperiode.fom).isSame(l,"day")&&Y(n[0])&&n[0].konto===Te.Fedrekvote&&n[0].ønskerFlerbarnsdager===!0;let I="";j&&(I="uttaksplan.automatiskJustering.info.hvisFlerePerioder"),d&&(I="uttaksplan.automatiskJustering.info.hvisIkkeLengerStarterPåTermin"),g&&(I="uttaksplan.automatiskJustering.info.hvisEndretPeriodePåTermin"),G&&(I="uttaksplan.automatiskJustering.info.hvisEndretPeriodeTilØnskerFlerbarnsdager");const M=y=>{const W=Br(y);f(k.setØnskerJustertUttakVedFødsel(W)),f(k.setBrukerSvarteJaPåAutoJustering(W))};return e.jsx(xe.Form,{includeButtons:!1,children:e.jsxs("div",{style:{paddingTop:"1rem",paddingBottom:"1rem"},children:[I!==""&&e.jsx(T,{padBottom:"l",children:e.jsx(Pe,{variant:"info",children:e.jsx(R,{id:I})})}),e.jsx(T,{visible:o.isVisible(Q.ønskerAutomatiskJustering),padBottom:"l",children:e.jsx(xe.YesOrNoQuestion,{name:Q.ønskerAutomatiskJustering,legend:F(i,"uttaksplan.automatiskJustering.spørsmål",{antallBarn:r}),validate:y=>{if(y===ie.UNANSWERED)return F(i,"uttaksplan.automatiskJustering.svar.påkrevd")},afterOnChange:y=>M(y)})})]})})};try{Ie.displayName="AutomatiskJusteringForm",Ie.__docgenInfo={description:"",displayName:"AutomatiskJusteringForm",props:{termindato:{defaultValue:null,description:"",name:"termindato",required:!0,type:{name:"Date"}},perioderMedUttakRundtFødsel:{defaultValue:null,description:"",name:"perioderMedUttakRundtFødsel",required:!0,type:{name:"Periode[]"}},antallBarn:{defaultValue:null,description:"",name:"antallBarn",required:!0,type:{name:"number"}},visibility:{defaultValue:null,description:"",name:"visibility",required:!0,type:{name:"QuestionVisibility<UttaksplanFormField, undefined>"}}}}}catch{}const Jr=(t,n)=>t.length!==1||n===void 0?!1:Ft(t[0],n),Kr={[Q.ønskerAutomatiskJustering]:{isIncluded:({perioderMedUttakRundtFødsel:t,termindato:n})=>Jr(t,n),isAnswered:({ønskerAutomatiskJustering:t})=>t!==ie.UNANSWERED}},Cr=pr(Kr),ut=()=>{const t=oe(),n=nr(),r=cn(),[o,i]=u.useState(!1),[l,f]=u.useState(!0),[S,j]=u.useState(!1),{dispatch:d,state:g}=le(),[G,I]=u.useState(g.endringstidspunkt),[M,y]=u.useState(g.perioderSomSkalSendesInn),W=r.erEndringssøknad?s.OPPSUMMERING:s.UTENLANDSOPPHOLD,{uttaksplanInfo:Nt,eksisterendeSak:A,harUttaksplanBlittSlettet:Pt,annenPartsUttakErLagtTilIPlan:Ue}=g,{person:z,arbeidsforhold:Tt}=n,{annenForelder:v,søker:yt,barn:E,søkersituasjon:_,dekningsgrad:Oe,erEndringssøknad:x,tilleggsopplysninger:$}=r,{erAleneOmOmsorg:Me}=yt,{situasjon:de}=_,{rolle:_e}=_,{barnFraNesteSak:b}=g,Ve=_r(g,3e3),xt=Gn(v),X=it(v)?!!v.harRettPåForeldrepengerINorge||!!v.harRettPåForeldrepengerIEØS:!1,p=fn(r.søkersituasjon.rolle),Z=Ln(!p,Me,v),ee=Jn(p,Me,v),ke=Z||ee,It=X?void 0:p?Ne.farMedmor:Ne.mor,U=Sn(E),L=tt(U),Dt=zn(v,p),Ut=Kn(z,v,p,t),Be=E.antallBarn,Ot=Be>1,Re=lt(_e,p,v),N=A==null?void 0:A.uttaksplan,Mt=A?A.uttaksplan!==void 0:!1,_t=!1,Vt=rr(Nt),V=vn(E),ue=it(v)&&!v.utenlandskFnr?v.fnr:void 0,pe=de==="adopsjon",me=b!==void 0?b.annenForelderFnr:void 0,Ge=b!==void 0&&b.fnr!==void 0&&b.fnr.length>0?b.fnr[0]:void 0,J=b!==void 0?b.familiehendelsesdato:void 0,O=b!==void 0?b.startdatoFørsteStønadsperiode:void 0,ge=!lt(_.rolle,p,v),Le=!vt(E)&&E.fnr!==void 0&&E.fnr.length>0?E.fnr[0]:void 0,te=!(!ke&&ue!==void 0&&ue!==""&&(Le!==void 0||U!==void 0));Wt(s.UTTAKSPLAN);const{eksisterendeSakAnnenPartData:Je,eksisterendeSakAnnenPartError:ce,eksisterendeSakAnnenPartRequestStatus:fe}=D.useGetAnnenPartsVedtak(ue,Le,U,te),P=u.useMemo(()=>ir(Je,E,p,U,O),[Je,E,p,U,O]),Ke=On(A==null?void 0:A.grunnlag.termindato,P==null?void 0:P.grunnlag.termindato),K=Mn(p,E.antallBarn,P==null?void 0:P.grunnlag.antallBarn);u.useEffect(()=>{if(p&&r.barn.antallBarn!==K){const a={...r,barn:{...r.barn,antallBarn:K}};d(k.setSøknad(a))}},[p,K,d,r]);const Se=!(me!==void 0&&me!==""&&(Ge!==void 0||J!==void 0)&&(te||fe===H.FINISHED)),{eksisterendeSakAnnenPartData:Bt,eksisterendeSakAnnenPartError:ve,eksisterendeSakAnnenPartRequestStatus:Ce}=D.useGetAnnenPartsVedtak(me,Ge,Fe(J),Se),ne=lr(Bt);u.useEffect(()=>{if(ne!==void 0&&g.barnFraNesteSak!==void 0&&(B(ne).isBefore(g.barnFraNesteSak.startdatoFørsteStønadsperiode,"d")||g.barnFraNesteSak.startdatoFørsteStønadsperiode===void 0)){const a={...g.barnFraNesteSak,startdatoFørsteStønadsperiode:ne};d(k.setBarnFraNesteSak(a))}},[O,ne,b,d,g.barnFraNesteSak]);const He=Xn({erDeltUttak:X,morHarRett:Re,søkerErAleneOmOmsorg:ke});u.useEffect(()=>{if(A!==void 0&&N!==void 0&&P!==void 0&&!Ue){N.forEach(c=>{if(Y(c)){const se=Cn(P.uttaksplan).finnOverlappendePerioder(c);se.length!==0&&se.find(et=>Hn(et)&&et.ønskerSamtidigUttak===!0)&&(c.ønskerSamtidigUttak||(c.ønskerSamtidigUttak=!0,c.samtidigUttakProsent=_n(c.gradert,c.stillingsprosent)))}});const a=Qn(Wn(N,P.uttaksplan,L,O,!0),He,L,pe,ge,p,O),h={...A,uttaksplan:a};d(k.setUttaksplan(a)),d(k.setEksisterendeSak(h)),d(k.setAnnenPartsUttakErLagtTilIPlan(!0))}},[P,N,L,He,pe,ge,p,d,O,A,Ue]);const Rt=()=>{j(!0);const a=Dn($);return[k.setTilleggsopplysninger(a),k.setEndringstidspunkt(G),k.setPerioderSomSkalSendesInn(M)]},Gt=(a,h)=>{const c=a!==qn.Ingen?a:void 0,se={...$,begrunnelseForSenEndring:{...$.begrunnelseForSenEndring,tekst:h,ekstraInformasjon:c}};d(k.setTilleggsopplysninger(se))};u.useEffect(()=>{const a=N==null?void 0:N.find(h=>Y(h)&&h.angittAvAnnenPart);if(a&&G===void 0){const h=a.tidsperiode.fom;d(k.setEndringstidspunkt(h));const c=st(r.uttaksplan,x,p,N,h);y(c),d(k.setPerioderSomSkalSendesInn(c))}},[N,d,G,p,r.uttaksplan,x]);const{handleSubmit:we,isSubmitting:qe}=tr(Rt,W,a=>jn(a)),C=wn(r.uttaksplan,L,V),re=Lr(p,L,de,C,E,V,ge),Ye=Gr(C,V,p,E),Lt=()=>{(re||x)&&!Ye&&d(k.setØnskerJustertUttakVedFødsel(void 0))},Jt=a=>re&&Ye&&a!==void 0,Ee=u.useRef(null),Kt=a=>{j(!0),l&&!Ze&&(Ee.current&&Ee.current.handleSubmit(),Lt(),Jt(a.ønskerAutomatiskJustering)&&we(a))},Ct=zt(),Ht=$t();u.useEffect(()=>{D.storeAppState(Ve,z.fnr)},[z.fnr,Ve]);const wt=an(z.kjønn,xt,X,Z,ee,_e),Qe=(te?!1:fe!==H.FINISHED)||(Se?!1:Ce!==H.FINISHED),{tilgjengeligeStønadskontoerData:he,tilgjengeligeStønadskontoerError:Ae}=D.useGetUttakskontoer(ot(je.HUNDRE_PROSENT,E,v,_,ee,Z,Fe(J),K,Ke),Qe),{tilgjengeligeStønadskontoerData:We}=D.useGetUttakskontoer(ot(je.ÅTTI_PROSENT,E,v,_,ee,Z,Fe(J),K,Ke),Qe),qt=a=>{j(!1),d(k.setUttaksplan(a));const h=sr(N,a,x);I(h);const c=st(a,x,p,N,h);y(c),d(k.setPerioderSomSkalSendesInn(c))};if(u.useEffect(()=>{if(Ae)throw q(Ae),new Error("Vi klarte ikke å hente opp stønadskontoer. Prøv igjen om noen minutter og hvis problemet vedvarer kontakt brukerstøtte.");if(ce)throw q(ce),new Error("Vi klarte ikke å hente informasjon om saken til annen forelder. Prøv igjen om noen minutter og hvis problemet vedvarer kontakt brukerstøtte.");if(ve)throw q(ve),new Error("Vi klarte ikke å hente informasjon om saken til annen forelder for neste barn. Prøv igjen om noen minutter og hvis problemet vedvarer kontakt brukerstøtte.")},[Ae,ce,ve]),!he||!We||fe!==H.FINISHED&&!te||Ce!==H.FINISHED&&!Se)return e.jsx("div",{style:{textAlign:"center",padding:"12rem 0"},children:e.jsx(ft,{size:"2xlarge"})});const ze=Vn(We,he),$e=dr(he.minsteretter.toTette),Xe=Oe===je.HUNDRE_PROSENT?ze[100]:ze[80],Ze=x&&(M===void 0||M.length===0),Yt=()=>{const a=r.uttaksplan.filter(h=>Yn(h));d(k.slettUttaksplan(a)),d(k.setUttaksplanSlettet(!0))},Qt=()=>{g.eksisterendeSak&&(d(k.setUttaksplan(g.eksisterendeSak.uttaksplan)),d(k.setPerioderSomSkalSendesInn([])),y([]))};return e.jsx(xe.FormikWrapper,{initialValues:Rr(g.søknad.ønskerJustertUttakVedFødsel),onSubmit:we,innerRef:Ee,renderForm:({values:a})=>{const h=Cr.getVisbility({ønskerAutomatiskJustering:a[Q.ønskerAutomatiskJustering]??ie.NO,termindato:V,perioderMedUttakRundtFødsel:C});return e.jsxs(on,{bannerTitle:F(t,"søknad.pageheading"),activeStepId:"uttaksplan",pageTitle:F(t,"søknad.uttaksplan"),onCancel:Ct,onContinueLater:Ht,steps:Xt(t,x),children:[e.jsx(T,{padBottom:"l",children:e.jsx(kr,{eksisterendeSak:A,erIUttaksplanenSteg:!0,tilgjengeligeStønadskontoer:Xe,minsterettUkerToTette:$e})}),e.jsx($n,{foreldreSituasjon:wt,forelderVedAleneomsorg:It,erDeltUttak:X,uttaksplan:r.uttaksplan,familiehendelsesdato:U,handleOnPlanChange:qt,stønadskontoer:Xe,navnPåForeldre:Ut,annenForelder:v,arbeidsforhold:er(Tt,pe,p,tt(U)),erEndringssøknad:x,erFarEllerMedmor:p,erFlerbarnssøknad:Ot,erAleneOmOmsorg:ke,harMidlertidigOmsorg:_t,situasjon:de,erMorUfør:Dt,morHarRett:Re,søkersituasjon:_,dekningsgrad:Oe,antallBarn:Be,tilleggsopplysninger:$,setUttaksplanErGyldig:f,handleBegrunnelseChange:Gt,eksisterendeSak:A,perioderSomSkalSendesInn:M,morsSisteDag:Vt,harKomplettUttaksplan:Mt,opprinneligPlan:Pt?void 0:N,handleSlettUttaksplan:Yt,handleResetUttaksplan:Qt,termindato:V,barn:E,saveAttachment:ur.saveAttachment,visAutomatiskJusteringForm:re,perioderMedUttakRundtFødsel:C,barnFraNesteSak:b,familiehendelsesdatoNesteSak:J,førsteUttaksdagNesteBarnsSak:O,minsterettUkerToTette:$e}),re&&e.jsx(T,{padBottom:"l",children:e.jsx(Ie,{termindato:V,perioderMedUttakRundtFødsel:C,antallBarn:E.antallBarn,visibility:h})}),e.jsx(Vr,{isOpen:o,setIsOpen:i}),!l&&S&&e.jsx(T,{textAlignCenter:!0,padBottom:"l",children:e.jsx(Pe,{variant:"error",children:e.jsx(R,{id:"uttaksplan.validering.kanIkkeGåVidere"})})}),Ze&&S&&e.jsx(T,{textAlignCenter:!0,padBottom:"l",children:e.jsx(Pe,{variant:"error",children:e.jsx(R,{id:"uttaksplan.validering.kanIkkeGåVidereEndringssøknad"})})}),e.jsx(T,{textAlignCenter:!0,padBottom:"l",children:e.jsxs(ln,{children:[!x&&e.jsx(ae,{variant:"secondary",as:En,onClick:c=>{c.preventDefault(),i(!0)},to:Zt("uttaksplan"),children:e.jsx(R,{id:"backlink.label"})}),e.jsx(ae,{type:"submit",onClick:Kt,disabled:qe,loading:qe,children:F(t,"søknad.gåVidere")})]})})]})}})},Hr=(t,n)=>{switch(t){case s.SØKERSITUASJON:return n.harGodkjentVilkår===!0;case s.OPPSUMMERING:return Zn(n.uttaksplan)===!1&&n.uttaksplan.length>0;default:return!0}},wr=(t,n,r)=>t?r?n?e.jsxs(e.Fragment,{children:[e.jsx(m,{path:s.UTTAKSPLAN,element:e.jsx(ut,{})}),e.jsx(m,{path:s.OPPSUMMERING,element:e.jsx(at,{})}),e.jsx(m,{path:s.SØKNAD_SENDT,element:e.jsx(kt,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{path:s.SØKERSITUASJON,element:e.jsx(Un,{})}),e.jsx(m,{path:s.OM_BARNET,element:e.jsx(In,{})}),e.jsx(m,{path:s.ANNEN_FORELDER,element:e.jsx(yn,{})}),e.jsx(m,{path:s.UTTAKSPLAN_INFO,element:e.jsx(Bn,{})}),e.jsx(m,{path:s.UTTAKSPLAN,element:e.jsx(ut,{})}),e.jsx(m,{path:s.UTENLANDSOPPHOLD,element:e.jsx(gr,{})}),e.jsx(m,{path:s.TIDLIGERE_UTENLANDSOPPHOLD,element:e.jsx(cr,{})}),e.jsx(m,{path:s.SENERE_UTENLANDSOPPHOLD,element:e.jsx(fr,{})}),e.jsx(m,{path:s.INNTEKTSINFORMASJON,element:e.jsx(xn,{})}),e.jsx(m,{path:s.OPPSUMMERING,element:e.jsx(at,{})}),e.jsx(m,{path:s.SØKNAD_SENDT,element:e.jsx(kt,{})})]}):e.jsx(m,{path:"*",element:e.jsx(rt,{to:s.IKKE_MYNDIG})}):e.jsx(m,{path:"*",element:e.jsx(rt,{to:s.VELKOMMEN})}),qr=({fornavn:t,locale:n,onChangeLocale:r,currentRoute:o})=>{const{state:i}=le(),l=St(),f=hn(),S=i.søknad.harGodkjentVilkår,j=i.søkerinfo.person.erMyndig,[d,g]=u.useState(!0);return u.useEffect(()=>{o&&j&&S&&d&&(g(!1),Hr(o,i.søknad)?l(o):f.pathname===s.OPPSUMMERING&&l(s.UTTAKSPLAN))},[o,j,S,l,d,i.søknad,f.pathname]),e.jsxs(An,{children:[e.jsx(m,{path:s.VELKOMMEN,element:e.jsx(Tn,{fornavn:t,locale:n,saker:i.saker,onChangeLocale:r,fnr:i.søkerinfo.person.fnr})}),e.jsx(m,{path:s.IKKE_MYNDIG,element:e.jsx(ye,{fornavn:i.søkerinfo.person.fornavn})}),wr(S,i.søknad.erEndringssøknad,j)]})};try{ForeldrepengesknadRoutes.displayName="ForeldrepengesknadRoutes",ForeldrepengesknadRoutes.__docgenInfo={description:"",displayName:"ForeldrepengesknadRoutes",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'}]}},onChangeLocale:{defaultValue:null,description:"",name:"onChangeLocale",required:!0,type:{name:"(locale: LocaleNo) => void"}},currentRoute:{defaultValue:null,description:"",name:"currentRoute",required:!0,type:{name:"enum",value:[{value:'"/"'},{value:'"/soknad/sokersituasjon"'},{value:'"/soknad/om-barnet"'},{value:'"/soknad/annen-forelder"'},{value:'"/soknad/uttaksplan-info"'},{value:'"/soknad/uttaksplan"'},{value:'"/soknad/utenlandsopphold"'},{value:'"/soknad/tidligere-utenlandsopphold"'},{value:'"/soknad/senere-utenlandsopphold"'},{value:'"/soknad/inntektsinformasjon"'},{value:'"/soknad/manglende-vedlegg"'},{value:'"/soknad/oppsummering"'},{value:'"/soknad/soknad-sendt"'},{value:'"ikke-myndig"'}]}}}}}catch{}const Yr=t=>{switch(t){case s.UTTAKSPLAN:case s.OPPSUMMERING:case s.SØKNAD_SENDT:return!0;default:return!1}},Qr=t=>t.søknad&&t.søknad.erEndringssøknad&&!Yr(t.currentRoute)?!1:t.version===5,Wr=()=>e.jsx("div",{style:{textAlign:"center",padding:"12rem 0"},children:e.jsx(ft,{size:"2xlarge"})}),zr=({locale:t,onChangeLocale:n})=>{const{søkerinfoData:r,søkerinfoError:o}=D.useSøkerinfo(),{sakerData:i,sakerError:l}=D.useGetSaker(),{storageData:f}=D.useStoredAppState(),{dispatch:S,state:j}=le();return u.useEffect(()=>{f&&Qr(f)&&S(k.applyStoredState(f)),r&&S(k.setSøkerinfo(pn(r))),i&&S(k.setSaker(i.foreldrepenger))},[S,f,r,i]),u.useEffect(()=>{if(o)throw q(o),new Error("Vi klarte ikke å hente informasjon om deg. Prøv igjen om noen minutter og hvis problemet vedvarer kontakt brukerstøtte.");if(l)throw q(l),new Error("Vi klarte ikke å hente informasjon om sakene dine. Prøv igjen om noen minutter og hvis problemet vedvarer kontakt brukerstøtte.")},[o,l]),!j.søkerinfo||!i?Wr():e.jsx(Fn,{children:e.jsx(qr,{fornavn:j.søkerinfo.person.fornavn,locale:t,onChangeLocale:n,currentRoute:f?f.currentRoute:s.VELKOMMEN})})};try{Foreldrepengesknad.displayName="Foreldrepengesknad",Foreldrepengesknad.__docgenInfo={description:"",displayName:"Foreldrepengesknad",props:{locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'}]}},onChangeLocale:{defaultValue:null,description:"",name:"onChangeLocale",required:!0,type:{name:"any"}}}}}catch{}class De extends u.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}componentDidCatch(n,r){n&&n.message!=="window.hasFocus is not a function"&&(this.setState({...this.state,hasError:!0,error:n}),bn(o=>{o.setExtras(r),Pn(n)}))}render(){var n;if(this.state.hasError){const r=!!this.state.error&&!!this.state.error.message&&this.state.error.message===Nn,o=r?"Feil: for mange vedlegg":"Informasjon om feilen";return e.jsx(ht,{dokumenttittel:"NAV Foreldrepengesøknad",ingress:`${(n=this.state.error)==null?void 0:n.message}`,tittel:o,illustrasjon:{tittel:"Hei!",tekst:"Noe har gått galt med søknaden.",lenke:{tekst:"Her finner du en lenke til brukerstøtte",url:Et.brukerstøtte}},skalKunneGåTilbakeTilSøknad:r})}return this.props.children}}try{De.displayName="ErrorBoundary",De.__docgenInfo={description:"",displayName:"ErrorBoundary",props:{}}}catch{}const $r=()=>{const t=mr();return t?t.name==="ie":!1},jt=Or(),Xr={nb:{...kn,...nt.nb},nn:{...un,...nt.nn}};B.locale(jt);const Zr=()=>{const[t,n]=u.useState(jt);return u.useEffect(()=>{be.setAppElement&&be.setAppElement("#app")}),e.jsx(mn,{children:e.jsx(De,{children:e.jsxs(dn,{locale:t,messagesGroupedByLocale:Xr,children:[e.jsx(Sr,{skalEndreNettleser:$r()}),e.jsx(zr,{locale:t,onChangeLocale:r=>{Mr(r),n(r)}})]})})})},bt=Zr,la={title:"AppContainer",component:bt},es=({søkerinfoData:t,sakerData:n,annenPartVedtakData:r,stønadskontoerData:o,storageKvitteringData:i})=>{const l=new en(vr);return l.onGet("/sokerinfo").reply(200,t),l.onGet("/innsyn/v2/saker").reply(200,n),l.onGet("/innsyn/v2/annenPartVedtak").reply(200,r),l.onGet("/konto").reply(200,o),l.onGet("/storage/kvittering/foreldrepenger").reply(200,i),l.onPost("/storage").reply(200,{}),l.onPost("/soknad").reply(200,{}),l.onPost("/sendSøknadUrl").reply(200,{}),l.onDelete("/storage").reply(200,{}),e.jsx(bt,{})},w=es.bind({});w.args={søkerinfoData:hr,sakerData:Pr,annenPartVedtakData:jr,stønadskontoerData:Ur,storageKvitteringData:xr};var pt,mt,gt;w.parameters={...w.parameters,docs:{...(pt=w.parameters)==null?void 0:pt.docs,source:{originalSource:`({
  søkerinfoData,
  sakerData,
  annenPartVedtakData,
  stønadskontoerData,
  storageKvitteringData
}) => {
  const apiMock = new MockAdapter(AxiosInstance);
  apiMock.onGet('/sokerinfo').reply(200, søkerinfoData);
  apiMock.onGet('/innsyn/v2/saker').reply(200, sakerData);
  apiMock.onGet('/innsyn/v2/annenPartVedtak').reply(200, annenPartVedtakData);
  apiMock.onGet('/konto').reply(200, stønadskontoerData);
  apiMock.onGet('/storage/kvittering/foreldrepenger').reply(200, storageKvitteringData);
  apiMock.onPost('/storage').reply(200, {});
  apiMock.onPost('/soknad').reply(200, {});
  apiMock.onPost('/sendSøknadUrl').reply(200, {});
  apiMock.onDelete('/storage').reply(200, {});
  return <AppContainer />;
}`,...(gt=(mt=w.parameters)==null?void 0:mt.docs)==null?void 0:gt.source}}};const da=["VisApp"];export{w as VisApp,da as __namedExportsOrder,la as default};
//# sourceMappingURL=AppContainer.stories-95c45ebb.js.map
