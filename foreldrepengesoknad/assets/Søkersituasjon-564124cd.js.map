{"version":3,"file":"Søkersituasjon-564124cd.js","sources":["../../src/app/steps/søkersituasjon/søkersituasjonFormConfig.ts","../../src/app/steps/søkersituasjon/components/VelgRolle.tsx","../../src/app/steps/søkersituasjon/søkersituasjonQuestionsConfig.ts","../../src/app/steps/søkersituasjon/søkersituasjonUtils.ts","../../src/app/steps/søkersituasjon/Søkersituasjon.tsx"],"sourcesContent":["import { hasValue } from '@navikt/fp-common';\nimport { getTypedFormComponents } from '@navikt/sif-common-formik-ds/lib';\nimport Søkersituasjon from 'app/context/types/Søkersituasjon';\nimport { Situasjon } from 'app/types/Situasjon';\nimport { Søkerrolle } from 'app/types/Søkerrolle';\n\nexport enum SøkersituasjonFormField {\n    situasjon = 'situasjon',\n    rolle = 'rolle',\n}\n\nexport interface SøkersituasjonFormData {\n    [SøkersituasjonFormField.situasjon]: Situasjon | '';\n    [SøkersituasjonFormField.rolle]: Søkerrolle | '';\n}\n\nconst initialSøkersituasjonValues: SøkersituasjonFormData = {\n    [SøkersituasjonFormField.situasjon]: '',\n    [SøkersituasjonFormField.rolle]: '',\n};\n\nexport const getInitialSøkerSituasjonValues = (stateValues: Søkersituasjon): SøkersituasjonFormData => {\n    if (stateValues) {\n        return {\n            rolle: hasValue(stateValues.rolle) ? stateValues.rolle : initialSøkersituasjonValues.rolle,\n            situasjon: hasValue(stateValues.situasjon) ? stateValues.situasjon : initialSøkersituasjonValues.situasjon,\n        };\n    }\n    return initialSøkersituasjonValues;\n};\n\nexport const SøkersituasjonFormComponents = getTypedFormComponents<SøkersituasjonFormField, SøkersituasjonFormData>();\n","import { FunctionComponent } from 'react';\nimport { Block, intlUtils, Kjønn } from '@navikt/fp-common';\nimport { SøkersituasjonFormComponents, SøkersituasjonFormField } from '../søkersituasjonFormConfig';\nimport { useIntl } from 'react-intl';\n\ninterface Props {\n    kjønn: Kjønn;\n}\n\nconst VelgRolle: FunctionComponent<Props> = ({ kjønn }) => {\n    const intl = useIntl();\n\n    if (kjønn === 'M') {\n        return null;\n    }\n\n    return (\n        <Block margin=\"xl\">\n            <SøkersituasjonFormComponents.RadioGroup\n                name={SøkersituasjonFormField.rolle}\n                radios={[\n                    {\n                        label: intlUtils(intl, 'søkersituasjon.radioButton.mor'),\n                        value: 'mor',\n                    },\n                    {\n                        label: intlUtils(intl, 'søkersituasjon.radioButton.medmor'),\n                        value: 'medmor',\n                    },\n                ]}\n                legend={intlUtils(intl, 'søkersituasjon.text.rolle')}\n            />\n        </Block>\n    );\n};\n\nexport default VelgRolle;\n","import { hasValue, Kjønn } from '@navikt/fp-common';\nimport { QuestionConfig, Questions } from '@navikt/sif-common-question-config/lib';\nimport { SøkersituasjonFormData, SøkersituasjonFormField } from './søkersituasjonFormConfig';\n\nexport interface SøkersituasjonQuestionsPayload extends SøkersituasjonFormData {\n    søkerKjønn: Kjønn;\n}\n\nconst SøkersituasjonFormConfig: QuestionConfig<SøkersituasjonQuestionsPayload, SøkersituasjonFormField> = {\n    [SøkersituasjonFormField.situasjon]: {\n        isIncluded: () => true,\n        isAnswered: ({ situasjon }) => hasValue(situasjon),\n    },\n    [SøkersituasjonFormField.rolle]: {\n        isIncluded: ({ søkerKjønn }) => søkerKjønn === 'K',\n        isAnswered: ({ rolle }) => hasValue(rolle),\n        visibilityFilter: ({ situasjon }) => hasValue(situasjon),\n    },\n};\n\nconst søkersituasjonQuestionsConfig = Questions<SøkersituasjonQuestionsPayload, SøkersituasjonFormField>(\n    SøkersituasjonFormConfig\n);\n\nexport default søkersituasjonQuestionsConfig;\n","import { hasValue } from '@navikt/fp-common';\nimport Søkersituasjon from 'app/context/types/Søkersituasjon';\nimport { Situasjon } from 'app/types/Situasjon';\nimport { Søkerrolle } from 'app/types/Søkerrolle';\nimport { SøkersituasjonFormData } from './søkersituasjonFormConfig';\n\nexport const mapSøkersituasjonFormDataToState = (formData: Partial<SøkersituasjonFormData>): Søkersituasjon => {\n    return {\n        situasjon: formData.situasjon as Situasjon,\n        rolle: hasValue(formData.rolle) ? (formData.rolle as Søkerrolle) : 'far',\n    };\n};\n","import { Block, intlUtils, Step } from '@navikt/fp-common';\nimport actionCreator from 'app/context/action/actionCreator';\nimport SøknadRoutes from 'app/routes/routes';\n\nimport useOnValidSubmit from 'app/utils/hooks/useOnValidSubmit';\nimport useSøknad from 'app/utils/hooks/useSøknad';\nimport useAvbrytSøknad from 'app/utils/hooks/useAvbrytSøknad';\nimport { useIntl } from 'react-intl';\nimport stepConfig from '../stepsConfig';\nimport VelgRolle from './components/VelgRolle';\nimport {\n    getInitialSøkerSituasjonValues,\n    SøkersituasjonFormComponents,\n    SøkersituasjonFormData,\n    SøkersituasjonFormField,\n} from './søkersituasjonFormConfig';\nimport søkersituasjonQuestionsConfig, { SøkersituasjonQuestionsPayload } from './søkersituasjonQuestionsConfig';\nimport { mapSøkersituasjonFormDataToState } from './søkersituasjonUtils';\nimport useSøkerinfo from 'app/utils/hooks/useSøkerinfo';\nimport { storeAppState } from 'app/utils/submitUtils';\nimport { ForeldrepengesøknadContextState } from 'app/context/ForeldrepengesøknadContextConfig';\nimport useFortsettSøknadSenere from 'app/utils/hooks/useFortsettSøknadSenere';\nimport useSaveLoadedRoute from 'app/utils/hooks/useSaveLoadedRoute';\nimport { Button } from '@navikt/ds-react';\n\nconst Søkersituasjon = () => {\n    const intl = useIntl();\n    const søknad = useSøknad();\n    const søkerinfo = useSøkerinfo();\n    const { kjønn } = søkerinfo.person;\n\n    const onValidSubmitHandler = (values: Partial<SøkersituasjonFormData>) => {\n        const søkersituasjon = mapSøkersituasjonFormDataToState(values);\n        return [actionCreator.setSøkersituasjon(søkersituasjon)];\n    };\n\n    const { handleSubmit, isSubmitting } = useOnValidSubmit(\n        onValidSubmitHandler,\n        SøknadRoutes.OM_BARNET,\n        (state: ForeldrepengesøknadContextState) => storeAppState(state)\n    );\n    const onAvbrytSøknad = useAvbrytSøknad();\n    const onFortsettSøknadSenere = useFortsettSøknadSenere();\n    useSaveLoadedRoute(SøknadRoutes.SØKERSITUASJON);\n\n    return (\n        <SøkersituasjonFormComponents.FormikWrapper\n            initialValues={getInitialSøkerSituasjonValues(søknad.søkersituasjon)}\n            onSubmit={handleSubmit}\n            renderForm={({ values: formValues }) => {\n                const visibility = søkersituasjonQuestionsConfig.getVisbility({\n                    ...formValues,\n                    søkerKjønn: kjønn,\n                } as SøkersituasjonQuestionsPayload);\n                const allQuestionsAnswered = visibility.areAllQuestionsAnswered();\n                return (\n                    <Step\n                        bannerTitle={intlUtils(intl, 'søknad.pageheading')}\n                        activeStepId=\"søkersituasjon\"\n                        pageTitle={intlUtils(intl, 'søknad.søkersituasjon')}\n                        onCancel={onAvbrytSøknad}\n                        onContinueLater={onFortsettSøknadSenere}\n                        steps={stepConfig(intl, false)}\n                    >\n                        <SøkersituasjonFormComponents.Form includeButtons={false}>\n                            <div>\n                                <Block>\n                                    <SøkersituasjonFormComponents.RadioGroup\n                                        name={SøkersituasjonFormField.situasjon}\n                                        radios={[\n                                            {\n                                                label: intlUtils(intl, 'søkersituasjon.radioButton.fødsel'),\n                                                value: 'fødsel',\n                                            },\n                                            {\n                                                label: intlUtils(intl, 'søkersituasjon.radioButton.adopsjon'),\n                                                value: 'adopsjon',\n                                            },\n                                        ]}\n                                        legend={intlUtils(intl, 'søkersituasjon.text.situasjon')}\n                                    />\n                                </Block>\n                                <Block visible={visibility.isVisible(SøkersituasjonFormField.rolle)}>\n                                    <VelgRolle kjønn={kjønn} />\n                                </Block>\n                                {allQuestionsAnswered && (\n                                    <Block textAlignCenter={true} margin=\"l\">\n                                        <Button type=\"submit\" disabled={isSubmitting} loading={isSubmitting}>\n                                            {intlUtils(intl, 'søknad.gåVidere')}\n                                        </Button>\n                                    </Block>\n                                )}\n                            </div>\n                        </SøkersituasjonFormComponents.Form>\n                    </Step>\n                );\n            }}\n        />\n    );\n};\n\nexport default Søkersituasjon;\n"],"names":["SøkersituasjonFormField","initialSøkersituasjonValues","getInitialSøkerSituasjonValues","stateValues","hasValue","SøkersituasjonFormComponents","getTypedFormComponents","VelgRolle","kjønn","intl","useIntl","jsx","Block","intlUtils","SøkersituasjonFormConfig","situasjon","søkerKjønn","rolle","søkersituasjonQuestionsConfig","Questions","mapSøkersituasjonFormDataToState","formData","Søkersituasjon","søknad","useSøknad","søkerinfo","useSøkerinfo","onValidSubmitHandler","values","søkersituasjon","actionCreator","handleSubmit","isSubmitting","useOnValidSubmit","SøknadRoutes","state","storeAppState","onAvbrytSøknad","useAvbrytSøknad","onFortsettSøknadSenere","useFortsettSøknadSenere","useSaveLoadedRoute","formValues","visibility","allQuestionsAnswered","Step","stepConfig","Button","Søkersituasjon$1"],"mappings":"8mBAMY,IAAAA,GAAAA,IACRA,EAAA,UAAY,YACZA,EAAA,MAAQ,QAFAA,IAAAA,GAAA,CAAA,CAAA,EAUZ,MAAMC,EAAsD,CACvD,UAAoC,GACpC,MAAgC,EACrC,EAEaC,EAAkCC,GACvCA,EACO,CACH,MAAOC,EAASD,EAAY,KAAK,EAAIA,EAAY,MAAQF,EAA4B,MACrF,UAAWG,EAASD,EAAY,SAAS,EAAIA,EAAY,UAAYF,EAA4B,SAAA,EAGlGA,EAGEI,EAA+BC,EAAwE,ECtBpHC,EAAA,CAAA,CAAA,MAAAC,KAAA,CACI,MAAAC,EAAAC,IAEA,OAAAF,IAAA,IACI,KAGJG,EAAAC,EAAA,CAAA,OAAA,KAAA,SAAAD,EAEQN,EAAA,WAA8B,CAA7B,KAAAL,EAAA,MACiC,OAAA,CACtB,CACJ,MAAAa,EAAAJ,EAAA,gCAAA,EAC2D,MAAA,KAChD,EACX,CACA,MAAAI,EAAAJ,EAAA,mCAAA,EAC8D,MAAA,QACnD,CACX,EACJ,OAAAI,EAAAJ,EAAA,2BAAA,CACmD,CAAA,CAAA,CAAA,CAInE,gOC1BA,MAAMK,EAAoG,CACtG,CAACd,EAAwB,SAAS,EAAG,CACjC,WAAY,IAAM,GAClB,WAAY,CAAC,CAAE,UAAAe,KAAgBX,EAASW,CAAS,CACrD,EACA,CAACf,EAAwB,KAAK,EAAG,CAC7B,WAAY,CAAC,CAAE,WAAAgB,KAAiBA,IAAe,IAC/C,WAAY,CAAC,CAAE,MAAAC,KAAYb,EAASa,CAAK,EACzC,iBAAkB,CAAC,CAAE,UAAAF,KAAgBX,EAASW,CAAS,CAC3D,CACJ,EAEMG,EAAgCC,EAClCL,CACJ,EChBaM,EAAoCC,IACtC,CACH,UAAWA,EAAS,UACpB,MAAOjB,EAASiB,EAAS,KAAK,EAAKA,EAAS,MAAuB,KAAA,GCgBrEC,EAAiB,IAAM,CACzB,MAAMb,EAAOC,IACPa,EAASC,IACTC,EAAYC,IACZ,CAAE,MAAAlB,CAAM,EAAIiB,EAAU,OAEtBE,EAAwBC,GAA4C,CAChE,MAAAC,EAAiBT,EAAiCQ,CAAM,EAC9D,MAAO,CAACE,EAAc,kBAAkBD,CAAc,CAAC,CAAA,EAGrD,CAAE,aAAAE,EAAc,aAAAC,CAAA,EAAiBC,EACnCN,EACAO,EAAa,UACZC,GAA2CC,EAAcD,CAAK,CAAA,EAE7DE,EAAiBC,IACjBC,EAAyBC,IAC/B,OAAAC,EAAmBP,EAAa,cAAc,EAG1CvB,EAACN,EAA6B,cAA7B,CACG,cAAeH,EAA+BqB,EAAO,cAAc,EACnE,SAAUQ,EACV,WAAY,CAAC,CAAE,OAAQW,KAAiB,CAC9B,MAAAC,EAAazB,EAA8B,aAAa,CAC1D,GAAGwB,EACH,WAAYlC,CAAA,CACmB,EAC7BoC,EAAuBD,EAAW,0BAEpC,OAAAhC,EAACkC,EAAA,CACG,YAAahC,EAAUJ,EAAM,oBAAoB,EACjD,aAAa,iBACb,UAAWI,EAAUJ,EAAM,uBAAuB,EAClD,SAAU4B,EACV,gBAAiBE,EACjB,MAAOO,EAAWrC,EAAM,EAAK,EAE7B,WAACJ,EAA6B,KAA7B,CAAkC,eAAgB,GAC/C,WAAC,MACG,CAAA,SAAA,CAAAM,EAACC,EACG,CAAA,SAAAD,EAACN,EAA6B,WAA7B,CACG,KAAML,EAAwB,UAC9B,OAAQ,CACJ,CACI,MAAOa,EAAUJ,EAAM,mCAAmC,EAC1D,MAAO,QACX,EACA,CACI,MAAOI,EAAUJ,EAAM,qCAAqC,EAC5D,MAAO,UACX,CACJ,EACA,OAAQI,EAAUJ,EAAM,+BAA+B,CAAA,CAAA,EAE/D,EACAE,EAACC,EAAM,CAAA,QAAS+B,EAAW,UAAU3C,EAAwB,KAAK,EAC9D,SAAAW,EAACJ,EAAU,CAAA,MAAAC,CAAA,CAAc,CAC7B,CAAA,EACCoC,GACIjC,EAAAC,EAAA,CAAM,gBAAiB,GAAM,OAAO,IACjC,SAACD,EAAAoC,EAAA,CAAO,KAAK,SAAS,SAAUf,EAAc,QAASA,EAClD,WAAUvB,EAAM,iBAAiB,EACtC,CACJ,CAAA,CAAA,CAAA,CAER,CACJ,CAAA,CAAA,CAAA,CAGZ,CAAA,CAAA,CAGZ,EAEAuC,EAAe1B"}